var Jt=Object.defineProperty,Yt=Object.defineProperties;var Zt=Object.getOwnPropertyDescriptors;var Me=Object.getOwnPropertySymbols;var st=Object.prototype.hasOwnProperty,at=Object.prototype.propertyIsEnumerable;var tt=(t,s,n)=>s in t?Jt(t,s,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[s]=n,Y=(t,s)=>{for(var n in s||(s={}))st.call(s,n)&&tt(t,n,s[n]);if(Me)for(var n of Me(s))at.call(s,n)&&tt(t,n,s[n]);return t},se=(t,s)=>Yt(t,Zt(s));var nt=(t,s)=>{var n={};for(var i in t)st.call(t,i)&&s.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&Me)for(var i of Me(t))s.indexOf(i)<0&&at.call(t,i)&&(n[i]=t[i]);return n};var Kt=(t,s)=>()=>(s||t((s={exports:{}}).exports,s),s.exports);var V=(t,s,n)=>new Promise((i,a)=>{var r=c=>{try{l(n.next(c))}catch(d){a(d)}},o=c=>{try{l(n.throw(c))}catch(d){a(d)}},l=c=>c.done?i(c.value):Promise.resolve(c.value).then(r,o);l((n=n.apply(t,s)).next())});import{c as S,j as e,r as u,d as F,o as he,e as W,p as Se,s as we,f as yt,g as Ze,h as Qt,i as Ge,q as jt,l as Nt,k as Xt,u as kt,C as St,b as Te,m as es,n as ts,t as ss,a as ye,v as as}from"./useBookRequests-nO4Nbp_U.js";var $n=Kt(K=>{/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ns=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],is=S("activity",ns);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rs=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],zt=S("arrow-left",rs);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const os=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],ls=S("arrow-right",os);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cs=[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]],ds=S("banknote",cs);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ps=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],Ct=S("bell",ps);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ms=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],De=S("book-open",ms);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const us=[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]],xs=S("bookmark",us);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hs=[["path",{d:"M12 18V5",key:"adv99a"}],["path",{d:"M15 13a4.17 4.17 0 0 1-3-4 4.17 4.17 0 0 1-3 4",key:"1e3is1"}],["path",{d:"M17.598 6.5A3 3 0 1 0 12 5a3 3 0 1 0-5.598 1.5",key:"1gqd8o"}],["path",{d:"M17.997 5.125a4 4 0 0 1 2.526 5.77",key:"iwvgf7"}],["path",{d:"M18 18a4 4 0 0 0 2-7.464",key:"efp6ie"}],["path",{d:"M19.967 17.483A4 4 0 1 1 12 18a4 4 0 1 1-7.967-.517",key:"1gq6am"}],["path",{d:"M6 18a4 4 0 0 1-2-7.464",key:"k1g0md"}],["path",{d:"M6.003 5.125a4 4 0 0 0-2.526 5.77",key:"q97ue3"}]],_t=S("brain",hs);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gs=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],fs=S("briefcase",gs);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bs=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Ke=S("calendar",bs);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vs=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],ws=S("chevron-down",vs);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ys=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],it=S("circle-check-big",ys);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const js=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Et=S("circle-check",js);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ns=[["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M5.782 5.782A7 7 0 0 0 9 19h8.5a4.5 4.5 0 0 0 1.307-.193",key:"yfwify"}],["path",{d:"M21.532 16.5A4.5 4.5 0 0 0 17.5 10h-1.79A7.008 7.008 0 0 0 10 5.07",key:"jlfiyv"}]],ks=S("cloud-off",Ns);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ss=[["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M14 2v2",key:"6buw04"}],["path",{d:"M16 8a1 1 0 0 1 1 1v8a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4V9a1 1 0 0 1 1-1h14a4 4 0 1 1 0 8h-1",key:"pwadti"}],["path",{d:"M6 2v2",key:"colzsn"}]],ze=S("coffee",Ss);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zs=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],Cs=S("download",zs);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _s=[["path",{d:"M12 3q1 4 4 6.5t3 5.5a1 1 0 0 1-14 0 5 5 0 0 1 1-3 1 1 0 0 0 5 0c0-2-1.5-3-1.5-5q0-2 2.5-4",key:"1slcih"}]],Ce=S("flame",_s);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Es=[["path",{d:"M3 14h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-7a9 9 0 0 1 18 0v7a2 2 0 0 1-2 2h-1a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h3",key:"1xhozi"}]],Mt=S("headphones",Es);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ms=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]],de=S("heart",Ms);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $s=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],Is=S("house",$s);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ps=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],$t=S("info",Ps);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const As=[["path",{d:"M18 5a2 2 0 0 1 2 2v8.526a2 2 0 0 0 .212.897l1.068 2.127a1 1 0 0 1-.9 1.45H3.62a1 1 0 0 1-.9-1.45l1.068-2.127A2 2 0 0 0 4 15.526V7a2 2 0 0 1 2-2z",key:"1pdavp"}],["path",{d:"M20.054 15.987H3.946",key:"14rxg9"}]],Ls=S("laptop",As);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ts=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],Ds=S("layers",Ts);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rs=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],rt=S("lock",Rs);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Os=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]],Je=S("message-circle",Os);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bs=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],Ee=S("message-square",Bs);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qs=[["path",{d:"m11 7.601-5.994 8.19a1 1 0 0 0 .1 1.298l.817.818a1 1 0 0 0 1.314.087L15.09 12",key:"80a601"}],["path",{d:"M16.5 21.174C15.5 20.5 14.372 20 13 20c-2.058 0-3.928 2.356-6 2-2.072-.356-2.775-3.369-1.5-4.5",key:"j0ngtp"}],["circle",{cx:"16",cy:"7",r:"5",key:"d08jfb"}]],Hs=S("mic-vocal",qs);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vs=[["path",{d:"m14 10 7-7",key:"oa77jy"}],["path",{d:"M20 10h-6V4",key:"mjg0md"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M4 14h6v6",key:"rmj7iw"}]],Fs=S("minimize-2",Vs);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ws=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],It=S("moon",Ws);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Us=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],Pt=S("palette",Us);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gs=[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]],ot=S("pause",Gs);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Js=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],be=S("play",Js);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ys=[["path",{d:"M15 12h-5",key:"r7krc0"}],["path",{d:"M15 8h-5",key:"1khuty"}],["path",{d:"M19 17V5a2 2 0 0 0-2-2H4",key:"zz82l3"}],["path",{d:"M8 21h12a2 2 0 0 0 2-2v-1a1 1 0 0 0-1-1H11a1 1 0 0 0-1 1v1a2 2 0 1 1-4 0V5a2 2 0 1 0-4 0v2a1 1 0 0 0 1 1h3",key:"1ph1d7"}]],Zs=S("scroll-text",Ys);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ks=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Qe=S("search",Ks);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qs=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],Xe=S("send",Qs);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xs=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],ke=S("share-2",Xs);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ea=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],ta=S("shield",ea);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sa=[["path",{d:"M17.971 4.285A2 2 0 0 1 21 6v12a2 2 0 0 1-3.029 1.715l-9.997-5.998a2 2 0 0 1-.003-3.432z",key:"15892j"}],["path",{d:"M3 20V4",key:"1ptbpl"}]],aa=S("skip-back",sa);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const na=[["path",{d:"M21 4v16",key:"7j8fe9"}],["path",{d:"M6.029 4.285A2 2 0 0 0 3 6v12a2 2 0 0 0 3.029 1.715l9.997-5.998a2 2 0 0 0 .003-3.432z",key:"zs4d6"}]],lt=S("skip-forward",na);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ia=[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]],ra=S("smartphone",ia);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oa=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],ge=S("sparkles",oa);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const la=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],At=S("sun",la);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ca=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],da=S("target",ca);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pa=[["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z",key:"emmmcr"}],["path",{d:"M7 10v12",key:"1qc93n"}]],Re=S("thumbs-up",pa);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ma=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],et=S("user",ma);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ua=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],xa=S("wifi-off",ua);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ha=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],ie=S("x",ha);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ga=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],Pe=S("zap",ga);var ae=(t=>(t[t.STOPPED=0]="STOPPED",t[t.PLAYING=1]="PLAYING",t[t.PAUSED=2]="PAUSED",t[t.BUFFERING=3]="BUFFERING",t))(ae||{});const je=r=>{var o=r,{children:t,className:s="",variant:n="primary",size:i="md"}=o,a=nt(o,["children","className","variant","size"]);const l="rounded-full font-medium transition-colors focus:outline-none flex items-center justify-center gap-2",c={primary:"bg-indigo-600 text-white hover:bg-indigo-700 disabled:opacity-50",secondary:"bg-slate-700 text-slate-100 hover:bg-slate-600",ghost:"bg-transparent text-slate-400 hover:text-white hover:bg-slate-800/50",icon:"p-2 bg-transparent text-slate-200 hover:bg-slate-800 rounded-full"},d={sm:"px-3 py-1.5 text-xs",md:"px-4 py-2 text-sm",lg:"px-6 py-3 text-base"},p=c[n],g=n==="icon"?"":d[i];return e.jsx("button",se(Y({className:`${l} ${p} ${g} ${s}`},a),{children:t}))};function Oe(t){const[s,n]=u.useState(0),[i,a]=u.useState(()=>{const o=localStorage.getItem("teovoz_liked_episodes");return o?new Set(JSON.parse(o)).has(t):!1});return u.useEffect(()=>{const o=t.replace(/[.#$[\]]/g,"_"),l=F(W,`likes/${o}`),c=he(l,d=>{const p=d.val();n(p!==null?p:0)});return()=>c()},[t]),{likes:s,isLiked:i,toggleLike:o=>V(null,null,function*(){const l=t.replace(/[.#$[\]]/g,"_"),c=F(W,`likes/${l}`),d=!i;a(d);const p=new Set(JSON.parse(localStorage.getItem("teovoz_liked_episodes")||"[]"));if(d){if(p.add(t),o)try{const g=Se(F(W,"public_notifications"));we(g,{type:"like",title:o,guid:t,timestamp:Date.now()})}catch(g){console.error("Error pushing notification:",g)}}else p.delete(t);localStorage.setItem("teovoz_liked_episodes",JSON.stringify(Array.from(p)));try{yield yt(c,g=>(g||0)+(d?1:-1))}catch(g){console.error("Error updating likes:",g),a(!d),d?p.delete(t):p.add(t),localStorage.setItem("teovoz_liked_episodes",JSON.stringify(Array.from(p)))}})}}function Be(t){const[s,n]=u.useState([]),[i,a]=u.useState(!0);u.useEffect(()=>{const l=t.replace(/[.#$[\]]/g,"_"),c=F(W,`comments/${l}`),d=he(c,p=>{const g=p.val();if(g){const m=Object.entries(g).map(([h,x])=>({id:h,text:x.text,author:x.author||"An√≥nimo",timestamp:x.timestamp||Date.now()}));m.sort((h,x)=>x.timestamp-h.timestamp),n(m)}else n([]);a(!1)});return()=>d()},[t]);const r=l=>{const c=["puta","puto","mierda","verga","pendejo","pendeja","estupido","estupida","idiota","cabron","cabrona","marico","marica","joder","co√±o","mamaguevo","malparido","perra","zorra","culo","tonto","tonta","imbecil","carajo","cagada","chingar","pinche","bastardo","retrasado","mongolico","prostituta"];let d=l;return c.forEach(p=>{const g=new RegExp(`\\b${p}\\b`,"gi");d=d.replace(g,"‚ù§Ô∏è TeoVoz")}),d};return{comments:s,loading:i,addComment:(l,c)=>V(null,null,function*(){const d=t.replace(/[.#$[\]]/g,"_"),p=F(W,`comments/${d}`),g=Se(p),m=r(l);if(yield we(g,{text:m,author:"An√≥nimo",timestamp:Ze()}),c)try{const h=Se(F(W,"public_notifications"));we(h,{type:"comment",title:c,guid:t,text:m.substring(0,50)+(m.length>50?"...":""),timestamp:Date.now()})}catch(h){console.error("Error pushing notification:",h)}})}}const ct=()=>{let t=localStorage.getItem("teovoz_device_id");return t||(t=Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15),localStorage.setItem("teovoz_device_id",t)),t};function qe(){const[t,s]=u.useState({});return u.useEffect(()=>{const a=F(W,"active_listeners"),r=he(a,o=>{const l=o.val()||{},c={};Object.entries(l).forEach(([d,p])=>{p&&typeof p=="object"&&(c[d]=Object.keys(p).length)}),s(c)});return()=>r()},[]),{counts:t,startListening:a=>{const r=ct(),o=a.replace(/[.#$[\]]/g,"_"),l=F(W,`active_listeners/${o}/${r}`);we(l,{timestamp:Date.now()}),Ge(l).remove()},stopListening:a=>{const r=ct(),o=a.replace(/[.#$[\]]/g,"_"),l=F(W,`active_listeners/${o}/${r}`);Qt(l),Ge(l).cancel()}}}function fa(t){const[s,n]=u.useState([]);u.useEffect(()=>{if(!t)return;const a=t.replace(/[.#$[\]]/g,"_"),r=F(W,`episode_reactions/${a}`),o=jt(r,Nt(1)),l=Xt(o,c=>{const d=c.val();Date.now()-d.timestamp<5e3&&n(p=>[...p,Y({id:c.key},d)])});return()=>l()},[t]);const i=u.useCallback(a=>{if(!t)return;const r=t.replace(/[.#$[\]]/g,"_"),o=F(W,`episode_reactions/${r}`);Se(o,{type:a,timestamp:Ze()})},[t]);return u.useEffect(()=>{const a=setInterval(()=>{n(r=>{const o=Date.now();return r.filter(l=>o-l.timestamp<4e3)})},1e3);return()=>clearInterval(a)},[]),{reactions:s,sendReaction:i}}const ba=({reactions:t})=>e.jsx("div",{className:"absolute inset-0 pointer-events-none overflow-hidden z-20",children:t.map(s=>e.jsx(va,{type:s.type},s.id))}),va=({type:t})=>{const[s,n]=u.useState({});u.useEffect(()=>{const a=30+Math.random()*40,r=2+Math.random()*1.5;n({left:`${a}%`,animationDuration:`${r}s`,fontSize:`${1.5+Math.random()}rem`})},[]);const i=()=>{switch(t){case"fire":return"üî•";case"heart":return"‚ù§Ô∏è";case"mindblown":return"ü§Ø";case"clap":return"üëè";case"100":return"üíØ";default:return"‚ù§Ô∏è"}};return e.jsx("div",{className:"absolute bottom-0 opacity-0 animate-float-up",style:s,children:i()})},wa=({onReact:t})=>{const[s,n]=u.useState(!1),i=a=>{t(a)};return e.jsxs("div",{className:"absolute bottom-6 right-6 z-30 flex flex-col items-center gap-3",children:[s&&e.jsxs("div",{className:"flex flex-col gap-3 animate-slide-up",children:[e.jsx("button",{onClick:()=>i("mindblown"),className:"w-10 h-10 bg-white/10 backdrop-blur-md border border-white/20 rounded-full flex items-center justify-center text-xl shadow-lg active:scale-90 transition-all hover:bg-white/20",children:"ü§Ø"}),e.jsx("button",{onClick:()=>i("clap"),className:"w-10 h-10 bg-white/10 backdrop-blur-md border border-white/20 rounded-full flex items-center justify-center text-xl shadow-lg active:scale-90 transition-all hover:bg-white/20",children:"üëè"}),e.jsx("button",{onClick:()=>i("fire"),className:"w-10 h-10 bg-orange-500/20 backdrop-blur-md border border-orange-500/30 rounded-full flex items-center justify-center text-xl shadow-lg active:scale-90 transition-all hover:bg-orange-500/30",children:"üî•"}),e.jsx("button",{onClick:()=>i("heart"),className:"w-10 h-10 bg-rose-500/20 backdrop-blur-md border border-rose-500/30 rounded-full flex items-center justify-center text-xl shadow-lg active:scale-90 transition-all hover:bg-rose-500/30",children:"‚ù§Ô∏è"})]}),e.jsx("button",{onClick:()=>n(!s),className:`w-12 h-12 rounded-full flex items-center justify-center shadow-xl backdrop-blur-md border transition-all active:scale-95 ${s?"bg-white text-black border-white":"bg-black/40 text-white border-white/10"}`,children:s?e.jsx(ie,{size:20}):e.jsx(de,{size:20,fill:"currentColor",className:"text-rose-500 animate-pulse"})})]})};function ya(t){const[s,n]=u.useState({focused:0,relaxed:0,energetic:0,chill:0}),[i,a]=u.useState(null),[r,o]=u.useState(null);return u.useEffect(()=>{if(!t)return;const c=t.replace(/[.#$[\]]/g,"_"),d=F(W,`episode_moods/${c}`),p=he(d,g=>{const m=g.val(),h={focused:0,relaxed:0,energetic:0,chill:0};m&&Object.values(m).forEach(f=>{f&&f.type&&h[f.type]!==void 0&&h[f.type]++}),n(h);let x=0,b=null;Object.keys(h).forEach(f=>{h[f]>x&&(x=h[f],b=f)}),o(b)});return()=>p()},[t]),{counts:s,myMood:i,dominantMood:r,setMood:c=>{if(!t)return;let d=localStorage.getItem("teovoz_device_id");d||(d=Math.random().toString(36).substring(2,15),localStorage.setItem("teovoz_device_id",d));const p=t.replace(/[.#$[\]]/g,"_"),g=F(W,`episode_moods/${p}/${d}`);we(g,{type:c,timestamp:Date.now()}),Ge(g).remove(),a(c)}}}const ja=({episodeGuid:t})=>{const{counts:s,myMood:n,setMood:i}=ya(t),a=[{id:"focused",label:"Enfocado",icon:e.jsx(_t,{size:14}),color:"text-blue-400 border-blue-400/30 bg-blue-400/10"},{id:"relaxed",label:"Relax",icon:e.jsx(ze,{size:14}),color:"text-emerald-400 border-emerald-400/30 bg-emerald-400/10"},{id:"energetic",label:"Energ√≠a",icon:e.jsx(Pe,{size:14}),color:"text-amber-400 border-amber-400/30 bg-amber-400/10"},{id:"chill",label:"Chill",icon:e.jsx(It,{size:14}),color:"text-indigo-400 border-indigo-400/30 bg-indigo-400/10"}],r=Object.values(s).reduce((o,l)=>o+l,0);return e.jsxs("div",{className:"w-full px-6 mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest text-muted",children:"Atm√≥sfera en Vivo"}),r>0&&e.jsxs("span",{className:"text-[9px] font-bold text-muted/60",children:[r," votos"]})]}),e.jsx("div",{className:"flex gap-2 justify-between",children:a.map(o=>{const l=n===o.id,c=s[o.id]||0,d=r>0?c/r*100:0;return e.jsxs("div",{className:"flex flex-col gap-1.5 flex-1 items-center group relative",children:[e.jsx("div",{className:"absolute -top-2 left-0 right-0 h-0.5 bg-surface rounded-full overflow-hidden opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx("div",{className:`h-full ${o.color.split(" ")[0].replace("text-","bg-")}`,style:{width:`${d}%`}})}),e.jsxs("button",{onClick:()=>i(o.id),className:`w-full py-2.5 rounded-xl border flex flex-col items-center gap-1 transition-all active:scale-95 ${l?`${o.color} shadow-lg ring-1 ring-white/10`:"bg-surface border-app text-muted hover:border-white/20 hover:text-primary"}`,children:[o.icon,e.jsx("span",{className:"text-[8px] font-black uppercase tracking-widest",children:o.label})]})]},o.id)})})]})};function Na(t){const[s,n]=u.useState({}),[i,a]=u.useState([]);return u.useEffect(()=>{if(!t)return;const o=t.replace(/[.#$[\]]/g,"_"),l=F(W,`episode_heatmap/${o}`),c=he(l,d=>{const p=d.val()||{},g={};Object.entries(p).forEach(([m,h])=>{const x=parseInt(m);g[x]=h}),n(g)});return()=>c()},[t]),{heatmapData:s,recordInterest:o=>{if(!t)return;const l=Math.floor(o/5)*5,c=t.replace(/[.#$[\]]/g,"_"),d=F(W,`episode_heatmap/${c}/${l}`);yt(d,p=>(p||0)+1).catch(p=>console.error("Error recording heat",p))}}}const ka=({currentEpisode:t,onClose:s,onEpisodeComplete:n,onEpisodeStart:i,onEpisodeClick:a})=>{const r=u.useRef(null),o=u.useRef(null),[l,c]=u.useState(ae.STOPPED),[d,p]=u.useState(0),[g,m]=u.useState(0),[h,x]=u.useState(!1),[b,f]=u.useState(!1),[v,k]=u.useState(!1),[y,z]=u.useState(0),{likes:_}=Oe((t==null?void 0:t.guid)||""),{comments:E}=Be((t==null?void 0:t.guid)||""),{startListening:P,stopListening:B}=qe(),{reactions:X,sendReaction:ee}=fa((t==null?void 0:t.guid)||""),{heatmapData:q,recordInterest:te}=Na((t==null?void 0:t.guid)||""),I=u.useRef(null),T=u.useRef(null),H=u.useRef(null);u.useEffect(()=>()=>{I.current&&I.current.close().catch(console.error)},[]);const Q=()=>{var C;if(!I.current){const A=window.AudioContext||window.webkitAudioContext;A&&(I.current=new A,T.current=I.current.createGain(),T.current.connect(I.current.destination))}if(o.current&&I.current&&T.current&&!H.current)try{H.current=I.current.createMediaElementSource(o.current),H.current.connect(T.current)}catch(A){console.warn("MediaElementSource creation error:",A)}((C=I.current)==null?void 0:C.state)==="suspended"&&I.current.resume().catch(console.error)},U=(C,A)=>{if(!(!I.current||!T.current))try{const Z=T.current,pe=I.current.currentTime;Z.gain.cancelScheduledValues(pe),Z.gain.setValueAtTime(Z.gain.value,pe),Z.gain.linearRampToValueAtTime(C,pe+A/1e3)}catch(Z){console.error("Error fading volume:",Z)}};u.useEffect(()=>{t?(Q(),o.current&&(o.current.src="/Fondo.mp3",o.current.volume=1,T.current&&I.current&&(T.current.gain.cancelScheduledValues(I.current.currentTime),T.current.gain.value=1),o.current.currentTime=0,o.current.loop=!0,o.current.play().catch(C=>console.warn("BG Play failed",C))),r.current&&(r.current.src=t.enclosure.url,r.current.volume=1),f(!0),c(ae.PLAYING),i&&i(t.guid),document.title=`‚ñ∂ ${t.title} | TEOVOZ`,P(t.guid)):(o.current&&(o.current.pause(),o.current.currentTime=0),r.current&&r.current.pause(),c(ae.STOPPED),document.title="TEOVOZ Podcast IA")},[t]),u.useEffect(()=>{if(t)return l===ae.PLAYING?P(t.guid):B(t.guid),()=>{t&&B(t.guid)}},[l,t]);const G=C=>{var A;C==null||C.stopPropagation(),((A=I.current)==null?void 0:A.state)==="suspended"&&I.current.resume().catch(console.error),l===ae.PLAYING?(r.current&&r.current.pause(),o.current&&o.current.pause(),c(ae.PAUSED)):(o.current&&o.current.play().catch(console.error),r.current&&!b&&r.current.play().catch(console.error),c(ae.PLAYING))},oe=()=>{b&&o.current&&o.current.currentTime>=3&&(f(!1),U(.1,1e3),r.current&&r.current.play().catch(C=>console.error("Main play error",C)))},$=()=>{o.current&&U(1,1e3),setTimeout(()=>{o.current&&o.current.pause(),c(ae.STOPPED),t&&n&&n(t.guid)},3e3)},re=()=>{k(!0),z(d)},j=C=>{z(parseFloat(C.target.value))},L=C=>{r.current&&(k(!1),r.current.currentTime=y,p(y),te(y))};u.useEffect(()=>!("mediaSession"in navigator)||!r.current||!t?void 0:((()=>{const A=t.image?[{src:t.image,sizes:"96x96",type:"image/jpeg"},{src:t.image,sizes:"128x128",type:"image/jpeg"},{src:t.image,sizes:"256x256",type:"image/jpeg"},{src:t.image,sizes:"512x512",type:"image/jpeg"}]:[];navigator.mediaSession.metadata=new MediaMetadata({title:t.title,artist:"TEOVOZ - Podcast IA",album:"TEOVOZ",artwork:A})})(),navigator.mediaSession.setActionHandler("play",()=>G()),navigator.mediaSession.setActionHandler("pause",()=>G()),navigator.mediaSession.setActionHandler("stop",()=>s()),()=>{navigator.mediaSession.setActionHandler("play",null),navigator.mediaSession.setActionHandler("pause",null),navigator.mediaSession.setActionHandler("stop",null)}),[t,l]);const D=C=>{if(isNaN(C))return"00:00";const A=Math.floor(C/60),Z=Math.floor(C%60);return`${A}:${Z.toString().padStart(2,"0")}`},M=C=>{const A=C.replace(/\*\*/g,"").replace(/__/g,"");return A.length>100?A.substring(0,100)+"...":A};return t?e.jsxs(e.Fragment,{children:[e.jsx("audio",{ref:o,crossOrigin:"anonymous",preload:"auto",loop:!0,onTimeUpdate:oe}),h?e.jsxs("div",{className:"fixed inset-0 bg-app z-[200] flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 pt-safe",children:[e.jsx(je,{variant:"icon",onClick:()=>x(!1),className:"bg-surface border border-app",children:e.jsx(ws,{size:24,className:"text-muted"})}),e.jsx("div",{className:"flex flex-col items-center",children:e.jsx("span",{className:"text-[10px] font-black tracking-[0.2em] text-muted uppercase",children:"TeoVoz Player"})}),e.jsx(je,{variant:"icon",onClick:s,className:"bg-surface border border-app",children:e.jsx(ie,{size:24,className:"text-muted"})})]}),e.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center p-8 text-center space-y-8 overflow-y-auto no-scrollbar pb-12",children:[e.jsx("div",{className:"absolute inset-0 z-[50] pointer-events-none",children:e.jsx(ba,{reactions:X})}),e.jsxs("div",{className:"w-full max-w-[280px] aspect-square rounded-[40px] overflow-hidden shadow-2xl border-white/5 border relative group mt-4 z-10",children:[e.jsx("img",{src:t.image,alt:t.title,className:"w-full h-full object-cover"}),e.jsx("div",{className:"absolute inset-0 bg-indigo-600/10 mix-blend-overlay"})]}),e.jsxs("div",{className:"space-y-4 w-full max-w-md z-10 relative",children:[e.jsx(ja,{episodeGuid:t.guid}),e.jsx("h2",{className:"text-2xl font-black text-primary leading-tight px-4 tracking-tighter line-clamp-2",children:t.title}),e.jsx("p",{className:"text-xs text-muted/60 px-6 font-medium leading-relaxed font-sans",children:M(t.description)}),e.jsxs("div",{className:"flex items-center justify-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-1.5 px-3 py-1.5 bg-surface border border-app rounded-lg text-[10px] font-bold text-muted",children:[e.jsx(Re,{size:12})," ",_," Likes"]}),e.jsxs("div",{className:"flex items-center gap-1.5 px-3 py-1.5 bg-surface border border-app rounded-lg text-[10px] font-bold text-muted",children:[e.jsx(Ee,{size:12})," ",E.length," Comentarios"]})]})]}),e.jsxs("div",{className:"w-full max-w-md space-y-6 pt-2",children:[e.jsxs("div",{className:"px-6",children:[e.jsxs("div",{className:"flex justify-between text-[10px] font-bold text-muted mb-4 uppercase tracking-widest",children:[e.jsx("span",{children:D(v?y:d)}),e.jsx("span",{children:D(g)})]}),e.jsxs("div",{className:"relative group h-6 flex items-center touch-none",children:[e.jsx("input",{type:"range",min:"0",max:g||100,step:"0.01",value:v?y:d,onMouseDown:re,onTouchStart:re,onChange:j,onMouseUp:L,onTouchEnd:L,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer z-20"}),e.jsxs("div",{className:"w-full h-1.5 bg-surface rounded-full overflow-hidden relative z-10 pointer-events-none",children:[e.jsx("div",{className:"h-full bg-indigo-500 transition-all duration-75 ease-out",style:{width:`${(v?y:d)/(g||1)*100}%`}}),e.jsx("div",{className:"absolute inset-0 flex items-end pointer-events-none z-20",children:g>0&&Object.entries(q).map(([C,A])=>{const pe=parseInt(C)/g*100,O=Math.min(A/5*100,100);return pe>100?null:e.jsx("div",{className:"absolute bottom-0 w-1 bg-white/60 blur-[2px] rounded-t-full shadow-[0_0_10px_rgba(255,255,255,0.8)]",style:{left:`${pe}%`,height:`${O}%`}},C)})})]}),e.jsx("div",{className:"absolute w-4 h-4 bg-white rounded-full shadow-lg border border-indigo-100 transition-transform duration-75 pointer-events-none z-10",style:{left:`${(v?y:d)/(g||1)*100}%`,transform:"translateX(-50%)"}})]})]}),e.jsxs("div",{className:"flex items-center justify-around px-8",children:[e.jsx("button",{className:"text-muted active:scale-90 hover:text-primary transition-colors p-2",onClick:()=>{r.current&&(r.current.currentTime-=15)},children:e.jsx(aa,{size:32})}),e.jsx("button",{className:"w-20 h-20 bg-indigo-600 text-white rounded-[28px] flex items-center justify-center shadow-2xl shadow-indigo-600/30 active:scale-95 transition-all",onClick:G,children:l===ae.PLAYING?e.jsx(ot,{size:36,fill:"currentColor"}):e.jsx(be,{size:36,fill:"currentColor",className:"ml-1.5"})}),e.jsx("button",{className:"text-muted active:scale-90 hover:text-primary transition-colors p-2",onClick:()=>{r.current&&(r.current.currentTime+=15)},children:e.jsx(lt,{size:32})})]})]}),e.jsx(wa,{onReact:ee})]})]}):e.jsxs("div",{onClick:()=>{a&&t?a(t):x(!0)},className:"relative w-full bg-surface border-t border-app cursor-pointer pb-safe",children:[e.jsx("div",{className:"absolute top-0 left-0 right-0 h-1 bg-surface/50",children:e.jsx("div",{className:"h-full bg-indigo-500 transition-all duration-300 linear",style:{width:`${d/(g||1)*100}%`}})}),e.jsxs("div",{className:"flex items-center justify-between px-4 py-2 gap-3 h-16",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[e.jsx("div",{className:"relative flex-shrink-0",children:e.jsx("img",{src:t.image,alt:"Art",className:"w-10 h-10 rounded-lg bg-app object-cover shadow-sm border border-white/10"})}),e.jsxs("div",{className:"flex flex-col min-w-0 justify-center",children:[e.jsx("h4",{className:"text-xs font-bold text-primary truncate leading-tight",children:t.title}),e.jsxs("div",{className:"flex items-center gap-2 text-[10px] font-bold text-muted uppercase tracking-wider mt-0.5",children:[e.jsx("span",{className:"text-indigo-400",children:D(d)}),e.jsx("span",{className:"text-white/20",children:"/"}),e.jsx("span",{children:D(g)})]})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:C=>{C.stopPropagation(),r.current&&(r.current.currentTime+=15)},className:"w-8 h-8 flex items-center justify-center rounded-full text-muted hover:text-primary active:scale-90 transition-transform",children:e.jsx(lt,{size:20})}),e.jsx("button",{onClick:G,className:"w-9 h-9 flex items-center justify-center rounded-full bg-primary text-app active:scale-95 transition-transform shadow-lg",children:l===ae.PLAYING?e.jsx(ot,{size:16,fill:"currentColor"}):e.jsx(be,{size:16,fill:"currentColor",className:"ml-0.5"})}),e.jsx("button",{onClick:C=>{C.stopPropagation(),s()},className:"w-8 h-8 flex items-center justify-center rounded-full text-muted hover:text-primary active:scale-90 transition-transform",children:e.jsx(ie,{size:18})})]})]})]}),e.jsx("audio",{ref:r,playsInline:!0,preload:"auto",title:t.title,onPlay:()=>c(ae.PLAYING),onPause:()=>c(ae.PAUSED),onTimeUpdate:()=>{!v&&r.current&&(p(r.current.currentTime),m(r.current.duration||0))},onEnded:$})]}):null},Sa=({activeTab:t,onTabChange:s,hasPlayer:n,notifCount:i=0})=>e.jsxs("div",{className:`border-t border-app px-4 py-3 flex items-center justify-between relative z-50 ${n?"pb-3":"pb-6"}`,children:[e.jsxs("a",{href:"index.html",className:`flex flex-col items-center gap-1 transition-colors ${t==="home"?"text-indigo-500":"text-muted hover:text-primary"}`,children:[e.jsx("div",{className:`p-1 rounded-xl transition-all ${t==="home"?"bg-indigo-500/10":"bg-transparent"}`,children:e.jsx(Is,{size:18,strokeWidth:2.5})}),e.jsx("span",{className:"text-[8px] font-black uppercase tracking-widest",children:"Inicio"})]}),e.jsxs("a",{id:"tour-nav-search",href:"search.html",className:`flex flex-col items-center gap-1 transition-colors ${t==="search"?"text-indigo-500":"text-muted hover:text-primary"}`,children:[e.jsx("div",{className:`p-1 rounded-xl transition-all ${t==="search"?"bg-indigo-500/10":"bg-transparent"}`,children:e.jsx(Qe,{size:18,strokeWidth:2.5})}),e.jsx("span",{className:"text-[8px] font-black uppercase tracking-widest",children:"Buscar"})]}),e.jsxs("a",{id:"tour-nav-favorites",href:"favorites.html",className:`flex flex-col items-center gap-1 transition-colors ${t==="favorites"?"text-indigo-500":"text-muted hover:text-primary"}`,children:[e.jsx("div",{className:`p-1 rounded-xl transition-all ${t==="favorites"?"bg-indigo-500/10":"bg-transparent"}`,children:e.jsx(de,{size:18,strokeWidth:2.5})}),e.jsx("span",{className:"text-[8px] font-black uppercase tracking-widest",children:"Favoritos"})]}),e.jsxs("button",{id:"tour-nav-daily",onClick:()=>s("daily"),className:"flex flex-col items-center gap-1 transition-colors text-muted hover:text-primary",children:[e.jsx("div",{className:"p-1 rounded-xl transition-all bg-transparent",children:e.jsx(ge,{size:18,strokeWidth:2.5})}),e.jsx("span",{className:"text-[8px] font-black uppercase tracking-widest",children:"Lo Nuevo"})]}),e.jsxs("button",{id:"tour-nav-share",onClick:()=>s("share"),className:"flex flex-col items-center gap-1 transition-colors text-muted hover:text-primary",children:[e.jsx("div",{className:"p-1 rounded-xl transition-all bg-transparent",children:e.jsx(ke,{size:18,strokeWidth:2.5})}),e.jsx("span",{className:"text-[8px] font-black uppercase tracking-widest",children:"Compartir"})]})]}),za=({onClose:t,currentTheme:s,onThemeChange:n})=>{const i=[{id:"deep",name:"TeoVoz Deep",description:"Estilo cl√°sico e √≠ndigo",icon:e.jsx(ra,{size:18}),preview:"bg-[#1e293b] border-[#6366f1]"},{id:"dark-pure",name:"Oscuro Puro",description:"Negro real para AMOLED",icon:e.jsx(It,{size:18}),preview:"bg-black border-[#262626]"},{id:"light",name:"Claro Puro",description:"Blanco limpio y minimalista",icon:e.jsx(At,{size:18}),preview:"bg-white border-[#e2e8f0]"}];return e.jsx("div",{className:"fixed inset-0 z-[120] flex items-center justify-center p-4 bg-black/70 animate-in fade-in duration-200",children:e.jsxs("div",{className:"bg-surface border-app border rounded-[32px] w-full max-w-sm p-6 shadow-2xl relative",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-indigo-500/10 rounded-lg text-indigo-500",children:e.jsx(Pt,{size:16})}),e.jsx("h2",{className:"text-xs font-black text-muted uppercase tracking-[0.2em]",children:"Personalizar"})]}),e.jsx(je,{variant:"icon",onClick:t,className:"text-muted",children:e.jsx(ie,{size:20})})]}),e.jsx("div",{className:"space-y-2",children:i.map(a=>e.jsxs("button",{onClick:()=>n(a.id),className:`w-full flex items-center gap-4 p-4 rounded-2xl border transition-all text-left ${s===a.id?"border-indigo-500 bg-indigo-500/5":"border-transparent bg-app/50"}`,children:[e.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center border ${a.preview}`,children:e.jsx("span",{className:a.id==="light"?"text-slate-900":"text-white",children:a.icon})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-bold text-sm text-primary",children:a.name}),e.jsx("p",{className:"text-[9px] text-muted uppercase font-black tracking-wider leading-none mt-1",children:a.description})]}),s===a.id&&e.jsx(Et,{size:18,className:"text-indigo-500"})]},a.id))})]})})},Ca=({onClose:t})=>{const{addRequest:s}=kt(),[n,i]=u.useState({bookName:"",author:""}),[a,r]=u.useState("idle"),o=l=>V(null,null,function*(){l.preventDefault(),r("sending");const c=yield s(n.bookName,n.author);if(c.success)r("success"),setTimeout(()=>{t(),r("idle"),i({bookName:"",author:""})},2500);else{r("idle");const d=typeof c.error=="string"&&c.error.includes("PERMISSION_DENIED")?"Permiso denegado. Configura las reglas de Firebase.":`Error: ${c.error}`;alert(d)}});return e.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4 bg-black/70 animate-in fade-in duration-200",children:e.jsx("div",{className:"bg-surface border-app border rounded-[32px] w-full max-w-sm p-8 shadow-2xl relative overflow-hidden",children:e.jsxs("div",{className:"relative z-10 animate-in zoom-in-95 duration-300",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"p-2 bg-indigo-500/10 rounded-lg text-indigo-400",children:e.jsx(De,{size:18})}),e.jsx("h2",{className:"text-xs font-black text-slate-400 uppercase tracking-[0.2em]",children:"Solicitar Resumen"})]}),e.jsx(je,{variant:"icon",onClick:t,className:"text-muted",children:e.jsx(ie,{size:20})})]}),a==="success"?e.jsxs("div",{className:"py-10 flex flex-col items-center text-center animate-in zoom-in-50",children:[e.jsx("div",{className:"w-16 h-16 bg-emerald-500/20 rounded-full flex items-center justify-center text-emerald-500 mb-4",children:e.jsx(St,{size:32,strokeWidth:3})}),e.jsx("h3",{className:"text-xl font-black text-white mb-2",children:"¬°Solicitud Enviada!"}),e.jsx("p",{className:"text-slate-400 text-sm",children:"Te avisaremos cuando hayamos subido este resumen."})]}):e.jsxs("form",{onSubmit:o,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-[10px] font-black uppercase tracking-widest text-slate-500 ml-1",children:"Nombre del Libro"}),e.jsxs("div",{className:"relative",children:[e.jsx(xs,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-500",size:16}),e.jsx("input",{required:!0,className:"w-full bg-app border border-app rounded-xl py-3 pl-10 pr-4 text-sm text-primary focus:outline-none focus:border-indigo-500 transition-all",placeholder:"Ej: El Alquimista",value:n.bookName,onChange:l=>i(se(Y({},n),{bookName:l.target.value})),disabled:a==="sending"})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-[10px] font-black uppercase tracking-widest text-slate-500 ml-1",children:"Autor"}),e.jsxs("div",{className:"relative",children:[e.jsx(et,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-500",size:16}),e.jsx("input",{required:!0,className:"w-full bg-app border border-app rounded-xl py-3 pl-10 pr-4 text-sm text-primary focus:outline-none focus:border-indigo-500 transition-all",placeholder:"Ej: Paulo Coelho",value:n.author,onChange:l=>i(se(Y({},n),{author:l.target.value})),disabled:a==="sending"})]})]}),e.jsx("div",{className:"pt-4",children:e.jsx(je,{type:"submit",variant:"primary",className:"w-full py-4 rounded-2xl shadow-xl shadow-indigo-500/20 disabled:opacity-50",disabled:a==="sending",children:a==="sending"?e.jsx("span",{className:"animate-pulse",children:"Enviando..."}):e.jsxs(e.Fragment,{children:[e.jsx(Xe,{size:18}),"Enviar Solicitud"]})})}),e.jsx("p",{className:"text-center text-[9px] text-slate-500 uppercase tracking-tighter mt-2",children:"Tu solicitud ser√° revisada por nuestro equipo."})]})]})})})},_a=({onClose:t})=>{const[s,n]=Te.useState(()=>localStorage.getItem("teovoz_audio_mono")==="true"),i=()=>{const a=!s;n(a),localStorage.setItem("teovoz_audio_mono",String(a)),window.dispatchEvent(new CustomEvent("audio-settings-changed",{detail:{mono:a}}))};return e.jsx("div",{className:"fixed inset-0 z-[120] flex items-center justify-center p-4 bg-black/80 animate-in fade-in duration-200",children:e.jsxs("div",{className:"bg-surface border-app border rounded-[32px] w-full max-w-lg max-h-[85vh] flex flex-col shadow-2xl relative overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-app",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-indigo-500/10 rounded-lg text-indigo-400",children:e.jsx($t,{size:18})}),e.jsx("h2",{className:"text-xs font-black text-muted uppercase tracking-[0.2em]",children:"Acerca de TeoVoz"})]}),e.jsx(je,{variant:"icon",onClick:t,className:"text-muted",children:e.jsx(ie,{size:20})})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto no-scrollbar p-6 space-y-10",children:[e.jsxs("div",{className:"text-center py-4",children:[e.jsx("div",{className:"w-16 h-16 rounded-2xl flex items-center justify-center shadow-xl mb-6 mx-auto transform rotate-3 overflow-hidden",children:e.jsx("img",{src:"/logo.svg",alt:"TeoVoz Logo",className:"w-full h-full object-cover"})}),e.jsxs("h1",{className:"text-3xl font-black text-primary mb-1 tracking-tighter uppercase",children:["TEO",e.jsx("span",{className:"text-indigo-500",children:"VOZ"})]}),e.jsx("p",{className:"text-[8px] text-muted font-black uppercase tracking-[0.3em]",children:"Versi√≥n 1.1.0 Premium"})]}),e.jsxs("section",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-indigo-500",children:[e.jsx(da,{size:16}),e.jsx("h3",{className:"font-black uppercase text-[10px] tracking-widest",children:"Nuestra Visi√≥n"})]}),e.jsxs("div",{className:"text-muted text-sm leading-relaxed space-y-3 font-medium bg-app/50 p-5 rounded-2xl border border-app",children:[e.jsx("p",{children:"TeoVoz es el puente entre las ideas m√°s grandes y tu apretada agenda."}),e.jsxs("p",{children:["Transformamos libros influyentes en audios de ",e.jsx("span",{className:"text-primary font-bold",children:"15 minutos"}),"."]})]})]}),e.jsxs("section",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-indigo-500",children:[e.jsx("div",{className:"p-1 bg-indigo-500/10 rounded",children:e.jsx(Hs,{size:14})}),e.jsx("h3",{className:"font-black uppercase text-[10px] tracking-widest",children:"Configuraci√≥n de Audio"})]}),e.jsxs("div",{className:"bg-surface border border-app p-4 rounded-xl flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-bold text-primary",children:"Audio Mono"}),e.jsx("p",{className:"text-[10px] text-muted",children:"Mezcla los canales para escuchar con un solo aud√≠fono."})]}),e.jsx("button",{onClick:i,className:`w-12 h-7 rounded-full transition-colors relative ${s?"bg-indigo-600":"bg-surface border border-muted"}`,children:e.jsx("div",{className:`w-5 h-5 bg-white rounded-full absolute top-1 transition-all ${s?"left-6":"left-1"}`})})]}),e.jsxs("div",{className:"bg-surface border border-app p-4 rounded-xl flex items-center justify-between mt-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-indigo-500/10 text-indigo-500 rounded-lg",children:e.jsx(Ct,{size:16})}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-bold text-primary",children:"Prueba de Notificaci√≥n"}),e.jsx("p",{className:"text-[10px] text-muted",children:"Simula una alerta de nuevo episodio."})]})]}),e.jsx("button",{onClick:()=>{Notification.permission==="granted"?new Notification("Prueba de Sistema",{body:"Notificaciones funcionando correctamente.",icon:"/Logo PNG.png"}):alert("Permisos: "+Notification.permission)},className:"px-3 py-1.5 bg-indigo-600 rounded-lg text-[10px] font-bold text-white shadow-lg shadow-indigo-600/20 active:scale-95 transition-transform",children:"PROBAR"})]})]}),e.jsxs("section",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-indigo-500",children:[e.jsx(Ds,{size:16}),e.jsx("h3",{className:"font-black uppercase text-[10px] tracking-widest",children:"Los Pilares"})]}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:["√âxito","Finanzas","Mente","Relaciones","Salud","Negocios"].map((a,r)=>e.jsxs("div",{className:"text-[9px] font-bold text-muted bg-app/30 px-3 py-2 rounded-xl border border-app flex items-center gap-2",children:[e.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-indigo-500"}),a]},r))})]}),e.jsxs("section",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-indigo-500",children:[e.jsx(et,{size:16}),e.jsx("h3",{className:"font-black uppercase text-[10px] tracking-widest",children:"Desarrollo"})]}),e.jsx("div",{className:"bg-indigo-600/10 border border-indigo-500/20 p-5 rounded-2xl",children:e.jsxs("p",{className:"text-muted text-xs leading-relaxed",children:["Creado por ",e.jsx("span",{className:"text-indigo-400 font-black",children:"MigoCreativo"}),". Elevando el potencial humano a trav√©s de la tecnolog√≠a."]})})]}),e.jsx("div",{className:"text-center pt-4 pb-6",children:e.jsxs("div",{className:"flex items-center justify-center gap-1.5 text-indigo-500 font-black bg-indigo-500/10 px-6 py-2.5 rounded-full border border-indigo-500/20 w-fit mx-auto mb-3",children:[e.jsx(de,{size:14,fill:"currentColor"}),"Escucha. Aprende. Crece."]})})]})]})})},Ea=({onClose:t})=>{const[s,n]=u.useState(0);u.useEffect(()=>{fetch("https://api.exchangerate-api.com/v4/latest/COP").then(o=>o.json()).then(o=>{o&&o.rates&&o.rates.USD&&n(o.rates.USD)}).catch(o=>console.error("Error fetching exchange rate:",o))},[]);const i=[{amount:5e3,color:"bg-emerald-500 hover:bg-emerald-600",url:"https://checkout.bold.co/payment/LNK_4FWLWFR3BH"},{amount:1e4,color:"bg-blue-500 hover:bg-blue-600",url:"https://checkout.bold.co/payment/LNK_UTIK7CCGWM"},{amount:15e3,color:"bg-purple-500 hover:bg-purple-600",url:"https://checkout.bold.co/payment/LNK_59BD7NZF5Y"},{amount:2e4,color:"bg-amber-500 hover:bg-amber-600",url:"https://checkout.bold.co/payment/LNK_I1U01M6IQ1"}],a=o=>s?`~$${(o*s).toFixed(2)} USD`:"Calculando...",r=o=>new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",maximumFractionDigits:0}).format(o);return e.jsxs("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-4 animate-in fade-in duration-300",children:[e.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:t}),e.jsxs("div",{className:"relative w-full max-w-sm bg-surface border border-indigo-500/30 rounded-[32px] p-6 shadow-2xl shadow-indigo-500/20 animate-in zoom-in-95 duration-300 overflow-hidden transition-all ease-in-out",children:[e.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-indigo-500/10 rounded-full blur-2xl -mr-10 -mt-10 pointer-events-none"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-24 h-24 bg-amber-500/10 rounded-full blur-2xl -ml-10 -mb-10 pointer-events-none"}),e.jsx("button",{onClick:t,className:"absolute top-4 right-4 z-50 p-2 text-muted hover:text-primary transition-colors bg-black/20 rounded-full hover:bg-black/40",children:e.jsx(ie,{size:20})}),e.jsxs("div",{className:"flex flex-col items-center text-center relative z-10",children:[e.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-2xl flex items-center justify-center shadow-lg shadow-indigo-500/30 mb-4 rotate-3 transform hover:rotate-6 transition-transform duration-500",children:e.jsx(ze,{size:32,className:"text-white"})}),e.jsx("h2",{className:"text-xl font-black text-primary mb-2 tracking-tight uppercase",children:"Ap√≥yame con un caf√©"}),e.jsxs("p",{className:"text-xs text-muted mb-6 leading-relaxed font-medium px-2",children:["Tu aporte me ayuda a seguir creando contenido de calidad.",e.jsx("br",{}),e.jsx("span",{className:"text-[10px] opacity-70",children:"(Precios en COP y aprox. en USD)"})]}),e.jsx("div",{className:"w-full space-y-3",children:i.map((o,l)=>e.jsxs("a",{href:o.url,target:"_blank",rel:"noopener noreferrer",className:`w-full group ${o.color} text-white p-3.5 rounded-xl flex items-center justify-between transition-all duration-300 shadow-lg hover:shadow-xl active:scale-95 border border-white/10`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"bg-white/20 p-1.5 rounded-lg",children:e.jsx(ze,{size:16,fill:"currentColor",className:"text-white"})}),e.jsxs("div",{className:"flex flex-col items-start leading-none",children:[e.jsx("span",{className:"font-bold text-sm tracking-tight",children:r(o.amount)}),e.jsx("span",{className:"text-[10px] font-medium opacity-90",children:a(o.amount)})]})]}),e.jsx(ls,{size:16,className:"opacity-80 group-hover:translate-x-1 transition-transform"})]},l))}),e.jsxs("div",{className:"mt-6 flex items-center gap-2 text-[10px] font-bold text-muted uppercase tracking-widest opacity-60",children:[e.jsx(de,{size:10,className:"text-red-500 animate-pulse",fill:"currentColor"}),e.jsx("span",{children:"Gracias por tu apoyo"}),e.jsx(de,{size:10,className:"text-red-500 animate-pulse",fill:"currentColor"})]})]})]})]})};function Ma(){const[t,s]=u.useState(null),[n,i]=u.useState(!1),[a,r]=u.useState(!1);return u.useEffect(()=>{const l=g=>{g.preventDefault(),s(g),i(!0)};window.addEventListener("beforeinstallprompt",l);const c=window.navigator.userAgent.toLowerCase(),d=/iphone|ipad|ipod/.test(c)&&!window.MSStream,p=window.matchMedia("(display-mode: standalone)").matches||navigator.standalone;return d&&!p&&r(!0),()=>window.removeEventListener("beforeinstallprompt",l)},[]),{isInstallable:n,install:()=>V(null,null,function*(){if(!t)return;t.prompt();const{outcome:l}=yield t.userChoice;l==="accepted"&&(i(!1),s(null))}),isIOS:a}}function $a(t){const[s,n]=u.useState([]),[i,a]=u.useState(!0),r=t?`episode_chats/${t.replace(/[.#$[\]]/g,"_")}`:"global_chat";return u.useEffect(()=>{a(!0);const l=F(W,r),c=jt(l,es("timestamp"),Nt(50)),d=he(c,p=>{const g=p.val();if(g){const m=Object.entries(g).map(([h,x])=>({id:h,text:x.text,user:x.user,timestamp:x.timestamp,senderId:x.senderId||"unknown"}));m.sort((h,x)=>h.timestamp-x.timestamp),n(m)}else n([]);a(!1)});return()=>d()},[r]),{messages:s,loading:i,sendMessage:(l,c)=>V(null,null,function*(){const d=F(W,r),p=Se(d);let g=localStorage.getItem("teovoz_device_id");g||(g=Math.random().toString(36).substring(2,15),localStorage.setItem("teovoz_device_id",g)),yield we(p,{text:l,user:c,senderId:g,timestamp:Ze()})})}}const Ia=({episodeGuid:t,title:s="Chat",onClose:n,isGlobal:i=!1})=>{const{messages:a,loading:r,sendMessage:o}=$a(t),[l,c]=u.useState(""),[d,p]=u.useState(()=>localStorage.getItem("teovoz_username")||""),[g,m]=u.useState(()=>!!localStorage.getItem("teovoz_username")),[h,x]=u.useState(!0),b=u.useRef(null);u.useEffect(()=>{var y;(y=b.current)==null||y.scrollIntoView({behavior:"smooth"})},[a]);const f=y=>V(null,null,function*(){y.preventDefault(),!(!l.trim()||!d.trim())&&(yield o(l,d),c(""))}),v=y=>{y.preventDefault(),d.trim()&&(localStorage.setItem("teovoz_username",d),m(!0))},k=localStorage.getItem("teovoz_device_id");return h?e.jsx("button",{onClick:()=>x(!1),className:"fixed bottom-40 right-4 z-[500] bg-indigo-600 text-white p-4 rounded-full shadow-2xl shadow-indigo-600/30 active:scale-90 transition-transform animate-in fade-in slide-in-from-bottom-10",children:e.jsxs("div",{className:"relative",children:[e.jsx(Je,{size:24}),e.jsxs("span",{className:"absolute -top-1 -right-1 flex h-3 w-3",children:[e.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-indigo-200 opacity-75"}),e.jsx("span",{className:"relative inline-flex rounded-full h-3 w-3 bg-emerald-400"})]})]})}):e.jsxs("div",{className:`fixed z-[500] flex flex-col bg-surface border border-app shadow-2xl overflow-hidden transition-all duration-300 ${i?"bottom-24 right-4 w-[350px] h-[500px] rounded-[32px]":"inset-0 sm:inset-auto sm:top-20 sm:right-4 sm:bottom-24 sm:w-[380px] sm:h-[600px] sm:rounded-[32px]"}`,children:[e.jsxs("div",{className:"bg-indigo-600 p-4 flex items-center justify-between text-white shadow-lg z-10",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"bg-white/20 p-2 rounded-xl backdrop-blur-sm",children:e.jsx(Je,{size:20})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-black text-sm uppercase tracking-wider leading-none",children:s}),e.jsx("p",{className:"text-[10px] font-medium opacity-80 mt-1",children:i?"Comunidad en Vivo":"Debate del Episodio"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>x(!0),className:"p-2 hover:bg-white/10 rounded-lg transition-colors",children:e.jsx(Fs,{size:18})}),n&&e.jsx("button",{onClick:n,className:"p-2 hover:bg-white/10 rounded-lg transition-colors",children:e.jsx(ie,{size:18})})]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 bg-app/50 relative",children:g?e.jsxs(e.Fragment,{children:[a.length===0&&!r&&e.jsxs("div",{className:"text-center py-10 opacity-50",children:[e.jsx("p",{className:"text-xs font-bold uppercase tracking-widest text-muted",children:"A√∫n no hay mensajes"}),e.jsx("p",{className:"text-[10px] text-muted",children:"S√© el primero en escribir."})]}),a.map(y=>{const z=y.senderId===k;return e.jsxs("div",{className:`flex flex-col ${z?"items-end":"items-start"} animate-in slide-in-from-bottom-2 duration-300`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1 px-1",children:[e.jsx("span",{className:"text-[9px] font-black uppercase tracking-wider text-muted",children:y.user}),e.jsx("span",{className:"text-[8px] text-muted/60",children:new Date(y.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}),e.jsx("div",{className:`max-w-[85%] px-4 py-2.5 rounded-2xl text-xs font-medium leading-relaxed shadow-sm ${z?"bg-indigo-600 text-white rounded-tr-none":"bg-surface border border-app text-primary rounded-tl-none"}`,children:y.text})]},y.id)}),e.jsx("div",{ref:b})]}):e.jsx("div",{className:"absolute inset-0 z-20 flex items-center justify-center p-6 bg-app/90 backdrop-blur-sm",children:e.jsxs("div",{className:"bg-surface border border-app p-6 rounded-3xl w-full text-center shadow-xl",children:[e.jsx("div",{className:"w-16 h-16 bg-indigo-100 dark:bg-indigo-900/30 rounded-full flex items-center justify-center mx-auto mb-4 text-indigo-600",children:e.jsx(et,{size:32})}),e.jsx("h3",{className:"text-lg font-black text-primary mb-2",children:"¬°√önete al chat!"}),e.jsx("p",{className:"text-xs text-muted mb-6",children:"Elige un nombre para chatear con la comunidad. Es an√≥nimo y r√°pido."}),e.jsxs("form",{onSubmit:v,className:"space-y-4",children:[e.jsx("input",{type:"text",value:d,onChange:y=>p(y.target.value),placeholder:"Tu Nombre o Alias",className:"w-full bg-app border border-app rounded-xl px-4 py-3 text-sm font-bold text-primary focus:outline-none focus:ring-2 focus:ring-indigo-500",autoFocus:!0}),e.jsx("button",{type:"submit",disabled:!d.trim(),className:"w-full bg-indigo-600 text-white font-black uppercase text-xs tracking-widest py-3.5 rounded-xl active:scale-95 transition-transform disabled:opacity-50 disabled:pointer-events-none shadow-lg shadow-indigo-600/20",children:"Entrar al Chat"})]})]})})}),e.jsx("div",{className:"p-3 bg-surface border-t border-app",children:e.jsxs("form",{onSubmit:f,className:"relative flex items-center gap-2",children:[e.jsx("input",{type:"text",value:l,onChange:y=>c(y.target.value),placeholder:g?"Escribe un mensaje...":"Ingresa tu nombre primero",disabled:!g,className:"flex-1 bg-app border border-app rounded-2xl pl-4 pr-12 py-3.5 text-xs text-primary font-medium focus:outline-none focus:border-indigo-500 transition-colors disabled:opacity-50"}),e.jsx("button",{type:"submit",disabled:!l.trim()||!g,className:"absolute right-2 p-2 bg-indigo-600 text-white rounded-xl active:scale-90 transition-transform disabled:opacity-0 disabled:pointer-events-none shadow-md",children:e.jsx(Xe,{size:16})})]})})]})},Pa=({children:t,activeTab:s,currentEpisode:n,onEpisodeChange:i,notifCount:a=0,onEpisodeComplete:r,onEpisodeStart:o,onEpisodeClick:l,onOpenDailyModal:c,onOpenDonation:d,showDonationModal:p=!1,onCloseDonation:g})=>{const[m,h]=u.useState(null),x=n!==void 0?n:m,b=i||h,[f,v]=u.useState(()=>localStorage.getItem("teovoz_theme")||"deep"),[k,y]=u.useState(!1),[z,_]=u.useState(!1),[E,P]=u.useState(!1),[B,X]=u.useState(navigator.onLine),[ee,q]=u.useState(Notification.permission),{isInstallable:te,install:I}=Ma(),T=()=>V(null,null,function*(){const H=yield Notification.requestPermission();q(H),H==="granted"&&(yield ts())});return u.useEffect(()=>{const H=()=>X(navigator.onLine);window.addEventListener("online",H),window.addEventListener("offline",H);const Q=U=>{const G=U.target.closest("a");if(!(!G||G.tagName!=="A")&&G.href.startsWith(window.location.origin)){const oe=new URL(G.href),$=oe.pathname.endsWith(".html"),re=oe.pathname==="/"||oe.pathname==="";($||re||oe.pathname===window.location.pathname)&&(U.preventDefault(),window.history.pushState({},"",G.href),window.dispatchEvent(new PopStateEvent("popstate")))}};return document.addEventListener("click",Q),()=>{window.removeEventListener("online",H),window.removeEventListener("offline",H),document.removeEventListener("click",Q)}},[]),u.useEffect(()=>{document.documentElement.setAttribute("data-theme",f),localStorage.setItem("teovoz_theme",f)},[f]),e.jsxs("div",{className:"min-h-screen bg-app text-primary transition-colors duration-300 pb-safe pt-[72px]",children:[e.jsx("header",{className:"fixed top-0 left-0 right-0 z-[100] bg-surface border-b border-app h-[72px]",children:e.jsxs("div",{className:"max-w-2xl mx-auto px-4 h-full flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[(s!=="home"||window.location.pathname.includes("episode.html"))&&e.jsx("button",{onClick:()=>{window.history.length>1?window.history.back():window.location.href="index.html"},className:"p-2.5 rounded-xl bg-app border border-app text-muted active:scale-90 transition-transform",children:e.jsx(zt,{size:16})}),e.jsxs("a",{href:"index.html",className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("img",{src:"/logo.svg",alt:"TeoVoz Logo",className:"w-8 h-8 rounded-lg shadow-lg shadow-indigo-600/20"}),e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("h1",{className:"text-base font-black tracking-tighter uppercase leading-none text-primary",children:["TEO",e.jsx("span",{className:"text-indigo-500",children:"VOZ"})]}),e.jsxs("div",{className:"flex items-center gap-1 mt-0.5",children:[e.jsx("div",{className:`w-1 h-1 rounded-full ${B?"bg-emerald-500 animate-pulse":"bg-amber-500"}`}),e.jsx("span",{className:`text-[7px] font-black uppercase tracking-widest ${B?"text-emerald-500/80":"text-amber-500/80"}`,children:B?"En L√≠nea":"Modo Offline"})]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-1.5",children:[te&&e.jsxs("button",{onClick:I,className:"flex flex-col items-center gap-0.5 px-2.5 py-2 rounded-xl bg-indigo-600 text-white active:scale-95 transition-all shadow-lg shadow-indigo-600/10",children:[e.jsx(Cs,{size:14}),e.jsx("span",{className:"text-[7px] font-black uppercase tracking-[0.1em]",children:"APP"})]}),ee==="default"&&e.jsxs("button",{onClick:T,className:"flex flex-col items-center gap-0.5 px-2.5 py-2 rounded-xl bg-indigo-600 text-white active:scale-95 transition-all shadow-lg shadow-indigo-600/10 animate-pulse",children:[e.jsx(Ct,{size:14}),e.jsx("span",{className:"text-[7px] font-black uppercase tracking-[0.1em]",children:"AVISAR"})]}),e.jsxs("button",{id:"tour-header-donate",onClick:d,className:"flex flex-col items-center gap-0.5 px-3 py-2 rounded-xl bg-orange-500 text-white active:scale-95 transition-all shadow-lg shadow-orange-500/20 flex-shrink-0",children:[e.jsx(ze,{size:16,fill:"currentColor"}),e.jsx("span",{className:"text-[9px] font-black uppercase tracking-widest",children:"DONAR"})]}),e.jsxs("button",{id:"tour-header-request",onClick:()=>_(!0),className:"flex flex-col items-center gap-0.5 px-2.5 py-2 rounded-xl bg-indigo-600 text-white active:scale-95 transition-all shadow-lg shadow-indigo-600/10",children:[e.jsx(De,{size:14}),e.jsx("span",{className:"text-[7px] font-black uppercase tracking-[0.1em]",children:"PEDIR"})]}),e.jsxs("button",{id:"tour-header-themes",onClick:()=>y(!0),className:"flex flex-col items-center gap-0.5 px-2.5 py-2 rounded-xl bg-app border border-app text-muted hover:text-primary active:scale-95 transition-all",children:[e.jsx(Pt,{size:14}),e.jsx("span",{className:"text-[7px] font-black uppercase tracking-[0.1em]",children:"TEMAS"})]}),e.jsxs("button",{id:"tour-header-info",onClick:()=>P(!0),className:"flex flex-col items-center gap-0.5 px-2.5 py-2 rounded-xl bg-app border border-app text-muted hover:text-primary active:scale-95 transition-all",children:[e.jsx($t,{size:14}),e.jsx("span",{className:"text-[7px] font-black uppercase tracking-[0.1em]",children:"INFO"})]})]})]})}),!B&&e.jsxs("div",{className:"fixed top-[72px] left-0 right-0 z-[90] bg-amber-500 text-white py-2 px-4 flex items-center justify-center gap-2",children:[e.jsx(ks,{size:14}),e.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest",children:"Modo Offline - Usando biblioteca local"})]}),e.jsx("main",{className:`max-w-2xl mx-auto px-0 pb-44 ${B?"":"mt-8"}`,children:!B&&s!=="favorites"&&s!=="home"?e.jsxs("div",{className:"flex flex-col items-center justify-center py-32 px-10 text-center animate-in fade-in duration-500",children:[e.jsx("div",{className:"w-20 h-20 bg-red-500/10 rounded-3xl flex items-center justify-center text-red-500 mb-6",children:e.jsx(xa,{size:40})}),e.jsx("h2",{className:"text-xl font-black mb-2 text-primary tracking-tighter uppercase",children:"Sin Conexi√≥n"}),e.jsx("p",{className:"text-muted text-sm mb-8 font-medium",children:"Esta secci√≥n requiere internet para actualizarse."}),e.jsx("button",{onClick:()=>window.location.reload(),className:"bg-surface border border-app px-8 py-4 rounded-2xl font-black text-[10px] uppercase tracking-[0.2em] text-primary active:scale-95 transition-transform",children:"Reintentar"})]}):t}),e.jsxs("div",{className:"fixed bottom-0 left-0 right-0 z-[150] pb-safe flex flex-col bg-surface",children:[e.jsx(ka,{currentEpisode:x,onClose:()=>b(null),onEpisodeComplete:r,onEpisodeStart:o,onEpisodeClick:l}),e.jsx(Sa,{activeTab:s,onTabChange:H=>{if(H==="daily")c==null||c();else if(H==="share")if(navigator.share)navigator.share({title:"TeoVoz",text:"Escucha res√∫menes de libros de 15 minutos en TeoVoz.",url:window.location.origin}).catch(console.error);else{const Q=encodeURIComponent("Escucha res√∫menes de libros de 15 minutos en TeoVoz: "+window.location.origin);window.open(`https://api.whatsapp.com/send?text=${Q}`,"_blank")}},hasPlayer:!!x,notifCount:a})]}),k&&e.jsx(za,{currentTheme:f,onThemeChange:v,onClose:()=>y(!1)}),z&&e.jsx(Ca,{onClose:()=>_(!1)}),E&&e.jsx(_a,{onClose:()=>P(!1)}),p&&g&&e.jsx(Ea,{onClose:g}),x&&e.jsx(Ia,{episodeGuid:x.guid,title:x.title,isGlobal:!1})]})},Aa={zap:Pe,banknote:ds,brain:_t,heart:de,activity:is,briefcase:fs,"scroll-text":Zs,sun:At,sparkles:ge},La=u.memo(({categories:t,onSelect:s,counts:n={}})=>{const i=a=>`${a}.html`;return e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 p-4 pt-0",children:t.map((a,r)=>{const o=Aa[a.icon]||Ls,l=!a.rss,c=n[a.id]||0,d=a.id==="requests";return e.jsxs("a",{id:a.id==="requests"?"tour-category-requests":void 0,href:l?"#":i(a.id),onClick:p=>{l||(p.preventDefault(),s(a))},"aria-disabled":l,className:`
              ${l?"bg-slate-900/50 border-slate-800 opacity-60 grayscale pointer-events-none":a.color+" border-white/10 cursor-pointer"} 
              group relative h-40 rounded-[32px] p-5 
              flex flex-col justify-between items-start text-white 
              shadow-lg shadow-black/20
              overflow-hidden border
              block
              ${d?"col-span-2":""}
            `,children:[e.jsx("div",{className:"absolute -right-3 -bottom-3 opacity-10 z-0",children:l?e.jsx(rt,{size:100}):e.jsx(o,{size:100})}),e.jsx("div",{className:`
              ${l?"bg-slate-800":"bg-black/40"} 
              p-2.5 rounded-2xl z-10 border border-white/10
            `,children:l?e.jsx(rt,{size:18,className:"text-slate-600"}):e.jsx(o,{size:18})}),e.jsxs("div",{className:"z-10 text-left w-full mt-2 relative",children:[e.jsx("span",{className:"font-black text-[16px] uppercase leading-[1.1] block tracking-tighter drop-shadow-md",children:a.name}),!l&&e.jsxs("span",{className:"text-[8px] uppercase tracking-[0.25em] text-white/50 font-black mt-2 block",children:[c," Episodios"]}),l&&e.jsx("span",{className:"text-[8px] uppercase tracking-[0.2em] text-slate-500 font-black mt-2 block",children:"Pr√≥ximamente"})]})]},a.id)})})}),Ta="https://anchor.fm/s/10d2e95c4/podcast/rss",me={requests:"https://anchor.fm/s/10d4601dc/podcast/rss",productivity:Ta,money:"https://anchor.fm/s/10d44d898/podcast/rss",mind:"https://anchor.fm/s/10d450d54/podcast/rss",love:"https://anchor.fm/s/10d4528ac/podcast/rss",health:"https://anchor.fm/s/10d2ecf30/podcast/rss",business:"https://anchor.fm/s/10d2edc14/podcast/rss",history:"https://anchor.fm/s/10d457280/podcast/rss",spirituality:"https://anchor.fm/s/10d457474/podcast/rss"},ce=(t,s)=>{if(!t)return"";const n=Array.isArray(s)?s:[s];for(const i of n){let a=t.getElementsByTagName(i);if((a==null?void 0:a.length)>0&&a[0].textContent)return a[0].textContent.trim();const r=i.includes(":")?i.split(":")[1]:i;if(a=t.getElementsByTagName(r),(a==null?void 0:a.length)>0&&a[0].textContent)return a[0].textContent.trim()}return""},Da=t=>{if(!t||t.includes(":"))return t||"";const s=parseInt(t,10);if(isNaN(s))return t;const n=Math.floor(s/3600),i=Math.floor(s%3600/60),a=s%60;return n>0?`${n}:${i.toString().padStart(2,"0")}:${a.toString().padStart(2,"0")}`:`${i}:${a.toString().padStart(2,"0")}`},Ra=t=>{var o;const s=new DOMParser().parseFromString(t.replace(/^\uFEFF/,"").trim(),"text/xml");if(s.querySelector("parsererror"))throw new Error("Formato incompatible.");const n=s.querySelector("channel")||s.getElementsByTagName("channel")[0];if(!n)throw new Error("Contenido no v√°lido.");const a=((o=n.getElementsByTagName("itunes:image")[0])==null?void 0:o.getAttribute("href"))||"",r=Array.from(n.querySelectorAll("item")).map(l=>{var g,m,h,x,b;const c=((g=l.querySelector("enclosure"))==null?void 0:g.getAttribute("url"))||((m=l.getElementsByTagName("media:content")[0])==null?void 0:m.getAttribute("url"))||"",d=((h=l.getElementsByTagName("itunes:image")[0])==null?void 0:h.getAttribute("href"))||a,p=ce(l,["itunes:summary","content:encoded","description","itunes:subtitle"]);return{guid:ce(l,["guid","link"])||Math.random().toString(36).substring(7),title:ce(l,["title","itunes:title"]).replace(/^(An√°lisis|Analisis) Profundo:\s*/i,"").trim(),description:p.replace(/<[^>]*>?/gm,"").substring(0,1500),contentSnippet:p,pubDate:ce(l,"pubDate"),image:d,duration:Da(ce(l,["itunes:duration","duration"])),enclosure:{url:c,length:((x=l.querySelector("enclosure"))==null?void 0:x.getAttribute("length"))||"0",type:((b=l.querySelector("enclosure"))==null?void 0:b.getAttribute("type"))||"audio/mpeg"},author:ce(l,["itunes:author","author"])||ce(n,["itunes:author","author"])||"TEOVOZ"}}).filter(l=>l.enclosure.url&&l.title);return{title:ce(n,["title","itunes:title"]),description:ce(n,["description","itunes:summary"]),image:a,author:ce(n,["itunes:author","author"])||"TEOVOZ",episodes:r}},dt="teovoz_rss_cache_",Oa=5*1e3,ue=t=>V(null,null,function*(){const s=`${dt}${btoa(t)}`;let n=null;try{n=localStorage.getItem(s)}catch(a){console.warn("Storage access restricted:",a)}if(n)try{const{timestamp:a,data:r}=JSON.parse(n);if(Date.now()-a<Oa)return r}catch(a){console.warn("Error leyendo cach√© RSS:",a);try{localStorage.removeItem(s)}catch(r){}}const i=[a=>`https://corsproxy.io/?${encodeURIComponent(a)}`,a=>`https://api.allorigins.win/raw?url=${encodeURIComponent(a)}`,a=>`https://api.codetabs.com/v1/proxy?quest=${encodeURIComponent(a)}`];for(const a of i)try{const r=yield fetch(a(`${t}${t.includes("?")?"&":"?"}t=${Date.now()}`));if(!r.ok)continue;const o=yield r.text();if(!o||o.trim()==="Not Found"||!o.includes("<channel>"))continue;const l=Ra(o);try{localStorage.setItem(s,JSON.stringify({timestamp:Date.now(),data:l}))}catch(c){if(c instanceof DOMException&&c.name==="QuotaExceededError"){console.log("Limpiando cach√© de RSS antigua...");try{for(let d=0;d<localStorage.length;d++){const p=localStorage.key(d);p&&p.startsWith(dt)&&localStorage.removeItem(p)}}catch(d){}}}return l}catch(r){continue}if(n)try{const{data:a}=JSON.parse(n);return a}catch(a){}throw new Error("Error al obtener el podcast.")}),xe=[{id:"requests",name:"LO NUEVO - Pedido por Usuarios",icon:"sparkles",color:"bg-gradient-to-br from-indigo-500 via-purple-500 to-pink-500",rss:me.requests},{id:"productivity",name:"Productividad y √âxito",icon:"zap",color:"bg-gradient-to-br from-indigo-600 to-blue-700",rss:me.productivity},{id:"money",name:"Dinero y Libertad Financiera",icon:"banknote",color:"bg-gradient-to-br from-emerald-500 to-green-700",rss:me.money},{id:"mind",name:"Mente y Psicolog√≠a",icon:"brain",color:"bg-gradient-to-br from-purple-600 to-indigo-800",rss:me.mind},{id:"love",name:"Amor, Sexo y Relaciones",icon:"heart",color:"bg-gradient-to-br from-rose-500 to-red-700",rss:me.love},{id:"health",name:"Salud y Bienestar",icon:"activity",color:"bg-gradient-to-br from-teal-500 to-emerald-600",rss:me.health},{id:"business",name:"Liderazgo y Negocios",icon:"briefcase",color:"bg-gradient-to-br from-slate-700 to-slate-900",rss:me.business},{id:"history",name:"Historia y Cultura",icon:"scroll-text",color:"bg-gradient-to-br from-amber-600 to-orange-800",rss:me.history},{id:"spirituality",name:"Espiritualidad y Filosof√≠a",icon:"sun",color:"bg-gradient-to-br from-violet-500 to-purple-700",rss:me.spirituality}],le=({className:t=""})=>e.jsx("div",{className:`animate-pulse bg-surface-hover rounded-2xl ${t}`}),Lt=()=>e.jsxs("div",{className:"bg-surface border border-app rounded-2xl p-4 flex gap-4 items-center",children:[e.jsx(le,{className:"w-20 h-20 flex-shrink-0"}),e.jsxs("div",{className:"flex-1 space-y-3",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx(le,{className:"h-2 w-12"}),e.jsx(le,{className:"h-2 w-16"})]}),e.jsx(le,{className:"h-4 w-full"}),e.jsx(le,{className:"h-3 w-2/3"})]})]}),Ba=()=>e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[1,2,3,4,5,6,7,8].map(t=>e.jsx(le,{className:"h-40 rounded-[32px]"},t))});var qa=ss();const pt=({title:t,episodes:s,onClose:n,onSelect:i,emptyMessage:a="No hay episodios aqu√≠.",type:r})=>qa.createPortal(e.jsxs("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-4",children:[e.jsx("div",{className:"absolute inset-0 bg-black/60",onClick:n}),e.jsxs("div",{className:"relative w-full max-w-lg bg-surface border border-app rounded-[32px] shadow-2xl overflow-hidden max-h-[80vh] flex flex-col",children:[e.jsxs("div",{className:"p-5 border-b border-app flex items-center justify-between bg-surface sticky top-0 z-10",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-10 h-10 rounded-2xl flex items-center justify-center ${r==="history"?"bg-amber-500/10 text-amber-500":"bg-emerald-500/10 text-emerald-500"}`,children:r==="history"?e.jsx(ye,{size:20}):e.jsx(it,{size:20})}),e.jsx("h2",{className:"text-lg font-black text-primary tracking-tight",children:t})]}),e.jsx("button",{onClick:n,className:"p-2 rounded-xl hover:bg-white/5 active:scale-90 transition-all text-muted",children:e.jsx(ie,{size:20})})]}),e.jsx("div",{className:"overflow-y-auto p-4 space-y-3",children:s.length===0?e.jsxs("div",{className:"py-12 text-center text-muted flex flex-col items-center gap-4",children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-white/5 flex items-center justify-center grayscale opacity-50",children:r==="history"?e.jsx(ye,{size:32}):e.jsx(it,{size:32})}),e.jsx("p",{children:a})]}):s.map(o=>e.jsxs("button",{onClick:()=>i(o),className:"w-full flex items-center gap-4 p-3 rounded-2xl bg-app border border-app hover:border-indigo-500/30 transition-all active:scale-[0.98] group text-left",children:[e.jsxs("div",{className:"relative w-16 h-16 rounded-xl overflow-hidden flex-shrink-0 bg-surface",children:[e.jsx("img",{src:o.image,alt:o.title,className:"w-full h-full object-cover"}),e.jsx("div",{className:"absolute inset-0 bg-black/20 group-hover:bg-black/40 transition-colors flex items-center justify-center opacity-0 group-hover:opacity-100",children:e.jsx(be,{size:20,className:"text-white fill-current"})})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-bold text-primary text-sm line-clamp-2 leading-tight mb-1",children:o.title}),e.jsx("p",{className:"text-[10px] text-muted font-medium line-clamp-1",children:r==="history"?"Continuar escuchando":"Completado"})]})]},o.guid))})]})]}),document.body),Ha=({episode:t,onPlay:s,onClick:n})=>{const{likes:i}=Oe(t.guid),{comments:a}=Be(t.guid);return e.jsx("div",{id:"tour-suggestion",className:"w-full relative h-48 rounded-[40px] shadow-2xl transition-transform active:scale-[0.99] group",children:e.jsxs("button",{onClick:n,className:"w-full h-full relative overflow-hidden rounded-[40px] text-left border border-app",children:[e.jsx("img",{src:t.image,className:"absolute inset-0 w-full h-full object-cover transition-transform duration-700 group-hover:scale-105",alt:t.title}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/90 via-black/40 to-transparent z-10"}),e.jsxs("div",{className:"relative z-20 h-full p-6 flex flex-col justify-end",children:[e.jsx("div",{className:"flex items-start justify-between mb-auto",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"bg-indigo-600 p-1.5 rounded-lg shadow-lg",children:e.jsx(ge,{size:10,className:"text-white"})}),e.jsx("span",{className:"text-[9px] font-black uppercase tracking-[0.3em] text-white/90",children:"Sugerencia TEOVOZ"})]})}),e.jsxs("div",{className:"flex items-end justify-between gap-4 mt-2",children:[e.jsxs("div",{className:"flex flex-col gap-2 max-w-[70%]",children:[e.jsx("h3",{className:"text-xl font-black text-white leading-tight line-clamp-2 drop-shadow-md",children:t.title}),e.jsxs("div",{className:"flex items-center gap-3 text-white/80",children:[e.jsxs("div",{className:"flex items-center gap-1 bg-white/10 px-2 py-1 rounded-md backdrop-blur-sm",children:[e.jsx(Re,{size:10,className:"text-white"}),e.jsx("span",{className:"text-[10px] font-bold",children:i})]}),e.jsxs("div",{className:"flex items-center gap-1 bg-white/10 px-2 py-1 rounded-md backdrop-blur-sm",children:[e.jsx(Ee,{size:10,className:"text-white"}),e.jsx("span",{className:"text-[10px] font-bold",children:a.length})]})]})]}),e.jsx("div",{onClick:r=>{r.stopPropagation(),s(r)},className:"bg-white text-indigo-600 p-3.5 rounded-2xl shadow-xl hover:bg-indigo-50 active:scale-95 transition-all flex items-center justify-center cursor-pointer z-30",children:e.jsx(be,{size:24,fill:"currentColor",className:"ml-0.5"})})]})]})]})})};function Va(){const[t,s]=u.useState([]),[n,i]=u.useState(!0);return u.useEffect(()=>{const a=F(W,"likes"),r=F(W,"comments");let o={},l={},c=!1,d=!1;const p=()=>{if(!c||!d)return;const h={};Object.entries(o).forEach(([b,f])=>{const v=b;h[v]||(h[v]={guid:v,score:0,likes:0,comments:0}),h[v].likes=f,h[v].score+=f*1}),Object.entries(l).forEach(([b,f])=>{const v=b;h[v]||(h[v]={guid:v,score:0,likes:0,comments:0});const k=Object.keys(f).length;h[v].comments=k,h[v].score+=k*2});const x=Object.values(h).sort((b,f)=>f.score-b.score).slice(0,2);s(x),i(!1)},g=he(a,h=>{o=h.val()||{},c=!0,p()}),m=he(r,h=>{l=h.val()||{},d=!0,p()});return()=>{g(),m()}},[]),{trending:t,loading:n}}const Fa=({trending:t,episodes:s,onPlay:n,onSelect:i})=>{const{counts:a}=qe();if(t.length===0)return null;const r=l=>s.find(c=>c.guid.replace(/[.#$[\]]/g,"_")===l),o=t.map(l=>se(Y({},l),{episode:r(l.guid)})).filter(l=>l.episode!==void 0);return o.length===0?null:e.jsxs("div",{className:"px-6 mb-8 animate-in fade-in slide-in-from-bottom-4 duration-700",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx("div",{className:"bg-orange-500/10 p-2 rounded-xl",children:e.jsx(Ce,{className:"text-orange-500 animate-pulse",size:20})}),e.jsxs("h2",{className:"text-xl font-black text-primary uppercase tracking-tighter",children:["Tendencias ",e.jsx("span",{className:"text-orange-500",children:"Globales"})]})]}),e.jsx("div",{className:"grid grid-cols-1 gap-4",children:o.map((l,c)=>{const d=l.episode;return e.jsxs("div",{onClick:()=>i(d),className:"group relative bg-surface border border-app rounded-[24px] p-4 overflow-hidden shadow-lg shadow-orange-500/5 hover:shadow-orange-500/10 transition-all active:scale-[0.98]",children:[e.jsxs("div",{className:"absolute top-0 right-0 bg-orange-500 text-white text-[10px] font-black px-3 py-1.5 rounded-bl-2xl",children:["#",c+1]}),e.jsxs("div",{className:"flex gap-4 items-center",children:[e.jsxs("div",{className:"relative w-16 h-16 flex-shrink-0",children:[e.jsx("img",{src:d.image||"/logo.svg",alt:d.title,className:"w-full h-full object-cover rounded-2xl shadow-md",onError:p=>p.currentTarget.src="/logo.svg"}),e.jsx("button",{onClick:p=>{p.stopPropagation(),n(d)},className:"absolute inset-0 flex items-center justify-center bg-black/30 backdrop-blur-[1px] rounded-2xl opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx("div",{className:"bg-white text-black rounded-full p-1.5 shadow-lg transform scale-90 group-hover:scale-100 transition-transform",children:e.jsx(be,{size:14,fill:"currentColor"})})})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"text-sm font-bold text-primary mb-1 line-clamp-1 leading-tight",children:d.title}),e.jsx("p",{className:"text-[10px] text-muted line-clamp-1 mb-2.5",children:d.author||"TeoVoz Original"}),a[d.guid.replace(/[.#$[\]]/g,"_")]>0&&e.jsxs("div",{className:"flex items-center gap-1 text-[9px] font-black text-orange-500 mb-2 animate-pulse",children:[e.jsx(Ce,{size:10,fill:"currentColor"}),e.jsxs("span",{children:[a[d.guid.replace(/[.#$[\]]/g,"_")]," escuchando ahora"]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex items-center gap-1 text-[9px] font-bold text-rose-500 bg-rose-500/5 px-2 py-0.5 rounded-md",children:[e.jsx(de,{size:10,fill:"currentColor"}),e.jsx("span",{children:l.likes})]}),e.jsxs("div",{className:"flex items-center gap-1 text-[9px] font-bold text-blue-500 bg-blue-500/5 px-2 py-0.5 rounded-md",children:[e.jsx(Je,{size:10,fill:"currentColor"}),e.jsx("span",{children:l.comments})]})]})]})]})]},d.guid)})})]})},Wa=()=>{const[t,s]=u.useState([]),[n,i]=u.useState(0);if(u.useEffect(()=>{const r=["üî• Alguien en M√©xico est√° escuchando 'H√°bitos At√≥micos'","üéß 3 personas acaban de comenzar 'Padre Rico, Padre Pobre'","üöÄ 'La Psicolog√≠a del Dinero' est√° en tendencias ahora","‚ù§Ô∏è Nuevo like en 'El Arte de la Guerra'","üìö Alguien complet√≥ su racha de 3 d√≠as","ü§Ø Reacci√≥n en vivo: 'Wow' en el minuto 12:30 de 'Sapiens'","‚òï Un usuario invit√≥ un caf√© a los desarrolladores","üßò La comunidad se siente mayoritariamente 'Enfocada' hoy"];s(r.sort(()=>.5-Math.random()).slice(0,5));const o=setInterval(()=>{i(l=>(l+1)%r.length)},5e3);return()=>clearInterval(o)},[]),t.length===0)return null;const a=t[n%t.length];return e.jsx("div",{className:"w-full bg-surface border-y border-app py-2 overflow-hidden relative",children:e.jsxs("div",{className:"max-w-2xl mx-auto px-4 flex items-center gap-3",children:[e.jsxs("div",{className:"flex items-center gap-1 text-[9px] font-black text-white bg-red-500 px-1.5 py-0.5 rounded uppercase tracking-widest flex-shrink-0 animate-pulse",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-white rounded-full"}),"En Vivo"]}),e.jsx("div",{className:"flex-1 animate-slide-up",children:e.jsxs("p",{className:"text-[10px] font-bold text-muted truncate flex items-center gap-2",children:[a.includes("üî•")&&e.jsx(Ce,{size:12,className:"text-orange-500"}),a.includes("üéß")&&e.jsx(Mt,{size:12,className:"text-indigo-500"}),a.includes("üìö")&&e.jsx(De,{size:12,className:"text-emerald-500"}),e.jsx("span",{className:"text-primary",children:a})]})},n)]})})};let Ne=[],mt=null,ut={},Ve=!1;const Ua=({onCategorySelect:t,onEpisodeSelect:s,onPlay:n,listenedCount:i,lastPlayed:a,listenedGuids:r,historyGuids:o})=>{const[l,c]=u.useState(mt),[d,p]=u.useState(ut),[g,m]=u.useState(!1),[h,x]=u.useState(!1),[b,f]=u.useState(()=>{const z=localStorage.getItem("teovoz_total_episodes");return z?parseInt(z,10):0}),[v,k]=u.useState(!Ve),{trending:y}=Va();return u.useEffect(()=>{V(null,null,function*(){const _=xe.filter(P=>P.rss),E=_[Math.floor(Math.random()*_.length)];try{const P=xe.filter($=>$.rss);if(P.length===0){k(!1);return}const[B,X]=yield Promise.all([ue(P[0].rss),ue(E.rss||P[0].rss)]);Ne=B.episodes;const ee=localStorage.getItem("teovoz_suggestion");let q=null;const te=Date.now(),I=1440*60*1e3;if(ee){const $=JSON.parse(ee);te-$.timestamp<I&&(q=$.episode)}if(!q&&X.episodes.length>0){const $=X.episodes[Math.floor(Math.random()*X.episodes.length)];$.categoryId=E.id,q=$,localStorage.setItem("teovoz_suggestion",JSON.stringify({episode:$,timestamp:te}))}q&&(c(q),mt=q);const T={},H=yield Promise.all(_.map($=>V(null,null,function*(){try{const re=yield ue($.rss);return{id:$.id,count:re.episodes.length,episodes:re.episodes}}catch(re){return{id:$.id,count:0,episodes:[]}}})));let Q=0;const U=P[0].id;let G=B.episodes.map($=>se(Y({},$),{categoryId:U}));H.forEach($=>{T[$.id]=$.count,Q+=$.count;const re=$.episodes.map(j=>se(Y({},j),{categoryId:$.id}));$.id!==P[0].id&&(G=G.concat(re))});const oe=new Set;Ne=G.filter($=>oe.has($.guid)?!1:(oe.add($.guid),!0)),p(T),ut=T,f(Q),localStorage.setItem("teovoz_total_episodes",Q.toString()),Ve=!0}catch(P){console.error("Error loading home data:",P)}finally{k(!1)}})},[]),v&&!Ve?e.jsxs("div",{className:"pb-32 animate-in fade-in duration-500",children:[e.jsx(Wa,{}),e.jsx(le,{className:"w-full h-24 rounded-[28px]"}),e.jsx(Ba,{})]}):e.jsxs("div",{className:"py-6",children:[l&&e.jsx("div",{className:"px-6 mb-10",children:e.jsx(Ha,{episode:l,onPlay:z=>{z.stopPropagation(),n(l)},onClick:()=>s(l)})}),h&&e.jsx(pt,{title:"Mi Progreso",type:"progress",episodes:Ne.filter(z=>r.has(z.guid)),onClose:()=>x(!1),onSelect:z=>{x(!1),s(z)},emptyMessage:"A√∫n no has completado ning√∫n episodio."}),g&&e.jsx(pt,{title:"Historial",type:"history",episodes:Ne.filter(z=>o.has(z.guid)),onClose:()=>m(!1),onSelect:z=>{m(!1),s(z)},emptyMessage:"No tienes episodios pendientes."}),e.jsx(Fa,{trending:y,episodes:Ne,onPlay:n,onSelect:s}),e.jsx("div",{className:"px-6 mb-10",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("button",{id:"tour-progress",onClick:()=>x(!0),className:"bg-surface border-app border rounded-[28px] p-5 flex flex-col gap-3 text-left group",children:[e.jsx("div",{className:"w-10 h-10 bg-indigo-600 rounded-xl flex items-center justify-center text-white",children:e.jsx(Mt,{size:20})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[8px] font-black uppercase tracking-[0.2em] text-muted mb-1 leading-none",children:"Mi Progreso"}),e.jsxs("div",{className:"flex items-baseline gap-1",children:[e.jsx("span",{className:"text-2xl font-black text-primary tracking-tighter",children:i}),e.jsx("span",{className:"text-[9px] font-bold text-muted uppercase",children:"Temas"})]})]})]}),e.jsxs("button",{id:"tour-history",onClick:()=>m(!0),className:"bg-surface border-app border rounded-[28px] p-5 flex flex-col gap-3 text-left group",children:[e.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center ${o.size>0?"bg-amber-500 text-white":"bg-amber-500/10 text-amber-500"}`,children:e.jsx(ye,{size:20})}),e.jsxs("div",{className:"truncate w-full",children:[e.jsx("p",{className:"text-[8px] font-black uppercase tracking-[0.2em] text-muted mb-1 leading-none",children:"Historial"}),e.jsx("p",{className:"text-[10px] font-bold text-primary truncate tracking-tight",children:o.size>0?`${o.size} Pendientes`:"Ver historial"})]})]})]})}),e.jsx("div",{className:"px-6 mb-5",children:e.jsxs("div",{id:"tour-total",className:"w-full px-4 py-3 bg-indigo-600/10 border border-indigo-600/20 rounded-2xl flex items-center justify-center gap-3 shadow-lg shadow-indigo-600/5",children:[e.jsx("div",{className:"w-2.5 h-2.5 bg-indigo-500 rounded-full animate-pulse shadow-[0_0_10px_rgba(99,102,241,0.6)]"}),e.jsxs("span",{className:"text-xl font-black text-indigo-500 tracking-tighter",children:[b," LIBROS"]})]})}),e.jsx("div",{id:"tour-categories-grid",children:e.jsx(La,{categories:xe,onSelect:t,counts:d})})]})},Ga=u.memo(({episode:t,onPlay:s,onToggleFavorite:n,isFavorite:i,isListened:a,isActive:r,podcastImage:o,showPodcastTitle:l,activeListeners:c=0})=>{const{likes:d}=Oe(t.guid),{comments:p}=Be(t.guid);return e.jsxs("div",{onClick:()=>s(t),className:`group relative bg-surface border border-app hover:border-indigo-500/30 rounded-3xl overflow-hidden transition-all active:scale-[0.98] cursor-pointer flex flex-col h-full shadow-lg shadow-black/20 ${r?"border-indigo-500/50 ring-1 ring-indigo-500/20":""}`,children:[e.jsxs("div",{className:"relative aspect-square w-full overflow-hidden bg-app",children:[e.jsx("img",{src:t.image||o||"",alt:t.title,className:"w-full h-full object-cover transition-transform duration-700 group-hover:scale-110",loading:"lazy"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-transparent to-black/30 opacity-60 group-hover:opacity-40 transition-opacity"}),e.jsxs("div",{className:"absolute top-2 left-2 flex flex-col gap-1 items-start",children:[a&&e.jsxs("span",{className:"flex items-center gap-1 text-[8px] font-black bg-emerald-500 text-white px-2 py-1 rounded-lg shadow-sm backdrop-blur-sm",children:[e.jsx(Et,{size:10}),"VISTO"]}),l&&e.jsx("span",{className:"text-[8px] font-black bg-indigo-500/90 text-white px-2 py-1 rounded-lg backdrop-blur-md shadow-sm",children:"PODCAST"}),e.jsxs("div",{className:"flex items-center gap-1",children:[d>0&&e.jsxs("span",{className:"flex items-center gap-0.5 text-[8px] font-black bg-black text-white px-2 py-1 rounded-lg shadow-sm border border-white/10",children:[e.jsx(Re,{size:10,fill:"currentColor"}),d]}),p.length>0&&e.jsxs("span",{className:"flex items-center gap-0.5 text-[8px] font-black bg-black text-white px-2 py-1 rounded-lg shadow-sm border border-white/10",children:[e.jsx(Ee,{size:10,fill:"currentColor"}),p.length]})]})]}),c>0&&e.jsxs("div",{className:"absolute top-2 right-10 flex items-center gap-1 text-[8px] font-black bg-orange-500 text-white px-2 py-1 rounded-lg shadow-sm border border-white/10 animate-pulse z-10",children:[e.jsx(Ce,{size:10,fill:"currentColor"}),c]}),n&&e.jsx("button",{onClick:g=>{g.stopPropagation(),n(t)},className:`absolute top-2 right-2 p-2 rounded-full backdrop-blur-md transition-all ${i?"bg-white text-red-500":"bg-black/30 text-white hover:bg-white/20"}`,children:e.jsx(de,{size:14,fill:i?"currentColor":"none"})}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:e.jsx("div",{className:"bg-white/20 backdrop-blur-sm p-3 rounded-full border border-white/30 text-white shadow-xl transform scale-0 group-hover:scale-100 transition-transform",children:e.jsx(be,{size:24,fill:"currentColor"})})})]}),e.jsxs("div",{className:"p-3 flex-1 flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between text-[9px] text-muted font-bold uppercase tracking-wider mb-2",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Ke,{size:10}),new Date(t.pubDate).toLocaleDateString(void 0,{day:"numeric",month:"short"})]}),t.duration&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(ye,{size:10}),t.duration]})]}),e.jsx("h3",{className:`font-black text-[11px] uppercase tracking-tight leading-tight mb-1.5 line-clamp-2 ${r?"text-indigo-400":"text-primary"}`,children:t.title}),e.jsx("p",{className:"text-[10px] text-muted/80 leading-relaxed line-clamp-2 mt-auto",children:t.description.replace(/\*\*/g,"")})]})]})}),He=u.memo(({episodes:t,onPlay:s,onToggleFavorite:n,favorites:i=new Set,listened:a=new Set,currentEpisodeId:r,emptyMessage:o="No hay episodios disponibles.",podcastImage:l,showPodcastTitle:c=!1})=>{const{counts:d}=qe();return t.length===0?e.jsx("div",{className:"text-center py-12 text-muted font-medium text-sm",children:e.jsx("p",{children:o})}):e.jsx("div",{className:"grid grid-cols-2 gap-3 pb-32 animate-in fade-in duration-500",children:t.map(p=>e.jsx(Ga,{episode:p,onPlay:s,onToggleFavorite:n,isFavorite:i.has(p.guid),isListened:a.has(p.guid),isActive:r===p.guid,podcastImage:l,showPodcastTitle:c,activeListeners:d[p.guid.replace(/[.#$[\]]/g,"_")]||0},p.guid))})}),xt=t=>(t||"").normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase().trim(),Fe=(t,s)=>{const n=xt(t),i=xt(s);if(n.includes(i))return!0;if(i.length<4)return!1;let a=0,r=0;for(let l=0;l<i.length&&r<n.length;l++)i[l]!==n[r]&&(a++,i[l]===n[r+1]&&r++),r++;const o=i.length>6?2:1;return a<=o},Ja=({onEpisodeSelect:t,favorites:s,listened:n})=>{const[i,a]=u.useState(""),[r,o]=u.useState([]),[l,c]=u.useState(!1),[d,p]=u.useState(()=>{const x=localStorage.getItem("teovoz_recent_searches");return x?JSON.parse(x):[]});u.useEffect(()=>{V(null,null,function*(){c(!0);try{const b=xe.filter(k=>k.rss),v=(yield Promise.all(b.map(k=>ue(k.rss)))).flatMap((k,y)=>k.episodes.map(z=>se(Y({},z),{contentSnippet:`${z.contentSnippet||""}|||${k.title}`,categoryId:b[y].id})));o(v.sort((k,y)=>new Date(y.pubDate).getTime()-new Date(k.pubDate).getTime()))}catch(b){console.error(b)}finally{c(!1)}})},[]);const g=x=>{if(a(x),x.length>2&&!d.includes(x)){const b=[x,...d].slice(0,8);p(b),localStorage.setItem("teovoz_recent_searches",JSON.stringify(b))}},m=x=>{const b=d.filter(f=>f!==x);p(b),localStorage.setItem("teovoz_recent_searches",JSON.stringify(b))},h=u.useMemo(()=>!i||i.length<2?r.slice(0,15):r.filter(x=>{const b=Fe(x.title,i),f=x.description&&Fe(x.description.substring(0,200),i),v=x.contentSnippet&&Fe(x.contentSnippet,i);return b||f||v}),[i,r]);return e.jsxs("div",{className:"animate-in fade-in duration-300 px-6",children:[e.jsx("div",{className:"sticky top-0 bg-app z-30 py-4 mb-2",children:e.jsxs("div",{className:"relative group",children:[e.jsx(Qe,{className:`absolute left-4 top-1/2 -translate-y-1/2 transition-colors ${i?"text-indigo-500":"text-muted"}`,size:20}),e.jsx("input",{type:"text",placeholder:"Libros, autores o temas...",value:i,onChange:x=>a(x.target.value),onBlur:()=>i.length>2&&g(i),onKeyDown:x=>x.key==="Enter"&&g(i),className:"w-full bg-surface border-app border rounded-2xl py-4 pl-12 pr-4 text-primary focus:outline-none focus:border-indigo-500 transition-all shadow-lg shadow-black/10 text-base"}),i&&e.jsx("div",{className:"absolute right-4 top-1/2 -translate-y-1/2 flex items-center gap-2",children:e.jsx("span",{className:"text-[8px] font-black text-indigo-500 uppercase tracking-widest bg-indigo-500/10 px-2 py-1 rounded-md animate-pulse",children:"B√∫squeda Inteligente"})})]})}),!i&&d.length>0&&e.jsxs("div",{className:"mb-8 animate-in slide-in-from-top-4 duration-500",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4 px-2",children:[e.jsxs("h3",{className:"text-xs font-black text-muted uppercase tracking-widest flex items-center gap-2",children:[e.jsx(ye,{size:12})," Recientes"]}),e.jsx("button",{onClick:()=>{p([]),localStorage.removeItem("teovoz_recent_searches")},className:"text-[10px] text-indigo-400 font-bold hover:text-indigo-300",children:"Borrar todo"})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:d.map(x=>e.jsxs("button",{onClick:()=>a(x),className:"group flex items-center gap-2 px-3 py-2 bg-surface border border-app rounded-xl text-primary text-sm font-medium hover:bg-app transition-colors",children:[e.jsx("span",{children:x}),e.jsx("div",{onClick:b=>{b.stopPropagation(),m(x)},className:"p-0.5 rounded-full hover:bg-white/10 text-muted",children:e.jsx(ie,{size:12})})]},x))})]}),l&&r.length===0?e.jsx("div",{className:"space-y-4",children:[1,2,3,4,5,6].map(x=>e.jsx(Lt,{},x))}):e.jsxs("div",{className:"relative",children:[i&&h.length>0&&e.jsxs("div",{className:"flex items-center gap-2 mb-4 px-2",children:[e.jsx(ge,{size:12,className:"text-indigo-500"}),e.jsxs("p",{className:"text-[10px] font-black text-muted uppercase tracking-widest",children:["Resultados encontrados (",h.length,")"]})]}),e.jsx(He,{episodes:h,onPlay:t,favorites:s,listened:n,showPodcastTitle:!0,emptyMessage:i?`No encontramos nada parecido a "${i}". Prueba con otra palabra.`:"Cargando biblioteca..."})]})]})},Ya=({episodes:t,onEpisodeSelect:s,favorites:n,listened:i})=>e.jsxs("div",{className:"animate-in fade-in slide-in-from-bottom-4 duration-500 px-6",children:[e.jsxs("div",{className:"mb-10 mt-2",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(de,{className:"text-red-500 fill-red-500",size:24}),e.jsx("h2",{className:"text-3xl font-black text-primary uppercase tracking-tighter",children:"Tus Favoritos"})]}),e.jsxs("p",{className:"text-xs text-muted font-bold uppercase tracking-widest",children:[t.length," episodios guardados en tu biblioteca"]})]}),e.jsx(He,{episodes:t,onPlay:s,favorites:n,listened:i,emptyMessage:"A√∫n no tienes episodios favoritos. Explora las categor√≠as para a√±adir contenido."})]}),We=t=>(t||"").normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase().trim(),Za=({category:t,onEpisodeSelect:s,favorites:n,listened:i,currentEpisodeId:a})=>{const[r,o]=u.useState(null),[l,c]=u.useState(!0),[d,p]=u.useState("");u.useEffect(()=>{const m=()=>V(null,null,function*(){c(!0);try{const h=yield ue(t.rss);o(h)}catch(h){console.error(h)}finally{c(!1)}});t.rss&&m(),window.scrollTo(0,0)},[t]);const g=u.useMemo(()=>{if(!(r!=null&&r.episodes))return[];if(!d)return r.episodes;const m=We(d);return r.episodes.filter(h=>We(h.title).includes(m)||We(h.description).includes(m))},[r==null?void 0:r.episodes,d]);return e.jsxs("div",{className:"px-6",children:[e.jsxs("div",{className:"mb-6 mt-2",children:[e.jsx("h2",{className:"text-3xl font-black text-primary uppercase tracking-tighter mb-2",children:t.name}),e.jsxs("p",{className:"text-xs text-muted font-bold uppercase tracking-widest",children:[(r==null?void 0:r.episodes.length)||0," Episodios disponibles"]})]}),e.jsxs("div",{className:"relative mb-6",children:[e.jsx(Qe,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-muted",size:18}),e.jsx("input",{type:"text",placeholder:`Buscar en ${t.name}...`,value:d,onChange:m=>p(m.target.value),className:"w-full bg-surface border border-app rounded-2xl py-3 pl-12 pr-4 text-sm text-primary focus:outline-none focus:border-indigo-500 transition-colors"})]}),l?e.jsx("div",{className:"space-y-4",children:[1,2,3,4,5].map(m=>e.jsx(Lt,{},m))}):e.jsx(He,{episodes:g,onPlay:s,favorites:n,listened:i,currentEpisodeId:a,podcastImage:r==null?void 0:r.image,emptyMessage:d?"No se encontraron resultados.":"No hay episodios disponibles."})]})},Ka=({episodeGuid:t,episodeTitle:s})=>{const{comments:n,loading:i,addComment:a}=Be(t),[r,o]=u.useState(""),[l,c]=u.useState(!1),d=g=>V(null,null,function*(){if(g.preventDefault(),!!r.trim()){c(!0);try{yield a(r.trim(),s),o("")}catch(m){console.error("Error sending comment:",m)}finally{c(!1)}}}),p=g=>new Date(g).toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return e.jsxs("div",{className:"w-full max-w-2xl mx-auto mt-12 px-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-6 text-primary",children:[e.jsx(Ee,{size:20,className:"text-indigo-500"}),e.jsx("h3",{className:"text-xl font-bold",children:"Comentarios"}),e.jsx("span",{className:"text-sm font-medium text-muted bg-surface px-2 py-0.5 rounded-full border border-app",children:n.length})]}),e.jsxs("form",{onSubmit:d,className:"mb-8 relative",children:[e.jsx("input",{type:"text",value:r,onChange:g=>o(g.target.value),placeholder:"Escribe un comentario an√≥nimo...",className:"w-full bg-surface border-app border rounded-2xl py-4 pl-4 pr-12 text-primary focus:outline-none focus:border-indigo-500 transition-all shadow-sm",disabled:l}),e.jsx("button",{type:"submit",disabled:!r.trim()||l,className:"absolute right-2 top-1/2 -translate-y-1/2 p-2 bg-indigo-600 text-white rounded-xl disabled:opacity-50 disabled:bg-surface disabled:text-muted transition-all active:scale-95",children:e.jsx(Xe,{size:16})})]}),e.jsx("div",{className:"space-y-4",children:i?e.jsx("div",{className:"text-center py-8 text-muted text-sm",children:"Cargando comentarios..."}):n.length===0?e.jsx("div",{className:"text-center py-8 text-muted bg-surface/50 rounded-2xl border border-dashed border-app",children:e.jsx("p",{className:"text-sm",children:"S√© el primero en comentar."})}):n.map(g=>e.jsxs("div",{className:"bg-surface border border-app rounded-2xl p-4 animate-in fade-in slide-in-from-bottom-2 duration-300",children:[e.jsx("p",{className:"text-primary text-sm mb-2 font-medium leading-relaxed",children:g.text}),e.jsxs("div",{className:"flex items-center justify-between text-[10px] text-muted uppercase tracking-wider font-bold",children:[e.jsx("span",{children:g.author}),e.jsx("span",{children:p(g.timestamp)})]})]},g.id))})]})},Qa=({episode:t,currentEpisode:s,onPlay:n,favorites:i,onToggleFavorite:a,onOpenDonation:r})=>{const{likes:o,isLiked:l,toggleLike:c}=Oe(t.guid),{counts:d}=qe(),p=d[t.guid.replace(/[.#$[\]]/g,"_")]||0,g=u.useRef(null),m=()=>{var v;(v=g.current)==null||v.scrollIntoView({behavior:"smooth"})};u.useEffect(()=>{window.scrollTo(0,0)},[t]);const h=(s==null?void 0:s.guid)===t.guid,x=i.has(t.guid),b=()=>{const v=t.description.replace(/\*\*/g,""),k=v.length>180?v.substring(0,180)+"...":v,y="https://teovoz.com/",z={title:`TEOVOZ: ${t.title}`,text:`${t.title}

${k}

Escucha este resumen en TeoVoz:`,url:y};if(navigator.share)navigator.share(z).catch(console.error);else{const _=encodeURIComponent(`üéôÔ∏è ${z.title}

üìù ${k}

üéß Esc√∫chalo aqu√≠:
${y}`);window.open(`https://api.whatsapp.com/send?text=${_}`,"_blank")}},f=v=>v.split("**").map((k,y)=>y%2===1?e.jsx("strong",{className:"text-indigo-400 font-bold",children:k},y):k);return e.jsxs("div",{className:"pb-32 relative",children:[e.jsxs("div",{className:"relative w-full h-[400px] sm:h-[480px] overflow-hidden mb-8",children:[e.jsx("img",{src:t.image,className:"w-full h-full object-fill",alt:t.title}),e.jsx("div",{className:"absolute inset-0 z-20 bg-gradient-to-t from-app via-transparent to-transparent opacity-90"}),e.jsx("div",{className:"absolute inset-0 z-20 bg-gradient-to-b from-black/30 via-transparent to-transparent"}),e.jsx("div",{className:"absolute inset-0 z-30 flex items-center justify-center",children:e.jsx("button",{onClick:()=>n(t),className:`w-28 h-28 rounded-full border border-white/20 flex items-center justify-center text-white shadow-[0_0_60px_rgba(0,0,0,0.5)] transition-all ${h?"bg-indigo-600 ring-4 ring-indigo-600/20":"bg-black/40 opacity-95"}`,children:e.jsx(be,{size:44,fill:"currentColor",className:"ml-1.5 drop-shadow-[0_4px_12px_rgba(0,0,0,0.5)]"})})})]}),e.jsxs("div",{className:"px-6 flex flex-col items-center",children:[e.jsxs("div",{className:"flex items-center justify-center gap-3 mb-8 relative z-30 w-full flex-wrap sm:flex-nowrap",children:[e.jsxs("button",{onClick:()=>c(t.title),className:`flex flex-col items-center gap-1 p-3 rounded-xl min-w-[72px] transition-all active:scale-95 ${l?"bg-indigo-600 text-white shadow-lg shadow-indigo-600/20":"bg-surface border border-app text-muted hover:text-primary"}`,children:[e.jsxs("div",{className:"relative",children:[e.jsx(Re,{size:20,fill:l?"currentColor":"none"}),o>0&&e.jsx("span",{className:"absolute -top-2 -right-3 bg-app text-[8px] px-1.5 py-0.5 rounded-full border border-surface",children:o})]}),e.jsx("span",{className:"text-[9px] font-black uppercase tracking-widest mt-1",children:l?"GUSTADO":"ME GUSTA"})]}),e.jsxs("button",{onClick:r,className:"flex flex-col items-center gap-1 p-3 rounded-xl min-w-[72px] bg-orange-500 text-white shadow-lg shadow-orange-500/20 active:scale-95 transition-all",children:[e.jsx(ze,{size:20,fill:"currentColor"}),e.jsx("span",{className:"text-[9px] font-black uppercase tracking-widest mt-1",children:"DONAR"})]}),e.jsxs("button",{onClick:()=>a(t),className:`flex flex-col items-center gap-1 p-3 rounded-xl min-w-[72px] transition-all active:scale-95 ${x?"bg-red-500 text-white shadow-lg shadow-red-500/20":"bg-surface border border-app text-muted hover:text-primary"}`,children:[e.jsx(de,{size:20,fill:x?"currentColor":"none"}),e.jsx("span",{className:"text-[9px] font-black uppercase tracking-widest mt-1",children:x?"GUARDADO":"GUARDAR"})]}),e.jsxs("button",{onClick:b,className:"flex flex-col items-center gap-1 p-3 rounded-xl min-w-[72px] bg-surface border border-app text-muted hover:text-primary active:scale-95 transition-all",children:[e.jsx(ke,{size:20}),e.jsx("span",{className:"text-[9px] font-black uppercase tracking-widest mt-1",children:"SHARE"})]})]}),e.jsxs("button",{onClick:m,className:"w-full mb-8 py-3.5 rounded-2xl bg-surface border border-app text-primary font-black text-[10px] uppercase tracking-widest shadow-lg active:scale-[0.98] transition-all flex items-center justify-center gap-2 hover:bg-app",children:[e.jsx(Ee,{size:16,className:"text-indigo-500"}),"Agregar Comentario"]}),e.jsxs("div",{className:"w-full max-w-2xl text-center relative z-20",children:[e.jsx("h2",{className:"text-4xl font-black text-primary mb-8 leading-tight tracking-tighter drop-shadow-sm",children:t.title}),e.jsxs("div",{className:"text-left bg-surface p-8 rounded-[40px] border border-app text-muted text-base leading-relaxed whitespace-pre-line font-medium shadow-inner",children:[f(t.description),p>0&&e.jsxs("div",{className:"mt-6 flex items-center justify-center gap-2 text-orange-500 font-bold bg-orange-500/10 py-3 rounded-2xl animate-pulse",children:[e.jsx(Ce,{size:20,fill:"currentColor"}),e.jsxs("span",{children:[p," personas escuchando ahora"]})]})]})]}),e.jsx("div",{ref:g,className:"w-full scroll-mt-24",children:e.jsx(Ka,{episodeGuid:t.guid,episodeTitle:t.title})})]})]})},Xa=()=>(u.useEffect(()=>{window.scrollTo(0,0)},[window.location.pathname]),null),en=()=>e.jsxs("div",{className:"animate-in fade-in slide-in-from-bottom-4 duration-500 px-6 pb-20 py-6 max-w-2xl mx-auto",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[e.jsx("button",{onClick:()=>window.history.back(),className:"w-10 h-10 bg-surface rounded-full flex items-center justify-center border border-app text-primary hover:bg-surface-hover transition-colors",children:e.jsx(zt,{size:20})}),e.jsx("h1",{className:"text-2xl font-black text-primary tracking-tight",children:"Pol√≠tica de Privacidad"})]}),e.jsxs("div",{className:"bg-surface rounded-[32px] border border-app p-8 shadow-xl space-y-8",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-indigo-500 mb-2",children:[e.jsx(ta,{size:20}),e.jsx("span",{className:"font-black uppercase text-[10px] tracking-widest",children:"Protecci√≥n de Datos"})]}),e.jsx("p",{className:"text-muted text-xs font-bold uppercase tracking-wider",children:"√öltima actualizaci√≥n: 25 de diciembre de 2025"})]}),e.jsxs("section",{className:"space-y-4",children:[e.jsx("h2",{className:"text-lg font-bold text-primary",children:"1. Introducci√≥n"}),e.jsx("p",{className:"text-muted text-sm leading-relaxed",children:"Bienvenido a TeoVoz. En MigoCreativo, nos comprometemos a proteger su privacidad. Esta Pol√≠tica de Privacidad explica c√≥mo recopilamos, usamos, divulgamos y salvaguardamos su informaci√≥n cuando visita nuestra aplicaci√≥n m√≥vil TeoVoz."}),e.jsx("p",{className:"text-muted text-sm leading-relaxed italic",children:"Por favor, lea esta pol√≠tica de privacidad cuidadosamente. Si no est√° de acuerdo con los t√©rminos de esta pol√≠tica de privacidad, no acceda a la aplicaci√≥n."})]}),e.jsxs("section",{className:"space-y-4",children:[e.jsx("h2",{className:"text-lg font-bold text-primary",children:"2. Recopilaci√≥n de su Informaci√≥n"}),e.jsx("p",{className:"text-muted text-sm leading-relaxed",children:"Podemos recopilar informaci√≥n sobre usted de varias maneras. La informaci√≥n que podemos recopilar a trav√©s de la Aplicaci√≥n depende del contenido y los materiales que utilice, e incluye:"}),e.jsxs("div",{className:"space-y-4 mt-4",children:[e.jsxs("div",{className:"bg-app/50 p-4 rounded-2xl border border-app",children:[e.jsx("h3",{className:"text-primary font-bold text-sm mb-2",children:"A. Datos Personales"}),e.jsx("p",{className:"text-muted text-xs leading-relaxed",children:'Informaci√≥n de identificaci√≥n personal, como su nombre, direcci√≥n de correo electr√≥nico y contrase√±a, que nos proporciona voluntariamente cuando se registra en la Aplicaci√≥n para crear una cuenta. Esta informaci√≥n es necesaria para guardar su progreso de lectura, sus listas de favoritos ("Mi Biblioteca") y sus preferencias personales.'})]}),e.jsxs("div",{className:"bg-app/50 p-4 rounded-2xl border border-app",children:[e.jsx("h3",{className:"text-primary font-bold text-sm mb-2",children:"B. Datos Derivados"}),e.jsx("p",{className:"text-muted text-xs leading-relaxed",children:"La informaci√≥n que nuestros servidores recopilan autom√°ticamente cuando accede a la Aplicaci√≥n, como su tipo de dispositivo, su sistema operativo, su direcci√≥n IP y tiempos de acceso."})]}),e.jsxs("div",{className:"bg-app/50 p-4 rounded-2xl border border-app",children:[e.jsx("h3",{className:"text-primary font-bold text-sm mb-2",children:"C. Datos de la Aplicaci√≥n M√≥vil"}),e.jsxs("p",{className:"text-muted text-xs leading-relaxed",children:["Informaci√≥n sobre el uso de la aplicaci√≥n, incluyendo:",e.jsxs("ul",{className:"list-disc ml-4 mt-2 space-y-1",children:[e.jsx("li",{children:"Historial de Reproducci√≥n: Qu√© libros ha escuchado y su progreso."}),e.jsx("li",{children:'Interacciones: Libros guardados, valoraciones y "Retos TeoVoz" completados.'})]})]})]})]})]}),e.jsxs("section",{className:"space-y-4",children:[e.jsx("h2",{className:"text-lg font-bold text-primary",children:"3. Uso de su Informaci√≥n"}),e.jsx("p",{className:"text-muted text-sm leading-relaxed",children:"Tener informaci√≥n precisa sobre usted nos permite ofrecerle una experiencia fluida, eficiente y personalizada. Espec√≠ficamente, podemos utilizar la informaci√≥n recopilada sobre usted a trav√©s de la Aplicaci√≥n para:"}),e.jsxs("ul",{className:"list-disc ml-6 text-muted text-sm space-y-2",children:[e.jsx("li",{children:"Crear y administrar su cuenta."}),e.jsx("li",{children:"Personalizar su experiencia y recomendar libros basados en sus intereses (ej. Productividad, Espiritualidad)."}),e.jsx("li",{children:"Enviarle notificaciones sobre actualizaciones de la aplicaci√≥n o nuevos res√∫menes a√±adidos."}),e.jsx("li",{children:"Monitorizar y analizar el uso y las tendencias para mejorar su experiencia con la Aplicaci√≥n."}),e.jsx("li",{children:"Prevenir transacciones fraudulentas y monitorear contra el robo y proteger contra actividades delictivas."})]})]}),e.jsxs("section",{className:"space-y-4",children:[e.jsx("h2",{className:"text-lg font-bold text-primary",children:"4. Divulgaci√≥n de su Informaci√≥n"}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-muted text-sm leading-relaxed",children:"Podemos compartir informaci√≥n que hemos recopilado sobre usted en ciertas situaciones:"}),e.jsxs("div",{className:"grid gap-3",children:[e.jsxs("div",{className:"border border-app p-4 rounded-2xl",children:[e.jsx("p",{className:"text-primary font-bold text-xs mb-1",children:"Por Ley o para Proteger Derechos"}),e.jsx("p",{className:"text-muted text-xs",children:"Si creemos que la divulgaci√≥n es necesaria para responder a un proceso legal o para investigar violaciones de nuestras pol√≠ticas."})]}),e.jsxs("div",{className:"border border-app p-4 rounded-2xl",children:[e.jsx("p",{className:"text-primary font-bold text-xs mb-1",children:"Proveedores de Servicios Externos"}),e.jsx("p",{className:"text-muted text-xs",children:"Podemos compartir su informaci√≥n con terceros que realizan servicios como an√°lisis de datos (Google Analytics/Firebase) y alojamiento."})]})]})]})]}),e.jsxs("section",{className:"space-y-4",children:[e.jsx("h2",{className:"text-lg font-bold text-primary",children:"5. Seguridad de su Informaci√≥n"}),e.jsx("p",{className:"text-muted text-sm leading-relaxed",children:"Utilizamos medidas de seguridad administrativas, t√©cnicas y f√≠sicas para ayudar a proteger su informaci√≥n personal. Aunque hemos tomado medidas razonables, ninguna medida de seguridad es impenetrable y ninguna transmisi√≥n de datos puede garantizarse contra intercepci√≥n."})]}),e.jsxs("section",{className:"space-y-4",children:[e.jsx("h2",{className:"text-lg font-bold text-primary",children:"6. Pol√≠tica para Ni√±os"}),e.jsx("p",{className:"text-muted text-sm leading-relaxed",children:"No solicitamos informaci√≥n a menores de 13 a√±os a sabiendas ni comercializamos con ellos. Si tiene conocimiento de que hemos recopilado datos de un menor de 13 a√±os, p√≥ngase en contacto con nosotros."})]}),e.jsxs("section",{className:"space-y-4",children:[e.jsx("h2",{className:"text-lg font-bold text-primary",children:"7. Opciones sobre su Informaci√≥n"}),e.jsx("p",{className:"text-muted text-sm leading-relaxed font-bold",children:"Informaci√≥n de la Cuenta"}),e.jsx("p",{className:"text-muted text-sm leading-relaxed",children:"En cualquier momento puede revisar o cambiar la informaci√≥n en su cuenta o cancelar su cuenta contact√°ndonos usando la informaci√≥n de contacto proporcionada."})]}),e.jsxs("section",{className:"space-y-4 border-t border-app pt-8",children:[e.jsx("h2",{className:"text-lg font-bold text-primary",children:"8. Contacto"}),e.jsxs("div",{className:"bg-indigo-500/5 border border-indigo-500/20 p-6 rounded-3xl",children:[e.jsx("p",{className:"text-indigo-500 font-black text-sm mb-1",children:"MigoCreativo"}),e.jsx("p",{className:"text-muted text-sm",children:"Desarrollador"}),e.jsx("a",{href:"mailto:Migocreativo.com@gmail.com",className:"text-primary font-bold text-sm block mt-4 hover:text-indigo-500 transition-colors",children:"Migocreativo.com@gmail.com"})]})]})]}),e.jsx("div",{className:"text-center pt-10",children:e.jsx("p",{className:"text-[10px] text-muted font-black uppercase tracking-[0.2em]",children:"¬© 2025 TeoVoz por MigoCreativo"})})]}),tn=({onComplete:t})=>{const[s,n]=u.useState(null),[i,a]=u.useState(!1),[r,o]=u.useState(!1);u.useEffect(()=>{const d=window.navigator.userAgent.toLowerCase();a(/iphone|ipad|ipod/.test(d));const p=window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone;o(p);const g=m=>{m.preventDefault(),n(m)};return window.addEventListener("beforeinstallprompt",g),()=>window.removeEventListener("beforeinstallprompt",g)},[]);const l=()=>V(null,null,function*(){if(!s)return;s.prompt();const{outcome:d}=yield s.userChoice;d==="accepted"&&n(null)}),c=()=>V(null,null,function*(){const d={title:"TeoVoz",text:"Descubre TeoVoz: Res√∫menes de libros en 15 minutos.",url:window.location.origin};if(navigator.share)try{yield navigator.share(d)}catch(p){console.log("Share canceled")}else navigator.clipboard.writeText(`${d.text} ${d.url}`),alert("Enlace copiado al portapapeles")});return e.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-4 bg-black/80 backdrop-blur-sm animate-in fade-in duration-300",children:e.jsxs("div",{className:"bg-surface border border-app rounded-[32px] w-full max-w-sm flex flex-col shadow-2xl relative overflow-hidden",children:[e.jsxs("div",{className:"relative h-40 bg-gradient-to-br from-indigo-900 to-purple-900 flex flex-col items-center justify-center text-center p-6",children:[e.jsx("div",{className:"absolute inset-0 bg-[url('/Logo%20PNG.png')] bg-center bg-cover opacity-10 blur-sm"}),e.jsx("div",{className:"relative z-10 p-3 bg-surface/20 backdrop-blur-md rounded-2xl mb-3 shadow-xl border border-white/10",children:e.jsx(Pe,{size:32,className:"text-yellow-400 fill-yellow-400"})}),e.jsx("h2",{className:"relative z-10 text-2xl font-black text-white tracking-tight leading-none",children:"TeoVoz"}),e.jsx("p",{className:"relative z-10 text-[10px] text-white/70 uppercase tracking-widest font-bold mt-1",children:"Conocimiento en Audio"})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsx("div",{className:"text-center space-y-2",children:e.jsx("p",{className:"text-sm text-muted font-medium leading-relaxed",children:"Accede a cientos de res√∫menes de libros. Aprende, crece y mejora tu vida en minutos."})}),!r&&e.jsx("div",{className:"bg-surface/50 border border-app rounded-xl p-4",children:i?e.jsxs("div",{className:"space-y-3",children:[e.jsxs("h3",{className:"text-xs font-bold text-primary flex items-center gap-2",children:[e.jsx("div",{className:"p-1 bg-white/10 rounded-md",children:e.jsx(ke,{size:12})}),"Instalar en iPhone/iPad"]}),e.jsxs("div",{className:"text-[11px] text-muted leading-snug space-y-1",children:[e.jsxs("p",{children:["1. Toca el bot√≥n ",e.jsx("strong",{children:"Compartir"})," ",e.jsx("span",{className:"inline-block align-middle",children:e.jsx(ke,{size:10})})," abajo en safari."]}),e.jsxs("p",{children:["2. Selecciona ",e.jsx("strong",{children:'"Agregar al Inicio"'})," ",e.jsx("span",{className:"inline-block align-middle border border-white/20 rounded-[2px] w-3 h-3 text-[8px] leading-3 text-center",children:"+"})]})]})]}):s?e.jsxs("button",{onClick:l,className:"w-full py-3 bg-emerald-600 hover:bg-emerald-700 text-white rounded-xl font-bold text-sm shadow-lg shadow-emerald-900/20 active:scale-95 transition-all flex items-center justify-center gap-2",children:[e.jsx(Pe,{size:16,fill:"currentColor"})," Instalar Aplicaci√≥n"]}):e.jsx("p",{className:"text-[10px] text-center text-muted",children:"A√±ade TeoVoz a tu pantalla de inicio para la mejor experiencia."})}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("button",{onClick:c,className:"flex flex-col items-center justify-center gap-2 p-3 rounded-2xl bg-surface border border-app hover:bg-white/5 transition-colors group",children:[e.jsx(ke,{size:20,className:"text-indigo-400 group-hover:scale-110 transition-transform"}),e.jsx("span",{className:"text-xs font-bold text-muted",children:"Compartir"})]}),e.jsxs("button",{onClick:t,className:"flex flex-col items-center justify-center gap-2 p-3 rounded-2xl bg-indigo-600 text-white hover:bg-indigo-700 shadow-lg shadow-indigo-600/20 transition-all active:scale-95",children:[e.jsx(St,{size:20,className:"stroke-[3]"}),e.jsx("span",{className:"text-xs font-bold",children:"Comenzar"})]})]})]})]})})},sn=({newEpisodes:t,onClose:s,onView:n})=>{if(t.length===0)return null;const i=t.length,a=t[0],r=a.pubDate?new Date(a.pubDate).toLocaleDateString("es-ES",{day:"numeric",month:"short"}):null;return e.jsx("div",{className:"fixed top-20 left-4 right-4 z-[200] animate-in slide-in-from-top-4 duration-500",children:e.jsxs("div",{className:"bg-zinc-900 border border-indigo-500/30 shadow-2xl shadow-indigo-500/20 rounded-2xl p-3 flex items-start gap-4",children:[e.jsx("div",{className:"shrink-0",children:a.image?e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:a.image,alt:a.title,className:"w-16 h-16 rounded-xl object-cover shadow-md border border-white/10"}),e.jsx("div",{className:"absolute -bottom-1 -right-1 bg-indigo-500 rounded-full p-1 shadow-sm border border-zinc-900",children:e.jsx(ge,{size:10,className:"text-white"})})]}):e.jsx("div",{className:"w-16 h-16 bg-indigo-500 rounded-xl flex items-center justify-center shadow-lg shadow-indigo-500/40 animate-pulse",children:e.jsx(ge,{size:24,className:"text-white"})})}),e.jsxs("div",{className:"flex-1 min-w-0 py-0.5",children:[e.jsx("h4",{className:"text-[10px] font-black uppercase tracking-widest text-indigo-400 mb-1",children:i===1?"¬°Nuevo Episodio Disponible!":`¬°${i} Nuevos Episodios!`}),e.jsx("h3",{className:"text-sm font-bold text-white leading-tight line-clamp-2 mb-2",children:i===1?a.title:"Hay nuevos episodios esperando por ti."}),i===1&&e.jsxs("div",{className:"flex items-center gap-3 text-[10px] text-zinc-400",children:[r&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Ke,{size:10}),r]}),a.duration&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(ye,{size:10}),a.duration]})]})]}),e.jsxs("div",{className:"flex flex-col gap-2 pt-0.5",children:[e.jsx("button",{onClick:s,className:"self-end p-1.5 text-zinc-400 hover:text-white transition-colors",children:e.jsx(ie,{size:16})}),e.jsx("button",{onClick:()=>{i>1,n(a)},className:"bg-indigo-600 text-white px-3 py-1.5 rounded-lg text-[10px] font-bold uppercase tracking-wide hover:bg-indigo-700 active:scale-95 transition-all shadow-lg shadow-indigo-900/20",children:"Escuchar"})]})]})})},an=({onClose:t,onEpisodeSelect:s})=>{const[n,i]=u.useState([]),[a,r]=u.useState(!0);u.useEffect(()=>{V(null,null,function*(){try{const c=xe.filter(m=>m.rss),d=yield Promise.all(c.map(m=>ue(m.rss).catch(()=>null)));let p=[];d.forEach(m=>{m&&(p=[...p,...m.episodes.slice(0,10)])}),p.sort((m,h)=>new Date(h.pubDate).getTime()-new Date(m.pubDate).getTime());const g=Array.from(new Map(p.map(m=>[m.guid,m])).values());i(g.slice(0,15))}catch(c){console.error("Error loading new episodes:",c)}finally{r(!1)}})},[]);const o=new Date().toLocaleDateString("es-ES",{weekday:"long",day:"numeric",month:"long"});return e.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-4 bg-black/80 backdrop-blur-sm animate-in fade-in duration-300",children:e.jsxs("div",{className:"bg-surface border border-app w-full max-w-lg max-h-[85vh] rounded-3xl flex flex-col shadow-2xl animate-in zoom-in-95 duration-300",children:[e.jsxs("div",{className:"p-6 border-b border-app flex items-start justify-between bg-surface rounded-t-3xl",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 text-indigo-500 mb-2",children:[e.jsx(ge,{size:20,className:"animate-pulse"}),e.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest",children:"Novedades Diarias"})]}),e.jsx("h2",{className:"text-2xl font-black text-primary tracking-tighter uppercase leading-none",children:"Lo Nuevo de Hoy"}),e.jsxs("p",{className:"text-xs text-muted mt-1 font-medium capitalize flex items-center gap-1",children:[e.jsx(Ke,{size:12})," ",o]})]}),e.jsx("button",{onClick:t,className:"p-2 rounded-xl bg-app border border-app text-muted hover:text-primary active:scale-95 transition-all",children:e.jsx(ie,{size:20})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-0",children:a?e.jsx("div",{className:"p-6 space-y-4",children:[1,2,3].map(l=>e.jsx(le,{className:"h-24 w-full rounded-2xl"},l))}):n.length>0?e.jsx("div",{className:"pb-6",children:e.jsx(He,{episodes:n,onPlay:l=>{s(l),t()},favorites:new Set,listened:new Set,showPodcastTitle:!0})}):e.jsx("div",{className:"p-12 text-center text-muted",children:e.jsx("p",{className:"text-sm",children:"No se encontraron nuevos episodios hoy."})})}),e.jsx("div",{className:"p-4 border-t border-app bg-surface rounded-b-3xl",children:e.jsx("button",{onClick:t,className:"w-full py-4 bg-indigo-600 text-white rounded-2xl font-black uppercase tracking-widest text-xs active:scale-95 transition-transform shadow-lg shadow-indigo-600/20",children:"Entendido"})})]})})};let Ye={},Tt;function Ue(t={}){Ye=Y({animate:!0,allowClose:!0,overlayClickBehavior:"close",overlayOpacity:.7,smoothScroll:!1,disableActiveInteraction:!1,showProgress:!1,stagePadding:10,stageRadius:5,popoverOffset:10,showButtons:["next","previous","close"],disableButtons:[],overlayColor:"#000"},t)}function w(t){return t?Ye[t]:Ye}function nn(t){Tt=t}function ne(){return Tt}let Ae={};function $e(t,s){Ae[t]=s}function fe(t){var s;(s=Ae[t])==null||s.call(Ae)}function rn(){Ae={}}function Ie(t,s,n,i){return(t/=i/2)<1?n/2*t*t+s:-n/2*(--t*(t-2)-1)+s}function Dt(t){const s='a[href]:not([disabled]), button:not([disabled]), textarea:not([disabled]), input[type="text"]:not([disabled]), input[type="radio"]:not([disabled]), input[type="checkbox"]:not([disabled]), select:not([disabled])';return t.flatMap(n=>{const i=n.matches(s),a=Array.from(n.querySelectorAll(s));return[...i?[n]:[],...a]}).filter(n=>getComputedStyle(n).pointerEvents!=="none"&&cn(n))}function Rt(t){if(!t||ln(t))return;const s=w("smoothScroll"),n=t.offsetHeight>window.innerHeight;t.scrollIntoView({behavior:!s||on(t)?"auto":"smooth",inline:"center",block:n?"start":"center"})}function on(t){if(!t||!t.parentElement)return;const s=t.parentElement;return s.scrollHeight>s.clientHeight}function ln(t){const s=t.getBoundingClientRect();return s.top>=0&&s.left>=0&&s.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&s.right<=(window.innerWidth||document.documentElement.clientWidth)}function cn(t){return!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)}let Le={};function J(t,s){Le[t]=s}function N(t){return t?Le[t]:Le}function ht(){Le={}}function dn(t,s,n,i){let a=N("__activeStagePosition");const r=a||n.getBoundingClientRect(),o=i.getBoundingClientRect(),l=Ie(t,r.x,o.x-r.x,s),c=Ie(t,r.y,o.y-r.y,s),d=Ie(t,r.width,o.width-r.width,s),p=Ie(t,r.height,o.height-r.height,s);a={x:l,y:c,width:d,height:p},Bt(a),J("__activeStagePosition",a)}function Ot(t){if(!t)return;const s=t.getBoundingClientRect(),n={x:s.x,y:s.y,width:s.width,height:s.height};J("__activeStagePosition",n),Bt(n)}function pn(){const t=N("__activeStagePosition"),s=N("__overlaySvg");if(!t)return;if(!s){console.warn("No stage svg found.");return}const n=window.innerWidth,i=window.innerHeight;s.setAttribute("viewBox",`0 0 ${n} ${i}`)}function mn(t){const s=un(t);document.body.appendChild(s),Vt(s,n=>{n.target.tagName==="path"&&fe("overlayClick")}),J("__overlaySvg",s)}function Bt(t){const s=N("__overlaySvg");if(!s){mn(t);return}const n=s.firstElementChild;if((n==null?void 0:n.tagName)!=="path")throw new Error("no path element found in stage svg");n.setAttribute("d",qt(t))}function un(t){const s=window.innerWidth,n=window.innerHeight,i=document.createElementNS("http://www.w3.org/2000/svg","svg");i.classList.add("driver-overlay","driver-overlay-animated"),i.setAttribute("viewBox",`0 0 ${s} ${n}`),i.setAttribute("xmlSpace","preserve"),i.setAttribute("xmlnsXlink","http://www.w3.org/1999/xlink"),i.setAttribute("version","1.1"),i.setAttribute("preserveAspectRatio","xMinYMin slice"),i.style.fillRule="evenodd",i.style.clipRule="evenodd",i.style.strokeLinejoin="round",i.style.strokeMiterlimit="2",i.style.zIndex="10000",i.style.position="fixed",i.style.top="0",i.style.left="0",i.style.width="100%",i.style.height="100%";const a=document.createElementNS("http://www.w3.org/2000/svg","path");return a.setAttribute("d",qt(t)),a.style.fill=w("overlayColor")||"rgb(0,0,0)",a.style.opacity=`${w("overlayOpacity")}`,a.style.pointerEvents="auto",a.style.cursor="auto",i.appendChild(a),i}function qt(t){const s=window.innerWidth,n=window.innerHeight,i=w("stagePadding")||0,a=w("stageRadius")||0,r=t.width+i*2,o=t.height+i*2,l=Math.min(a,r/2,o/2),c=Math.floor(Math.max(l,0)),d=t.x-i+c,p=t.y-i,g=r-c*2,m=o-c*2;return`M${s},0L0,0L0,${n}L${s},${n}L${s},0Z
    M${d},${p} h${g} a${c},${c} 0 0 1 ${c},${c} v${m} a${c},${c} 0 0 1 -${c},${c} h-${g} a${c},${c} 0 0 1 -${c},-${c} v-${m} a${c},${c} 0 0 1 ${c},-${c} z`}function xn(){const t=N("__overlaySvg");t&&t.remove()}function hn(){const t=document.getElementById("driver-dummy-element");if(t)return t;let s=document.createElement("div");return s.id="driver-dummy-element",s.style.width="0",s.style.height="0",s.style.pointerEvents="none",s.style.opacity="0",s.style.position="fixed",s.style.top="50%",s.style.left="50%",document.body.appendChild(s),s}function gt(t){const{element:s}=t;let n=typeof s=="function"?s():typeof s=="string"?document.querySelector(s):s;n||(n=hn()),fn(n,t)}function gn(){const t=N("__activeElement"),s=N("__activeStep");t&&(Ot(t),pn(),Wt(t,s))}function fn(t,s){var n;const i=Date.now(),a=N("__activeStep"),r=N("__activeElement")||t,o=!r||r===t,l=t.id==="driver-dummy-element",c=r.id==="driver-dummy-element",d=w("animate"),p=s.onHighlightStarted||w("onHighlightStarted"),g=(s==null?void 0:s.onHighlighted)||w("onHighlighted"),m=(a==null?void 0:a.onDeselected)||w("onDeselected"),h=w(),x=N();!o&&m&&m(c?void 0:r,a,{config:h,state:x,driver:ne()}),p&&p(l?void 0:t,s,{config:h,state:x,driver:ne()});const b=!o&&d;let f=!1;jn(),J("previousStep",a),J("previousElement",r),J("activeStep",s),J("activeElement",t);const v=()=>{if(N("__transitionCallback")!==v)return;const k=Date.now()-i,y=400-k<=400/2;s.popover&&y&&!f&&b&&(ft(t,s),f=!0),w("animate")&&k<400?dn(k,400,r,t):(Ot(t),g&&g(l?void 0:t,s,{config:w(),state:N(),driver:ne()}),J("__transitionCallback",void 0),J("__previousStep",a),J("__previousElement",r),J("__activeStep",s),J("__activeElement",t)),window.requestAnimationFrame(v)};J("__transitionCallback",v),window.requestAnimationFrame(v),Rt(t),!b&&s.popover&&ft(t,s),r.classList.remove("driver-active-element","driver-no-interaction"),r.removeAttribute("aria-haspopup"),r.removeAttribute("aria-expanded"),r.removeAttribute("aria-controls"),((n=s.disableActiveInteraction)!=null?n:w("disableActiveInteraction"))&&t.classList.add("driver-no-interaction"),t.classList.add("driver-active-element"),t.setAttribute("aria-haspopup","dialog"),t.setAttribute("aria-expanded","true"),t.setAttribute("aria-controls","driver-popover-content")}function bn(){var t;(t=document.getElementById("driver-dummy-element"))==null||t.remove(),document.querySelectorAll(".driver-active-element").forEach(s=>{s.classList.remove("driver-active-element","driver-no-interaction"),s.removeAttribute("aria-haspopup"),s.removeAttribute("aria-expanded"),s.removeAttribute("aria-controls")})}function _e(){const t=N("__resizeTimeout");t&&window.cancelAnimationFrame(t),J("__resizeTimeout",window.requestAnimationFrame(gn))}function vn(t){var s;if(!N("isInitialized")||!(t.key==="Tab"||t.keyCode===9))return;const n=N("__activeElement"),i=(s=N("popover"))==null?void 0:s.wrapper,a=Dt([...i?[i]:[],...n?[n]:[]]),r=a[0],o=a[a.length-1];if(t.preventDefault(),t.shiftKey){const l=a[a.indexOf(document.activeElement)-1]||o;l==null||l.focus()}else{const l=a[a.indexOf(document.activeElement)+1]||r;l==null||l.focus()}}function Ht(t){var s;((s=w("allowKeyboardControl"))==null||s)&&(t.key==="Escape"?fe("escapePress"):t.key==="ArrowRight"?fe("arrowRightPress"):t.key==="ArrowLeft"&&fe("arrowLeftPress"))}function Vt(t,s,n){const i=(a,r)=>{const o=a.target;t.contains(o)&&((!n||n(o))&&(a.preventDefault(),a.stopPropagation(),a.stopImmediatePropagation()),r==null||r(a))};document.addEventListener("pointerdown",i,!0),document.addEventListener("mousedown",i,!0),document.addEventListener("pointerup",i,!0),document.addEventListener("mouseup",i,!0),document.addEventListener("click",a=>{i(a,s)},!0)}function wn(){window.addEventListener("keyup",Ht,!1),window.addEventListener("keydown",vn,!1),window.addEventListener("resize",_e),window.addEventListener("scroll",_e)}function yn(){window.removeEventListener("keyup",Ht),window.removeEventListener("resize",_e),window.removeEventListener("scroll",_e)}function jn(){const t=N("popover");t&&(t.wrapper.style.display="none")}function ft(t,s){var n,i;let a=N("popover");a&&document.body.removeChild(a.wrapper),a=kn(),document.body.appendChild(a.wrapper);const{title:r,description:o,showButtons:l,disableButtons:c,showProgress:d,nextBtnText:p=w("nextBtnText")||"Next &rarr;",prevBtnText:g=w("prevBtnText")||"&larr; Previous",progressText:m=w("progressText")||"{current} of {total}"}=s.popover||{};a.nextButton.innerHTML=p,a.previousButton.innerHTML=g,a.progress.innerHTML=m,r?(a.title.innerHTML=r,a.title.style.display="block"):a.title.style.display="none",o?(a.description.innerHTML=o,a.description.style.display="block"):a.description.style.display="none";const h=l||w("showButtons"),x=d||w("showProgress")||!1,b=(h==null?void 0:h.includes("next"))||(h==null?void 0:h.includes("previous"))||x;a.closeButton.style.display=h.includes("close")?"block":"none",b?(a.footer.style.display="flex",a.progress.style.display=x?"block":"none",a.nextButton.style.display=h.includes("next")?"block":"none",a.previousButton.style.display=h.includes("previous")?"block":"none"):a.footer.style.display="none";const f=c||w("disableButtons")||[];f!=null&&f.includes("next")&&(a.nextButton.disabled=!0,a.nextButton.classList.add("driver-popover-btn-disabled")),f!=null&&f.includes("previous")&&(a.previousButton.disabled=!0,a.previousButton.classList.add("driver-popover-btn-disabled")),f!=null&&f.includes("close")&&(a.closeButton.disabled=!0,a.closeButton.classList.add("driver-popover-btn-disabled"));const v=a.wrapper;v.style.display="block",v.style.left="",v.style.top="",v.style.bottom="",v.style.right="",v.id="driver-popover-content",v.setAttribute("role","dialog"),v.setAttribute("aria-labelledby","driver-popover-title"),v.setAttribute("aria-describedby","driver-popover-description");const k=a.arrow;k.className="driver-popover-arrow";const y=((n=s.popover)==null?void 0:n.popoverClass)||w("popoverClass")||"";v.className=`driver-popover ${y}`.trim(),Vt(a.wrapper,P=>{var B,X,ee;const q=P.target,te=((B=s.popover)==null?void 0:B.onNextClick)||w("onNextClick"),I=((X=s.popover)==null?void 0:X.onPrevClick)||w("onPrevClick"),T=((ee=s.popover)==null?void 0:ee.onCloseClick)||w("onCloseClick");if(q.closest(".driver-popover-next-btn"))return te?te(t,s,{config:w(),state:N(),driver:ne()}):fe("nextClick");if(q.closest(".driver-popover-prev-btn"))return I?I(t,s,{config:w(),state:N(),driver:ne()}):fe("prevClick");if(q.closest(".driver-popover-close-btn"))return T?T(t,s,{config:w(),state:N(),driver:ne()}):fe("closeClick")},P=>!(a!=null&&a.description.contains(P))&&!(a!=null&&a.title.contains(P))&&typeof P.className=="string"&&P.className.includes("driver-popover")),J("popover",a);const z=((i=s.popover)==null?void 0:i.onPopoverRender)||w("onPopoverRender");z&&z(a,{config:w(),state:N(),driver:ne()}),Wt(t,s),Rt(v);const _=t.classList.contains("driver-dummy-element"),E=Dt([v,..._?[]:[t]]);E.length>0&&E[0].focus()}function Ft(){const t=N("popover");if(!(t!=null&&t.wrapper))return;const s=t.wrapper.getBoundingClientRect(),n=w("stagePadding")||0,i=w("popoverOffset")||0;return{width:s.width+n+i,height:s.height+n+i,realWidth:s.width,realHeight:s.height}}function bt(t,s){const{elementDimensions:n,popoverDimensions:i,popoverPadding:a,popoverArrowDimensions:r}=s;return t==="start"?Math.max(Math.min(n.top-a,window.innerHeight-i.realHeight-r.width),r.width):t==="end"?Math.max(Math.min(n.top-(i==null?void 0:i.realHeight)+n.height+a,window.innerHeight-(i==null?void 0:i.realHeight)-r.width),r.width):t==="center"?Math.max(Math.min(n.top+n.height/2-(i==null?void 0:i.realHeight)/2,window.innerHeight-(i==null?void 0:i.realHeight)-r.width),r.width):0}function vt(t,s){const{elementDimensions:n,popoverDimensions:i,popoverPadding:a,popoverArrowDimensions:r}=s;return t==="start"?Math.max(Math.min(n.left-a,window.innerWidth-i.realWidth-r.width),r.width):t==="end"?Math.max(Math.min(n.left-(i==null?void 0:i.realWidth)+n.width+a,window.innerWidth-(i==null?void 0:i.realWidth)-r.width),r.width):t==="center"?Math.max(Math.min(n.left+n.width/2-(i==null?void 0:i.realWidth)/2,window.innerWidth-(i==null?void 0:i.realWidth)-r.width),r.width):0}function Wt(t,s){const n=N("popover");if(!n)return;const{align:i="start",side:a="left"}=(s==null?void 0:s.popover)||{},r=i,o=t.id==="driver-dummy-element"?"over":a,l=w("stagePadding")||0,c=Ft(),d=n.arrow.getBoundingClientRect(),p=t.getBoundingClientRect(),g=p.top-c.height;let m=g>=0;const h=window.innerHeight-(p.bottom+c.height);let x=h>=0;const b=p.left-c.width;let f=b>=0;const v=window.innerWidth-(p.right+c.width);let k=v>=0;const y=!m&&!x&&!f&&!k;let z=o;if(o==="top"&&m?k=f=x=!1:o==="bottom"&&x?k=f=m=!1:o==="left"&&f?k=m=x=!1:o==="right"&&k&&(f=m=x=!1),o==="over"){const _=window.innerWidth/2-c.realWidth/2,E=window.innerHeight/2-c.realHeight/2;n.wrapper.style.left=`${_}px`,n.wrapper.style.right="auto",n.wrapper.style.top=`${E}px`,n.wrapper.style.bottom="auto"}else if(y){const _=window.innerWidth/2-(c==null?void 0:c.realWidth)/2,E=10;n.wrapper.style.left=`${_}px`,n.wrapper.style.right="auto",n.wrapper.style.bottom=`${E}px`,n.wrapper.style.top="auto"}else if(f){const _=Math.min(b,window.innerWidth-(c==null?void 0:c.realWidth)-d.width),E=bt(r,{elementDimensions:p,popoverDimensions:c,popoverPadding:l,popoverArrowDimensions:d});n.wrapper.style.left=`${_}px`,n.wrapper.style.top=`${E}px`,n.wrapper.style.bottom="auto",n.wrapper.style.right="auto",z="left"}else if(k){const _=Math.min(v,window.innerWidth-(c==null?void 0:c.realWidth)-d.width),E=bt(r,{elementDimensions:p,popoverDimensions:c,popoverPadding:l,popoverArrowDimensions:d});n.wrapper.style.right=`${_}px`,n.wrapper.style.top=`${E}px`,n.wrapper.style.bottom="auto",n.wrapper.style.left="auto",z="right"}else if(m){const _=Math.min(g,window.innerHeight-c.realHeight-d.width);let E=vt(r,{elementDimensions:p,popoverDimensions:c,popoverPadding:l,popoverArrowDimensions:d});n.wrapper.style.top=`${_}px`,n.wrapper.style.left=`${E}px`,n.wrapper.style.bottom="auto",n.wrapper.style.right="auto",z="top"}else if(x){const _=Math.min(h,window.innerHeight-(c==null?void 0:c.realHeight)-d.width);let E=vt(r,{elementDimensions:p,popoverDimensions:c,popoverPadding:l,popoverArrowDimensions:d});n.wrapper.style.left=`${E}px`,n.wrapper.style.bottom=`${_}px`,n.wrapper.style.top="auto",n.wrapper.style.right="auto",z="bottom"}y?n.arrow.classList.add("driver-popover-arrow-none"):Nn(r,z,t)}function Nn(t,s,n){const i=N("popover");if(!i)return;const a=n.getBoundingClientRect(),r=Ft(),o=i.arrow,l=r.width,c=window.innerWidth,d=a.width,p=a.left,g=r.height,m=window.innerHeight,h=a.top,x=a.height;o.className="driver-popover-arrow";let b=s,f=t;if(s==="top"?(p+d<=0?(b="right",f="end"):p+d-l<=0&&(b="top",f="start"),p>=c?(b="left",f="end"):p+l>=c&&(b="top",f="end")):s==="bottom"?(p+d<=0?(b="right",f="start"):p+d-l<=0&&(b="bottom",f="start"),p>=c?(b="left",f="start"):p+l>=c&&(b="bottom",f="end")):s==="left"?(h+x<=0?(b="bottom",f="end"):h+x-g<=0&&(b="left",f="start"),h>=m?(b="top",f="end"):h+g>=m&&(b="left",f="end")):s==="right"&&(h+x<=0?(b="bottom",f="start"):h+x-g<=0&&(b="right",f="start"),h>=m?(b="top",f="start"):h+g>=m&&(b="right",f="end")),!b)o.classList.add("driver-popover-arrow-none");else{o.classList.add(`driver-popover-arrow-side-${b}`),o.classList.add(`driver-popover-arrow-align-${f}`);const v=n.getBoundingClientRect(),k=o.getBoundingClientRect(),y=w("stagePadding")||0,z=v.left-y<window.innerWidth&&v.right+y>0&&v.top-y<window.innerHeight&&v.bottom+y>0;s==="bottom"&&z&&(k.x>v.x&&k.x+k.width<v.x+v.width?i.wrapper.style.transform="translateY(0)":(o.classList.remove(`driver-popover-arrow-align-${f}`),o.classList.add("driver-popover-arrow-none"),i.wrapper.style.transform=`translateY(-${y/2}px)`))}}function kn(){const t=document.createElement("div");t.classList.add("driver-popover");const s=document.createElement("div");s.classList.add("driver-popover-arrow");const n=document.createElement("header");n.id="driver-popover-title",n.classList.add("driver-popover-title"),n.style.display="none",n.innerText="Popover Title";const i=document.createElement("div");i.id="driver-popover-description",i.classList.add("driver-popover-description"),i.style.display="none",i.innerText="Popover description is here";const a=document.createElement("button");a.type="button",a.classList.add("driver-popover-close-btn"),a.setAttribute("aria-label","Close"),a.innerHTML="&times;";const r=document.createElement("footer");r.classList.add("driver-popover-footer");const o=document.createElement("span");o.classList.add("driver-popover-progress-text"),o.innerText="";const l=document.createElement("span");l.classList.add("driver-popover-navigation-btns");const c=document.createElement("button");c.type="button",c.classList.add("driver-popover-prev-btn"),c.innerHTML="&larr; Previous";const d=document.createElement("button");return d.type="button",d.classList.add("driver-popover-next-btn"),d.innerHTML="Next &rarr;",l.appendChild(c),l.appendChild(d),r.appendChild(o),r.appendChild(l),t.appendChild(a),t.appendChild(s),t.appendChild(n),t.appendChild(i),t.appendChild(r),{wrapper:t,arrow:s,title:n,description:i,footer:r,previousButton:c,nextButton:d,closeButton:a,footerButtons:l,progress:o}}function Sn(){var t;const s=N("popover");s&&((t=s.wrapper.parentElement)==null||t.removeChild(s.wrapper))}function zn(t={}){Ue(t);function s(){w("allowClose")&&p()}function n(){const m=w("overlayClickBehavior");if(w("allowClose")&&m==="close"){p();return}if(typeof m=="function"){const h=N("__activeStep"),x=N("__activeElement");m(x,h,{config:w(),state:N(),driver:ne()});return}m==="nextStep"&&i()}function i(){const m=N("activeIndex"),h=w("steps")||[];if(typeof m=="undefined")return;const x=m+1;h[x]?d(x):p()}function a(){const m=N("activeIndex"),h=w("steps")||[];if(typeof m=="undefined")return;const x=m-1;h[x]?d(x):p()}function r(m){(w("steps")||[])[m]?d(m):p()}function o(){var m;if(N("__transitionCallback"))return;const h=N("activeIndex"),x=N("__activeStep"),b=N("__activeElement");if(typeof h=="undefined"||typeof x=="undefined"||typeof N("activeIndex")=="undefined")return;const f=((m=x.popover)==null?void 0:m.onPrevClick)||w("onPrevClick");if(f)return f(b,x,{config:w(),state:N(),driver:ne()});a()}function l(){var m;if(N("__transitionCallback"))return;const h=N("activeIndex"),x=N("__activeStep"),b=N("__activeElement");if(typeof h=="undefined"||typeof x=="undefined")return;const f=((m=x.popover)==null?void 0:m.onNextClick)||w("onNextClick");if(f)return f(b,x,{config:w(),state:N(),driver:ne()});i()}function c(){N("isInitialized")||(J("isInitialized",!0),document.body.classList.add("driver-active",w("animate")?"driver-fade":"driver-simple"),wn(),$e("overlayClick",n),$e("escapePress",s),$e("arrowLeftPress",o),$e("arrowRightPress",l))}function d(m=0){var h,x,b,f,v,k,y,z;const _=w("steps");if(!_){console.error("No steps to drive through"),p();return}if(!_[m]){p();return}J("__activeOnDestroyed",document.activeElement),J("activeIndex",m);const E=_[m],P=_[m+1],B=_[m-1],X=((h=E.popover)==null?void 0:h.doneBtnText)||w("doneBtnText")||"Done",ee=w("allowClose"),q=typeof((x=E.popover)==null?void 0:x.showProgress)!="undefined"?(b=E.popover)==null?void 0:b.showProgress:w("showProgress"),te=(((f=E.popover)==null?void 0:f.progressText)||w("progressText")||"{{current}} of {{total}}").replace("{{current}}",`${m+1}`).replace("{{total}}",`${_.length}`),I=((v=E.popover)==null?void 0:v.showButtons)||w("showButtons"),T=["next","previous",...ee?["close"]:[]].filter(G=>!(I!=null&&I.length)||I.includes(G)),H=((k=E.popover)==null?void 0:k.onNextClick)||w("onNextClick"),Q=((y=E.popover)==null?void 0:y.onPrevClick)||w("onPrevClick"),U=((z=E.popover)==null?void 0:z.onCloseClick)||w("onCloseClick");gt(se(Y({},E),{popover:Y({showButtons:T,nextBtnText:P?void 0:X,disableButtons:[...B?[]:["previous"]],showProgress:q,progressText:te,onNextClick:H||(()=>{P?d(m+1):p()}),onPrevClick:Q||(()=>{d(m-1)}),onCloseClick:U||(()=>{p()})},(E==null?void 0:E.popover)||{})}))}function p(m=!0){const h=N("__activeElement"),x=N("__activeStep"),b=N("__activeOnDestroyed"),f=w("onDestroyStarted");if(m&&f){const y=!h||(h==null?void 0:h.id)==="driver-dummy-element";f(y?void 0:h,x,{config:w(),state:N(),driver:ne()});return}const v=(x==null?void 0:x.onDeselected)||w("onDeselected"),k=w("onDestroyed");if(document.body.classList.remove("driver-active","driver-fade","driver-simple"),yn(),Sn(),bn(),xn(),rn(),ht(),h&&x){const y=h.id==="driver-dummy-element";v&&v(y?void 0:h,x,{config:w(),state:N(),driver:ne()}),k&&k(y?void 0:h,x,{config:w(),state:N(),driver:ne()})}b&&b.focus()}const g={isActive:()=>N("isInitialized")||!1,refresh:_e,drive:(m=0)=>{c(),d(m)},setConfig:Ue,setSteps:m=>{ht(),Ue(se(Y({},w()),{steps:m}))},getConfig:w,getState:N,getActiveIndex:()=>N("activeIndex"),isFirstStep:()=>N("activeIndex")===0,isLastStep:()=>{const m=w("steps")||[],h=N("activeIndex");return h!==void 0&&h===m.length-1},getActiveStep:()=>N("activeStep"),getActiveElement:()=>N("activeElement"),getPreviousElement:()=>N("previousElement"),getPreviousStep:()=>N("previousStep"),moveNext:i,movePrevious:a,moveTo:r,hasNextStep:()=>{const m=w("steps")||[],h=N("activeIndex");return h!==void 0&&!!m[h+1]},hasPreviousStep:()=>{const m=w("steps")||[],h=N("activeIndex");return h!==void 0&&!!m[h-1]},highlight:m=>{c(),gt(se(Y({},m),{popover:m.popover?Y({showButtons:[],showProgress:!1,progressText:""},m.popover):void 0}))},destroy:()=>{p(!1)}};return nn(g),g}const Cn=()=>({startTour:s=>{zn({showProgress:!0,animate:!0,allowClose:!1,doneBtnText:"¬°Listo!",nextBtnText:"Siguiente",prevBtnText:"Atr√°s",onDestroyed:()=>{window.scrollTo({top:0,behavior:"smooth"}),s&&s()},steps:[{element:"#tour-suggestion",popover:{title:"Sugerencia TeoVoz",description:"Aqu√≠ aparecer√°n los episodios que te recomienda TeoVoz especialmente para ti.",side:"bottom",align:"start"}},{element:"#tour-progress",popover:{title:"Mi Progreso",description:"Aqu√≠ ver√°s tu avance y los episodios que has completado.",side:"bottom",align:"start"}},{element:"#tour-history",popover:{title:"Historial",description:"Encuentra aqu√≠ los episodios que dejaste a medias para continuarlos f√°cilmente.",side:"bottom",align:"start"}},{element:"#tour-total",popover:{title:"Biblioteca",description:"Esta es la cantidad total de libros disponibles actualmente en la plataforma.",side:"top",align:"center"}},{element:"#tour-category-requests",popover:{title:"Lo Nuevo y Pedidos",description:"Aqu√≠ encontrar√°s los libros que han sido pedidos por ti u otros usuarios.",side:"top",align:"start"}},{element:"#tour-categories-grid",popover:{title:"Categor√≠as",description:"Explora nuestra colecci√≥n organizada en 8 categor√≠as diferentes.",side:"top",align:"center"}},{element:"#tour-nav-search",popover:{title:"Buscar",description:"Encuentra r√°pidamente cualquier libro por t√≠tulo o autor.",side:"top",align:"center"}},{element:"#tour-nav-favorites",popover:{title:"Favoritos",description:"Tus episodios guardados estar√°n aqu√≠ para acceso r√°pido.",side:"top",align:"center"}},{element:"#tour-nav-daily",popover:{title:"Lo Nuevo",description:"Descubre los √∫ltimos episodios que se han subido a la plataforma.",side:"top",align:"center"}},{element:"#tour-nav-share",popover:{title:"Compartir",description:"Invita a tus amigos a usar TeoVoz.",side:"top",align:"center"}},{element:"#tour-header-donate",popover:{title:"Donaciones",description:"TeoVoz es gratis y sin publicidad. Funcionamos gracias a tu apoyo voluntario.",side:"bottom",align:"center"}},{element:"#tour-header-request",popover:{title:"Pedir Libros",description:"¬øNo encuentras un libro? P√≠delo aqu√≠.",side:"bottom",align:"center"}},{element:"#tour-header-themes",popover:{title:"Temas",description:"Personaliza los colores de la aplicaci√≥n a tu gusto.",side:"bottom",align:"center"}},{element:"#tour-header-info",popover:{title:"Informaci√≥n",description:"Conoce m√°s acerca de TeoVoz y nuestros t√©rminos.",side:"bottom",align:"center"}}]}).drive()}});"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/sw.js").then(t=>{console.log("SW registered: ",t)}).catch(t=>{console.log("SW registration failed: ",t)})});const R={getItem:t=>{try{return localStorage.getItem(t)}catch(s){return console.warn(`Error reading ${t} from localStorage:`,s),null}},setItem:(t,s)=>{try{localStorage.setItem(t,s)}catch(n){console.warn(`Error writing ${t} to localStorage:`,n)}}},wt=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream;class _n extends Te.Component{constructor(s){super(s),this.state={hasError:!1,error:null}}static getDerivedStateFromError(s){return{hasError:!0,error:s}}componentDidCatch(s,n){console.error("Uncaught error:",s,n)}render(){var s;return this.state.hasError?e.jsxs("div",{className:"p-8 text-white min-h-screen bg-slate-900 flex flex-col items-center justify-center text-center",children:[e.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Algo sali√≥ mal"}),e.jsx("p",{className:"mb-4 text-slate-400",children:"Hubo un error al cargar la aplicaci√≥n."}),e.jsx("pre",{className:"bg-slate-800 p-4 rounded text-xs text-left overflow-auto max-w-full mb-6",children:(s=this.state.error)==null?void 0:s.toString()}),e.jsx("button",{onClick:()=>{localStorage.clear(),window.location.reload()},className:"px-6 py-3 bg-indigo-600 rounded-xl font-bold",children:"Borrar cach√© y recargar"})]}):this.props.children}}const En=()=>{const[t,s]=u.useState(window.location.pathname),[n,i]=u.useState(()=>!R.getItem("teovoz_has_onboarded")),[a,r]=u.useState(null),[o,l]=u.useState(()=>JSON.parse(R.getItem("teovoz_last_played")||"null")),[c,d]=u.useState(new URLSearchParams(window.location.search)),[p,g]=u.useState(()=>new Set(JSON.parse(R.getItem("teovoz_listened")||"[]"))),[m,h]=u.useState(()=>new Set(JSON.parse(R.getItem("teovoz_history_started")||"[]"))),[x,b]=u.useState(()=>JSON.parse(R.getItem("teovoz_favorites")||"[]")),f=new Set(x.map(j=>j.guid)),[v,k]=u.useState(!1),{startTour:y}=Cn(),[z,_]=u.useState(!1),{checkNotifications:E}=kt();u.useEffect(()=>{const j=()=>V(null,null,function*(){const D=yield E();if(D.length>0&&(B(D),!wt))try{if(Notification.permission==="granted"){const M=D[0],C=new Notification("¬°Libro Disponible!",{body:`Tu pedido "${M}" ya est√° listo en TeoVoz.`,icon:"/Logo PNG.png",badge:"/Logo PNG.png"});C.onclick=()=>{window.focus(),C.close()}}}catch(M){console.error("Notification error",M)}});j();const L=setInterval(j,6e4);return()=>clearInterval(L)},[]);const[P,B]=u.useState([]),X=j=>{if(r(j),l(j),R.setItem("teovoz_last_played",JSON.stringify(j)),!m.has(j.guid)&&!p.has(j.guid)){const L=new Set(m).add(j.guid);h(L)}};u.useEffect(()=>{!n&&!R.getItem("teovoz_tour_completed")&&setTimeout(()=>{_(!0),y(()=>{_(!1),R.setItem("teovoz_tour_completed","true")})},1e3)},[n]);const[ee,q]=u.useState([]),te=Te.useRef(new Set(JSON.parse(R.getItem("teovoz_known_guids")||"[]")));u.useEffect(()=>{const j=()=>V(null,null,function*(){const D=xe.filter(M=>M.rss);if(D.length!==0)try{const M=yield Promise.all(D.map(O=>ue(O.rss).catch(()=>null))),C=[];M.forEach((O,ve)=>{if(O){const Ut=D[ve].id;O.episodes.forEach(Gt=>{C.push(se(Y({},Gt),{categoryId:Ut}))})}}),C.sort((O,ve)=>new Date(ve.pubDate).getTime()-new Date(O.pubDate).getTime());const A=[],Z=te.current;let pe=!1;if(Z.size===0&&C.length>0){C.forEach(O=>Z.add(O.guid)),R.setItem("teovoz_known_guids",JSON.stringify(Array.from(Z)));return}if(C.forEach(O=>{Z.has(O.guid)||(A.push(O),Z.add(O.guid),pe=!0)}),pe&&R.setItem("teovoz_known_guids",JSON.stringify(Array.from(Z))),A.length>0&&(q(O=>[...A,...O]),!wt))try{if(Notification.permission==="granted"){const O=A[0],ve=new Notification("Nuevo Episodio en TeoVoz",{body:`${O.title} ya est√° disponible.`,icon:"/Logo PNG.png",badge:"/Logo PNG.png"});ve.onclick=()=>{window.focus(),ve.close(),U(O)}}}catch(O){console.error("Notification error",O)}}catch(M){console.error("Polling error:",M)}}),L=setInterval(j,1e4);return j(),()=>clearInterval(L)},[]);const[I,T]=u.useState(!1);u.useEffect(()=>{const j=R.getItem("teovoz_last_daily_check"),L=Date.now(),D=1440*60*1e3;if(!j||L-parseInt(j)>D){const M=setTimeout(()=>{R.getItem("teovoz_has_onboarded")&&!z&&T(!0)},1e3);return()=>clearTimeout(M)}},[n,z]);const H=j=>{const L=f.has(j.guid);let D;L?D=x.filter(M=>M.guid!==j.guid):D=[...x,j],b(D),R.setItem("teovoz_favorites",JSON.stringify(D))};u.useEffect(()=>{R.setItem("teovoz_history_started",JSON.stringify(Array.from(m)))},[m]),u.useEffect(()=>{a&&(l(a),R.setItem("teovoz_last_played",JSON.stringify(a)))},[a]),u.useEffect(()=>{const j=()=>{s(window.location.pathname),d(new URLSearchParams(window.location.search))};return window.addEventListener("popstate",j),()=>window.removeEventListener("popstate",j)},[]);const Q=j=>{window.history.pushState({},"",j),s(window.location.pathname),d(new URLSearchParams(window.location.search))},U=(j,L,D=!1)=>{const M=L||j.categoryId,C=se(Y({},j),{categoryId:M});R.setItem("teovoz_viewing_episode",JSON.stringify(C));const A=`episode.html?guid=${encodeURIComponent(j.guid)}${M?`&cat=${M}`:""}`;D?window.open(A,"_blank"):Q(A)},G=j=>{if(!p.has(j)){const L=new Set(p).add(j);g(L),R.setItem("teovoz_listened",JSON.stringify(Array.from(L)))}if(m.has(j)){const L=new Set(m);L.delete(j),h(L)}},oe=j=>{if(!p.has(j)&&!m.has(j)){const L=new Set(m).add(j);h(L)}},$=()=>{const j=t.split("/").pop()||"index.html";if(j==="episode.html"||c.get("guid")){const M=c.get("guid"),C=c.get("cat");return e.jsx(Mn,{guid:M,catId:C,setCurrentEpisode:r,currentEpisode:a,favorites:f,onToggleFavorite:H,onOpenDonation:()=>k(!0)})}if(j==="index.html"||j==="")return e.jsx(Ua,{onCategorySelect:M=>Q(`${M.id}.html`),onEpisodeSelect:M=>U(M),onPlay:X,listenedCount:p.size,listenedGuids:p,historyGuids:m,lastPlayed:o});if(j==="search.html")return e.jsx(Ja,{onEpisodeSelect:M=>U(M),favorites:f,listened:p});if(j==="favorites.html")return e.jsx(Ya,{episodes:x,onEpisodeSelect:M=>U(M),favorites:f,listened:p});if(j==="privacy.html")return e.jsx(en,{});const L=j.replace(".html",""),D=xe.find(M=>M.id===L);return D?e.jsx(Za,{category:D,onEpisodeSelect:M=>U(M,L,!1),favorites:f,listened:p}):e.jsx("div",{className:"p-20 text-center",children:"P√°gina no encontrada"})},re=()=>{const j=t.split("/").pop()||"index.html";return j==="search.html"?"search":j==="favorites.html"?"favorites":"home"};return e.jsxs(Pa,{activeTab:re(),currentEpisode:a,onEpisodeChange:r,onEpisodeComplete:G,onEpisodeStart:oe,onEpisodeClick:j=>U(j),onOpenDailyModal:()=>T(!0),onOpenDonation:()=>k(!0),showDonationModal:v,onCloseDonation:()=>k(!1),children:[e.jsx(Xa,{}),n&&e.jsx(tn,{onComplete:()=>{R.setItem("teovoz_has_onboarded","true"),i(!1),_(!0),y(()=>{_(!1),R.setItem("teovoz_tour_completed","true")})}}),P.length>0&&e.jsx("div",{className:"fixed top-24 left-1/2 -translate-x-1/2 z-[200] w-[90%] max-w-sm animate-in slide-in-from-top-4 duration-500",children:e.jsxs("div",{className:"bg-indigo-600 border border-indigo-400/30 text-white p-4 rounded-2xl shadow-2xl shadow-indigo-900/50 flex flex-col gap-2 relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 p-2 opacity-10",children:e.jsx(ge,{size:60})}),e.jsxs("div",{className:"flex items-start gap-4 z-10",children:[e.jsx("div",{className:"bg-white/20 p-2 rounded-xl",children:e.jsx(De,{size:24})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-black text-sm uppercase tracking-wider mb-1",children:"¬°Solicitud Completada!"}),e.jsxs("p",{className:"text-xs text-indigo-100 leading-relaxed",children:["El libro ",e.jsx("strong",{children:P[0]})," que pediste ya est√° disponible."]})]}),e.jsx("button",{onClick:()=>B(j=>j.slice(1)),className:"p-1 hover:bg-white/10 rounded-lg",children:e.jsx(ie,{size:16})})]})]})}),e.jsx(sn,{newEpisodes:ee,onClose:()=>q([]),onView:j=>{q([]),U(j)}}),!n&&I&&e.jsx(an,{onClose:()=>{T(!1),R.setItem("teovoz_last_daily_check",Date.now().toString())},onEpisodeSelect:j=>U(j)}),e.jsx(u.Suspense,{fallback:e.jsx("div",{className:"p-6",children:e.jsx(le,{className:"h-40 rounded-3xl"})}),children:e.jsx("div",{className:"view-transition",children:$()},t)})]})},Mn=({guid:t,catId:s,setCurrentEpisode:n,currentEpisode:i,favorites:a,onToggleFavorite:r,onOpenDonation:o})=>{const[l,c]=u.useState(null),[d,p]=u.useState(!0),[g,m]=u.useState(null);return u.useEffect(()=>{V(null,null,function*(){if(!t){m("Episodio no v√°lido"),p(!1);return}const x=R.getItem("teovoz_viewing_episode");if(x){const f=JSON.parse(x);if(f.guid===t){c(f),p(!1);return}}if(!s){m("Falta categor√≠a"),p(!1);return}const b=xe.find(f=>f.id===s);if(!(b!=null&&b.rss)){m("No hay contenido"),p(!1);return}try{const v=(yield ue(b.rss)).episodes.find(k=>k.guid===t);v?(v.categoryId=s,c(v)):m("No encontrado")}catch(f){m("Error de carga")}finally{p(!1)}})},[t,s]),d?e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsx(le,{className:"h-64 rounded-[40px]"}),e.jsx(le,{className:"h-10 w-3/4"})]}):g?e.jsx("div",{className:"text-center py-20",children:g}):l?e.jsx(Qa,{episode:l,currentEpisode:i,onPlay:n,favorites:a,onToggleFavorite:r,onOpenDonation:o}):null};as.createRoot(document.getElementById("root")).render(e.jsx(Te.StrictMode,{children:e.jsx(_n,{children:e.jsx(En,{})})}))});export default $n();
