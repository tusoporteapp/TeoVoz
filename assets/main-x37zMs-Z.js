var LR=Object.defineProperty;var t_=d=>{throw TypeError(d)};var kR=(d,t,e)=>t in d?LR(d,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):d[t]=e;var nt=(d,t,e)=>kR(d,typeof t!="symbol"?t+"":t,e),Dx=(d,t,e)=>t.has(d)||t_("Cannot "+e);var o=(d,t,e)=>(Dx(d,t,"read from private field"),e?e.call(d):t.get(d)),E=(d,t,e)=>t.has(d)?t_("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(d):t.set(d,e),x=(d,t,e,n)=>(Dx(d,t,"write to private field"),n?n.call(d,e):t.set(d,e),e),T=(d,t,e)=>(Dx(d,t,"access private method"),e);var Ze=(d,t,e,n)=>({set _(a){x(d,t,a,e)},get _(){return o(d,t,n)}});import{r as $,P as e_,a as jd,S as i_,X as Zc,C as OR,b as jR,H as BR,c as _S,d as nu,e as hC,f as dC,g as fC,h as zR,M as PR,i as pC,B as gC,j as IR,U as mC,k as FR,R as m0,I as bC,T as UR,l as HR,L as GR,F as VR,A as yC,m as qR,W as XR,n as ty,o as YR,p as $R,q as KR,s as QR,t as WR,Z as ZR,u as JR,v as n_,w as Qx,x as s_,y as tL,z as vC,D as a_,E as eL,G as iL,J as Wx,K as nL,N as sL,O as aL,Q as rL}from"./icons-vendor-Cxb82l4W.js";import{r as oL,a as lL,g as cL}from"./react-vendor-B--z-fyW.js";import{r as b0,_ as y0,C as v0,a as ey,E as xC,o as uL,F as AC,L as hL,g as CS,i as dL,b as fL,v as pL,c as r_,d as gL,e as mL,f as bL,h as yL,j as vL,k as Gs,l as iy,m as x0,s as Wc,n as xL,p as AL}from"./firebase-vendor-B9iMak2x.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&n(c)}).observe(document,{childList:!0,subtree:!0});function e(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function n(a){if(a.ep)return;a.ep=!0;const l=e(a);fetch(a.href,l)}})();var Rx={exports:{}},Pf={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var o_;function SL(){if(o_)return Pf;o_=1;var d=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function e(n,a,l){var c=null;if(l!==void 0&&(c=""+l),a.key!==void 0&&(c=""+a.key),"key"in a){l={};for(var h in a)h!=="key"&&(l[h]=a[h])}else l=a;return a=l.ref,{$$typeof:d,type:n,key:c,ref:a!==void 0?a:null,props:l}}return Pf.Fragment=t,Pf.jsx=e,Pf.jsxs=e,Pf}var l_;function wL(){return l_||(l_=1,Rx.exports=SL()),Rx.exports}var A=wL(),Lx={exports:{}},If={},kx={exports:{}},Ox={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var c_;function EL(){return c_||(c_=1,(function(d){function t(P,V){var st=P.length;P.push(V);t:for(;0<st;){var ut=st-1>>>1,xt=P[ut];if(0<a(xt,V))P[ut]=V,P[st]=xt,st=ut;else break t}}function e(P){return P.length===0?null:P[0]}function n(P){if(P.length===0)return null;var V=P[0],st=P.pop();if(st!==V){P[0]=st;t:for(var ut=0,xt=P.length,$t=xt>>>1;ut<$t;){var mt=2*(ut+1)-1,ht=P[mt],Rt=mt+1,Qt=P[Rt];if(0>a(ht,st))Rt<xt&&0>a(Qt,ht)?(P[ut]=Qt,P[Rt]=st,ut=Rt):(P[ut]=ht,P[mt]=st,ut=mt);else if(Rt<xt&&0>a(Qt,st))P[ut]=Qt,P[Rt]=st,ut=Rt;else break t}}return V}function a(P,V){var st=P.sortIndex-V.sortIndex;return st!==0?st:P.id-V.id}if(d.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;d.unstable_now=function(){return l.now()}}else{var c=Date,h=c.now();d.unstable_now=function(){return c.now()-h}}var f=[],p=[],m=1,y=null,v=3,w=!1,C=!1,_=!1,M=!1,N=typeof setTimeout=="function"?setTimeout:null,R=typeof clearTimeout=="function"?clearTimeout:null,L=typeof setImmediate<"u"?setImmediate:null;function k(P){for(var V=e(p);V!==null;){if(V.callback===null)n(p);else if(V.startTime<=P)n(p),V.sortIndex=V.expirationTime,t(f,V);else break;V=e(p)}}function j(P){if(_=!1,k(P),!C)if(e(f)!==null)C=!0,z||(z=!0,X());else{var V=e(p);V!==null&&at(j,V.startTime-P)}}var z=!1,I=-1,K=5,J=-1;function W(){return M?!0:!(d.unstable_now()-J<K)}function tt(){if(M=!1,z){var P=d.unstable_now();J=P;var V=!0;try{t:{C=!1,_&&(_=!1,R(I),I=-1),w=!0;var st=v;try{e:{for(k(P),y=e(f);y!==null&&!(y.expirationTime>P&&W());){var ut=y.callback;if(typeof ut=="function"){y.callback=null,v=y.priorityLevel;var xt=ut(y.expirationTime<=P);if(P=d.unstable_now(),typeof xt=="function"){y.callback=xt,k(P),V=!0;break e}y===e(f)&&n(f),k(P)}else n(f);y=e(f)}if(y!==null)V=!0;else{var $t=e(p);$t!==null&&at(j,$t.startTime-P),V=!1}}break t}finally{y=null,v=st,w=!1}V=void 0}}finally{V?X():z=!1}}}var X;if(typeof L=="function")X=function(){L(tt)};else if(typeof MessageChannel<"u"){var it=new MessageChannel,et=it.port2;it.port1.onmessage=tt,X=function(){et.postMessage(null)}}else X=function(){N(tt,0)};function at(P,V){I=N(function(){P(d.unstable_now())},V)}d.unstable_IdlePriority=5,d.unstable_ImmediatePriority=1,d.unstable_LowPriority=4,d.unstable_NormalPriority=3,d.unstable_Profiling=null,d.unstable_UserBlockingPriority=2,d.unstable_cancelCallback=function(P){P.callback=null},d.unstable_forceFrameRate=function(P){0>P||125<P?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):K=0<P?Math.floor(1e3/P):5},d.unstable_getCurrentPriorityLevel=function(){return v},d.unstable_next=function(P){switch(v){case 1:case 2:case 3:var V=3;break;default:V=v}var st=v;v=V;try{return P()}finally{v=st}},d.unstable_requestPaint=function(){M=!0},d.unstable_runWithPriority=function(P,V){switch(P){case 1:case 2:case 3:case 4:case 5:break;default:P=3}var st=v;v=P;try{return V()}finally{v=st}},d.unstable_scheduleCallback=function(P,V,st){var ut=d.unstable_now();switch(typeof st=="object"&&st!==null?(st=st.delay,st=typeof st=="number"&&0<st?ut+st:ut):st=ut,P){case 1:var xt=-1;break;case 2:xt=250;break;case 5:xt=1073741823;break;case 4:xt=1e4;break;default:xt=5e3}return xt=st+xt,P={id:m++,callback:V,priorityLevel:P,startTime:st,expirationTime:xt,sortIndex:-1},st>ut?(P.sortIndex=st,t(p,P),e(f)===null&&P===e(p)&&(_?(R(I),I=-1):_=!0,at(j,st-ut))):(P.sortIndex=xt,t(f,P),C||w||(C=!0,z||(z=!0,X()))),P},d.unstable_shouldYield=W,d.unstable_wrapCallback=function(P){var V=v;return function(){var st=v;v=V;try{return P.apply(this,arguments)}finally{v=st}}}})(Ox)),Ox}var u_;function TL(){return u_||(u_=1,kx.exports=EL()),kx.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var h_;function _L(){if(h_)return If;h_=1;var d=TL(),t=oL(),e=lL();function n(i){var s="https://react.dev/errors/"+i;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var r=2;r<arguments.length;r++)s+="&args[]="+encodeURIComponent(arguments[r])}return"Minified React error #"+i+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function l(i){var s=i,r=i;if(i.alternate)for(;s.return;)s=s.return;else{i=s;do s=i,(s.flags&4098)!==0&&(r=s.return),i=s.return;while(i)}return s.tag===3?r:null}function c(i){if(i.tag===13){var s=i.memoizedState;if(s===null&&(i=i.alternate,i!==null&&(s=i.memoizedState)),s!==null)return s.dehydrated}return null}function h(i){if(i.tag===31){var s=i.memoizedState;if(s===null&&(i=i.alternate,i!==null&&(s=i.memoizedState)),s!==null)return s.dehydrated}return null}function f(i){if(l(i)!==i)throw Error(n(188))}function p(i){var s=i.alternate;if(!s){if(s=l(i),s===null)throw Error(n(188));return s!==i?null:i}for(var r=i,u=s;;){var g=r.return;if(g===null)break;var b=g.alternate;if(b===null){if(u=g.return,u!==null){r=u;continue}break}if(g.child===b.child){for(b=g.child;b;){if(b===r)return f(g),i;if(b===u)return f(g),s;b=b.sibling}throw Error(n(188))}if(r.return!==u.return)r=g,u=b;else{for(var S=!1,D=g.child;D;){if(D===r){S=!0,r=g,u=b;break}if(D===u){S=!0,u=g,r=b;break}D=D.sibling}if(!S){for(D=b.child;D;){if(D===r){S=!0,r=b,u=g;break}if(D===u){S=!0,u=b,r=g;break}D=D.sibling}if(!S)throw Error(n(189))}}if(r.alternate!==u)throw Error(n(190))}if(r.tag!==3)throw Error(n(188));return r.stateNode.current===r?i:s}function m(i){var s=i.tag;if(s===5||s===26||s===27||s===6)return i;for(i=i.child;i!==null;){if(s=m(i),s!==null)return s;i=i.sibling}return null}var y=Object.assign,v=Symbol.for("react.element"),w=Symbol.for("react.transitional.element"),C=Symbol.for("react.portal"),_=Symbol.for("react.fragment"),M=Symbol.for("react.strict_mode"),N=Symbol.for("react.profiler"),R=Symbol.for("react.consumer"),L=Symbol.for("react.context"),k=Symbol.for("react.forward_ref"),j=Symbol.for("react.suspense"),z=Symbol.for("react.suspense_list"),I=Symbol.for("react.memo"),K=Symbol.for("react.lazy"),J=Symbol.for("react.activity"),W=Symbol.for("react.memo_cache_sentinel"),tt=Symbol.iterator;function X(i){return i===null||typeof i!="object"?null:(i=tt&&i[tt]||i["@@iterator"],typeof i=="function"?i:null)}var it=Symbol.for("react.client.reference");function et(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===it?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case _:return"Fragment";case N:return"Profiler";case M:return"StrictMode";case j:return"Suspense";case z:return"SuspenseList";case J:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case C:return"Portal";case L:return i.displayName||"Context";case R:return(i._context.displayName||"Context")+".Consumer";case k:var s=i.render;return i=i.displayName,i||(i=s.displayName||s.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case I:return s=i.displayName||null,s!==null?s:et(i.type)||"Memo";case K:s=i._payload,i=i._init;try{return et(i(s))}catch{}}return null}var at=Array.isArray,P=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,V=e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,st={pending:!1,data:null,method:null,action:null},ut=[],xt=-1;function $t(i){return{current:i}}function mt(i){0>xt||(i.current=ut[xt],ut[xt]=null,xt--)}function ht(i,s){xt++,ut[xt]=i.current,i.current=s}var Rt=$t(null),Qt=$t(null),Se=$t(null),Ut=$t(null);function Wi(i,s){switch(ht(Se,s),ht(Qt,i),ht(Rt,null),s.nodeType){case 9:case 11:i=(i=s.documentElement)&&(i=i.namespaceURI)?wT(i):0;break;default:if(i=s.tagName,s=s.namespaceURI)s=wT(s),i=ET(s,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}mt(Rt),ht(Rt,i)}function Mi(){mt(Rt),mt(Qt),mt(Se)}function pi(i){i.memoizedState!==null&&ht(Ut,i);var s=Rt.current,r=ET(s,i.type);s!==r&&(ht(Qt,i),ht(Rt,r))}function It(i){Qt.current===i&&(mt(Rt),mt(Qt)),Ut.current===i&&(mt(Ut),Of._currentValue=st)}var mn,ce;function Ft(i){if(mn===void 0)try{throw Error()}catch(r){var s=r.stack.trim().match(/\n( *(at )?)/);mn=s&&s[1]||"",ce=-1<r.stack.indexOf(`
    at`)?" (<anonymous>)":-1<r.stack.indexOf("@")?"@unknown:0:0":""}return`
`+mn+i+ce}var ye=!1;function ni(i,s){if(!i||ye)return"";ye=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(s){var Z=function(){throw Error()};if(Object.defineProperty(Z.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Z,[])}catch(q){var G=q}Reflect.construct(i,[],Z)}else{try{Z.call()}catch(q){G=q}i.call(Z.prototype)}}else{try{throw Error()}catch(q){G=q}(Z=i())&&typeof Z.catch=="function"&&Z.catch(function(){})}}catch(q){if(q&&G&&typeof q.stack=="string")return[q.stack,G.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var g=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");g&&g.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var b=u.DetermineComponentFrameRoot(),S=b[0],D=b[1];if(S&&D){var O=S.split(`
`),H=D.split(`
`);for(g=u=0;u<O.length&&!O[u].includes("DetermineComponentFrameRoot");)u++;for(;g<H.length&&!H[g].includes("DetermineComponentFrameRoot");)g++;if(u===O.length||g===H.length)for(u=O.length-1,g=H.length-1;1<=u&&0<=g&&O[u]!==H[g];)g--;for(;1<=u&&0<=g;u--,g--)if(O[u]!==H[g]){if(u!==1||g!==1)do if(u--,g--,0>g||O[u]!==H[g]){var Y=`
`+O[u].replace(" at new "," at ");return i.displayName&&Y.includes("<anonymous>")&&(Y=Y.replace("<anonymous>",i.displayName)),Y}while(1<=u&&0<=g);break}}}finally{ye=!1,Error.prepareStackTrace=r}return(r=i?i.displayName||i.name:"")?Ft(r):""}function Ge(i,s){switch(i.tag){case 26:case 27:case 5:return Ft(i.type);case 16:return Ft("Lazy");case 13:return i.child!==s&&s!==null?Ft("Suspense Fallback"):Ft("Suspense");case 19:return Ft("SuspenseList");case 0:case 15:return ni(i.type,!1);case 11:return ni(i.type.render,!1);case 1:return ni(i.type,!0);case 31:return Ft("Activity");default:return""}}function lm(i){try{var s="",r=null;do s+=Ge(i,r),r=i,i=i.return;while(i);return s}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}var Hd=Object.prototype.hasOwnProperty,dl=d.unstable_scheduleCallback,Gd=d.unstable_cancelCallback,ru=d.unstable_shouldYield,my=d.unstable_requestPaint,Fi=d.unstable_now,by=d.unstable_getCurrentPriorityLevel,cm=d.unstable_ImmediatePriority,um=d.unstable_UserBlockingPriority,bn=d.unstable_NormalPriority,Br=d.unstable_LowPriority,Es=d.unstable_IdlePriority,Vd=d.log,gM=d.unstable_setDisableYieldValue,qd=null,yn=null;function zr(i){if(typeof Vd=="function"&&gM(i),yn&&typeof yn.setStrictMode=="function")try{yn.setStrictMode(qd,i)}catch{}}var vn=Math.clz32?Math.clz32:yM,mM=Math.log,bM=Math.LN2;function yM(i){return i>>>=0,i===0?32:31-(mM(i)/bM|0)|0}var hm=256,dm=262144,fm=4194304;function fl(i){var s=i&42;if(s!==0)return s;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return i&261888;case 262144:case 524288:case 1048576:case 2097152:return i&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function pm(i,s,r){var u=i.pendingLanes;if(u===0)return 0;var g=0,b=i.suspendedLanes,S=i.pingedLanes;i=i.warmLanes;var D=u&134217727;return D!==0?(u=D&~b,u!==0?g=fl(u):(S&=D,S!==0?g=fl(S):r||(r=D&~i,r!==0&&(g=fl(r))))):(D=u&~b,D!==0?g=fl(D):S!==0?g=fl(S):r||(r=u&~i,r!==0&&(g=fl(r)))),g===0?0:s!==0&&s!==g&&(s&b)===0&&(b=g&-g,r=s&-s,b>=r||b===32&&(r&4194048)!==0)?s:g}function Xd(i,s){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&s)===0}function vM(i,s){switch(i){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function sw(){var i=fm;return fm<<=1,(fm&62914560)===0&&(fm=4194304),i}function yy(i){for(var s=[],r=0;31>r;r++)s.push(i);return s}function Yd(i,s){i.pendingLanes|=s,s!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function xM(i,s,r,u,g,b){var S=i.pendingLanes;i.pendingLanes=r,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=r,i.entangledLanes&=r,i.errorRecoveryDisabledLanes&=r,i.shellSuspendCounter=0;var D=i.entanglements,O=i.expirationTimes,H=i.hiddenUpdates;for(r=S&~r;0<r;){var Y=31-vn(r),Z=1<<Y;D[Y]=0,O[Y]=-1;var G=H[Y];if(G!==null)for(H[Y]=null,Y=0;Y<G.length;Y++){var q=G[Y];q!==null&&(q.lane&=-536870913)}r&=~Z}u!==0&&aw(i,u,0),b!==0&&g===0&&i.tag!==0&&(i.suspendedLanes|=b&~(S&~s))}function aw(i,s,r){i.pendingLanes|=s,i.suspendedLanes&=~s;var u=31-vn(s);i.entangledLanes|=s,i.entanglements[u]=i.entanglements[u]|1073741824|r&261930}function rw(i,s){var r=i.entangledLanes|=s;for(i=i.entanglements;r;){var u=31-vn(r),g=1<<u;g&s|i[u]&s&&(i[u]|=s),r&=~g}}function ow(i,s){var r=s&-s;return r=(r&42)!==0?1:vy(r),(r&(i.suspendedLanes|s))!==0?0:r}function vy(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function xy(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function lw(){var i=V.p;return i!==0?i:(i=window.event,i===void 0?32:YT(i.type))}function cw(i,s){var r=V.p;try{return V.p=i,s()}finally{V.p=r}}var Pr=Math.random().toString(36).slice(2),gi="__reactFiber$"+Pr,Zi="__reactProps$"+Pr,ou="__reactContainer$"+Pr,Ay="__reactEvents$"+Pr,AM="__reactListeners$"+Pr,SM="__reactHandles$"+Pr,uw="__reactResources$"+Pr,$d="__reactMarker$"+Pr;function Sy(i){delete i[gi],delete i[Zi],delete i[Ay],delete i[AM],delete i[SM]}function lu(i){var s=i[gi];if(s)return s;for(var r=i.parentNode;r;){if(s=r[ou]||r[gi]){if(r=s.alternate,s.child!==null||r!==null&&r.child!==null)for(i=RT(i);i!==null;){if(r=i[gi])return r;i=RT(i)}return s}i=r,r=i.parentNode}return null}function cu(i){if(i=i[gi]||i[ou]){var s=i.tag;if(s===5||s===6||s===13||s===31||s===26||s===27||s===3)return i}return null}function Kd(i){var s=i.tag;if(s===5||s===26||s===27||s===6)return i.stateNode;throw Error(n(33))}function uu(i){var s=i[uw];return s||(s=i[uw]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function si(i){i[$d]=!0}var hw=new Set,dw={};function pl(i,s){hu(i,s),hu(i+"Capture",s)}function hu(i,s){for(dw[i]=s,i=0;i<s.length;i++)hw.add(s[i])}var wM=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),fw={},pw={};function EM(i){return Hd.call(pw,i)?!0:Hd.call(fw,i)?!1:wM.test(i)?pw[i]=!0:(fw[i]=!0,!1)}function gm(i,s,r){if(EM(s))if(r===null)i.removeAttribute(s);else{switch(typeof r){case"undefined":case"function":case"symbol":i.removeAttribute(s);return;case"boolean":var u=s.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){i.removeAttribute(s);return}}i.setAttribute(s,""+r)}}function mm(i,s,r){if(r===null)i.removeAttribute(s);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(s);return}i.setAttribute(s,""+r)}}function _a(i,s,r,u){if(u===null)i.removeAttribute(r);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(r);return}i.setAttributeNS(s,r,""+u)}}function Zn(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function gw(i){var s=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function TM(i,s,r){var u=Object.getOwnPropertyDescriptor(i.constructor.prototype,s);if(!i.hasOwnProperty(s)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var g=u.get,b=u.set;return Object.defineProperty(i,s,{configurable:!0,get:function(){return g.call(this)},set:function(S){r=""+S,b.call(this,S)}}),Object.defineProperty(i,s,{enumerable:u.enumerable}),{getValue:function(){return r},setValue:function(S){r=""+S},stopTracking:function(){i._valueTracker=null,delete i[s]}}}}function wy(i){if(!i._valueTracker){var s=gw(i)?"checked":"value";i._valueTracker=TM(i,s,""+i[s])}}function mw(i){if(!i)return!1;var s=i._valueTracker;if(!s)return!0;var r=s.getValue(),u="";return i&&(u=gw(i)?i.checked?"true":"false":i.value),i=u,i!==r?(s.setValue(i),!0):!1}function bm(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var _M=/[\n"\\]/g;function Jn(i){return i.replace(_M,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function Ey(i,s,r,u,g,b,S,D){i.name="",S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?i.type=S:i.removeAttribute("type"),s!=null?S==="number"?(s===0&&i.value===""||i.value!=s)&&(i.value=""+Zn(s)):i.value!==""+Zn(s)&&(i.value=""+Zn(s)):S!=="submit"&&S!=="reset"||i.removeAttribute("value"),s!=null?Ty(i,S,Zn(s)):r!=null?Ty(i,S,Zn(r)):u!=null&&i.removeAttribute("value"),g==null&&b!=null&&(i.defaultChecked=!!b),g!=null&&(i.checked=g&&typeof g!="function"&&typeof g!="symbol"),D!=null&&typeof D!="function"&&typeof D!="symbol"&&typeof D!="boolean"?i.name=""+Zn(D):i.removeAttribute("name")}function bw(i,s,r,u,g,b,S,D){if(b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(i.type=b),s!=null||r!=null){if(!(b!=="submit"&&b!=="reset"||s!=null)){wy(i);return}r=r!=null?""+Zn(r):"",s=s!=null?""+Zn(s):r,D||s===i.value||(i.value=s),i.defaultValue=s}u=u??g,u=typeof u!="function"&&typeof u!="symbol"&&!!u,i.checked=D?i.checked:!!u,i.defaultChecked=!!u,S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"&&(i.name=S),wy(i)}function Ty(i,s,r){s==="number"&&bm(i.ownerDocument)===i||i.defaultValue===""+r||(i.defaultValue=""+r)}function du(i,s,r,u){if(i=i.options,s){s={};for(var g=0;g<r.length;g++)s["$"+r[g]]=!0;for(r=0;r<i.length;r++)g=s.hasOwnProperty("$"+i[r].value),i[r].selected!==g&&(i[r].selected=g),g&&u&&(i[r].defaultSelected=!0)}else{for(r=""+Zn(r),s=null,g=0;g<i.length;g++){if(i[g].value===r){i[g].selected=!0,u&&(i[g].defaultSelected=!0);return}s!==null||i[g].disabled||(s=i[g])}s!==null&&(s.selected=!0)}}function yw(i,s,r){if(s!=null&&(s=""+Zn(s),s!==i.value&&(i.value=s),r==null)){i.defaultValue!==s&&(i.defaultValue=s);return}i.defaultValue=r!=null?""+Zn(r):""}function vw(i,s,r,u){if(s==null){if(u!=null){if(r!=null)throw Error(n(92));if(at(u)){if(1<u.length)throw Error(n(93));u=u[0]}r=u}r==null&&(r=""),s=r}r=Zn(s),i.defaultValue=r,u=i.textContent,u===r&&u!==""&&u!==null&&(i.value=u),wy(i)}function fu(i,s){if(s){var r=i.firstChild;if(r&&r===i.lastChild&&r.nodeType===3){r.nodeValue=s;return}}i.textContent=s}var CM=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function xw(i,s,r){var u=s.indexOf("--")===0;r==null||typeof r=="boolean"||r===""?u?i.setProperty(s,""):s==="float"?i.cssFloat="":i[s]="":u?i.setProperty(s,r):typeof r!="number"||r===0||CM.has(s)?s==="float"?i.cssFloat=r:i[s]=(""+r).trim():i[s]=r+"px"}function Aw(i,s,r){if(s!=null&&typeof s!="object")throw Error(n(62));if(i=i.style,r!=null){for(var u in r)!r.hasOwnProperty(u)||s!=null&&s.hasOwnProperty(u)||(u.indexOf("--")===0?i.setProperty(u,""):u==="float"?i.cssFloat="":i[u]="");for(var g in s)u=s[g],s.hasOwnProperty(g)&&r[g]!==u&&xw(i,g,u)}else for(var b in s)s.hasOwnProperty(b)&&xw(i,b,s[b])}function _y(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var NM=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),MM=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ym(i){return MM.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}function Ca(){}var Cy=null;function Ny(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var pu=null,gu=null;function Sw(i){var s=cu(i);if(s&&(i=s.stateNode)){var r=i[Zi]||null;t:switch(i=s.stateNode,s.type){case"input":if(Ey(i,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name),s=r.name,r.type==="radio"&&s!=null){for(r=i;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll('input[name="'+Jn(""+s)+'"][type="radio"]'),s=0;s<r.length;s++){var u=r[s];if(u!==i&&u.form===i.form){var g=u[Zi]||null;if(!g)throw Error(n(90));Ey(u,g.value,g.defaultValue,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name)}}for(s=0;s<r.length;s++)u=r[s],u.form===i.form&&mw(u)}break t;case"textarea":yw(i,r.value,r.defaultValue);break t;case"select":s=r.value,s!=null&&du(i,!!r.multiple,s,!1)}}}var My=!1;function ww(i,s,r){if(My)return i(s,r);My=!0;try{var u=i(s);return u}finally{if(My=!1,(pu!==null||gu!==null)&&(ab(),pu&&(s=pu,i=gu,gu=pu=null,Sw(s),i)))for(s=0;s<i.length;s++)Sw(i[s])}}function Qd(i,s){var r=i.stateNode;if(r===null)return null;var u=r[Zi]||null;if(u===null)return null;r=u[s];t:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(i=i.type,u=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!u;break t;default:i=!1}if(i)return null;if(r&&typeof r!="function")throw Error(n(231,s,typeof r));return r}var Na=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Dy=!1;if(Na)try{var Wd={};Object.defineProperty(Wd,"passive",{get:function(){Dy=!0}}),window.addEventListener("test",Wd,Wd),window.removeEventListener("test",Wd,Wd)}catch{Dy=!1}var Ir=null,Ry=null,vm=null;function Ew(){if(vm)return vm;var i,s=Ry,r=s.length,u,g="value"in Ir?Ir.value:Ir.textContent,b=g.length;for(i=0;i<r&&s[i]===g[i];i++);var S=r-i;for(u=1;u<=S&&s[r-u]===g[b-u];u++);return vm=g.slice(i,1<u?1-u:void 0)}function xm(i){var s=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&s===13&&(i=13)):i=s,i===10&&(i=13),32<=i||i===13?i:0}function Am(){return!0}function Tw(){return!1}function Ji(i){function s(r,u,g,b,S){this._reactName=r,this._targetInst=g,this.type=u,this.nativeEvent=b,this.target=S,this.currentTarget=null;for(var D in i)i.hasOwnProperty(D)&&(r=i[D],this[D]=r?r(b):b[D]);return this.isDefaultPrevented=(b.defaultPrevented!=null?b.defaultPrevented:b.returnValue===!1)?Am:Tw,this.isPropagationStopped=Tw,this}return y(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Am)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Am)},persist:function(){},isPersistent:Am}),s}var gl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Sm=Ji(gl),Zd=y({},gl,{view:0,detail:0}),DM=Ji(Zd),Ly,ky,Jd,wm=y({},Zd,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:jy,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==Jd&&(Jd&&i.type==="mousemove"?(Ly=i.screenX-Jd.screenX,ky=i.screenY-Jd.screenY):ky=Ly=0,Jd=i),Ly)},movementY:function(i){return"movementY"in i?i.movementY:ky}}),_w=Ji(wm),RM=y({},wm,{dataTransfer:0}),LM=Ji(RM),kM=y({},Zd,{relatedTarget:0}),Oy=Ji(kM),OM=y({},gl,{animationName:0,elapsedTime:0,pseudoElement:0}),jM=Ji(OM),BM=y({},gl,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),zM=Ji(BM),PM=y({},gl,{data:0}),Cw=Ji(PM),IM={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},FM={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},UM={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function HM(i){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(i):(i=UM[i])?!!s[i]:!1}function jy(){return HM}var GM=y({},Zd,{key:function(i){if(i.key){var s=IM[i.key]||i.key;if(s!=="Unidentified")return s}return i.type==="keypress"?(i=xm(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?FM[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:jy,charCode:function(i){return i.type==="keypress"?xm(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?xm(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),VM=Ji(GM),qM=y({},wm,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Nw=Ji(qM),XM=y({},Zd,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:jy}),YM=Ji(XM),$M=y({},gl,{propertyName:0,elapsedTime:0,pseudoElement:0}),KM=Ji($M),QM=y({},wm,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),WM=Ji(QM),ZM=y({},gl,{newState:0,oldState:0}),JM=Ji(ZM),tD=[9,13,27,32],By=Na&&"CompositionEvent"in window,tf=null;Na&&"documentMode"in document&&(tf=document.documentMode);var eD=Na&&"TextEvent"in window&&!tf,Mw=Na&&(!By||tf&&8<tf&&11>=tf),Dw=" ",Rw=!1;function Lw(i,s){switch(i){case"keyup":return tD.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function kw(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var mu=!1;function iD(i,s){switch(i){case"compositionend":return kw(s);case"keypress":return s.which!==32?null:(Rw=!0,Dw);case"textInput":return i=s.data,i===Dw&&Rw?null:i;default:return null}}function nD(i,s){if(mu)return i==="compositionend"||!By&&Lw(i,s)?(i=Ew(),vm=Ry=Ir=null,mu=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return Mw&&s.locale!=="ko"?null:s.data;default:return null}}var sD={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ow(i){var s=i&&i.nodeName&&i.nodeName.toLowerCase();return s==="input"?!!sD[i.type]:s==="textarea"}function jw(i,s,r,u){pu?gu?gu.push(u):gu=[u]:pu=u,s=db(s,"onChange"),0<s.length&&(r=new Sm("onChange","change",null,r,u),i.push({event:r,listeners:s}))}var ef=null,nf=null;function aD(i){bT(i,0)}function Em(i){var s=Kd(i);if(mw(s))return i}function Bw(i,s){if(i==="change")return s}var zw=!1;if(Na){var zy;if(Na){var Py="oninput"in document;if(!Py){var Pw=document.createElement("div");Pw.setAttribute("oninput","return;"),Py=typeof Pw.oninput=="function"}zy=Py}else zy=!1;zw=zy&&(!document.documentMode||9<document.documentMode)}function Iw(){ef&&(ef.detachEvent("onpropertychange",Fw),nf=ef=null)}function Fw(i){if(i.propertyName==="value"&&Em(nf)){var s=[];jw(s,nf,i,Ny(i)),ww(aD,s)}}function rD(i,s,r){i==="focusin"?(Iw(),ef=s,nf=r,ef.attachEvent("onpropertychange",Fw)):i==="focusout"&&Iw()}function oD(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return Em(nf)}function lD(i,s){if(i==="click")return Em(s)}function cD(i,s){if(i==="input"||i==="change")return Em(s)}function uD(i,s){return i===s&&(i!==0||1/i===1/s)||i!==i&&s!==s}var xn=typeof Object.is=="function"?Object.is:uD;function sf(i,s){if(xn(i,s))return!0;if(typeof i!="object"||i===null||typeof s!="object"||s===null)return!1;var r=Object.keys(i),u=Object.keys(s);if(r.length!==u.length)return!1;for(u=0;u<r.length;u++){var g=r[u];if(!Hd.call(s,g)||!xn(i[g],s[g]))return!1}return!0}function Uw(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function Hw(i,s){var r=Uw(i);i=0;for(var u;r;){if(r.nodeType===3){if(u=i+r.textContent.length,i<=s&&u>=s)return{node:r,offset:s-i};i=u}t:{for(;r;){if(r.nextSibling){r=r.nextSibling;break t}r=r.parentNode}r=void 0}r=Uw(r)}}function Gw(i,s){return i&&s?i===s?!0:i&&i.nodeType===3?!1:s&&s.nodeType===3?Gw(i,s.parentNode):"contains"in i?i.contains(s):i.compareDocumentPosition?!!(i.compareDocumentPosition(s)&16):!1:!1}function Vw(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var s=bm(i.document);s instanceof i.HTMLIFrameElement;){try{var r=typeof s.contentWindow.location.href=="string"}catch{r=!1}if(r)i=s.contentWindow;else break;s=bm(i.document)}return s}function Iy(i){var s=i&&i.nodeName&&i.nodeName.toLowerCase();return s&&(s==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||s==="textarea"||i.contentEditable==="true")}var hD=Na&&"documentMode"in document&&11>=document.documentMode,bu=null,Fy=null,af=null,Uy=!1;function qw(i,s,r){var u=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Uy||bu==null||bu!==bm(u)||(u=bu,"selectionStart"in u&&Iy(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),af&&sf(af,u)||(af=u,u=db(Fy,"onSelect"),0<u.length&&(s=new Sm("onSelect","select",null,s,r),i.push({event:s,listeners:u}),s.target=bu)))}function ml(i,s){var r={};return r[i.toLowerCase()]=s.toLowerCase(),r["Webkit"+i]="webkit"+s,r["Moz"+i]="moz"+s,r}var yu={animationend:ml("Animation","AnimationEnd"),animationiteration:ml("Animation","AnimationIteration"),animationstart:ml("Animation","AnimationStart"),transitionrun:ml("Transition","TransitionRun"),transitionstart:ml("Transition","TransitionStart"),transitioncancel:ml("Transition","TransitionCancel"),transitionend:ml("Transition","TransitionEnd")},Hy={},Xw={};Na&&(Xw=document.createElement("div").style,"AnimationEvent"in window||(delete yu.animationend.animation,delete yu.animationiteration.animation,delete yu.animationstart.animation),"TransitionEvent"in window||delete yu.transitionend.transition);function bl(i){if(Hy[i])return Hy[i];if(!yu[i])return i;var s=yu[i],r;for(r in s)if(s.hasOwnProperty(r)&&r in Xw)return Hy[i]=s[r];return i}var Yw=bl("animationend"),$w=bl("animationiteration"),Kw=bl("animationstart"),dD=bl("transitionrun"),fD=bl("transitionstart"),pD=bl("transitioncancel"),Qw=bl("transitionend"),Ww=new Map,Gy="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Gy.push("scrollEnd");function Ts(i,s){Ww.set(i,s),pl(s,[i])}var Tm=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)},ts=[],vu=0,Vy=0;function _m(){for(var i=vu,s=Vy=vu=0;s<i;){var r=ts[s];ts[s++]=null;var u=ts[s];ts[s++]=null;var g=ts[s];ts[s++]=null;var b=ts[s];if(ts[s++]=null,u!==null&&g!==null){var S=u.pending;S===null?g.next=g:(g.next=S.next,S.next=g),u.pending=g}b!==0&&Zw(r,g,b)}}function Cm(i,s,r,u){ts[vu++]=i,ts[vu++]=s,ts[vu++]=r,ts[vu++]=u,Vy|=u,i.lanes|=u,i=i.alternate,i!==null&&(i.lanes|=u)}function qy(i,s,r,u){return Cm(i,s,r,u),Nm(i)}function yl(i,s){return Cm(i,null,null,s),Nm(i)}function Zw(i,s,r){i.lanes|=r;var u=i.alternate;u!==null&&(u.lanes|=r);for(var g=!1,b=i.return;b!==null;)b.childLanes|=r,u=b.alternate,u!==null&&(u.childLanes|=r),b.tag===22&&(i=b.stateNode,i===null||i._visibility&1||(g=!0)),i=b,b=b.return;return i.tag===3?(b=i.stateNode,g&&s!==null&&(g=31-vn(r),i=b.hiddenUpdates,u=i[g],u===null?i[g]=[s]:u.push(s),s.lane=r|536870912),b):null}function Nm(i){if(50<Cf)throw Cf=0,tx=null,Error(n(185));for(var s=i.return;s!==null;)i=s,s=i.return;return i.tag===3?i.stateNode:null}var xu={};function gD(i,s,r,u){this.tag=i,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function An(i,s,r,u){return new gD(i,s,r,u)}function Xy(i){return i=i.prototype,!(!i||!i.isReactComponent)}function Ma(i,s){var r=i.alternate;return r===null?(r=An(i.tag,s,i.key,i.mode),r.elementType=i.elementType,r.type=i.type,r.stateNode=i.stateNode,r.alternate=i,i.alternate=r):(r.pendingProps=s,r.type=i.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=i.flags&65011712,r.childLanes=i.childLanes,r.lanes=i.lanes,r.child=i.child,r.memoizedProps=i.memoizedProps,r.memoizedState=i.memoizedState,r.updateQueue=i.updateQueue,s=i.dependencies,r.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},r.sibling=i.sibling,r.index=i.index,r.ref=i.ref,r.refCleanup=i.refCleanup,r}function Jw(i,s){i.flags&=65011714;var r=i.alternate;return r===null?(i.childLanes=0,i.lanes=s,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=r.childLanes,i.lanes=r.lanes,i.child=r.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=r.memoizedProps,i.memoizedState=r.memoizedState,i.updateQueue=r.updateQueue,i.type=r.type,s=r.dependencies,i.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),i}function Mm(i,s,r,u,g,b){var S=0;if(u=i,typeof i=="function")Xy(i)&&(S=1);else if(typeof i=="string")S=xR(i,r,Rt.current)?26:i==="html"||i==="head"||i==="body"?27:5;else t:switch(i){case J:return i=An(31,r,s,g),i.elementType=J,i.lanes=b,i;case _:return vl(r.children,g,b,s);case M:S=8,g|=24;break;case N:return i=An(12,r,s,g|2),i.elementType=N,i.lanes=b,i;case j:return i=An(13,r,s,g),i.elementType=j,i.lanes=b,i;case z:return i=An(19,r,s,g),i.elementType=z,i.lanes=b,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case L:S=10;break t;case R:S=9;break t;case k:S=11;break t;case I:S=14;break t;case K:S=16,u=null;break t}S=29,r=Error(n(130,i===null?"null":typeof i,"")),u=null}return s=An(S,r,s,g),s.elementType=i,s.type=u,s.lanes=b,s}function vl(i,s,r,u){return i=An(7,i,u,s),i.lanes=r,i}function Yy(i,s,r){return i=An(6,i,null,s),i.lanes=r,i}function t1(i){var s=An(18,null,null,0);return s.stateNode=i,s}function $y(i,s,r){return s=An(4,i.children!==null?i.children:[],i.key,s),s.lanes=r,s.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},s}var e1=new WeakMap;function es(i,s){if(typeof i=="object"&&i!==null){var r=e1.get(i);return r!==void 0?r:(s={value:i,source:s,stack:lm(s)},e1.set(i,s),s)}return{value:i,source:s,stack:lm(s)}}var Au=[],Su=0,Dm=null,rf=0,is=[],ns=0,Fr=null,Ys=1,$s="";function Da(i,s){Au[Su++]=rf,Au[Su++]=Dm,Dm=i,rf=s}function i1(i,s,r){is[ns++]=Ys,is[ns++]=$s,is[ns++]=Fr,Fr=i;var u=Ys;i=$s;var g=32-vn(u)-1;u&=~(1<<g),r+=1;var b=32-vn(s)+g;if(30<b){var S=g-g%5;b=(u&(1<<S)-1).toString(32),u>>=S,g-=S,Ys=1<<32-vn(s)+g|r<<g|u,$s=b+i}else Ys=1<<b|r<<g|u,$s=i}function Ky(i){i.return!==null&&(Da(i,1),i1(i,1,0))}function Qy(i){for(;i===Dm;)Dm=Au[--Su],Au[Su]=null,rf=Au[--Su],Au[Su]=null;for(;i===Fr;)Fr=is[--ns],is[ns]=null,$s=is[--ns],is[ns]=null,Ys=is[--ns],is[ns]=null}function n1(i,s){is[ns++]=Ys,is[ns++]=$s,is[ns++]=Fr,Ys=s.id,$s=s.overflow,Fr=i}var mi=null,ve=null,zt=!1,Ur=null,ss=!1,Wy=Error(n(519));function Hr(i){var s=Error(n(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw of(es(s,i)),Wy}function s1(i){var s=i.stateNode,r=i.type,u=i.memoizedProps;switch(s[gi]=i,s[Zi]=u,r){case"dialog":kt("cancel",s),kt("close",s);break;case"iframe":case"object":case"embed":kt("load",s);break;case"video":case"audio":for(r=0;r<Mf.length;r++)kt(Mf[r],s);break;case"source":kt("error",s);break;case"img":case"image":case"link":kt("error",s),kt("load",s);break;case"details":kt("toggle",s);break;case"input":kt("invalid",s),bw(s,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0);break;case"select":kt("invalid",s);break;case"textarea":kt("invalid",s),vw(s,u.value,u.defaultValue,u.children)}r=u.children,typeof r!="string"&&typeof r!="number"&&typeof r!="bigint"||s.textContent===""+r||u.suppressHydrationWarning===!0||AT(s.textContent,r)?(u.popover!=null&&(kt("beforetoggle",s),kt("toggle",s)),u.onScroll!=null&&kt("scroll",s),u.onScrollEnd!=null&&kt("scrollend",s),u.onClick!=null&&(s.onclick=Ca),s=!0):s=!1,s||Hr(i,!0)}function a1(i){for(mi=i.return;mi;)switch(mi.tag){case 5:case 31:case 13:ss=!1;return;case 27:case 3:ss=!0;return;default:mi=mi.return}}function wu(i){if(i!==mi)return!1;if(!zt)return a1(i),zt=!0,!1;var s=i.tag,r;if((r=s!==3&&s!==27)&&((r=s===5)&&(r=i.type,r=!(r!=="form"&&r!=="button")||gx(i.type,i.memoizedProps)),r=!r),r&&ve&&Hr(i),a1(i),s===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(n(317));ve=DT(i)}else if(s===31){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(n(317));ve=DT(i)}else s===27?(s=ve,io(i.type)?(i=xx,xx=null,ve=i):ve=s):ve=mi?rs(i.stateNode.nextSibling):null;return!0}function xl(){ve=mi=null,zt=!1}function Zy(){var i=Ur;return i!==null&&(sn===null?sn=i:sn.push.apply(sn,i),Ur=null),i}function of(i){Ur===null?Ur=[i]:Ur.push(i)}var Jy=$t(null),Al=null,Ra=null;function Gr(i,s,r){ht(Jy,s._currentValue),s._currentValue=r}function La(i){i._currentValue=Jy.current,mt(Jy)}function tv(i,s,r){for(;i!==null;){var u=i.alternate;if((i.childLanes&s)!==s?(i.childLanes|=s,u!==null&&(u.childLanes|=s)):u!==null&&(u.childLanes&s)!==s&&(u.childLanes|=s),i===r)break;i=i.return}}function ev(i,s,r,u){var g=i.child;for(g!==null&&(g.return=i);g!==null;){var b=g.dependencies;if(b!==null){var S=g.child;b=b.firstContext;t:for(;b!==null;){var D=b;b=g;for(var O=0;O<s.length;O++)if(D.context===s[O]){b.lanes|=r,D=b.alternate,D!==null&&(D.lanes|=r),tv(b.return,r,i),u||(S=null);break t}b=D.next}}else if(g.tag===18){if(S=g.return,S===null)throw Error(n(341));S.lanes|=r,b=S.alternate,b!==null&&(b.lanes|=r),tv(S,r,i),S=null}else S=g.child;if(S!==null)S.return=g;else for(S=g;S!==null;){if(S===i){S=null;break}if(g=S.sibling,g!==null){g.return=S.return,S=g;break}S=S.return}g=S}}function Eu(i,s,r,u){i=null;for(var g=s,b=!1;g!==null;){if(!b){if((g.flags&524288)!==0)b=!0;else if((g.flags&262144)!==0)break}if(g.tag===10){var S=g.alternate;if(S===null)throw Error(n(387));if(S=S.memoizedProps,S!==null){var D=g.type;xn(g.pendingProps.value,S.value)||(i!==null?i.push(D):i=[D])}}else if(g===Ut.current){if(S=g.alternate,S===null)throw Error(n(387));S.memoizedState.memoizedState!==g.memoizedState.memoizedState&&(i!==null?i.push(Of):i=[Of])}g=g.return}i!==null&&ev(s,i,r,u),s.flags|=262144}function Rm(i){for(i=i.firstContext;i!==null;){if(!xn(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function Sl(i){Al=i,Ra=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function bi(i){return r1(Al,i)}function Lm(i,s){return Al===null&&Sl(i),r1(i,s)}function r1(i,s){var r=s._currentValue;if(s={context:s,memoizedValue:r,next:null},Ra===null){if(i===null)throw Error(n(308));Ra=s,i.dependencies={lanes:0,firstContext:s},i.flags|=524288}else Ra=Ra.next=s;return r}var mD=typeof AbortController<"u"?AbortController:function(){var i=[],s=this.signal={aborted:!1,addEventListener:function(r,u){i.push(u)}};this.abort=function(){s.aborted=!0,i.forEach(function(r){return r()})}},bD=d.unstable_scheduleCallback,yD=d.unstable_NormalPriority,Ve={$$typeof:L,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function iv(){return{controller:new mD,data:new Map,refCount:0}}function lf(i){i.refCount--,i.refCount===0&&bD(yD,function(){i.controller.abort()})}var cf=null,nv=0,Tu=0,_u=null;function vD(i,s){if(cf===null){var r=cf=[];nv=0,Tu=rx(),_u={status:"pending",value:void 0,then:function(u){r.push(u)}}}return nv++,s.then(o1,o1),s}function o1(){if(--nv===0&&cf!==null){_u!==null&&(_u.status="fulfilled");var i=cf;cf=null,Tu=0,_u=null;for(var s=0;s<i.length;s++)(0,i[s])()}}function xD(i,s){var r=[],u={status:"pending",value:null,reason:null,then:function(g){r.push(g)}};return i.then(function(){u.status="fulfilled",u.value=s;for(var g=0;g<r.length;g++)(0,r[g])(s)},function(g){for(u.status="rejected",u.reason=g,g=0;g<r.length;g++)(0,r[g])(void 0)}),u}var l1=P.S;P.S=function(i,s){qE=Fi(),typeof s=="object"&&s!==null&&typeof s.then=="function"&&vD(i,s),l1!==null&&l1(i,s)};var wl=$t(null);function sv(){var i=wl.current;return i!==null?i:ue.pooledCache}function km(i,s){s===null?ht(wl,wl.current):ht(wl,s.pool)}function c1(){var i=sv();return i===null?null:{parent:Ve._currentValue,pool:i}}var Cu=Error(n(460)),av=Error(n(474)),Om=Error(n(542)),jm={then:function(){}};function u1(i){return i=i.status,i==="fulfilled"||i==="rejected"}function h1(i,s,r){switch(r=i[r],r===void 0?i.push(s):r!==s&&(s.then(Ca,Ca),s=r),s.status){case"fulfilled":return s.value;case"rejected":throw i=s.reason,f1(i),i;default:if(typeof s.status=="string")s.then(Ca,Ca);else{if(i=ue,i!==null&&100<i.shellSuspendCounter)throw Error(n(482));i=s,i.status="pending",i.then(function(u){if(s.status==="pending"){var g=s;g.status="fulfilled",g.value=u}},function(u){if(s.status==="pending"){var g=s;g.status="rejected",g.reason=u}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw i=s.reason,f1(i),i}throw Tl=s,Cu}}function El(i){try{var s=i._init;return s(i._payload)}catch(r){throw r!==null&&typeof r=="object"&&typeof r.then=="function"?(Tl=r,Cu):r}}var Tl=null;function d1(){if(Tl===null)throw Error(n(459));var i=Tl;return Tl=null,i}function f1(i){if(i===Cu||i===Om)throw Error(n(483))}var Nu=null,uf=0;function Bm(i){var s=uf;return uf+=1,Nu===null&&(Nu=[]),h1(Nu,i,s)}function hf(i,s){s=s.props.ref,i.ref=s!==void 0?s:null}function zm(i,s){throw s.$$typeof===v?Error(n(525)):(i=Object.prototype.toString.call(s),Error(n(31,i==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":i)))}function p1(i){function s(F,B){if(i){var U=F.deletions;U===null?(F.deletions=[B],F.flags|=16):U.push(B)}}function r(F,B){if(!i)return null;for(;B!==null;)s(F,B),B=B.sibling;return null}function u(F){for(var B=new Map;F!==null;)F.key!==null?B.set(F.key,F):B.set(F.index,F),F=F.sibling;return B}function g(F,B){return F=Ma(F,B),F.index=0,F.sibling=null,F}function b(F,B,U){return F.index=U,i?(U=F.alternate,U!==null?(U=U.index,U<B?(F.flags|=67108866,B):U):(F.flags|=67108866,B)):(F.flags|=1048576,B)}function S(F){return i&&F.alternate===null&&(F.flags|=67108866),F}function D(F,B,U,Q){return B===null||B.tag!==6?(B=Yy(U,F.mode,Q),B.return=F,B):(B=g(B,U),B.return=F,B)}function O(F,B,U,Q){var bt=U.type;return bt===_?Y(F,B,U.props.children,Q,U.key):B!==null&&(B.elementType===bt||typeof bt=="object"&&bt!==null&&bt.$$typeof===K&&El(bt)===B.type)?(B=g(B,U.props),hf(B,U),B.return=F,B):(B=Mm(U.type,U.key,U.props,null,F.mode,Q),hf(B,U),B.return=F,B)}function H(F,B,U,Q){return B===null||B.tag!==4||B.stateNode.containerInfo!==U.containerInfo||B.stateNode.implementation!==U.implementation?(B=$y(U,F.mode,Q),B.return=F,B):(B=g(B,U.children||[]),B.return=F,B)}function Y(F,B,U,Q,bt){return B===null||B.tag!==7?(B=vl(U,F.mode,Q,bt),B.return=F,B):(B=g(B,U),B.return=F,B)}function Z(F,B,U){if(typeof B=="string"&&B!==""||typeof B=="number"||typeof B=="bigint")return B=Yy(""+B,F.mode,U),B.return=F,B;if(typeof B=="object"&&B!==null){switch(B.$$typeof){case w:return U=Mm(B.type,B.key,B.props,null,F.mode,U),hf(U,B),U.return=F,U;case C:return B=$y(B,F.mode,U),B.return=F,B;case K:return B=El(B),Z(F,B,U)}if(at(B)||X(B))return B=vl(B,F.mode,U,null),B.return=F,B;if(typeof B.then=="function")return Z(F,Bm(B),U);if(B.$$typeof===L)return Z(F,Lm(F,B),U);zm(F,B)}return null}function G(F,B,U,Q){var bt=B!==null?B.key:null;if(typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint")return bt!==null?null:D(F,B,""+U,Q);if(typeof U=="object"&&U!==null){switch(U.$$typeof){case w:return U.key===bt?O(F,B,U,Q):null;case C:return U.key===bt?H(F,B,U,Q):null;case K:return U=El(U),G(F,B,U,Q)}if(at(U)||X(U))return bt!==null?null:Y(F,B,U,Q,null);if(typeof U.then=="function")return G(F,B,Bm(U),Q);if(U.$$typeof===L)return G(F,B,Lm(F,U),Q);zm(F,U)}return null}function q(F,B,U,Q,bt){if(typeof Q=="string"&&Q!==""||typeof Q=="number"||typeof Q=="bigint")return F=F.get(U)||null,D(B,F,""+Q,bt);if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case w:return F=F.get(Q.key===null?U:Q.key)||null,O(B,F,Q,bt);case C:return F=F.get(Q.key===null?U:Q.key)||null,H(B,F,Q,bt);case K:return Q=El(Q),q(F,B,U,Q,bt)}if(at(Q)||X(Q))return F=F.get(U)||null,Y(B,F,Q,bt,null);if(typeof Q.then=="function")return q(F,B,U,Bm(Q),bt);if(Q.$$typeof===L)return q(F,B,U,Lm(B,Q),bt);zm(B,Q)}return null}function dt(F,B,U,Q){for(var bt=null,Vt=null,pt=B,_t=B=0,jt=null;pt!==null&&_t<U.length;_t++){pt.index>_t?(jt=pt,pt=null):jt=pt.sibling;var qt=G(F,pt,U[_t],Q);if(qt===null){pt===null&&(pt=jt);break}i&&pt&&qt.alternate===null&&s(F,pt),B=b(qt,B,_t),Vt===null?bt=qt:Vt.sibling=qt,Vt=qt,pt=jt}if(_t===U.length)return r(F,pt),zt&&Da(F,_t),bt;if(pt===null){for(;_t<U.length;_t++)pt=Z(F,U[_t],Q),pt!==null&&(B=b(pt,B,_t),Vt===null?bt=pt:Vt.sibling=pt,Vt=pt);return zt&&Da(F,_t),bt}for(pt=u(pt);_t<U.length;_t++)jt=q(pt,F,_t,U[_t],Q),jt!==null&&(i&&jt.alternate!==null&&pt.delete(jt.key===null?_t:jt.key),B=b(jt,B,_t),Vt===null?bt=jt:Vt.sibling=jt,Vt=jt);return i&&pt.forEach(function(oo){return s(F,oo)}),zt&&Da(F,_t),bt}function yt(F,B,U,Q){if(U==null)throw Error(n(151));for(var bt=null,Vt=null,pt=B,_t=B=0,jt=null,qt=U.next();pt!==null&&!qt.done;_t++,qt=U.next()){pt.index>_t?(jt=pt,pt=null):jt=pt.sibling;var oo=G(F,pt,qt.value,Q);if(oo===null){pt===null&&(pt=jt);break}i&&pt&&oo.alternate===null&&s(F,pt),B=b(oo,B,_t),Vt===null?bt=oo:Vt.sibling=oo,Vt=oo,pt=jt}if(qt.done)return r(F,pt),zt&&Da(F,_t),bt;if(pt===null){for(;!qt.done;_t++,qt=U.next())qt=Z(F,qt.value,Q),qt!==null&&(B=b(qt,B,_t),Vt===null?bt=qt:Vt.sibling=qt,Vt=qt);return zt&&Da(F,_t),bt}for(pt=u(pt);!qt.done;_t++,qt=U.next())qt=q(pt,F,_t,qt.value,Q),qt!==null&&(i&&qt.alternate!==null&&pt.delete(qt.key===null?_t:qt.key),B=b(qt,B,_t),Vt===null?bt=qt:Vt.sibling=qt,Vt=qt);return i&&pt.forEach(function(RR){return s(F,RR)}),zt&&Da(F,_t),bt}function ne(F,B,U,Q){if(typeof U=="object"&&U!==null&&U.type===_&&U.key===null&&(U=U.props.children),typeof U=="object"&&U!==null){switch(U.$$typeof){case w:t:{for(var bt=U.key;B!==null;){if(B.key===bt){if(bt=U.type,bt===_){if(B.tag===7){r(F,B.sibling),Q=g(B,U.props.children),Q.return=F,F=Q;break t}}else if(B.elementType===bt||typeof bt=="object"&&bt!==null&&bt.$$typeof===K&&El(bt)===B.type){r(F,B.sibling),Q=g(B,U.props),hf(Q,U),Q.return=F,F=Q;break t}r(F,B);break}else s(F,B);B=B.sibling}U.type===_?(Q=vl(U.props.children,F.mode,Q,U.key),Q.return=F,F=Q):(Q=Mm(U.type,U.key,U.props,null,F.mode,Q),hf(Q,U),Q.return=F,F=Q)}return S(F);case C:t:{for(bt=U.key;B!==null;){if(B.key===bt)if(B.tag===4&&B.stateNode.containerInfo===U.containerInfo&&B.stateNode.implementation===U.implementation){r(F,B.sibling),Q=g(B,U.children||[]),Q.return=F,F=Q;break t}else{r(F,B);break}else s(F,B);B=B.sibling}Q=$y(U,F.mode,Q),Q.return=F,F=Q}return S(F);case K:return U=El(U),ne(F,B,U,Q)}if(at(U))return dt(F,B,U,Q);if(X(U)){if(bt=X(U),typeof bt!="function")throw Error(n(150));return U=bt.call(U),yt(F,B,U,Q)}if(typeof U.then=="function")return ne(F,B,Bm(U),Q);if(U.$$typeof===L)return ne(F,B,Lm(F,U),Q);zm(F,U)}return typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint"?(U=""+U,B!==null&&B.tag===6?(r(F,B.sibling),Q=g(B,U),Q.return=F,F=Q):(r(F,B),Q=Yy(U,F.mode,Q),Q.return=F,F=Q),S(F)):r(F,B)}return function(F,B,U,Q){try{uf=0;var bt=ne(F,B,U,Q);return Nu=null,bt}catch(pt){if(pt===Cu||pt===Om)throw pt;var Vt=An(29,pt,null,F.mode);return Vt.lanes=Q,Vt.return=F,Vt}finally{}}}var _l=p1(!0),g1=p1(!1),Vr=!1;function rv(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ov(i,s){i=i.updateQueue,s.updateQueue===i&&(s.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function qr(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function Xr(i,s,r){var u=i.updateQueue;if(u===null)return null;if(u=u.shared,(Xt&2)!==0){var g=u.pending;return g===null?s.next=s:(s.next=g.next,g.next=s),u.pending=s,s=Nm(i),Zw(i,null,r),s}return Cm(i,u,s,r),Nm(i)}function df(i,s,r){if(s=s.updateQueue,s!==null&&(s=s.shared,(r&4194048)!==0)){var u=s.lanes;u&=i.pendingLanes,r|=u,s.lanes=r,rw(i,r)}}function lv(i,s){var r=i.updateQueue,u=i.alternate;if(u!==null&&(u=u.updateQueue,r===u)){var g=null,b=null;if(r=r.firstBaseUpdate,r!==null){do{var S={lane:r.lane,tag:r.tag,payload:r.payload,callback:null,next:null};b===null?g=b=S:b=b.next=S,r=r.next}while(r!==null);b===null?g=b=s:b=b.next=s}else g=b=s;r={baseState:u.baseState,firstBaseUpdate:g,lastBaseUpdate:b,shared:u.shared,callbacks:u.callbacks},i.updateQueue=r;return}i=r.lastBaseUpdate,i===null?r.firstBaseUpdate=s:i.next=s,r.lastBaseUpdate=s}var cv=!1;function ff(){if(cv){var i=_u;if(i!==null)throw i}}function pf(i,s,r,u){cv=!1;var g=i.updateQueue;Vr=!1;var b=g.firstBaseUpdate,S=g.lastBaseUpdate,D=g.shared.pending;if(D!==null){g.shared.pending=null;var O=D,H=O.next;O.next=null,S===null?b=H:S.next=H,S=O;var Y=i.alternate;Y!==null&&(Y=Y.updateQueue,D=Y.lastBaseUpdate,D!==S&&(D===null?Y.firstBaseUpdate=H:D.next=H,Y.lastBaseUpdate=O))}if(b!==null){var Z=g.baseState;S=0,Y=H=O=null,D=b;do{var G=D.lane&-536870913,q=G!==D.lane;if(q?(Ot&G)===G:(u&G)===G){G!==0&&G===Tu&&(cv=!0),Y!==null&&(Y=Y.next={lane:0,tag:D.tag,payload:D.payload,callback:null,next:null});t:{var dt=i,yt=D;G=s;var ne=r;switch(yt.tag){case 1:if(dt=yt.payload,typeof dt=="function"){Z=dt.call(ne,Z,G);break t}Z=dt;break t;case 3:dt.flags=dt.flags&-65537|128;case 0:if(dt=yt.payload,G=typeof dt=="function"?dt.call(ne,Z,G):dt,G==null)break t;Z=y({},Z,G);break t;case 2:Vr=!0}}G=D.callback,G!==null&&(i.flags|=64,q&&(i.flags|=8192),q=g.callbacks,q===null?g.callbacks=[G]:q.push(G))}else q={lane:G,tag:D.tag,payload:D.payload,callback:D.callback,next:null},Y===null?(H=Y=q,O=Z):Y=Y.next=q,S|=G;if(D=D.next,D===null){if(D=g.shared.pending,D===null)break;q=D,D=q.next,q.next=null,g.lastBaseUpdate=q,g.shared.pending=null}}while(!0);Y===null&&(O=Z),g.baseState=O,g.firstBaseUpdate=H,g.lastBaseUpdate=Y,b===null&&(g.shared.lanes=0),Wr|=S,i.lanes=S,i.memoizedState=Z}}function m1(i,s){if(typeof i!="function")throw Error(n(191,i));i.call(s)}function b1(i,s){var r=i.callbacks;if(r!==null)for(i.callbacks=null,i=0;i<r.length;i++)m1(r[i],s)}var Mu=$t(null),Pm=$t(0);function y1(i,s){i=Ua,ht(Pm,i),ht(Mu,s),Ua=i|s.baseLanes}function uv(){ht(Pm,Ua),ht(Mu,Mu.current)}function hv(){Ua=Pm.current,mt(Mu),mt(Pm)}var Sn=$t(null),as=null;function Yr(i){var s=i.alternate;ht(Pe,Pe.current&1),ht(Sn,i),as===null&&(s===null||Mu.current!==null||s.memoizedState!==null)&&(as=i)}function dv(i){ht(Pe,Pe.current),ht(Sn,i),as===null&&(as=i)}function v1(i){i.tag===22?(ht(Pe,Pe.current),ht(Sn,i),as===null&&(as=i)):$r()}function $r(){ht(Pe,Pe.current),ht(Sn,Sn.current)}function wn(i){mt(Sn),as===i&&(as=null),mt(Pe)}var Pe=$t(0);function Im(i){for(var s=i;s!==null;){if(s.tag===13){var r=s.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||yx(r)||vx(r)))return s}else if(s.tag===19&&(s.memoizedProps.revealOrder==="forwards"||s.memoizedProps.revealOrder==="backwards"||s.memoizedProps.revealOrder==="unstable_legacy-backwards"||s.memoizedProps.revealOrder==="together")){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===i)break;for(;s.sibling===null;){if(s.return===null||s.return===i)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var ka=0,Et=null,ee=null,qe=null,Fm=!1,Du=!1,Cl=!1,Um=0,gf=0,Ru=null,AD=0;function Re(){throw Error(n(321))}function fv(i,s){if(s===null)return!1;for(var r=0;r<s.length&&r<i.length;r++)if(!xn(i[r],s[r]))return!1;return!0}function pv(i,s,r,u,g,b){return ka=b,Et=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,P.H=i===null||i.memoizedState===null?iE:Mv,Cl=!1,b=r(u,g),Cl=!1,Du&&(b=A1(s,r,u,g)),x1(i),b}function x1(i){P.H=yf;var s=ee!==null&&ee.next!==null;if(ka=0,qe=ee=Et=null,Fm=!1,gf=0,Ru=null,s)throw Error(n(300));i===null||Xe||(i=i.dependencies,i!==null&&Rm(i)&&(Xe=!0))}function A1(i,s,r,u){Et=i;var g=0;do{if(Du&&(Ru=null),gf=0,Du=!1,25<=g)throw Error(n(301));if(g+=1,qe=ee=null,i.updateQueue!=null){var b=i.updateQueue;b.lastEffect=null,b.events=null,b.stores=null,b.memoCache!=null&&(b.memoCache.index=0)}P.H=nE,b=s(r,u)}while(Du);return b}function SD(){var i=P.H,s=i.useState()[0];return s=typeof s.then=="function"?mf(s):s,i=i.useState()[0],(ee!==null?ee.memoizedState:null)!==i&&(Et.flags|=1024),s}function gv(){var i=Um!==0;return Um=0,i}function mv(i,s,r){s.updateQueue=i.updateQueue,s.flags&=-2053,i.lanes&=~r}function bv(i){if(Fm){for(i=i.memoizedState;i!==null;){var s=i.queue;s!==null&&(s.pending=null),i=i.next}Fm=!1}ka=0,qe=ee=Et=null,Du=!1,gf=Um=0,Ru=null}function Ui(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return qe===null?Et.memoizedState=qe=i:qe=qe.next=i,qe}function Ie(){if(ee===null){var i=Et.alternate;i=i!==null?i.memoizedState:null}else i=ee.next;var s=qe===null?Et.memoizedState:qe.next;if(s!==null)qe=s,ee=i;else{if(i===null)throw Et.alternate===null?Error(n(467)):Error(n(310));ee=i,i={memoizedState:ee.memoizedState,baseState:ee.baseState,baseQueue:ee.baseQueue,queue:ee.queue,next:null},qe===null?Et.memoizedState=qe=i:qe=qe.next=i}return qe}function Hm(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function mf(i){var s=gf;return gf+=1,Ru===null&&(Ru=[]),i=h1(Ru,i,s),s=Et,(qe===null?s.memoizedState:qe.next)===null&&(s=s.alternate,P.H=s===null||s.memoizedState===null?iE:Mv),i}function Gm(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return mf(i);if(i.$$typeof===L)return bi(i)}throw Error(n(438,String(i)))}function yv(i){var s=null,r=Et.updateQueue;if(r!==null&&(s=r.memoCache),s==null){var u=Et.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(s={data:u.data.map(function(g){return g.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),r===null&&(r=Hm(),Et.updateQueue=r),r.memoCache=s,r=s.data[s.index],r===void 0)for(r=s.data[s.index]=Array(i),u=0;u<i;u++)r[u]=W;return s.index++,r}function Oa(i,s){return typeof s=="function"?s(i):s}function Vm(i){var s=Ie();return vv(s,ee,i)}function vv(i,s,r){var u=i.queue;if(u===null)throw Error(n(311));u.lastRenderedReducer=r;var g=i.baseQueue,b=u.pending;if(b!==null){if(g!==null){var S=g.next;g.next=b.next,b.next=S}s.baseQueue=g=b,u.pending=null}if(b=i.baseState,g===null)i.memoizedState=b;else{s=g.next;var D=S=null,O=null,H=s,Y=!1;do{var Z=H.lane&-536870913;if(Z!==H.lane?(Ot&Z)===Z:(ka&Z)===Z){var G=H.revertLane;if(G===0)O!==null&&(O=O.next={lane:0,revertLane:0,gesture:null,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null}),Z===Tu&&(Y=!0);else if((ka&G)===G){H=H.next,G===Tu&&(Y=!0);continue}else Z={lane:0,revertLane:H.revertLane,gesture:null,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null},O===null?(D=O=Z,S=b):O=O.next=Z,Et.lanes|=G,Wr|=G;Z=H.action,Cl&&r(b,Z),b=H.hasEagerState?H.eagerState:r(b,Z)}else G={lane:Z,revertLane:H.revertLane,gesture:H.gesture,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null},O===null?(D=O=G,S=b):O=O.next=G,Et.lanes|=Z,Wr|=Z;H=H.next}while(H!==null&&H!==s);if(O===null?S=b:O.next=D,!xn(b,i.memoizedState)&&(Xe=!0,Y&&(r=_u,r!==null)))throw r;i.memoizedState=b,i.baseState=S,i.baseQueue=O,u.lastRenderedState=b}return g===null&&(u.lanes=0),[i.memoizedState,u.dispatch]}function xv(i){var s=Ie(),r=s.queue;if(r===null)throw Error(n(311));r.lastRenderedReducer=i;var u=r.dispatch,g=r.pending,b=s.memoizedState;if(g!==null){r.pending=null;var S=g=g.next;do b=i(b,S.action),S=S.next;while(S!==g);xn(b,s.memoizedState)||(Xe=!0),s.memoizedState=b,s.baseQueue===null&&(s.baseState=b),r.lastRenderedState=b}return[b,u]}function S1(i,s,r){var u=Et,g=Ie(),b=zt;if(b){if(r===void 0)throw Error(n(407));r=r()}else r=s();var S=!xn((ee||g).memoizedState,r);if(S&&(g.memoizedState=r,Xe=!0),g=g.queue,wv(T1.bind(null,u,g,i),[i]),g.getSnapshot!==s||S||qe!==null&&qe.memoizedState.tag&1){if(u.flags|=2048,Lu(9,{destroy:void 0},E1.bind(null,u,g,r,s),null),ue===null)throw Error(n(349));b||(ka&127)!==0||w1(u,s,r)}return r}function w1(i,s,r){i.flags|=16384,i={getSnapshot:s,value:r},s=Et.updateQueue,s===null?(s=Hm(),Et.updateQueue=s,s.stores=[i]):(r=s.stores,r===null?s.stores=[i]:r.push(i))}function E1(i,s,r,u){s.value=r,s.getSnapshot=u,_1(s)&&C1(i)}function T1(i,s,r){return r(function(){_1(s)&&C1(i)})}function _1(i){var s=i.getSnapshot;i=i.value;try{var r=s();return!xn(i,r)}catch{return!0}}function C1(i){var s=yl(i,2);s!==null&&an(s,i,2)}function Av(i){var s=Ui();if(typeof i=="function"){var r=i;if(i=r(),Cl){zr(!0);try{r()}finally{zr(!1)}}}return s.memoizedState=s.baseState=i,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Oa,lastRenderedState:i},s}function N1(i,s,r,u){return i.baseState=r,vv(i,ee,typeof u=="function"?u:Oa)}function wD(i,s,r,u,g){if(Ym(i))throw Error(n(485));if(i=s.action,i!==null){var b={payload:g,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(S){b.listeners.push(S)}};P.T!==null?r(!0):b.isTransition=!1,u(b),r=s.pending,r===null?(b.next=s.pending=b,M1(s,b)):(b.next=r.next,s.pending=r.next=b)}}function M1(i,s){var r=s.action,u=s.payload,g=i.state;if(s.isTransition){var b=P.T,S={};P.T=S;try{var D=r(g,u),O=P.S;O!==null&&O(S,D),D1(i,s,D)}catch(H){Sv(i,s,H)}finally{b!==null&&S.types!==null&&(b.types=S.types),P.T=b}}else try{b=r(g,u),D1(i,s,b)}catch(H){Sv(i,s,H)}}function D1(i,s,r){r!==null&&typeof r=="object"&&typeof r.then=="function"?r.then(function(u){R1(i,s,u)},function(u){return Sv(i,s,u)}):R1(i,s,r)}function R1(i,s,r){s.status="fulfilled",s.value=r,L1(s),i.state=r,s=i.pending,s!==null&&(r=s.next,r===s?i.pending=null:(r=r.next,s.next=r,M1(i,r)))}function Sv(i,s,r){var u=i.pending;if(i.pending=null,u!==null){u=u.next;do s.status="rejected",s.reason=r,L1(s),s=s.next;while(s!==u)}i.action=null}function L1(i){i=i.listeners;for(var s=0;s<i.length;s++)(0,i[s])()}function k1(i,s){return s}function O1(i,s){if(zt){var r=ue.formState;if(r!==null){t:{var u=Et;if(zt){if(ve){e:{for(var g=ve,b=ss;g.nodeType!==8;){if(!b){g=null;break e}if(g=rs(g.nextSibling),g===null){g=null;break e}}b=g.data,g=b==="F!"||b==="F"?g:null}if(g){ve=rs(g.nextSibling),u=g.data==="F!";break t}}Hr(u)}u=!1}u&&(s=r[0])}}return r=Ui(),r.memoizedState=r.baseState=s,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:k1,lastRenderedState:s},r.queue=u,r=J1.bind(null,Et,u),u.dispatch=r,u=Av(!1),b=Nv.bind(null,Et,!1,u.queue),u=Ui(),g={state:s,dispatch:null,action:i,pending:null},u.queue=g,r=wD.bind(null,Et,g,b,r),g.dispatch=r,u.memoizedState=i,[s,r,!1]}function j1(i){var s=Ie();return B1(s,ee,i)}function B1(i,s,r){if(s=vv(i,s,k1)[0],i=Vm(Oa)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var u=mf(s)}catch(S){throw S===Cu?Om:S}else u=s;s=Ie();var g=s.queue,b=g.dispatch;return r!==s.memoizedState&&(Et.flags|=2048,Lu(9,{destroy:void 0},ED.bind(null,g,r),null)),[u,b,i]}function ED(i,s){i.action=s}function z1(i){var s=Ie(),r=ee;if(r!==null)return B1(s,r,i);Ie(),s=s.memoizedState,r=Ie();var u=r.queue.dispatch;return r.memoizedState=i,[s,u,!1]}function Lu(i,s,r,u){return i={tag:i,create:r,deps:u,inst:s,next:null},s=Et.updateQueue,s===null&&(s=Hm(),Et.updateQueue=s),r=s.lastEffect,r===null?s.lastEffect=i.next=i:(u=r.next,r.next=i,i.next=u,s.lastEffect=i),i}function P1(){return Ie().memoizedState}function qm(i,s,r,u){var g=Ui();Et.flags|=i,g.memoizedState=Lu(1|s,{destroy:void 0},r,u===void 0?null:u)}function Xm(i,s,r,u){var g=Ie();u=u===void 0?null:u;var b=g.memoizedState.inst;ee!==null&&u!==null&&fv(u,ee.memoizedState.deps)?g.memoizedState=Lu(s,b,r,u):(Et.flags|=i,g.memoizedState=Lu(1|s,b,r,u))}function I1(i,s){qm(8390656,8,i,s)}function wv(i,s){Xm(2048,8,i,s)}function TD(i){Et.flags|=4;var s=Et.updateQueue;if(s===null)s=Hm(),Et.updateQueue=s,s.events=[i];else{var r=s.events;r===null?s.events=[i]:r.push(i)}}function F1(i){var s=Ie().memoizedState;return TD({ref:s,nextImpl:i}),function(){if((Xt&2)!==0)throw Error(n(440));return s.impl.apply(void 0,arguments)}}function U1(i,s){return Xm(4,2,i,s)}function H1(i,s){return Xm(4,4,i,s)}function G1(i,s){if(typeof s=="function"){i=i();var r=s(i);return function(){typeof r=="function"?r():s(null)}}if(s!=null)return i=i(),s.current=i,function(){s.current=null}}function V1(i,s,r){r=r!=null?r.concat([i]):null,Xm(4,4,G1.bind(null,s,i),r)}function Ev(){}function q1(i,s){var r=Ie();s=s===void 0?null:s;var u=r.memoizedState;return s!==null&&fv(s,u[1])?u[0]:(r.memoizedState=[i,s],i)}function X1(i,s){var r=Ie();s=s===void 0?null:s;var u=r.memoizedState;if(s!==null&&fv(s,u[1]))return u[0];if(u=i(),Cl){zr(!0);try{i()}finally{zr(!1)}}return r.memoizedState=[u,s],u}function Tv(i,s,r){return r===void 0||(ka&1073741824)!==0&&(Ot&261930)===0?i.memoizedState=s:(i.memoizedState=r,i=YE(),Et.lanes|=i,Wr|=i,r)}function Y1(i,s,r,u){return xn(r,s)?r:Mu.current!==null?(i=Tv(i,r,u),xn(i,s)||(Xe=!0),i):(ka&42)===0||(ka&1073741824)!==0&&(Ot&261930)===0?(Xe=!0,i.memoizedState=r):(i=YE(),Et.lanes|=i,Wr|=i,s)}function $1(i,s,r,u,g){var b=V.p;V.p=b!==0&&8>b?b:8;var S=P.T,D={};P.T=D,Nv(i,!1,s,r);try{var O=g(),H=P.S;if(H!==null&&H(D,O),O!==null&&typeof O=="object"&&typeof O.then=="function"){var Y=xD(O,u);bf(i,s,Y,_n(i))}else bf(i,s,u,_n(i))}catch(Z){bf(i,s,{then:function(){},status:"rejected",reason:Z},_n())}finally{V.p=b,S!==null&&D.types!==null&&(S.types=D.types),P.T=S}}function _D(){}function _v(i,s,r,u){if(i.tag!==5)throw Error(n(476));var g=K1(i).queue;$1(i,g,s,st,r===null?_D:function(){return Q1(i),r(u)})}function K1(i){var s=i.memoizedState;if(s!==null)return s;s={memoizedState:st,baseState:st,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Oa,lastRenderedState:st},next:null};var r={};return s.next={memoizedState:r,baseState:r,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Oa,lastRenderedState:r},next:null},i.memoizedState=s,i=i.alternate,i!==null&&(i.memoizedState=s),s}function Q1(i){var s=K1(i);s.next===null&&(s=i.alternate.memoizedState),bf(i,s.next.queue,{},_n())}function Cv(){return bi(Of)}function W1(){return Ie().memoizedState}function Z1(){return Ie().memoizedState}function CD(i){for(var s=i.return;s!==null;){switch(s.tag){case 24:case 3:var r=_n();i=qr(r);var u=Xr(s,i,r);u!==null&&(an(u,s,r),df(u,s,r)),s={cache:iv()},i.payload=s;return}s=s.return}}function ND(i,s,r){var u=_n();r={lane:u,revertLane:0,gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null},Ym(i)?tE(s,r):(r=qy(i,s,r,u),r!==null&&(an(r,i,u),eE(r,s,u)))}function J1(i,s,r){var u=_n();bf(i,s,r,u)}function bf(i,s,r,u){var g={lane:u,revertLane:0,gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null};if(Ym(i))tE(s,g);else{var b=i.alternate;if(i.lanes===0&&(b===null||b.lanes===0)&&(b=s.lastRenderedReducer,b!==null))try{var S=s.lastRenderedState,D=b(S,r);if(g.hasEagerState=!0,g.eagerState=D,xn(D,S))return Cm(i,s,g,0),ue===null&&_m(),!1}catch{}finally{}if(r=qy(i,s,g,u),r!==null)return an(r,i,u),eE(r,s,u),!0}return!1}function Nv(i,s,r,u){if(u={lane:2,revertLane:rx(),gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},Ym(i)){if(s)throw Error(n(479))}else s=qy(i,r,u,2),s!==null&&an(s,i,2)}function Ym(i){var s=i.alternate;return i===Et||s!==null&&s===Et}function tE(i,s){Du=Fm=!0;var r=i.pending;r===null?s.next=s:(s.next=r.next,r.next=s),i.pending=s}function eE(i,s,r){if((r&4194048)!==0){var u=s.lanes;u&=i.pendingLanes,r|=u,s.lanes=r,rw(i,r)}}var yf={readContext:bi,use:Gm,useCallback:Re,useContext:Re,useEffect:Re,useImperativeHandle:Re,useLayoutEffect:Re,useInsertionEffect:Re,useMemo:Re,useReducer:Re,useRef:Re,useState:Re,useDebugValue:Re,useDeferredValue:Re,useTransition:Re,useSyncExternalStore:Re,useId:Re,useHostTransitionStatus:Re,useFormState:Re,useActionState:Re,useOptimistic:Re,useMemoCache:Re,useCacheRefresh:Re};yf.useEffectEvent=Re;var iE={readContext:bi,use:Gm,useCallback:function(i,s){return Ui().memoizedState=[i,s===void 0?null:s],i},useContext:bi,useEffect:I1,useImperativeHandle:function(i,s,r){r=r!=null?r.concat([i]):null,qm(4194308,4,G1.bind(null,s,i),r)},useLayoutEffect:function(i,s){return qm(4194308,4,i,s)},useInsertionEffect:function(i,s){qm(4,2,i,s)},useMemo:function(i,s){var r=Ui();s=s===void 0?null:s;var u=i();if(Cl){zr(!0);try{i()}finally{zr(!1)}}return r.memoizedState=[u,s],u},useReducer:function(i,s,r){var u=Ui();if(r!==void 0){var g=r(s);if(Cl){zr(!0);try{r(s)}finally{zr(!1)}}}else g=s;return u.memoizedState=u.baseState=g,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:g},u.queue=i,i=i.dispatch=ND.bind(null,Et,i),[u.memoizedState,i]},useRef:function(i){var s=Ui();return i={current:i},s.memoizedState=i},useState:function(i){i=Av(i);var s=i.queue,r=J1.bind(null,Et,s);return s.dispatch=r,[i.memoizedState,r]},useDebugValue:Ev,useDeferredValue:function(i,s){var r=Ui();return Tv(r,i,s)},useTransition:function(){var i=Av(!1);return i=$1.bind(null,Et,i.queue,!0,!1),Ui().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,s,r){var u=Et,g=Ui();if(zt){if(r===void 0)throw Error(n(407));r=r()}else{if(r=s(),ue===null)throw Error(n(349));(Ot&127)!==0||w1(u,s,r)}g.memoizedState=r;var b={value:r,getSnapshot:s};return g.queue=b,I1(T1.bind(null,u,b,i),[i]),u.flags|=2048,Lu(9,{destroy:void 0},E1.bind(null,u,b,r,s),null),r},useId:function(){var i=Ui(),s=ue.identifierPrefix;if(zt){var r=$s,u=Ys;r=(u&~(1<<32-vn(u)-1)).toString(32)+r,s="_"+s+"R_"+r,r=Um++,0<r&&(s+="H"+r.toString(32)),s+="_"}else r=AD++,s="_"+s+"r_"+r.toString(32)+"_";return i.memoizedState=s},useHostTransitionStatus:Cv,useFormState:O1,useActionState:O1,useOptimistic:function(i){var s=Ui();s.memoizedState=s.baseState=i;var r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=r,s=Nv.bind(null,Et,!0,r),r.dispatch=s,[i,s]},useMemoCache:yv,useCacheRefresh:function(){return Ui().memoizedState=CD.bind(null,Et)},useEffectEvent:function(i){var s=Ui(),r={impl:i};return s.memoizedState=r,function(){if((Xt&2)!==0)throw Error(n(440));return r.impl.apply(void 0,arguments)}}},Mv={readContext:bi,use:Gm,useCallback:q1,useContext:bi,useEffect:wv,useImperativeHandle:V1,useInsertionEffect:U1,useLayoutEffect:H1,useMemo:X1,useReducer:Vm,useRef:P1,useState:function(){return Vm(Oa)},useDebugValue:Ev,useDeferredValue:function(i,s){var r=Ie();return Y1(r,ee.memoizedState,i,s)},useTransition:function(){var i=Vm(Oa)[0],s=Ie().memoizedState;return[typeof i=="boolean"?i:mf(i),s]},useSyncExternalStore:S1,useId:W1,useHostTransitionStatus:Cv,useFormState:j1,useActionState:j1,useOptimistic:function(i,s){var r=Ie();return N1(r,ee,i,s)},useMemoCache:yv,useCacheRefresh:Z1};Mv.useEffectEvent=F1;var nE={readContext:bi,use:Gm,useCallback:q1,useContext:bi,useEffect:wv,useImperativeHandle:V1,useInsertionEffect:U1,useLayoutEffect:H1,useMemo:X1,useReducer:xv,useRef:P1,useState:function(){return xv(Oa)},useDebugValue:Ev,useDeferredValue:function(i,s){var r=Ie();return ee===null?Tv(r,i,s):Y1(r,ee.memoizedState,i,s)},useTransition:function(){var i=xv(Oa)[0],s=Ie().memoizedState;return[typeof i=="boolean"?i:mf(i),s]},useSyncExternalStore:S1,useId:W1,useHostTransitionStatus:Cv,useFormState:z1,useActionState:z1,useOptimistic:function(i,s){var r=Ie();return ee!==null?N1(r,ee,i,s):(r.baseState=i,[i,r.queue.dispatch])},useMemoCache:yv,useCacheRefresh:Z1};nE.useEffectEvent=F1;function Dv(i,s,r,u){s=i.memoizedState,r=r(u,s),r=r==null?s:y({},s,r),i.memoizedState=r,i.lanes===0&&(i.updateQueue.baseState=r)}var Rv={enqueueSetState:function(i,s,r){i=i._reactInternals;var u=_n(),g=qr(u);g.payload=s,r!=null&&(g.callback=r),s=Xr(i,g,u),s!==null&&(an(s,i,u),df(s,i,u))},enqueueReplaceState:function(i,s,r){i=i._reactInternals;var u=_n(),g=qr(u);g.tag=1,g.payload=s,r!=null&&(g.callback=r),s=Xr(i,g,u),s!==null&&(an(s,i,u),df(s,i,u))},enqueueForceUpdate:function(i,s){i=i._reactInternals;var r=_n(),u=qr(r);u.tag=2,s!=null&&(u.callback=s),s=Xr(i,u,r),s!==null&&(an(s,i,r),df(s,i,r))}};function sE(i,s,r,u,g,b,S){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(u,b,S):s.prototype&&s.prototype.isPureReactComponent?!sf(r,u)||!sf(g,b):!0}function aE(i,s,r,u){i=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(r,u),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(r,u),s.state!==i&&Rv.enqueueReplaceState(s,s.state,null)}function Nl(i,s){var r=s;if("ref"in s){r={};for(var u in s)u!=="ref"&&(r[u]=s[u])}if(i=i.defaultProps){r===s&&(r=y({},r));for(var g in i)r[g]===void 0&&(r[g]=i[g])}return r}function rE(i){Tm(i)}function oE(i){console.error(i)}function lE(i){Tm(i)}function $m(i,s){try{var r=i.onUncaughtError;r(s.value,{componentStack:s.stack})}catch(u){setTimeout(function(){throw u})}}function cE(i,s,r){try{var u=i.onCaughtError;u(r.value,{componentStack:r.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(g){setTimeout(function(){throw g})}}function Lv(i,s,r){return r=qr(r),r.tag=3,r.payload={element:null},r.callback=function(){$m(i,s)},r}function uE(i){return i=qr(i),i.tag=3,i}function hE(i,s,r,u){var g=r.type.getDerivedStateFromError;if(typeof g=="function"){var b=u.value;i.payload=function(){return g(b)},i.callback=function(){cE(s,r,u)}}var S=r.stateNode;S!==null&&typeof S.componentDidCatch=="function"&&(i.callback=function(){cE(s,r,u),typeof g!="function"&&(Zr===null?Zr=new Set([this]):Zr.add(this));var D=u.stack;this.componentDidCatch(u.value,{componentStack:D!==null?D:""})})}function MD(i,s,r,u,g){if(r.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(s=r.alternate,s!==null&&Eu(s,r,g,!0),r=Sn.current,r!==null){switch(r.tag){case 31:case 13:return as===null?rb():r.alternate===null&&Le===0&&(Le=3),r.flags&=-257,r.flags|=65536,r.lanes=g,u===jm?r.flags|=16384:(s=r.updateQueue,s===null?r.updateQueue=new Set([u]):s.add(u),nx(i,u,g)),!1;case 22:return r.flags|=65536,u===jm?r.flags|=16384:(s=r.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([u])},r.updateQueue=s):(r=s.retryQueue,r===null?s.retryQueue=new Set([u]):r.add(u)),nx(i,u,g)),!1}throw Error(n(435,r.tag))}return nx(i,u,g),rb(),!1}if(zt)return s=Sn.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=g,u!==Wy&&(i=Error(n(422),{cause:u}),of(es(i,r)))):(u!==Wy&&(s=Error(n(423),{cause:u}),of(es(s,r))),i=i.current.alternate,i.flags|=65536,g&=-g,i.lanes|=g,u=es(u,r),g=Lv(i.stateNode,u,g),lv(i,g),Le!==4&&(Le=2)),!1;var b=Error(n(520),{cause:u});if(b=es(b,r),_f===null?_f=[b]:_f.push(b),Le!==4&&(Le=2),s===null)return!0;u=es(u,r),r=s;do{switch(r.tag){case 3:return r.flags|=65536,i=g&-g,r.lanes|=i,i=Lv(r.stateNode,u,i),lv(r,i),!1;case 1:if(s=r.type,b=r.stateNode,(r.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(Zr===null||!Zr.has(b))))return r.flags|=65536,g&=-g,r.lanes|=g,g=uE(g),hE(g,i,r,u),lv(r,g),!1}r=r.return}while(r!==null);return!1}var kv=Error(n(461)),Xe=!1;function yi(i,s,r,u){s.child=i===null?g1(s,null,r,u):_l(s,i.child,r,u)}function dE(i,s,r,u,g){r=r.render;var b=s.ref;if("ref"in u){var S={};for(var D in u)D!=="ref"&&(S[D]=u[D])}else S=u;return Sl(s),u=pv(i,s,r,S,b,g),D=gv(),i!==null&&!Xe?(mv(i,s,g),ja(i,s,g)):(zt&&D&&Ky(s),s.flags|=1,yi(i,s,u,g),s.child)}function fE(i,s,r,u,g){if(i===null){var b=r.type;return typeof b=="function"&&!Xy(b)&&b.defaultProps===void 0&&r.compare===null?(s.tag=15,s.type=b,pE(i,s,b,u,g)):(i=Mm(r.type,null,u,s,s.mode,g),i.ref=s.ref,i.return=s,s.child=i)}if(b=i.child,!Uv(i,g)){var S=b.memoizedProps;if(r=r.compare,r=r!==null?r:sf,r(S,u)&&i.ref===s.ref)return ja(i,s,g)}return s.flags|=1,i=Ma(b,u),i.ref=s.ref,i.return=s,s.child=i}function pE(i,s,r,u,g){if(i!==null){var b=i.memoizedProps;if(sf(b,u)&&i.ref===s.ref)if(Xe=!1,s.pendingProps=u=b,Uv(i,g))(i.flags&131072)!==0&&(Xe=!0);else return s.lanes=i.lanes,ja(i,s,g)}return Ov(i,s,r,u,g)}function gE(i,s,r,u){var g=u.children,b=i!==null?i.memoizedState:null;if(i===null&&s.stateNode===null&&(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.mode==="hidden"){if((s.flags&128)!==0){if(b=b!==null?b.baseLanes|r:r,i!==null){for(u=s.child=i.child,g=0;u!==null;)g=g|u.lanes|u.childLanes,u=u.sibling;u=g&~b}else u=0,s.child=null;return mE(i,s,b,r,u)}if((r&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},i!==null&&km(s,b!==null?b.cachePool:null),b!==null?y1(s,b):uv(),v1(s);else return u=s.lanes=536870912,mE(i,s,b!==null?b.baseLanes|r:r,r,u)}else b!==null?(km(s,b.cachePool),y1(s,b),$r(),s.memoizedState=null):(i!==null&&km(s,null),uv(),$r());return yi(i,s,g,r),s.child}function vf(i,s){return i!==null&&i.tag===22||s.stateNode!==null||(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.sibling}function mE(i,s,r,u,g){var b=sv();return b=b===null?null:{parent:Ve._currentValue,pool:b},s.memoizedState={baseLanes:r,cachePool:b},i!==null&&km(s,null),uv(),v1(s),i!==null&&Eu(i,s,u,!0),s.childLanes=g,null}function Km(i,s){return s=Wm({mode:s.mode,children:s.children},i.mode),s.ref=i.ref,i.child=s,s.return=i,s}function bE(i,s,r){return _l(s,i.child,null,r),i=Km(s,s.pendingProps),i.flags|=2,wn(s),s.memoizedState=null,i}function DD(i,s,r){var u=s.pendingProps,g=(s.flags&128)!==0;if(s.flags&=-129,i===null){if(zt){if(u.mode==="hidden")return i=Km(s,u),s.lanes=536870912,vf(null,i);if(dv(s),(i=ve)?(i=MT(i,ss),i=i!==null&&i.data==="&"?i:null,i!==null&&(s.memoizedState={dehydrated:i,treeContext:Fr!==null?{id:Ys,overflow:$s}:null,retryLane:536870912,hydrationErrors:null},r=t1(i),r.return=s,s.child=r,mi=s,ve=null)):i=null,i===null)throw Hr(s);return s.lanes=536870912,null}return Km(s,u)}var b=i.memoizedState;if(b!==null){var S=b.dehydrated;if(dv(s),g)if(s.flags&256)s.flags&=-257,s=bE(i,s,r);else if(s.memoizedState!==null)s.child=i.child,s.flags|=128,s=null;else throw Error(n(558));else if(Xe||Eu(i,s,r,!1),g=(r&i.childLanes)!==0,Xe||g){if(u=ue,u!==null&&(S=ow(u,r),S!==0&&S!==b.retryLane))throw b.retryLane=S,yl(i,S),an(u,i,S),kv;rb(),s=bE(i,s,r)}else i=b.treeContext,ve=rs(S.nextSibling),mi=s,zt=!0,Ur=null,ss=!1,i!==null&&n1(s,i),s=Km(s,u),s.flags|=4096;return s}return i=Ma(i.child,{mode:u.mode,children:u.children}),i.ref=s.ref,s.child=i,i.return=s,i}function Qm(i,s){var r=s.ref;if(r===null)i!==null&&i.ref!==null&&(s.flags|=4194816);else{if(typeof r!="function"&&typeof r!="object")throw Error(n(284));(i===null||i.ref!==r)&&(s.flags|=4194816)}}function Ov(i,s,r,u,g){return Sl(s),r=pv(i,s,r,u,void 0,g),u=gv(),i!==null&&!Xe?(mv(i,s,g),ja(i,s,g)):(zt&&u&&Ky(s),s.flags|=1,yi(i,s,r,g),s.child)}function yE(i,s,r,u,g,b){return Sl(s),s.updateQueue=null,r=A1(s,u,r,g),x1(i),u=gv(),i!==null&&!Xe?(mv(i,s,b),ja(i,s,b)):(zt&&u&&Ky(s),s.flags|=1,yi(i,s,r,b),s.child)}function vE(i,s,r,u,g){if(Sl(s),s.stateNode===null){var b=xu,S=r.contextType;typeof S=="object"&&S!==null&&(b=bi(S)),b=new r(u,b),s.memoizedState=b.state!==null&&b.state!==void 0?b.state:null,b.updater=Rv,s.stateNode=b,b._reactInternals=s,b=s.stateNode,b.props=u,b.state=s.memoizedState,b.refs={},rv(s),S=r.contextType,b.context=typeof S=="object"&&S!==null?bi(S):xu,b.state=s.memoizedState,S=r.getDerivedStateFromProps,typeof S=="function"&&(Dv(s,r,S,u),b.state=s.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof b.getSnapshotBeforeUpdate=="function"||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(S=b.state,typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount(),S!==b.state&&Rv.enqueueReplaceState(b,b.state,null),pf(s,u,b,g),ff(),b.state=s.memoizedState),typeof b.componentDidMount=="function"&&(s.flags|=4194308),u=!0}else if(i===null){b=s.stateNode;var D=s.memoizedProps,O=Nl(r,D);b.props=O;var H=b.context,Y=r.contextType;S=xu,typeof Y=="object"&&Y!==null&&(S=bi(Y));var Z=r.getDerivedStateFromProps;Y=typeof Z=="function"||typeof b.getSnapshotBeforeUpdate=="function",D=s.pendingProps!==D,Y||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(D||H!==S)&&aE(s,b,u,S),Vr=!1;var G=s.memoizedState;b.state=G,pf(s,u,b,g),ff(),H=s.memoizedState,D||G!==H||Vr?(typeof Z=="function"&&(Dv(s,r,Z,u),H=s.memoizedState),(O=Vr||sE(s,r,O,u,G,H,S))?(Y||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount()),typeof b.componentDidMount=="function"&&(s.flags|=4194308)):(typeof b.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=u,s.memoizedState=H),b.props=u,b.state=H,b.context=S,u=O):(typeof b.componentDidMount=="function"&&(s.flags|=4194308),u=!1)}else{b=s.stateNode,ov(i,s),S=s.memoizedProps,Y=Nl(r,S),b.props=Y,Z=s.pendingProps,G=b.context,H=r.contextType,O=xu,typeof H=="object"&&H!==null&&(O=bi(H)),D=r.getDerivedStateFromProps,(H=typeof D=="function"||typeof b.getSnapshotBeforeUpdate=="function")||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(S!==Z||G!==O)&&aE(s,b,u,O),Vr=!1,G=s.memoizedState,b.state=G,pf(s,u,b,g),ff();var q=s.memoizedState;S!==Z||G!==q||Vr||i!==null&&i.dependencies!==null&&Rm(i.dependencies)?(typeof D=="function"&&(Dv(s,r,D,u),q=s.memoizedState),(Y=Vr||sE(s,r,Y,u,G,q,O)||i!==null&&i.dependencies!==null&&Rm(i.dependencies))?(H||typeof b.UNSAFE_componentWillUpdate!="function"&&typeof b.componentWillUpdate!="function"||(typeof b.componentWillUpdate=="function"&&b.componentWillUpdate(u,q,O),typeof b.UNSAFE_componentWillUpdate=="function"&&b.UNSAFE_componentWillUpdate(u,q,O)),typeof b.componentDidUpdate=="function"&&(s.flags|=4),typeof b.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof b.componentDidUpdate!="function"||S===i.memoizedProps&&G===i.memoizedState||(s.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||S===i.memoizedProps&&G===i.memoizedState||(s.flags|=1024),s.memoizedProps=u,s.memoizedState=q),b.props=u,b.state=q,b.context=O,u=Y):(typeof b.componentDidUpdate!="function"||S===i.memoizedProps&&G===i.memoizedState||(s.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||S===i.memoizedProps&&G===i.memoizedState||(s.flags|=1024),u=!1)}return b=u,Qm(i,s),u=(s.flags&128)!==0,b||u?(b=s.stateNode,r=u&&typeof r.getDerivedStateFromError!="function"?null:b.render(),s.flags|=1,i!==null&&u?(s.child=_l(s,i.child,null,g),s.child=_l(s,null,r,g)):yi(i,s,r,g),s.memoizedState=b.state,i=s.child):i=ja(i,s,g),i}function xE(i,s,r,u){return xl(),s.flags|=256,yi(i,s,r,u),s.child}var jv={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Bv(i){return{baseLanes:i,cachePool:c1()}}function zv(i,s,r){return i=i!==null?i.childLanes&~r:0,s&&(i|=Tn),i}function AE(i,s,r){var u=s.pendingProps,g=!1,b=(s.flags&128)!==0,S;if((S=b)||(S=i!==null&&i.memoizedState===null?!1:(Pe.current&2)!==0),S&&(g=!0,s.flags&=-129),S=(s.flags&32)!==0,s.flags&=-33,i===null){if(zt){if(g?Yr(s):$r(),(i=ve)?(i=MT(i,ss),i=i!==null&&i.data!=="&"?i:null,i!==null&&(s.memoizedState={dehydrated:i,treeContext:Fr!==null?{id:Ys,overflow:$s}:null,retryLane:536870912,hydrationErrors:null},r=t1(i),r.return=s,s.child=r,mi=s,ve=null)):i=null,i===null)throw Hr(s);return vx(i)?s.lanes=32:s.lanes=536870912,null}var D=u.children;return u=u.fallback,g?($r(),g=s.mode,D=Wm({mode:"hidden",children:D},g),u=vl(u,g,r,null),D.return=s,u.return=s,D.sibling=u,s.child=D,u=s.child,u.memoizedState=Bv(r),u.childLanes=zv(i,S,r),s.memoizedState=jv,vf(null,u)):(Yr(s),Pv(s,D))}var O=i.memoizedState;if(O!==null&&(D=O.dehydrated,D!==null)){if(b)s.flags&256?(Yr(s),s.flags&=-257,s=Iv(i,s,r)):s.memoizedState!==null?($r(),s.child=i.child,s.flags|=128,s=null):($r(),D=u.fallback,g=s.mode,u=Wm({mode:"visible",children:u.children},g),D=vl(D,g,r,null),D.flags|=2,u.return=s,D.return=s,u.sibling=D,s.child=u,_l(s,i.child,null,r),u=s.child,u.memoizedState=Bv(r),u.childLanes=zv(i,S,r),s.memoizedState=jv,s=vf(null,u));else if(Yr(s),vx(D)){if(S=D.nextSibling&&D.nextSibling.dataset,S)var H=S.dgst;S=H,u=Error(n(419)),u.stack="",u.digest=S,of({value:u,source:null,stack:null}),s=Iv(i,s,r)}else if(Xe||Eu(i,s,r,!1),S=(r&i.childLanes)!==0,Xe||S){if(S=ue,S!==null&&(u=ow(S,r),u!==0&&u!==O.retryLane))throw O.retryLane=u,yl(i,u),an(S,i,u),kv;yx(D)||rb(),s=Iv(i,s,r)}else yx(D)?(s.flags|=192,s.child=i.child,s=null):(i=O.treeContext,ve=rs(D.nextSibling),mi=s,zt=!0,Ur=null,ss=!1,i!==null&&n1(s,i),s=Pv(s,u.children),s.flags|=4096);return s}return g?($r(),D=u.fallback,g=s.mode,O=i.child,H=O.sibling,u=Ma(O,{mode:"hidden",children:u.children}),u.subtreeFlags=O.subtreeFlags&65011712,H!==null?D=Ma(H,D):(D=vl(D,g,r,null),D.flags|=2),D.return=s,u.return=s,u.sibling=D,s.child=u,vf(null,u),u=s.child,D=i.child.memoizedState,D===null?D=Bv(r):(g=D.cachePool,g!==null?(O=Ve._currentValue,g=g.parent!==O?{parent:O,pool:O}:g):g=c1(),D={baseLanes:D.baseLanes|r,cachePool:g}),u.memoizedState=D,u.childLanes=zv(i,S,r),s.memoizedState=jv,vf(i.child,u)):(Yr(s),r=i.child,i=r.sibling,r=Ma(r,{mode:"visible",children:u.children}),r.return=s,r.sibling=null,i!==null&&(S=s.deletions,S===null?(s.deletions=[i],s.flags|=16):S.push(i)),s.child=r,s.memoizedState=null,r)}function Pv(i,s){return s=Wm({mode:"visible",children:s},i.mode),s.return=i,i.child=s}function Wm(i,s){return i=An(22,i,null,s),i.lanes=0,i}function Iv(i,s,r){return _l(s,i.child,null,r),i=Pv(s,s.pendingProps.children),i.flags|=2,s.memoizedState=null,i}function SE(i,s,r){i.lanes|=s;var u=i.alternate;u!==null&&(u.lanes|=s),tv(i.return,s,r)}function Fv(i,s,r,u,g,b){var S=i.memoizedState;S===null?i.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:u,tail:r,tailMode:g,treeForkCount:b}:(S.isBackwards=s,S.rendering=null,S.renderingStartTime=0,S.last=u,S.tail=r,S.tailMode=g,S.treeForkCount=b)}function wE(i,s,r){var u=s.pendingProps,g=u.revealOrder,b=u.tail;u=u.children;var S=Pe.current,D=(S&2)!==0;if(D?(S=S&1|2,s.flags|=128):S&=1,ht(Pe,S),yi(i,s,u,r),u=zt?rf:0,!D&&i!==null&&(i.flags&128)!==0)t:for(i=s.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&SE(i,r,s);else if(i.tag===19)SE(i,r,s);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===s)break t;for(;i.sibling===null;){if(i.return===null||i.return===s)break t;i=i.return}i.sibling.return=i.return,i=i.sibling}switch(g){case"forwards":for(r=s.child,g=null;r!==null;)i=r.alternate,i!==null&&Im(i)===null&&(g=r),r=r.sibling;r=g,r===null?(g=s.child,s.child=null):(g=r.sibling,r.sibling=null),Fv(s,!1,g,r,b,u);break;case"backwards":case"unstable_legacy-backwards":for(r=null,g=s.child,s.child=null;g!==null;){if(i=g.alternate,i!==null&&Im(i)===null){s.child=g;break}i=g.sibling,g.sibling=r,r=g,g=i}Fv(s,!0,r,null,b,u);break;case"together":Fv(s,!1,null,null,void 0,u);break;default:s.memoizedState=null}return s.child}function ja(i,s,r){if(i!==null&&(s.dependencies=i.dependencies),Wr|=s.lanes,(r&s.childLanes)===0)if(i!==null){if(Eu(i,s,r,!1),(r&s.childLanes)===0)return null}else return null;if(i!==null&&s.child!==i.child)throw Error(n(153));if(s.child!==null){for(i=s.child,r=Ma(i,i.pendingProps),s.child=r,r.return=s;i.sibling!==null;)i=i.sibling,r=r.sibling=Ma(i,i.pendingProps),r.return=s;r.sibling=null}return s.child}function Uv(i,s){return(i.lanes&s)!==0?!0:(i=i.dependencies,!!(i!==null&&Rm(i)))}function RD(i,s,r){switch(s.tag){case 3:Wi(s,s.stateNode.containerInfo),Gr(s,Ve,i.memoizedState.cache),xl();break;case 27:case 5:pi(s);break;case 4:Wi(s,s.stateNode.containerInfo);break;case 10:Gr(s,s.type,s.memoizedProps.value);break;case 31:if(s.memoizedState!==null)return s.flags|=128,dv(s),null;break;case 13:var u=s.memoizedState;if(u!==null)return u.dehydrated!==null?(Yr(s),s.flags|=128,null):(r&s.child.childLanes)!==0?AE(i,s,r):(Yr(s),i=ja(i,s,r),i!==null?i.sibling:null);Yr(s);break;case 19:var g=(i.flags&128)!==0;if(u=(r&s.childLanes)!==0,u||(Eu(i,s,r,!1),u=(r&s.childLanes)!==0),g){if(u)return wE(i,s,r);s.flags|=128}if(g=s.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),ht(Pe,Pe.current),u)break;return null;case 22:return s.lanes=0,gE(i,s,r,s.pendingProps);case 24:Gr(s,Ve,i.memoizedState.cache)}return ja(i,s,r)}function EE(i,s,r){if(i!==null)if(i.memoizedProps!==s.pendingProps)Xe=!0;else{if(!Uv(i,r)&&(s.flags&128)===0)return Xe=!1,RD(i,s,r);Xe=(i.flags&131072)!==0}else Xe=!1,zt&&(s.flags&1048576)!==0&&i1(s,rf,s.index);switch(s.lanes=0,s.tag){case 16:t:{var u=s.pendingProps;if(i=El(s.elementType),s.type=i,typeof i=="function")Xy(i)?(u=Nl(i,u),s.tag=1,s=vE(null,s,i,u,r)):(s.tag=0,s=Ov(null,s,i,u,r));else{if(i!=null){var g=i.$$typeof;if(g===k){s.tag=11,s=dE(null,s,i,u,r);break t}else if(g===I){s.tag=14,s=fE(null,s,i,u,r);break t}}throw s=et(i)||i,Error(n(306,s,""))}}return s;case 0:return Ov(i,s,s.type,s.pendingProps,r);case 1:return u=s.type,g=Nl(u,s.pendingProps),vE(i,s,u,g,r);case 3:t:{if(Wi(s,s.stateNode.containerInfo),i===null)throw Error(n(387));u=s.pendingProps;var b=s.memoizedState;g=b.element,ov(i,s),pf(s,u,null,r);var S=s.memoizedState;if(u=S.cache,Gr(s,Ve,u),u!==b.cache&&ev(s,[Ve],r,!0),ff(),u=S.element,b.isDehydrated)if(b={element:u,isDehydrated:!1,cache:S.cache},s.updateQueue.baseState=b,s.memoizedState=b,s.flags&256){s=xE(i,s,u,r);break t}else if(u!==g){g=es(Error(n(424)),s),of(g),s=xE(i,s,u,r);break t}else{switch(i=s.stateNode.containerInfo,i.nodeType){case 9:i=i.body;break;default:i=i.nodeName==="HTML"?i.ownerDocument.body:i}for(ve=rs(i.firstChild),mi=s,zt=!0,Ur=null,ss=!0,r=g1(s,null,u,r),s.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling}else{if(xl(),u===g){s=ja(i,s,r);break t}yi(i,s,u,r)}s=s.child}return s;case 26:return Qm(i,s),i===null?(r=jT(s.type,null,s.pendingProps,null))?s.memoizedState=r:zt||(r=s.type,i=s.pendingProps,u=fb(Se.current).createElement(r),u[gi]=s,u[Zi]=i,vi(u,r,i),si(u),s.stateNode=u):s.memoizedState=jT(s.type,i.memoizedProps,s.pendingProps,i.memoizedState),null;case 27:return pi(s),i===null&&zt&&(u=s.stateNode=LT(s.type,s.pendingProps,Se.current),mi=s,ss=!0,g=ve,io(s.type)?(xx=g,ve=rs(u.firstChild)):ve=g),yi(i,s,s.pendingProps.children,r),Qm(i,s),i===null&&(s.flags|=4194304),s.child;case 5:return i===null&&zt&&((g=u=ve)&&(u=oR(u,s.type,s.pendingProps,ss),u!==null?(s.stateNode=u,mi=s,ve=rs(u.firstChild),ss=!1,g=!0):g=!1),g||Hr(s)),pi(s),g=s.type,b=s.pendingProps,S=i!==null?i.memoizedProps:null,u=b.children,gx(g,b)?u=null:S!==null&&gx(g,S)&&(s.flags|=32),s.memoizedState!==null&&(g=pv(i,s,SD,null,null,r),Of._currentValue=g),Qm(i,s),yi(i,s,u,r),s.child;case 6:return i===null&&zt&&((i=r=ve)&&(r=lR(r,s.pendingProps,ss),r!==null?(s.stateNode=r,mi=s,ve=null,i=!0):i=!1),i||Hr(s)),null;case 13:return AE(i,s,r);case 4:return Wi(s,s.stateNode.containerInfo),u=s.pendingProps,i===null?s.child=_l(s,null,u,r):yi(i,s,u,r),s.child;case 11:return dE(i,s,s.type,s.pendingProps,r);case 7:return yi(i,s,s.pendingProps,r),s.child;case 8:return yi(i,s,s.pendingProps.children,r),s.child;case 12:return yi(i,s,s.pendingProps.children,r),s.child;case 10:return u=s.pendingProps,Gr(s,s.type,u.value),yi(i,s,u.children,r),s.child;case 9:return g=s.type._context,u=s.pendingProps.children,Sl(s),g=bi(g),u=u(g),s.flags|=1,yi(i,s,u,r),s.child;case 14:return fE(i,s,s.type,s.pendingProps,r);case 15:return pE(i,s,s.type,s.pendingProps,r);case 19:return wE(i,s,r);case 31:return DD(i,s,r);case 22:return gE(i,s,r,s.pendingProps);case 24:return Sl(s),u=bi(Ve),i===null?(g=sv(),g===null&&(g=ue,b=iv(),g.pooledCache=b,b.refCount++,b!==null&&(g.pooledCacheLanes|=r),g=b),s.memoizedState={parent:u,cache:g},rv(s),Gr(s,Ve,g)):((i.lanes&r)!==0&&(ov(i,s),pf(s,null,null,r),ff()),g=i.memoizedState,b=s.memoizedState,g.parent!==u?(g={parent:u,cache:u},s.memoizedState=g,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=g),Gr(s,Ve,u)):(u=b.cache,Gr(s,Ve,u),u!==g.cache&&ev(s,[Ve],r,!0))),yi(i,s,s.pendingProps.children,r),s.child;case 29:throw s.pendingProps}throw Error(n(156,s.tag))}function Ba(i){i.flags|=4}function Hv(i,s,r,u,g){if((s=(i.mode&32)!==0)&&(s=!1),s){if(i.flags|=16777216,(g&335544128)===g)if(i.stateNode.complete)i.flags|=8192;else if(WE())i.flags|=8192;else throw Tl=jm,av}else i.flags&=-16777217}function TE(i,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!FT(s))if(WE())i.flags|=8192;else throw Tl=jm,av}function Zm(i,s){s!==null&&(i.flags|=4),i.flags&16384&&(s=i.tag!==22?sw():536870912,i.lanes|=s,Bu|=s)}function xf(i,s){if(!zt)switch(i.tailMode){case"hidden":s=i.tail;for(var r=null;s!==null;)s.alternate!==null&&(r=s),s=s.sibling;r===null?i.tail=null:r.sibling=null;break;case"collapsed":r=i.tail;for(var u=null;r!==null;)r.alternate!==null&&(u=r),r=r.sibling;u===null?s||i.tail===null?i.tail=null:i.tail.sibling=null:u.sibling=null}}function xe(i){var s=i.alternate!==null&&i.alternate.child===i.child,r=0,u=0;if(s)for(var g=i.child;g!==null;)r|=g.lanes|g.childLanes,u|=g.subtreeFlags&65011712,u|=g.flags&65011712,g.return=i,g=g.sibling;else for(g=i.child;g!==null;)r|=g.lanes|g.childLanes,u|=g.subtreeFlags,u|=g.flags,g.return=i,g=g.sibling;return i.subtreeFlags|=u,i.childLanes=r,s}function LD(i,s,r){var u=s.pendingProps;switch(Qy(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return xe(s),null;case 1:return xe(s),null;case 3:return r=s.stateNode,u=null,i!==null&&(u=i.memoizedState.cache),s.memoizedState.cache!==u&&(s.flags|=2048),La(Ve),Mi(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(i===null||i.child===null)&&(wu(s)?Ba(s):i===null||i.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,Zy())),xe(s),null;case 26:var g=s.type,b=s.memoizedState;return i===null?(Ba(s),b!==null?(xe(s),TE(s,b)):(xe(s),Hv(s,g,null,u,r))):b?b!==i.memoizedState?(Ba(s),xe(s),TE(s,b)):(xe(s),s.flags&=-16777217):(i=i.memoizedProps,i!==u&&Ba(s),xe(s),Hv(s,g,i,u,r)),null;case 27:if(It(s),r=Se.current,g=s.type,i!==null&&s.stateNode!=null)i.memoizedProps!==u&&Ba(s);else{if(!u){if(s.stateNode===null)throw Error(n(166));return xe(s),null}i=Rt.current,wu(s)?s1(s):(i=LT(g,u,r),s.stateNode=i,Ba(s))}return xe(s),null;case 5:if(It(s),g=s.type,i!==null&&s.stateNode!=null)i.memoizedProps!==u&&Ba(s);else{if(!u){if(s.stateNode===null)throw Error(n(166));return xe(s),null}if(b=Rt.current,wu(s))s1(s);else{var S=fb(Se.current);switch(b){case 1:b=S.createElementNS("http://www.w3.org/2000/svg",g);break;case 2:b=S.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;default:switch(g){case"svg":b=S.createElementNS("http://www.w3.org/2000/svg",g);break;case"math":b=S.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;case"script":b=S.createElement("div"),b.innerHTML="<script><\/script>",b=b.removeChild(b.firstChild);break;case"select":b=typeof u.is=="string"?S.createElement("select",{is:u.is}):S.createElement("select"),u.multiple?b.multiple=!0:u.size&&(b.size=u.size);break;default:b=typeof u.is=="string"?S.createElement(g,{is:u.is}):S.createElement(g)}}b[gi]=s,b[Zi]=u;t:for(S=s.child;S!==null;){if(S.tag===5||S.tag===6)b.appendChild(S.stateNode);else if(S.tag!==4&&S.tag!==27&&S.child!==null){S.child.return=S,S=S.child;continue}if(S===s)break t;for(;S.sibling===null;){if(S.return===null||S.return===s)break t;S=S.return}S.sibling.return=S.return,S=S.sibling}s.stateNode=b;t:switch(vi(b,g,u),g){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break t;case"img":u=!0;break t;default:u=!1}u&&Ba(s)}}return xe(s),Hv(s,s.type,i===null?null:i.memoizedProps,s.pendingProps,r),null;case 6:if(i&&s.stateNode!=null)i.memoizedProps!==u&&Ba(s);else{if(typeof u!="string"&&s.stateNode===null)throw Error(n(166));if(i=Se.current,wu(s)){if(i=s.stateNode,r=s.memoizedProps,u=null,g=mi,g!==null)switch(g.tag){case 27:case 5:u=g.memoizedProps}i[gi]=s,i=!!(i.nodeValue===r||u!==null&&u.suppressHydrationWarning===!0||AT(i.nodeValue,r)),i||Hr(s,!0)}else i=fb(i).createTextNode(u),i[gi]=s,s.stateNode=i}return xe(s),null;case 31:if(r=s.memoizedState,i===null||i.memoizedState!==null){if(u=wu(s),r!==null){if(i===null){if(!u)throw Error(n(318));if(i=s.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(n(557));i[gi]=s}else xl(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;xe(s),i=!1}else r=Zy(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=r),i=!0;if(!i)return s.flags&256?(wn(s),s):(wn(s),null);if((s.flags&128)!==0)throw Error(n(558))}return xe(s),null;case 13:if(u=s.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(g=wu(s),u!==null&&u.dehydrated!==null){if(i===null){if(!g)throw Error(n(318));if(g=s.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(n(317));g[gi]=s}else xl(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;xe(s),g=!1}else g=Zy(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=g),g=!0;if(!g)return s.flags&256?(wn(s),s):(wn(s),null)}return wn(s),(s.flags&128)!==0?(s.lanes=r,s):(r=u!==null,i=i!==null&&i.memoizedState!==null,r&&(u=s.child,g=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(g=u.alternate.memoizedState.cachePool.pool),b=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(b=u.memoizedState.cachePool.pool),b!==g&&(u.flags|=2048)),r!==i&&r&&(s.child.flags|=8192),Zm(s,s.updateQueue),xe(s),null);case 4:return Mi(),i===null&&ux(s.stateNode.containerInfo),xe(s),null;case 10:return La(s.type),xe(s),null;case 19:if(mt(Pe),u=s.memoizedState,u===null)return xe(s),null;if(g=(s.flags&128)!==0,b=u.rendering,b===null)if(g)xf(u,!1);else{if(Le!==0||i!==null&&(i.flags&128)!==0)for(i=s.child;i!==null;){if(b=Im(i),b!==null){for(s.flags|=128,xf(u,!1),i=b.updateQueue,s.updateQueue=i,Zm(s,i),s.subtreeFlags=0,i=r,r=s.child;r!==null;)Jw(r,i),r=r.sibling;return ht(Pe,Pe.current&1|2),zt&&Da(s,u.treeForkCount),s.child}i=i.sibling}u.tail!==null&&Fi()>nb&&(s.flags|=128,g=!0,xf(u,!1),s.lanes=4194304)}else{if(!g)if(i=Im(b),i!==null){if(s.flags|=128,g=!0,i=i.updateQueue,s.updateQueue=i,Zm(s,i),xf(u,!0),u.tail===null&&u.tailMode==="hidden"&&!b.alternate&&!zt)return xe(s),null}else 2*Fi()-u.renderingStartTime>nb&&r!==536870912&&(s.flags|=128,g=!0,xf(u,!1),s.lanes=4194304);u.isBackwards?(b.sibling=s.child,s.child=b):(i=u.last,i!==null?i.sibling=b:s.child=b,u.last=b)}return u.tail!==null?(i=u.tail,u.rendering=i,u.tail=i.sibling,u.renderingStartTime=Fi(),i.sibling=null,r=Pe.current,ht(Pe,g?r&1|2:r&1),zt&&Da(s,u.treeForkCount),i):(xe(s),null);case 22:case 23:return wn(s),hv(),u=s.memoizedState!==null,i!==null?i.memoizedState!==null!==u&&(s.flags|=8192):u&&(s.flags|=8192),u?(r&536870912)!==0&&(s.flags&128)===0&&(xe(s),s.subtreeFlags&6&&(s.flags|=8192)):xe(s),r=s.updateQueue,r!==null&&Zm(s,r.retryQueue),r=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(r=i.memoizedState.cachePool.pool),u=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(u=s.memoizedState.cachePool.pool),u!==r&&(s.flags|=2048),i!==null&&mt(wl),null;case 24:return r=null,i!==null&&(r=i.memoizedState.cache),s.memoizedState.cache!==r&&(s.flags|=2048),La(Ve),xe(s),null;case 25:return null;case 30:return null}throw Error(n(156,s.tag))}function kD(i,s){switch(Qy(s),s.tag){case 1:return i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 3:return La(Ve),Mi(),i=s.flags,(i&65536)!==0&&(i&128)===0?(s.flags=i&-65537|128,s):null;case 26:case 27:case 5:return It(s),null;case 31:if(s.memoizedState!==null){if(wn(s),s.alternate===null)throw Error(n(340));xl()}return i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 13:if(wn(s),i=s.memoizedState,i!==null&&i.dehydrated!==null){if(s.alternate===null)throw Error(n(340));xl()}return i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 19:return mt(Pe),null;case 4:return Mi(),null;case 10:return La(s.type),null;case 22:case 23:return wn(s),hv(),i!==null&&mt(wl),i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 24:return La(Ve),null;case 25:return null;default:return null}}function _E(i,s){switch(Qy(s),s.tag){case 3:La(Ve),Mi();break;case 26:case 27:case 5:It(s);break;case 4:Mi();break;case 31:s.memoizedState!==null&&wn(s);break;case 13:wn(s);break;case 19:mt(Pe);break;case 10:La(s.type);break;case 22:case 23:wn(s),hv(),i!==null&&mt(wl);break;case 24:La(Ve)}}function Af(i,s){try{var r=s.updateQueue,u=r!==null?r.lastEffect:null;if(u!==null){var g=u.next;r=g;do{if((r.tag&i)===i){u=void 0;var b=r.create,S=r.inst;u=b(),S.destroy=u}r=r.next}while(r!==g)}}catch(D){Zt(s,s.return,D)}}function Kr(i,s,r){try{var u=s.updateQueue,g=u!==null?u.lastEffect:null;if(g!==null){var b=g.next;u=b;do{if((u.tag&i)===i){var S=u.inst,D=S.destroy;if(D!==void 0){S.destroy=void 0,g=s;var O=r,H=D;try{H()}catch(Y){Zt(g,O,Y)}}}u=u.next}while(u!==b)}}catch(Y){Zt(s,s.return,Y)}}function CE(i){var s=i.updateQueue;if(s!==null){var r=i.stateNode;try{b1(s,r)}catch(u){Zt(i,i.return,u)}}}function NE(i,s,r){r.props=Nl(i.type,i.memoizedProps),r.state=i.memoizedState;try{r.componentWillUnmount()}catch(u){Zt(i,s,u)}}function Sf(i,s){try{var r=i.ref;if(r!==null){switch(i.tag){case 26:case 27:case 5:var u=i.stateNode;break;case 30:u=i.stateNode;break;default:u=i.stateNode}typeof r=="function"?i.refCleanup=r(u):r.current=u}}catch(g){Zt(i,s,g)}}function Ks(i,s){var r=i.ref,u=i.refCleanup;if(r!==null)if(typeof u=="function")try{u()}catch(g){Zt(i,s,g)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof r=="function")try{r(null)}catch(g){Zt(i,s,g)}else r.current=null}function ME(i){var s=i.type,r=i.memoizedProps,u=i.stateNode;try{t:switch(s){case"button":case"input":case"select":case"textarea":r.autoFocus&&u.focus();break t;case"img":r.src?u.src=r.src:r.srcSet&&(u.srcset=r.srcSet)}}catch(g){Zt(i,i.return,g)}}function Gv(i,s,r){try{var u=i.stateNode;eR(u,i.type,r,s),u[Zi]=s}catch(g){Zt(i,i.return,g)}}function DE(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&io(i.type)||i.tag===4}function Vv(i){t:for(;;){for(;i.sibling===null;){if(i.return===null||DE(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&io(i.type)||i.flags&2||i.child===null||i.tag===4)continue t;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function qv(i,s,r){var u=i.tag;if(u===5||u===6)i=i.stateNode,s?(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r).insertBefore(i,s):(s=r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,s.appendChild(i),r=r._reactRootContainer,r!=null||s.onclick!==null||(s.onclick=Ca));else if(u!==4&&(u===27&&io(i.type)&&(r=i.stateNode,s=null),i=i.child,i!==null))for(qv(i,s,r),i=i.sibling;i!==null;)qv(i,s,r),i=i.sibling}function Jm(i,s,r){var u=i.tag;if(u===5||u===6)i=i.stateNode,s?r.insertBefore(i,s):r.appendChild(i);else if(u!==4&&(u===27&&io(i.type)&&(r=i.stateNode),i=i.child,i!==null))for(Jm(i,s,r),i=i.sibling;i!==null;)Jm(i,s,r),i=i.sibling}function RE(i){var s=i.stateNode,r=i.memoizedProps;try{for(var u=i.type,g=s.attributes;g.length;)s.removeAttributeNode(g[0]);vi(s,u,r),s[gi]=i,s[Zi]=r}catch(b){Zt(i,i.return,b)}}var za=!1,Ye=!1,Xv=!1,LE=typeof WeakSet=="function"?WeakSet:Set,ai=null;function OD(i,s){if(i=i.containerInfo,fx=xb,i=Vw(i),Iy(i)){if("selectionStart"in i)var r={start:i.selectionStart,end:i.selectionEnd};else t:{r=(r=i.ownerDocument)&&r.defaultView||window;var u=r.getSelection&&r.getSelection();if(u&&u.rangeCount!==0){r=u.anchorNode;var g=u.anchorOffset,b=u.focusNode;u=u.focusOffset;try{r.nodeType,b.nodeType}catch{r=null;break t}var S=0,D=-1,O=-1,H=0,Y=0,Z=i,G=null;e:for(;;){for(var q;Z!==r||g!==0&&Z.nodeType!==3||(D=S+g),Z!==b||u!==0&&Z.nodeType!==3||(O=S+u),Z.nodeType===3&&(S+=Z.nodeValue.length),(q=Z.firstChild)!==null;)G=Z,Z=q;for(;;){if(Z===i)break e;if(G===r&&++H===g&&(D=S),G===b&&++Y===u&&(O=S),(q=Z.nextSibling)!==null)break;Z=G,G=Z.parentNode}Z=q}r=D===-1||O===-1?null:{start:D,end:O}}else r=null}r=r||{start:0,end:0}}else r=null;for(px={focusedElem:i,selectionRange:r},xb=!1,ai=s;ai!==null;)if(s=ai,i=s.child,(s.subtreeFlags&1028)!==0&&i!==null)i.return=s,ai=i;else for(;ai!==null;){switch(s=ai,b=s.alternate,i=s.flags,s.tag){case 0:if((i&4)!==0&&(i=s.updateQueue,i=i!==null?i.events:null,i!==null))for(r=0;r<i.length;r++)g=i[r],g.ref.impl=g.nextImpl;break;case 11:case 15:break;case 1:if((i&1024)!==0&&b!==null){i=void 0,r=s,g=b.memoizedProps,b=b.memoizedState,u=r.stateNode;try{var dt=Nl(r.type,g);i=u.getSnapshotBeforeUpdate(dt,b),u.__reactInternalSnapshotBeforeUpdate=i}catch(yt){Zt(r,r.return,yt)}}break;case 3:if((i&1024)!==0){if(i=s.stateNode.containerInfo,r=i.nodeType,r===9)bx(i);else if(r===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":bx(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(n(163))}if(i=s.sibling,i!==null){i.return=s.return,ai=i;break}ai=s.return}}function kE(i,s,r){var u=r.flags;switch(r.tag){case 0:case 11:case 15:Ia(i,r),u&4&&Af(5,r);break;case 1:if(Ia(i,r),u&4)if(i=r.stateNode,s===null)try{i.componentDidMount()}catch(S){Zt(r,r.return,S)}else{var g=Nl(r.type,s.memoizedProps);s=s.memoizedState;try{i.componentDidUpdate(g,s,i.__reactInternalSnapshotBeforeUpdate)}catch(S){Zt(r,r.return,S)}}u&64&&CE(r),u&512&&Sf(r,r.return);break;case 3:if(Ia(i,r),u&64&&(i=r.updateQueue,i!==null)){if(s=null,r.child!==null)switch(r.child.tag){case 27:case 5:s=r.child.stateNode;break;case 1:s=r.child.stateNode}try{b1(i,s)}catch(S){Zt(r,r.return,S)}}break;case 27:s===null&&u&4&&RE(r);case 26:case 5:Ia(i,r),s===null&&u&4&&ME(r),u&512&&Sf(r,r.return);break;case 12:Ia(i,r);break;case 31:Ia(i,r),u&4&&BE(i,r);break;case 13:Ia(i,r),u&4&&zE(i,r),u&64&&(i=r.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(r=GD.bind(null,r),cR(i,r))));break;case 22:if(u=r.memoizedState!==null||za,!u){s=s!==null&&s.memoizedState!==null||Ye,g=za;var b=Ye;za=u,(Ye=s)&&!b?Fa(i,r,(r.subtreeFlags&8772)!==0):Ia(i,r),za=g,Ye=b}break;case 30:break;default:Ia(i,r)}}function OE(i){var s=i.alternate;s!==null&&(i.alternate=null,OE(s)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(s=i.stateNode,s!==null&&Sy(s)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var we=null,tn=!1;function Pa(i,s,r){for(r=r.child;r!==null;)jE(i,s,r),r=r.sibling}function jE(i,s,r){if(yn&&typeof yn.onCommitFiberUnmount=="function")try{yn.onCommitFiberUnmount(qd,r)}catch{}switch(r.tag){case 26:Ye||Ks(r,s),Pa(i,s,r),r.memoizedState?r.memoizedState.count--:r.stateNode&&(r=r.stateNode,r.parentNode.removeChild(r));break;case 27:Ye||Ks(r,s);var u=we,g=tn;io(r.type)&&(we=r.stateNode,tn=!1),Pa(i,s,r),Rf(r.stateNode),we=u,tn=g;break;case 5:Ye||Ks(r,s);case 6:if(u=we,g=tn,we=null,Pa(i,s,r),we=u,tn=g,we!==null)if(tn)try{(we.nodeType===9?we.body:we.nodeName==="HTML"?we.ownerDocument.body:we).removeChild(r.stateNode)}catch(b){Zt(r,s,b)}else try{we.removeChild(r.stateNode)}catch(b){Zt(r,s,b)}break;case 18:we!==null&&(tn?(i=we,CT(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,r.stateNode),Vu(i)):CT(we,r.stateNode));break;case 4:u=we,g=tn,we=r.stateNode.containerInfo,tn=!0,Pa(i,s,r),we=u,tn=g;break;case 0:case 11:case 14:case 15:Kr(2,r,s),Ye||Kr(4,r,s),Pa(i,s,r);break;case 1:Ye||(Ks(r,s),u=r.stateNode,typeof u.componentWillUnmount=="function"&&NE(r,s,u)),Pa(i,s,r);break;case 21:Pa(i,s,r);break;case 22:Ye=(u=Ye)||r.memoizedState!==null,Pa(i,s,r),Ye=u;break;default:Pa(i,s,r)}}function BE(i,s){if(s.memoizedState===null&&(i=s.alternate,i!==null&&(i=i.memoizedState,i!==null))){i=i.dehydrated;try{Vu(i)}catch(r){Zt(s,s.return,r)}}}function zE(i,s){if(s.memoizedState===null&&(i=s.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{Vu(i)}catch(r){Zt(s,s.return,r)}}function jD(i){switch(i.tag){case 31:case 13:case 19:var s=i.stateNode;return s===null&&(s=i.stateNode=new LE),s;case 22:return i=i.stateNode,s=i._retryCache,s===null&&(s=i._retryCache=new LE),s;default:throw Error(n(435,i.tag))}}function tb(i,s){var r=jD(i);s.forEach(function(u){if(!r.has(u)){r.add(u);var g=VD.bind(null,i,u);u.then(g,g)}})}function en(i,s){var r=s.deletions;if(r!==null)for(var u=0;u<r.length;u++){var g=r[u],b=i,S=s,D=S;t:for(;D!==null;){switch(D.tag){case 27:if(io(D.type)){we=D.stateNode,tn=!1;break t}break;case 5:we=D.stateNode,tn=!1;break t;case 3:case 4:we=D.stateNode.containerInfo,tn=!0;break t}D=D.return}if(we===null)throw Error(n(160));jE(b,S,g),we=null,tn=!1,b=g.alternate,b!==null&&(b.return=null),g.return=null}if(s.subtreeFlags&13886)for(s=s.child;s!==null;)PE(s,i),s=s.sibling}var _s=null;function PE(i,s){var r=i.alternate,u=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:en(s,i),nn(i),u&4&&(Kr(3,i,i.return),Af(3,i),Kr(5,i,i.return));break;case 1:en(s,i),nn(i),u&512&&(Ye||r===null||Ks(r,r.return)),u&64&&za&&(i=i.updateQueue,i!==null&&(u=i.callbacks,u!==null&&(r=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=r===null?u:r.concat(u))));break;case 26:var g=_s;if(en(s,i),nn(i),u&512&&(Ye||r===null||Ks(r,r.return)),u&4){var b=r!==null?r.memoizedState:null;if(u=i.memoizedState,r===null)if(u===null)if(i.stateNode===null){t:{u=i.type,r=i.memoizedProps,g=g.ownerDocument||g;e:switch(u){case"title":b=g.getElementsByTagName("title")[0],(!b||b[$d]||b[gi]||b.namespaceURI==="http://www.w3.org/2000/svg"||b.hasAttribute("itemprop"))&&(b=g.createElement(u),g.head.insertBefore(b,g.querySelector("head > title"))),vi(b,u,r),b[gi]=i,si(b),u=b;break t;case"link":var S=PT("link","href",g).get(u+(r.href||""));if(S){for(var D=0;D<S.length;D++)if(b=S[D],b.getAttribute("href")===(r.href==null||r.href===""?null:r.href)&&b.getAttribute("rel")===(r.rel==null?null:r.rel)&&b.getAttribute("title")===(r.title==null?null:r.title)&&b.getAttribute("crossorigin")===(r.crossOrigin==null?null:r.crossOrigin)){S.splice(D,1);break e}}b=g.createElement(u),vi(b,u,r),g.head.appendChild(b);break;case"meta":if(S=PT("meta","content",g).get(u+(r.content||""))){for(D=0;D<S.length;D++)if(b=S[D],b.getAttribute("content")===(r.content==null?null:""+r.content)&&b.getAttribute("name")===(r.name==null?null:r.name)&&b.getAttribute("property")===(r.property==null?null:r.property)&&b.getAttribute("http-equiv")===(r.httpEquiv==null?null:r.httpEquiv)&&b.getAttribute("charset")===(r.charSet==null?null:r.charSet)){S.splice(D,1);break e}}b=g.createElement(u),vi(b,u,r),g.head.appendChild(b);break;default:throw Error(n(468,u))}b[gi]=i,si(b),u=b}i.stateNode=u}else IT(g,i.type,i.stateNode);else i.stateNode=zT(g,u,i.memoizedProps);else b!==u?(b===null?r.stateNode!==null&&(r=r.stateNode,r.parentNode.removeChild(r)):b.count--,u===null?IT(g,i.type,i.stateNode):zT(g,u,i.memoizedProps)):u===null&&i.stateNode!==null&&Gv(i,i.memoizedProps,r.memoizedProps)}break;case 27:en(s,i),nn(i),u&512&&(Ye||r===null||Ks(r,r.return)),r!==null&&u&4&&Gv(i,i.memoizedProps,r.memoizedProps);break;case 5:if(en(s,i),nn(i),u&512&&(Ye||r===null||Ks(r,r.return)),i.flags&32){g=i.stateNode;try{fu(g,"")}catch(dt){Zt(i,i.return,dt)}}u&4&&i.stateNode!=null&&(g=i.memoizedProps,Gv(i,g,r!==null?r.memoizedProps:g)),u&1024&&(Xv=!0);break;case 6:if(en(s,i),nn(i),u&4){if(i.stateNode===null)throw Error(n(162));u=i.memoizedProps,r=i.stateNode;try{r.nodeValue=u}catch(dt){Zt(i,i.return,dt)}}break;case 3:if(mb=null,g=_s,_s=pb(s.containerInfo),en(s,i),_s=g,nn(i),u&4&&r!==null&&r.memoizedState.isDehydrated)try{Vu(s.containerInfo)}catch(dt){Zt(i,i.return,dt)}Xv&&(Xv=!1,IE(i));break;case 4:u=_s,_s=pb(i.stateNode.containerInfo),en(s,i),nn(i),_s=u;break;case 12:en(s,i),nn(i);break;case 31:en(s,i),nn(i),u&4&&(u=i.updateQueue,u!==null&&(i.updateQueue=null,tb(i,u)));break;case 13:en(s,i),nn(i),i.child.flags&8192&&i.memoizedState!==null!=(r!==null&&r.memoizedState!==null)&&(ib=Fi()),u&4&&(u=i.updateQueue,u!==null&&(i.updateQueue=null,tb(i,u)));break;case 22:g=i.memoizedState!==null;var O=r!==null&&r.memoizedState!==null,H=za,Y=Ye;if(za=H||g,Ye=Y||O,en(s,i),Ye=Y,za=H,nn(i),u&8192)t:for(s=i.stateNode,s._visibility=g?s._visibility&-2:s._visibility|1,g&&(r===null||O||za||Ye||Ml(i)),r=null,s=i;;){if(s.tag===5||s.tag===26){if(r===null){O=r=s;try{if(b=O.stateNode,g)S=b.style,typeof S.setProperty=="function"?S.setProperty("display","none","important"):S.display="none";else{D=O.stateNode;var Z=O.memoizedProps.style,G=Z!=null&&Z.hasOwnProperty("display")?Z.display:null;D.style.display=G==null||typeof G=="boolean"?"":(""+G).trim()}}catch(dt){Zt(O,O.return,dt)}}}else if(s.tag===6){if(r===null){O=s;try{O.stateNode.nodeValue=g?"":O.memoizedProps}catch(dt){Zt(O,O.return,dt)}}}else if(s.tag===18){if(r===null){O=s;try{var q=O.stateNode;g?NT(q,!0):NT(O.stateNode,!1)}catch(dt){Zt(O,O.return,dt)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===i)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===i)break t;for(;s.sibling===null;){if(s.return===null||s.return===i)break t;r===s&&(r=null),s=s.return}r===s&&(r=null),s.sibling.return=s.return,s=s.sibling}u&4&&(u=i.updateQueue,u!==null&&(r=u.retryQueue,r!==null&&(u.retryQueue=null,tb(i,r))));break;case 19:en(s,i),nn(i),u&4&&(u=i.updateQueue,u!==null&&(i.updateQueue=null,tb(i,u)));break;case 30:break;case 21:break;default:en(s,i),nn(i)}}function nn(i){var s=i.flags;if(s&2){try{for(var r,u=i.return;u!==null;){if(DE(u)){r=u;break}u=u.return}if(r==null)throw Error(n(160));switch(r.tag){case 27:var g=r.stateNode,b=Vv(i);Jm(i,b,g);break;case 5:var S=r.stateNode;r.flags&32&&(fu(S,""),r.flags&=-33);var D=Vv(i);Jm(i,D,S);break;case 3:case 4:var O=r.stateNode.containerInfo,H=Vv(i);qv(i,H,O);break;default:throw Error(n(161))}}catch(Y){Zt(i,i.return,Y)}i.flags&=-3}s&4096&&(i.flags&=-4097)}function IE(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var s=i;IE(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),i=i.sibling}}function Ia(i,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)kE(i,s.alternate,s),s=s.sibling}function Ml(i){for(i=i.child;i!==null;){var s=i;switch(s.tag){case 0:case 11:case 14:case 15:Kr(4,s,s.return),Ml(s);break;case 1:Ks(s,s.return);var r=s.stateNode;typeof r.componentWillUnmount=="function"&&NE(s,s.return,r),Ml(s);break;case 27:Rf(s.stateNode);case 26:case 5:Ks(s,s.return),Ml(s);break;case 22:s.memoizedState===null&&Ml(s);break;case 30:Ml(s);break;default:Ml(s)}i=i.sibling}}function Fa(i,s,r){for(r=r&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var u=s.alternate,g=i,b=s,S=b.flags;switch(b.tag){case 0:case 11:case 15:Fa(g,b,r),Af(4,b);break;case 1:if(Fa(g,b,r),u=b,g=u.stateNode,typeof g.componentDidMount=="function")try{g.componentDidMount()}catch(H){Zt(u,u.return,H)}if(u=b,g=u.updateQueue,g!==null){var D=u.stateNode;try{var O=g.shared.hiddenCallbacks;if(O!==null)for(g.shared.hiddenCallbacks=null,g=0;g<O.length;g++)m1(O[g],D)}catch(H){Zt(u,u.return,H)}}r&&S&64&&CE(b),Sf(b,b.return);break;case 27:RE(b);case 26:case 5:Fa(g,b,r),r&&u===null&&S&4&&ME(b),Sf(b,b.return);break;case 12:Fa(g,b,r);break;case 31:Fa(g,b,r),r&&S&4&&BE(g,b);break;case 13:Fa(g,b,r),r&&S&4&&zE(g,b);break;case 22:b.memoizedState===null&&Fa(g,b,r),Sf(b,b.return);break;case 30:break;default:Fa(g,b,r)}s=s.sibling}}function Yv(i,s){var r=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(r=i.memoizedState.cachePool.pool),i=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(i=s.memoizedState.cachePool.pool),i!==r&&(i!=null&&i.refCount++,r!=null&&lf(r))}function $v(i,s){i=null,s.alternate!==null&&(i=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==i&&(s.refCount++,i!=null&&lf(i))}function Cs(i,s,r,u){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)FE(i,s,r,u),s=s.sibling}function FE(i,s,r,u){var g=s.flags;switch(s.tag){case 0:case 11:case 15:Cs(i,s,r,u),g&2048&&Af(9,s);break;case 1:Cs(i,s,r,u);break;case 3:Cs(i,s,r,u),g&2048&&(i=null,s.alternate!==null&&(i=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==i&&(s.refCount++,i!=null&&lf(i)));break;case 12:if(g&2048){Cs(i,s,r,u),i=s.stateNode;try{var b=s.memoizedProps,S=b.id,D=b.onPostCommit;typeof D=="function"&&D(S,s.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(O){Zt(s,s.return,O)}}else Cs(i,s,r,u);break;case 31:Cs(i,s,r,u);break;case 13:Cs(i,s,r,u);break;case 23:break;case 22:b=s.stateNode,S=s.alternate,s.memoizedState!==null?b._visibility&2?Cs(i,s,r,u):wf(i,s):b._visibility&2?Cs(i,s,r,u):(b._visibility|=2,ku(i,s,r,u,(s.subtreeFlags&10256)!==0||!1)),g&2048&&Yv(S,s);break;case 24:Cs(i,s,r,u),g&2048&&$v(s.alternate,s);break;default:Cs(i,s,r,u)}}function ku(i,s,r,u,g){for(g=g&&((s.subtreeFlags&10256)!==0||!1),s=s.child;s!==null;){var b=i,S=s,D=r,O=u,H=S.flags;switch(S.tag){case 0:case 11:case 15:ku(b,S,D,O,g),Af(8,S);break;case 23:break;case 22:var Y=S.stateNode;S.memoizedState!==null?Y._visibility&2?ku(b,S,D,O,g):wf(b,S):(Y._visibility|=2,ku(b,S,D,O,g)),g&&H&2048&&Yv(S.alternate,S);break;case 24:ku(b,S,D,O,g),g&&H&2048&&$v(S.alternate,S);break;default:ku(b,S,D,O,g)}s=s.sibling}}function wf(i,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var r=i,u=s,g=u.flags;switch(u.tag){case 22:wf(r,u),g&2048&&Yv(u.alternate,u);break;case 24:wf(r,u),g&2048&&$v(u.alternate,u);break;default:wf(r,u)}s=s.sibling}}var Ef=8192;function Ou(i,s,r){if(i.subtreeFlags&Ef)for(i=i.child;i!==null;)UE(i,s,r),i=i.sibling}function UE(i,s,r){switch(i.tag){case 26:Ou(i,s,r),i.flags&Ef&&i.memoizedState!==null&&AR(r,_s,i.memoizedState,i.memoizedProps);break;case 5:Ou(i,s,r);break;case 3:case 4:var u=_s;_s=pb(i.stateNode.containerInfo),Ou(i,s,r),_s=u;break;case 22:i.memoizedState===null&&(u=i.alternate,u!==null&&u.memoizedState!==null?(u=Ef,Ef=16777216,Ou(i,s,r),Ef=u):Ou(i,s,r));break;default:Ou(i,s,r)}}function HE(i){var s=i.alternate;if(s!==null&&(i=s.child,i!==null)){s.child=null;do s=i.sibling,i.sibling=null,i=s;while(i!==null)}}function Tf(i){var s=i.deletions;if((i.flags&16)!==0){if(s!==null)for(var r=0;r<s.length;r++){var u=s[r];ai=u,VE(u,i)}HE(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)GE(i),i=i.sibling}function GE(i){switch(i.tag){case 0:case 11:case 15:Tf(i),i.flags&2048&&Kr(9,i,i.return);break;case 3:Tf(i);break;case 12:Tf(i);break;case 22:var s=i.stateNode;i.memoizedState!==null&&s._visibility&2&&(i.return===null||i.return.tag!==13)?(s._visibility&=-3,eb(i)):Tf(i);break;default:Tf(i)}}function eb(i){var s=i.deletions;if((i.flags&16)!==0){if(s!==null)for(var r=0;r<s.length;r++){var u=s[r];ai=u,VE(u,i)}HE(i)}for(i=i.child;i!==null;){switch(s=i,s.tag){case 0:case 11:case 15:Kr(8,s,s.return),eb(s);break;case 22:r=s.stateNode,r._visibility&2&&(r._visibility&=-3,eb(s));break;default:eb(s)}i=i.sibling}}function VE(i,s){for(;ai!==null;){var r=ai;switch(r.tag){case 0:case 11:case 15:Kr(8,r,s);break;case 23:case 22:if(r.memoizedState!==null&&r.memoizedState.cachePool!==null){var u=r.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:lf(r.memoizedState.cache)}if(u=r.child,u!==null)u.return=r,ai=u;else t:for(r=i;ai!==null;){u=ai;var g=u.sibling,b=u.return;if(OE(u),u===r){ai=null;break t}if(g!==null){g.return=b,ai=g;break t}ai=b}}}var BD={getCacheForType:function(i){var s=bi(Ve),r=s.data.get(i);return r===void 0&&(r=i(),s.data.set(i,r)),r},cacheSignal:function(){return bi(Ve).controller.signal}},zD=typeof WeakMap=="function"?WeakMap:Map,Xt=0,ue=null,Lt=null,Ot=0,Wt=0,En=null,Qr=!1,ju=!1,Kv=!1,Ua=0,Le=0,Wr=0,Dl=0,Qv=0,Tn=0,Bu=0,_f=null,sn=null,Wv=!1,ib=0,qE=0,nb=1/0,sb=null,Zr=null,We=0,Jr=null,zu=null,Ha=0,Zv=0,Jv=null,XE=null,Cf=0,tx=null;function _n(){return(Xt&2)!==0&&Ot!==0?Ot&-Ot:P.T!==null?rx():lw()}function YE(){if(Tn===0)if((Ot&536870912)===0||zt){var i=dm;dm<<=1,(dm&3932160)===0&&(dm=262144),Tn=i}else Tn=536870912;return i=Sn.current,i!==null&&(i.flags|=32),Tn}function an(i,s,r){(i===ue&&(Wt===2||Wt===9)||i.cancelPendingCommit!==null)&&(Pu(i,0),to(i,Ot,Tn,!1)),Yd(i,r),((Xt&2)===0||i!==ue)&&(i===ue&&((Xt&2)===0&&(Dl|=r),Le===4&&to(i,Ot,Tn,!1)),Qs(i))}function $E(i,s,r){if((Xt&6)!==0)throw Error(n(327));var u=!r&&(s&127)===0&&(s&i.expiredLanes)===0||Xd(i,s),g=u?FD(i,s):ix(i,s,!0),b=u;do{if(g===0){ju&&!u&&to(i,s,0,!1);break}else{if(r=i.current.alternate,b&&!PD(r)){g=ix(i,s,!1),b=!1;continue}if(g===2){if(b=s,i.errorRecoveryDisabledLanes&b)var S=0;else S=i.pendingLanes&-536870913,S=S!==0?S:S&536870912?536870912:0;if(S!==0){s=S;t:{var D=i;g=_f;var O=D.current.memoizedState.isDehydrated;if(O&&(Pu(D,S).flags|=256),S=ix(D,S,!1),S!==2){if(Kv&&!O){D.errorRecoveryDisabledLanes|=b,Dl|=b,g=4;break t}b=sn,sn=g,b!==null&&(sn===null?sn=b:sn.push.apply(sn,b))}g=S}if(b=!1,g!==2)continue}}if(g===1){Pu(i,0),to(i,s,0,!0);break}t:{switch(u=i,b=g,b){case 0:case 1:throw Error(n(345));case 4:if((s&4194048)!==s)break;case 6:to(u,s,Tn,!Qr);break t;case 2:sn=null;break;case 3:case 5:break;default:throw Error(n(329))}if((s&62914560)===s&&(g=ib+300-Fi(),10<g)){if(to(u,s,Tn,!Qr),pm(u,0,!0)!==0)break t;Ha=s,u.timeoutHandle=TT(KE.bind(null,u,r,sn,sb,Wv,s,Tn,Dl,Bu,Qr,b,"Throttled",-0,0),g);break t}KE(u,r,sn,sb,Wv,s,Tn,Dl,Bu,Qr,b,null,-0,0)}}break}while(!0);Qs(i)}function KE(i,s,r,u,g,b,S,D,O,H,Y,Z,G,q){if(i.timeoutHandle=-1,Z=s.subtreeFlags,Z&8192||(Z&16785408)===16785408){Z={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Ca},UE(s,b,Z);var dt=(b&62914560)===b?ib-Fi():(b&4194048)===b?qE-Fi():0;if(dt=SR(Z,dt),dt!==null){Ha=b,i.cancelPendingCommit=dt(nT.bind(null,i,s,b,r,u,g,S,D,O,Y,Z,null,G,q)),to(i,b,S,!H);return}}nT(i,s,b,r,u,g,S,D,O)}function PD(i){for(var s=i;;){var r=s.tag;if((r===0||r===11||r===15)&&s.flags&16384&&(r=s.updateQueue,r!==null&&(r=r.stores,r!==null)))for(var u=0;u<r.length;u++){var g=r[u],b=g.getSnapshot;g=g.value;try{if(!xn(b(),g))return!1}catch{return!1}}if(r=s.child,s.subtreeFlags&16384&&r!==null)r.return=s,s=r;else{if(s===i)break;for(;s.sibling===null;){if(s.return===null||s.return===i)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function to(i,s,r,u){s&=~Qv,s&=~Dl,i.suspendedLanes|=s,i.pingedLanes&=~s,u&&(i.warmLanes|=s),u=i.expirationTimes;for(var g=s;0<g;){var b=31-vn(g),S=1<<b;u[b]=-1,g&=~S}r!==0&&aw(i,r,s)}function ab(){return(Xt&6)===0?(Nf(0),!1):!0}function ex(){if(Lt!==null){if(Wt===0)var i=Lt.return;else i=Lt,Ra=Al=null,bv(i),Nu=null,uf=0,i=Lt;for(;i!==null;)_E(i.alternate,i),i=i.return;Lt=null}}function Pu(i,s){var r=i.timeoutHandle;r!==-1&&(i.timeoutHandle=-1,sR(r)),r=i.cancelPendingCommit,r!==null&&(i.cancelPendingCommit=null,r()),Ha=0,ex(),ue=i,Lt=r=Ma(i.current,null),Ot=s,Wt=0,En=null,Qr=!1,ju=Xd(i,s),Kv=!1,Bu=Tn=Qv=Dl=Wr=Le=0,sn=_f=null,Wv=!1,(s&8)!==0&&(s|=s&32);var u=i.entangledLanes;if(u!==0)for(i=i.entanglements,u&=s;0<u;){var g=31-vn(u),b=1<<g;s|=i[g],u&=~b}return Ua=s,_m(),r}function QE(i,s){Et=null,P.H=yf,s===Cu||s===Om?(s=d1(),Wt=3):s===av?(s=d1(),Wt=4):Wt=s===kv?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,En=s,Lt===null&&(Le=1,$m(i,es(s,i.current)))}function WE(){var i=Sn.current;return i===null?!0:(Ot&4194048)===Ot?as===null:(Ot&62914560)===Ot||(Ot&536870912)!==0?i===as:!1}function ZE(){var i=P.H;return P.H=yf,i===null?yf:i}function JE(){var i=P.A;return P.A=BD,i}function rb(){Le=4,Qr||(Ot&4194048)!==Ot&&Sn.current!==null||(ju=!0),(Wr&134217727)===0&&(Dl&134217727)===0||ue===null||to(ue,Ot,Tn,!1)}function ix(i,s,r){var u=Xt;Xt|=2;var g=ZE(),b=JE();(ue!==i||Ot!==s)&&(sb=null,Pu(i,s)),s=!1;var S=Le;t:do try{if(Wt!==0&&Lt!==null){var D=Lt,O=En;switch(Wt){case 8:ex(),S=6;break t;case 3:case 2:case 9:case 6:Sn.current===null&&(s=!0);var H=Wt;if(Wt=0,En=null,Iu(i,D,O,H),r&&ju){S=0;break t}break;default:H=Wt,Wt=0,En=null,Iu(i,D,O,H)}}ID(),S=Le;break}catch(Y){QE(i,Y)}while(!0);return s&&i.shellSuspendCounter++,Ra=Al=null,Xt=u,P.H=g,P.A=b,Lt===null&&(ue=null,Ot=0,_m()),S}function ID(){for(;Lt!==null;)tT(Lt)}function FD(i,s){var r=Xt;Xt|=2;var u=ZE(),g=JE();ue!==i||Ot!==s?(sb=null,nb=Fi()+500,Pu(i,s)):ju=Xd(i,s);t:do try{if(Wt!==0&&Lt!==null){s=Lt;var b=En;e:switch(Wt){case 1:Wt=0,En=null,Iu(i,s,b,1);break;case 2:case 9:if(u1(b)){Wt=0,En=null,eT(s);break}s=function(){Wt!==2&&Wt!==9||ue!==i||(Wt=7),Qs(i)},b.then(s,s);break t;case 3:Wt=7;break t;case 4:Wt=5;break t;case 7:u1(b)?(Wt=0,En=null,eT(s)):(Wt=0,En=null,Iu(i,s,b,7));break;case 5:var S=null;switch(Lt.tag){case 26:S=Lt.memoizedState;case 5:case 27:var D=Lt;if(S?FT(S):D.stateNode.complete){Wt=0,En=null;var O=D.sibling;if(O!==null)Lt=O;else{var H=D.return;H!==null?(Lt=H,ob(H)):Lt=null}break e}}Wt=0,En=null,Iu(i,s,b,5);break;case 6:Wt=0,En=null,Iu(i,s,b,6);break;case 8:ex(),Le=6;break t;default:throw Error(n(462))}}UD();break}catch(Y){QE(i,Y)}while(!0);return Ra=Al=null,P.H=u,P.A=g,Xt=r,Lt!==null?0:(ue=null,Ot=0,_m(),Le)}function UD(){for(;Lt!==null&&!ru();)tT(Lt)}function tT(i){var s=EE(i.alternate,i,Ua);i.memoizedProps=i.pendingProps,s===null?ob(i):Lt=s}function eT(i){var s=i,r=s.alternate;switch(s.tag){case 15:case 0:s=yE(r,s,s.pendingProps,s.type,void 0,Ot);break;case 11:s=yE(r,s,s.pendingProps,s.type.render,s.ref,Ot);break;case 5:bv(s);default:_E(r,s),s=Lt=Jw(s,Ua),s=EE(r,s,Ua)}i.memoizedProps=i.pendingProps,s===null?ob(i):Lt=s}function Iu(i,s,r,u){Ra=Al=null,bv(s),Nu=null,uf=0;var g=s.return;try{if(MD(i,g,s,r,Ot)){Le=1,$m(i,es(r,i.current)),Lt=null;return}}catch(b){if(g!==null)throw Lt=g,b;Le=1,$m(i,es(r,i.current)),Lt=null;return}s.flags&32768?(zt||u===1?i=!0:ju||(Ot&536870912)!==0?i=!1:(Qr=i=!0,(u===2||u===9||u===3||u===6)&&(u=Sn.current,u!==null&&u.tag===13&&(u.flags|=16384))),iT(s,i)):ob(s)}function ob(i){var s=i;do{if((s.flags&32768)!==0){iT(s,Qr);return}i=s.return;var r=LD(s.alternate,s,Ua);if(r!==null){Lt=r;return}if(s=s.sibling,s!==null){Lt=s;return}Lt=s=i}while(s!==null);Le===0&&(Le=5)}function iT(i,s){do{var r=kD(i.alternate,i);if(r!==null){r.flags&=32767,Lt=r;return}if(r=i.return,r!==null&&(r.flags|=32768,r.subtreeFlags=0,r.deletions=null),!s&&(i=i.sibling,i!==null)){Lt=i;return}Lt=i=r}while(i!==null);Le=6,Lt=null}function nT(i,s,r,u,g,b,S,D,O){i.cancelPendingCommit=null;do lb();while(We!==0);if((Xt&6)!==0)throw Error(n(327));if(s!==null){if(s===i.current)throw Error(n(177));if(b=s.lanes|s.childLanes,b|=Vy,xM(i,r,b,S,D,O),i===ue&&(Lt=ue=null,Ot=0),zu=s,Jr=i,Ha=r,Zv=b,Jv=g,XE=u,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,qD(bn,function(){return lT(),null})):(i.callbackNode=null,i.callbackPriority=0),u=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||u){u=P.T,P.T=null,g=V.p,V.p=2,S=Xt,Xt|=4;try{OD(i,s,r)}finally{Xt=S,V.p=g,P.T=u}}We=1,sT(),aT(),rT()}}function sT(){if(We===1){We=0;var i=Jr,s=zu,r=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||r){r=P.T,P.T=null;var u=V.p;V.p=2;var g=Xt;Xt|=4;try{PE(s,i);var b=px,S=Vw(i.containerInfo),D=b.focusedElem,O=b.selectionRange;if(S!==D&&D&&D.ownerDocument&&Gw(D.ownerDocument.documentElement,D)){if(O!==null&&Iy(D)){var H=O.start,Y=O.end;if(Y===void 0&&(Y=H),"selectionStart"in D)D.selectionStart=H,D.selectionEnd=Math.min(Y,D.value.length);else{var Z=D.ownerDocument||document,G=Z&&Z.defaultView||window;if(G.getSelection){var q=G.getSelection(),dt=D.textContent.length,yt=Math.min(O.start,dt),ne=O.end===void 0?yt:Math.min(O.end,dt);!q.extend&&yt>ne&&(S=ne,ne=yt,yt=S);var F=Hw(D,yt),B=Hw(D,ne);if(F&&B&&(q.rangeCount!==1||q.anchorNode!==F.node||q.anchorOffset!==F.offset||q.focusNode!==B.node||q.focusOffset!==B.offset)){var U=Z.createRange();U.setStart(F.node,F.offset),q.removeAllRanges(),yt>ne?(q.addRange(U),q.extend(B.node,B.offset)):(U.setEnd(B.node,B.offset),q.addRange(U))}}}}for(Z=[],q=D;q=q.parentNode;)q.nodeType===1&&Z.push({element:q,left:q.scrollLeft,top:q.scrollTop});for(typeof D.focus=="function"&&D.focus(),D=0;D<Z.length;D++){var Q=Z[D];Q.element.scrollLeft=Q.left,Q.element.scrollTop=Q.top}}xb=!!fx,px=fx=null}finally{Xt=g,V.p=u,P.T=r}}i.current=s,We=2}}function aT(){if(We===2){We=0;var i=Jr,s=zu,r=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||r){r=P.T,P.T=null;var u=V.p;V.p=2;var g=Xt;Xt|=4;try{kE(i,s.alternate,s)}finally{Xt=g,V.p=u,P.T=r}}We=3}}function rT(){if(We===4||We===3){We=0,my();var i=Jr,s=zu,r=Ha,u=XE;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?We=5:(We=0,zu=Jr=null,oT(i,i.pendingLanes));var g=i.pendingLanes;if(g===0&&(Zr=null),xy(r),s=s.stateNode,yn&&typeof yn.onCommitFiberRoot=="function")try{yn.onCommitFiberRoot(qd,s,void 0,(s.current.flags&128)===128)}catch{}if(u!==null){s=P.T,g=V.p,V.p=2,P.T=null;try{for(var b=i.onRecoverableError,S=0;S<u.length;S++){var D=u[S];b(D.value,{componentStack:D.stack})}}finally{P.T=s,V.p=g}}(Ha&3)!==0&&lb(),Qs(i),g=i.pendingLanes,(r&261930)!==0&&(g&42)!==0?i===tx?Cf++:(Cf=0,tx=i):Cf=0,Nf(0)}}function oT(i,s){(i.pooledCacheLanes&=s)===0&&(s=i.pooledCache,s!=null&&(i.pooledCache=null,lf(s)))}function lb(){return sT(),aT(),rT(),lT()}function lT(){if(We!==5)return!1;var i=Jr,s=Zv;Zv=0;var r=xy(Ha),u=P.T,g=V.p;try{V.p=32>r?32:r,P.T=null,r=Jv,Jv=null;var b=Jr,S=Ha;if(We=0,zu=Jr=null,Ha=0,(Xt&6)!==0)throw Error(n(331));var D=Xt;if(Xt|=4,GE(b.current),FE(b,b.current,S,r),Xt=D,Nf(0,!1),yn&&typeof yn.onPostCommitFiberRoot=="function")try{yn.onPostCommitFiberRoot(qd,b)}catch{}return!0}finally{V.p=g,P.T=u,oT(i,s)}}function cT(i,s,r){s=es(r,s),s=Lv(i.stateNode,s,2),i=Xr(i,s,2),i!==null&&(Yd(i,2),Qs(i))}function Zt(i,s,r){if(i.tag===3)cT(i,i,r);else for(;s!==null;){if(s.tag===3){cT(s,i,r);break}else if(s.tag===1){var u=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(Zr===null||!Zr.has(u))){i=es(r,i),r=uE(2),u=Xr(s,r,2),u!==null&&(hE(r,u,s,i),Yd(u,2),Qs(u));break}}s=s.return}}function nx(i,s,r){var u=i.pingCache;if(u===null){u=i.pingCache=new zD;var g=new Set;u.set(s,g)}else g=u.get(s),g===void 0&&(g=new Set,u.set(s,g));g.has(r)||(Kv=!0,g.add(r),i=HD.bind(null,i,s,r),s.then(i,i))}function HD(i,s,r){var u=i.pingCache;u!==null&&u.delete(s),i.pingedLanes|=i.suspendedLanes&r,i.warmLanes&=~r,ue===i&&(Ot&r)===r&&(Le===4||Le===3&&(Ot&62914560)===Ot&&300>Fi()-ib?(Xt&2)===0&&Pu(i,0):Qv|=r,Bu===Ot&&(Bu=0)),Qs(i)}function uT(i,s){s===0&&(s=sw()),i=yl(i,s),i!==null&&(Yd(i,s),Qs(i))}function GD(i){var s=i.memoizedState,r=0;s!==null&&(r=s.retryLane),uT(i,r)}function VD(i,s){var r=0;switch(i.tag){case 31:case 13:var u=i.stateNode,g=i.memoizedState;g!==null&&(r=g.retryLane);break;case 19:u=i.stateNode;break;case 22:u=i.stateNode._retryCache;break;default:throw Error(n(314))}u!==null&&u.delete(s),uT(i,r)}function qD(i,s){return dl(i,s)}var cb=null,Fu=null,sx=!1,ub=!1,ax=!1,eo=0;function Qs(i){i!==Fu&&i.next===null&&(Fu===null?cb=Fu=i:Fu=Fu.next=i),ub=!0,sx||(sx=!0,YD())}function Nf(i,s){if(!ax&&ub){ax=!0;do for(var r=!1,u=cb;u!==null;){if(i!==0){var g=u.pendingLanes;if(g===0)var b=0;else{var S=u.suspendedLanes,D=u.pingedLanes;b=(1<<31-vn(42|i)+1)-1,b&=g&~(S&~D),b=b&201326741?b&201326741|1:b?b|2:0}b!==0&&(r=!0,pT(u,b))}else b=Ot,b=pm(u,u===ue?b:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(b&3)===0||Xd(u,b)||(r=!0,pT(u,b));u=u.next}while(r);ax=!1}}function XD(){hT()}function hT(){ub=sx=!1;var i=0;eo!==0&&nR()&&(i=eo);for(var s=Fi(),r=null,u=cb;u!==null;){var g=u.next,b=dT(u,s);b===0?(u.next=null,r===null?cb=g:r.next=g,g===null&&(Fu=r)):(r=u,(i!==0||(b&3)!==0)&&(ub=!0)),u=g}We!==0&&We!==5||Nf(i),eo!==0&&(eo=0)}function dT(i,s){for(var r=i.suspendedLanes,u=i.pingedLanes,g=i.expirationTimes,b=i.pendingLanes&-62914561;0<b;){var S=31-vn(b),D=1<<S,O=g[S];O===-1?((D&r)===0||(D&u)!==0)&&(g[S]=vM(D,s)):O<=s&&(i.expiredLanes|=D),b&=~D}if(s=ue,r=Ot,r=pm(i,i===s?r:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),u=i.callbackNode,r===0||i===s&&(Wt===2||Wt===9)||i.cancelPendingCommit!==null)return u!==null&&u!==null&&Gd(u),i.callbackNode=null,i.callbackPriority=0;if((r&3)===0||Xd(i,r)){if(s=r&-r,s===i.callbackPriority)return s;switch(u!==null&&Gd(u),xy(r)){case 2:case 8:r=um;break;case 32:r=bn;break;case 268435456:r=Es;break;default:r=bn}return u=fT.bind(null,i),r=dl(r,u),i.callbackPriority=s,i.callbackNode=r,s}return u!==null&&u!==null&&Gd(u),i.callbackPriority=2,i.callbackNode=null,2}function fT(i,s){if(We!==0&&We!==5)return i.callbackNode=null,i.callbackPriority=0,null;var r=i.callbackNode;if(lb()&&i.callbackNode!==r)return null;var u=Ot;return u=pm(i,i===ue?u:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),u===0?null:($E(i,u,s),dT(i,Fi()),i.callbackNode!=null&&i.callbackNode===r?fT.bind(null,i):null)}function pT(i,s){if(lb())return null;$E(i,s,!0)}function YD(){aR(function(){(Xt&6)!==0?dl(cm,XD):hT()})}function rx(){if(eo===0){var i=Tu;i===0&&(i=hm,hm<<=1,(hm&261888)===0&&(hm=256)),eo=i}return eo}function gT(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:ym(""+i)}function mT(i,s){var r=s.ownerDocument.createElement("input");return r.name=s.name,r.value=s.value,i.id&&r.setAttribute("form",i.id),s.parentNode.insertBefore(r,s),i=new FormData(i),r.parentNode.removeChild(r),i}function $D(i,s,r,u,g){if(s==="submit"&&r&&r.stateNode===g){var b=gT((g[Zi]||null).action),S=u.submitter;S&&(s=(s=S[Zi]||null)?gT(s.formAction):S.getAttribute("formAction"),s!==null&&(b=s,S=null));var D=new Sm("action","action",null,u,g);i.push({event:D,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(eo!==0){var O=S?mT(g,S):new FormData(g);_v(r,{pending:!0,data:O,method:g.method,action:b},null,O)}}else typeof b=="function"&&(D.preventDefault(),O=S?mT(g,S):new FormData(g),_v(r,{pending:!0,data:O,method:g.method,action:b},b,O))},currentTarget:g}]})}}for(var ox=0;ox<Gy.length;ox++){var lx=Gy[ox],KD=lx.toLowerCase(),QD=lx[0].toUpperCase()+lx.slice(1);Ts(KD,"on"+QD)}Ts(Yw,"onAnimationEnd"),Ts($w,"onAnimationIteration"),Ts(Kw,"onAnimationStart"),Ts("dblclick","onDoubleClick"),Ts("focusin","onFocus"),Ts("focusout","onBlur"),Ts(dD,"onTransitionRun"),Ts(fD,"onTransitionStart"),Ts(pD,"onTransitionCancel"),Ts(Qw,"onTransitionEnd"),hu("onMouseEnter",["mouseout","mouseover"]),hu("onMouseLeave",["mouseout","mouseover"]),hu("onPointerEnter",["pointerout","pointerover"]),hu("onPointerLeave",["pointerout","pointerover"]),pl("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),pl("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),pl("onBeforeInput",["compositionend","keypress","textInput","paste"]),pl("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),pl("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),pl("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Mf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),WD=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Mf));function bT(i,s){s=(s&4)!==0;for(var r=0;r<i.length;r++){var u=i[r],g=u.event;u=u.listeners;t:{var b=void 0;if(s)for(var S=u.length-1;0<=S;S--){var D=u[S],O=D.instance,H=D.currentTarget;if(D=D.listener,O!==b&&g.isPropagationStopped())break t;b=D,g.currentTarget=H;try{b(g)}catch(Y){Tm(Y)}g.currentTarget=null,b=O}else for(S=0;S<u.length;S++){if(D=u[S],O=D.instance,H=D.currentTarget,D=D.listener,O!==b&&g.isPropagationStopped())break t;b=D,g.currentTarget=H;try{b(g)}catch(Y){Tm(Y)}g.currentTarget=null,b=O}}}}function kt(i,s){var r=s[Ay];r===void 0&&(r=s[Ay]=new Set);var u=i+"__bubble";r.has(u)||(yT(s,i,2,!1),r.add(u))}function cx(i,s,r){var u=0;s&&(u|=4),yT(r,i,u,s)}var hb="_reactListening"+Math.random().toString(36).slice(2);function ux(i){if(!i[hb]){i[hb]=!0,hw.forEach(function(r){r!=="selectionchange"&&(WD.has(r)||cx(r,!1,i),cx(r,!0,i))});var s=i.nodeType===9?i:i.ownerDocument;s===null||s[hb]||(s[hb]=!0,cx("selectionchange",!1,s))}}function yT(i,s,r,u){switch(YT(s)){case 2:var g=TR;break;case 8:g=_R;break;default:g=Tx}r=g.bind(null,s,r,i),g=void 0,!Dy||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(g=!0),u?g!==void 0?i.addEventListener(s,r,{capture:!0,passive:g}):i.addEventListener(s,r,!0):g!==void 0?i.addEventListener(s,r,{passive:g}):i.addEventListener(s,r,!1)}function hx(i,s,r,u,g){var b=u;if((s&1)===0&&(s&2)===0&&u!==null)t:for(;;){if(u===null)return;var S=u.tag;if(S===3||S===4){var D=u.stateNode.containerInfo;if(D===g)break;if(S===4)for(S=u.return;S!==null;){var O=S.tag;if((O===3||O===4)&&S.stateNode.containerInfo===g)return;S=S.return}for(;D!==null;){if(S=lu(D),S===null)return;if(O=S.tag,O===5||O===6||O===26||O===27){u=b=S;continue t}D=D.parentNode}}u=u.return}ww(function(){var H=b,Y=Ny(r),Z=[];t:{var G=Ww.get(i);if(G!==void 0){var q=Sm,dt=i;switch(i){case"keypress":if(xm(r)===0)break t;case"keydown":case"keyup":q=VM;break;case"focusin":dt="focus",q=Oy;break;case"focusout":dt="blur",q=Oy;break;case"beforeblur":case"afterblur":q=Oy;break;case"click":if(r.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":q=_w;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":q=LM;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":q=YM;break;case Yw:case $w:case Kw:q=jM;break;case Qw:q=KM;break;case"scroll":case"scrollend":q=DM;break;case"wheel":q=WM;break;case"copy":case"cut":case"paste":q=zM;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":q=Nw;break;case"toggle":case"beforetoggle":q=JM}var yt=(s&4)!==0,ne=!yt&&(i==="scroll"||i==="scrollend"),F=yt?G!==null?G+"Capture":null:G;yt=[];for(var B=H,U;B!==null;){var Q=B;if(U=Q.stateNode,Q=Q.tag,Q!==5&&Q!==26&&Q!==27||U===null||F===null||(Q=Qd(B,F),Q!=null&&yt.push(Df(B,Q,U))),ne)break;B=B.return}0<yt.length&&(G=new q(G,dt,null,r,Y),Z.push({event:G,listeners:yt}))}}if((s&7)===0){t:{if(G=i==="mouseover"||i==="pointerover",q=i==="mouseout"||i==="pointerout",G&&r!==Cy&&(dt=r.relatedTarget||r.fromElement)&&(lu(dt)||dt[ou]))break t;if((q||G)&&(G=Y.window===Y?Y:(G=Y.ownerDocument)?G.defaultView||G.parentWindow:window,q?(dt=r.relatedTarget||r.toElement,q=H,dt=dt?lu(dt):null,dt!==null&&(ne=l(dt),yt=dt.tag,dt!==ne||yt!==5&&yt!==27&&yt!==6)&&(dt=null)):(q=null,dt=H),q!==dt)){if(yt=_w,Q="onMouseLeave",F="onMouseEnter",B="mouse",(i==="pointerout"||i==="pointerover")&&(yt=Nw,Q="onPointerLeave",F="onPointerEnter",B="pointer"),ne=q==null?G:Kd(q),U=dt==null?G:Kd(dt),G=new yt(Q,B+"leave",q,r,Y),G.target=ne,G.relatedTarget=U,Q=null,lu(Y)===H&&(yt=new yt(F,B+"enter",dt,r,Y),yt.target=U,yt.relatedTarget=ne,Q=yt),ne=Q,q&&dt)e:{for(yt=ZD,F=q,B=dt,U=0,Q=F;Q;Q=yt(Q))U++;Q=0;for(var bt=B;bt;bt=yt(bt))Q++;for(;0<U-Q;)F=yt(F),U--;for(;0<Q-U;)B=yt(B),Q--;for(;U--;){if(F===B||B!==null&&F===B.alternate){yt=F;break e}F=yt(F),B=yt(B)}yt=null}else yt=null;q!==null&&vT(Z,G,q,yt,!1),dt!==null&&ne!==null&&vT(Z,ne,dt,yt,!0)}}t:{if(G=H?Kd(H):window,q=G.nodeName&&G.nodeName.toLowerCase(),q==="select"||q==="input"&&G.type==="file")var Vt=Bw;else if(Ow(G))if(zw)Vt=cD;else{Vt=oD;var pt=rD}else q=G.nodeName,!q||q.toLowerCase()!=="input"||G.type!=="checkbox"&&G.type!=="radio"?H&&_y(H.elementType)&&(Vt=Bw):Vt=lD;if(Vt&&(Vt=Vt(i,H))){jw(Z,Vt,r,Y);break t}pt&&pt(i,G,H),i==="focusout"&&H&&G.type==="number"&&H.memoizedProps.value!=null&&Ty(G,"number",G.value)}switch(pt=H?Kd(H):window,i){case"focusin":(Ow(pt)||pt.contentEditable==="true")&&(bu=pt,Fy=H,af=null);break;case"focusout":af=Fy=bu=null;break;case"mousedown":Uy=!0;break;case"contextmenu":case"mouseup":case"dragend":Uy=!1,qw(Z,r,Y);break;case"selectionchange":if(hD)break;case"keydown":case"keyup":qw(Z,r,Y)}var _t;if(By)t:{switch(i){case"compositionstart":var jt="onCompositionStart";break t;case"compositionend":jt="onCompositionEnd";break t;case"compositionupdate":jt="onCompositionUpdate";break t}jt=void 0}else mu?Lw(i,r)&&(jt="onCompositionEnd"):i==="keydown"&&r.keyCode===229&&(jt="onCompositionStart");jt&&(Mw&&r.locale!=="ko"&&(mu||jt!=="onCompositionStart"?jt==="onCompositionEnd"&&mu&&(_t=Ew()):(Ir=Y,Ry="value"in Ir?Ir.value:Ir.textContent,mu=!0)),pt=db(H,jt),0<pt.length&&(jt=new Cw(jt,i,null,r,Y),Z.push({event:jt,listeners:pt}),_t?jt.data=_t:(_t=kw(r),_t!==null&&(jt.data=_t)))),(_t=eD?iD(i,r):nD(i,r))&&(jt=db(H,"onBeforeInput"),0<jt.length&&(pt=new Cw("onBeforeInput","beforeinput",null,r,Y),Z.push({event:pt,listeners:jt}),pt.data=_t)),$D(Z,i,H,r,Y)}bT(Z,s)})}function Df(i,s,r){return{instance:i,listener:s,currentTarget:r}}function db(i,s){for(var r=s+"Capture",u=[];i!==null;){var g=i,b=g.stateNode;if(g=g.tag,g!==5&&g!==26&&g!==27||b===null||(g=Qd(i,r),g!=null&&u.unshift(Df(i,g,b)),g=Qd(i,s),g!=null&&u.push(Df(i,g,b))),i.tag===3)return u;i=i.return}return[]}function ZD(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function vT(i,s,r,u,g){for(var b=s._reactName,S=[];r!==null&&r!==u;){var D=r,O=D.alternate,H=D.stateNode;if(D=D.tag,O!==null&&O===u)break;D!==5&&D!==26&&D!==27||H===null||(O=H,g?(H=Qd(r,b),H!=null&&S.unshift(Df(r,H,O))):g||(H=Qd(r,b),H!=null&&S.push(Df(r,H,O)))),r=r.return}S.length!==0&&i.push({event:s,listeners:S})}var JD=/\r\n?/g,tR=/\u0000|\uFFFD/g;function xT(i){return(typeof i=="string"?i:""+i).replace(JD,`
`).replace(tR,"")}function AT(i,s){return s=xT(s),xT(i)===s}function ie(i,s,r,u,g,b){switch(r){case"children":typeof u=="string"?s==="body"||s==="textarea"&&u===""||fu(i,u):(typeof u=="number"||typeof u=="bigint")&&s!=="body"&&fu(i,""+u);break;case"className":mm(i,"class",u);break;case"tabIndex":mm(i,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":mm(i,r,u);break;case"style":Aw(i,u,b);break;case"data":if(s!=="object"){mm(i,"data",u);break}case"src":case"href":if(u===""&&(s!=="a"||r!=="href")){i.removeAttribute(r);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){i.removeAttribute(r);break}u=ym(""+u),i.setAttribute(r,u);break;case"action":case"formAction":if(typeof u=="function"){i.setAttribute(r,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof b=="function"&&(r==="formAction"?(s!=="input"&&ie(i,s,"name",g.name,g,null),ie(i,s,"formEncType",g.formEncType,g,null),ie(i,s,"formMethod",g.formMethod,g,null),ie(i,s,"formTarget",g.formTarget,g,null)):(ie(i,s,"encType",g.encType,g,null),ie(i,s,"method",g.method,g,null),ie(i,s,"target",g.target,g,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){i.removeAttribute(r);break}u=ym(""+u),i.setAttribute(r,u);break;case"onClick":u!=null&&(i.onclick=Ca);break;case"onScroll":u!=null&&kt("scroll",i);break;case"onScrollEnd":u!=null&&kt("scrollend",i);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(n(61));if(r=u.__html,r!=null){if(g.children!=null)throw Error(n(60));i.innerHTML=r}}break;case"multiple":i.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":i.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){i.removeAttribute("xlink:href");break}r=ym(""+u),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",r);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?i.setAttribute(r,""+u):i.removeAttribute(r);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?i.setAttribute(r,""):i.removeAttribute(r);break;case"capture":case"download":u===!0?i.setAttribute(r,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?i.setAttribute(r,u):i.removeAttribute(r);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?i.setAttribute(r,u):i.removeAttribute(r);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?i.removeAttribute(r):i.setAttribute(r,u);break;case"popover":kt("beforetoggle",i),kt("toggle",i),gm(i,"popover",u);break;case"xlinkActuate":_a(i,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":_a(i,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":_a(i,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":_a(i,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":_a(i,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":_a(i,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":_a(i,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":_a(i,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":_a(i,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":gm(i,"is",u);break;case"innerText":case"textContent":break;default:(!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(r=NM.get(r)||r,gm(i,r,u))}}function dx(i,s,r,u,g,b){switch(r){case"style":Aw(i,u,b);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(n(61));if(r=u.__html,r!=null){if(g.children!=null)throw Error(n(60));i.innerHTML=r}}break;case"children":typeof u=="string"?fu(i,u):(typeof u=="number"||typeof u=="bigint")&&fu(i,""+u);break;case"onScroll":u!=null&&kt("scroll",i);break;case"onScrollEnd":u!=null&&kt("scrollend",i);break;case"onClick":u!=null&&(i.onclick=Ca);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!dw.hasOwnProperty(r))t:{if(r[0]==="o"&&r[1]==="n"&&(g=r.endsWith("Capture"),s=r.slice(2,g?r.length-7:void 0),b=i[Zi]||null,b=b!=null?b[r]:null,typeof b=="function"&&i.removeEventListener(s,b,g),typeof u=="function")){typeof b!="function"&&b!==null&&(r in i?i[r]=null:i.hasAttribute(r)&&i.removeAttribute(r)),i.addEventListener(s,u,g);break t}r in i?i[r]=u:u===!0?i.setAttribute(r,""):gm(i,r,u)}}}function vi(i,s,r){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":kt("error",i),kt("load",i);var u=!1,g=!1,b;for(b in r)if(r.hasOwnProperty(b)){var S=r[b];if(S!=null)switch(b){case"src":u=!0;break;case"srcSet":g=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,s));default:ie(i,s,b,S,r,null)}}g&&ie(i,s,"srcSet",r.srcSet,r,null),u&&ie(i,s,"src",r.src,r,null);return;case"input":kt("invalid",i);var D=b=S=g=null,O=null,H=null;for(u in r)if(r.hasOwnProperty(u)){var Y=r[u];if(Y!=null)switch(u){case"name":g=Y;break;case"type":S=Y;break;case"checked":O=Y;break;case"defaultChecked":H=Y;break;case"value":b=Y;break;case"defaultValue":D=Y;break;case"children":case"dangerouslySetInnerHTML":if(Y!=null)throw Error(n(137,s));break;default:ie(i,s,u,Y,r,null)}}bw(i,b,D,O,H,S,g,!1);return;case"select":kt("invalid",i),u=S=b=null;for(g in r)if(r.hasOwnProperty(g)&&(D=r[g],D!=null))switch(g){case"value":b=D;break;case"defaultValue":S=D;break;case"multiple":u=D;default:ie(i,s,g,D,r,null)}s=b,r=S,i.multiple=!!u,s!=null?du(i,!!u,s,!1):r!=null&&du(i,!!u,r,!0);return;case"textarea":kt("invalid",i),b=g=u=null;for(S in r)if(r.hasOwnProperty(S)&&(D=r[S],D!=null))switch(S){case"value":u=D;break;case"defaultValue":g=D;break;case"children":b=D;break;case"dangerouslySetInnerHTML":if(D!=null)throw Error(n(91));break;default:ie(i,s,S,D,r,null)}vw(i,u,g,b);return;case"option":for(O in r)if(r.hasOwnProperty(O)&&(u=r[O],u!=null))switch(O){case"selected":i.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:ie(i,s,O,u,r,null)}return;case"dialog":kt("beforetoggle",i),kt("toggle",i),kt("cancel",i),kt("close",i);break;case"iframe":case"object":kt("load",i);break;case"video":case"audio":for(u=0;u<Mf.length;u++)kt(Mf[u],i);break;case"image":kt("error",i),kt("load",i);break;case"details":kt("toggle",i);break;case"embed":case"source":case"link":kt("error",i),kt("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(H in r)if(r.hasOwnProperty(H)&&(u=r[H],u!=null))switch(H){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,s));default:ie(i,s,H,u,r,null)}return;default:if(_y(s)){for(Y in r)r.hasOwnProperty(Y)&&(u=r[Y],u!==void 0&&dx(i,s,Y,u,r,void 0));return}}for(D in r)r.hasOwnProperty(D)&&(u=r[D],u!=null&&ie(i,s,D,u,r,null))}function eR(i,s,r,u){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var g=null,b=null,S=null,D=null,O=null,H=null,Y=null;for(q in r){var Z=r[q];if(r.hasOwnProperty(q)&&Z!=null)switch(q){case"checked":break;case"value":break;case"defaultValue":O=Z;default:u.hasOwnProperty(q)||ie(i,s,q,null,u,Z)}}for(var G in u){var q=u[G];if(Z=r[G],u.hasOwnProperty(G)&&(q!=null||Z!=null))switch(G){case"type":b=q;break;case"name":g=q;break;case"checked":H=q;break;case"defaultChecked":Y=q;break;case"value":S=q;break;case"defaultValue":D=q;break;case"children":case"dangerouslySetInnerHTML":if(q!=null)throw Error(n(137,s));break;default:q!==Z&&ie(i,s,G,q,u,Z)}}Ey(i,S,D,O,H,Y,b,g);return;case"select":q=S=D=G=null;for(b in r)if(O=r[b],r.hasOwnProperty(b)&&O!=null)switch(b){case"value":break;case"multiple":q=O;default:u.hasOwnProperty(b)||ie(i,s,b,null,u,O)}for(g in u)if(b=u[g],O=r[g],u.hasOwnProperty(g)&&(b!=null||O!=null))switch(g){case"value":G=b;break;case"defaultValue":D=b;break;case"multiple":S=b;default:b!==O&&ie(i,s,g,b,u,O)}s=D,r=S,u=q,G!=null?du(i,!!r,G,!1):!!u!=!!r&&(s!=null?du(i,!!r,s,!0):du(i,!!r,r?[]:"",!1));return;case"textarea":q=G=null;for(D in r)if(g=r[D],r.hasOwnProperty(D)&&g!=null&&!u.hasOwnProperty(D))switch(D){case"value":break;case"children":break;default:ie(i,s,D,null,u,g)}for(S in u)if(g=u[S],b=r[S],u.hasOwnProperty(S)&&(g!=null||b!=null))switch(S){case"value":G=g;break;case"defaultValue":q=g;break;case"children":break;case"dangerouslySetInnerHTML":if(g!=null)throw Error(n(91));break;default:g!==b&&ie(i,s,S,g,u,b)}yw(i,G,q);return;case"option":for(var dt in r)if(G=r[dt],r.hasOwnProperty(dt)&&G!=null&&!u.hasOwnProperty(dt))switch(dt){case"selected":i.selected=!1;break;default:ie(i,s,dt,null,u,G)}for(O in u)if(G=u[O],q=r[O],u.hasOwnProperty(O)&&G!==q&&(G!=null||q!=null))switch(O){case"selected":i.selected=G&&typeof G!="function"&&typeof G!="symbol";break;default:ie(i,s,O,G,u,q)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var yt in r)G=r[yt],r.hasOwnProperty(yt)&&G!=null&&!u.hasOwnProperty(yt)&&ie(i,s,yt,null,u,G);for(H in u)if(G=u[H],q=r[H],u.hasOwnProperty(H)&&G!==q&&(G!=null||q!=null))switch(H){case"children":case"dangerouslySetInnerHTML":if(G!=null)throw Error(n(137,s));break;default:ie(i,s,H,G,u,q)}return;default:if(_y(s)){for(var ne in r)G=r[ne],r.hasOwnProperty(ne)&&G!==void 0&&!u.hasOwnProperty(ne)&&dx(i,s,ne,void 0,u,G);for(Y in u)G=u[Y],q=r[Y],!u.hasOwnProperty(Y)||G===q||G===void 0&&q===void 0||dx(i,s,Y,G,u,q);return}}for(var F in r)G=r[F],r.hasOwnProperty(F)&&G!=null&&!u.hasOwnProperty(F)&&ie(i,s,F,null,u,G);for(Z in u)G=u[Z],q=r[Z],!u.hasOwnProperty(Z)||G===q||G==null&&q==null||ie(i,s,Z,G,u,q)}function ST(i){switch(i){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function iR(){if(typeof performance.getEntriesByType=="function"){for(var i=0,s=0,r=performance.getEntriesByType("resource"),u=0;u<r.length;u++){var g=r[u],b=g.transferSize,S=g.initiatorType,D=g.duration;if(b&&D&&ST(S)){for(S=0,D=g.responseEnd,u+=1;u<r.length;u++){var O=r[u],H=O.startTime;if(H>D)break;var Y=O.transferSize,Z=O.initiatorType;Y&&ST(Z)&&(O=O.responseEnd,S+=Y*(O<D?1:(D-H)/(O-H)))}if(--u,s+=8*(b+S)/(g.duration/1e3),i++,10<i)break}}if(0<i)return s/i/1e6}return navigator.connection&&(i=navigator.connection.downlink,typeof i=="number")?i:5}var fx=null,px=null;function fb(i){return i.nodeType===9?i:i.ownerDocument}function wT(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function ET(i,s){if(i===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&s==="foreignObject"?0:i}function gx(i,s){return i==="textarea"||i==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var mx=null;function nR(){var i=window.event;return i&&i.type==="popstate"?i===mx?!1:(mx=i,!0):(mx=null,!1)}var TT=typeof setTimeout=="function"?setTimeout:void 0,sR=typeof clearTimeout=="function"?clearTimeout:void 0,_T=typeof Promise=="function"?Promise:void 0,aR=typeof queueMicrotask=="function"?queueMicrotask:typeof _T<"u"?function(i){return _T.resolve(null).then(i).catch(rR)}:TT;function rR(i){setTimeout(function(){throw i})}function io(i){return i==="head"}function CT(i,s){var r=s,u=0;do{var g=r.nextSibling;if(i.removeChild(r),g&&g.nodeType===8)if(r=g.data,r==="/$"||r==="/&"){if(u===0){i.removeChild(g),Vu(s);return}u--}else if(r==="$"||r==="$?"||r==="$~"||r==="$!"||r==="&")u++;else if(r==="html")Rf(i.ownerDocument.documentElement);else if(r==="head"){r=i.ownerDocument.head,Rf(r);for(var b=r.firstChild;b;){var S=b.nextSibling,D=b.nodeName;b[$d]||D==="SCRIPT"||D==="STYLE"||D==="LINK"&&b.rel.toLowerCase()==="stylesheet"||r.removeChild(b),b=S}}else r==="body"&&Rf(i.ownerDocument.body);r=g}while(r);Vu(s)}function NT(i,s){var r=i;i=0;do{var u=r.nextSibling;if(r.nodeType===1?s?(r._stashedDisplay=r.style.display,r.style.display="none"):(r.style.display=r._stashedDisplay||"",r.getAttribute("style")===""&&r.removeAttribute("style")):r.nodeType===3&&(s?(r._stashedText=r.nodeValue,r.nodeValue=""):r.nodeValue=r._stashedText||""),u&&u.nodeType===8)if(r=u.data,r==="/$"){if(i===0)break;i--}else r!=="$"&&r!=="$?"&&r!=="$~"&&r!=="$!"||i++;r=u}while(r)}function bx(i){var s=i.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var r=s;switch(s=s.nextSibling,r.nodeName){case"HTML":case"HEAD":case"BODY":bx(r),Sy(r);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(r.rel.toLowerCase()==="stylesheet")continue}i.removeChild(r)}}function oR(i,s,r,u){for(;i.nodeType===1;){var g=r;if(i.nodeName.toLowerCase()!==s.toLowerCase()){if(!u&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(u){if(!i[$d])switch(s){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(b=i.getAttribute("rel"),b==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(b!==g.rel||i.getAttribute("href")!==(g.href==null||g.href===""?null:g.href)||i.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin)||i.getAttribute("title")!==(g.title==null?null:g.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(b=i.getAttribute("src"),(b!==(g.src==null?null:g.src)||i.getAttribute("type")!==(g.type==null?null:g.type)||i.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin))&&b&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(s==="input"&&i.type==="hidden"){var b=g.name==null?null:""+g.name;if(g.type==="hidden"&&i.getAttribute("name")===b)return i}else return i;if(i=rs(i.nextSibling),i===null)break}return null}function lR(i,s,r){if(s==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!r||(i=rs(i.nextSibling),i===null))return null;return i}function MT(i,s){for(;i.nodeType!==8;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!s||(i=rs(i.nextSibling),i===null))return null;return i}function yx(i){return i.data==="$?"||i.data==="$~"}function vx(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState!=="loading"}function cR(i,s){var r=i.ownerDocument;if(i.data==="$~")i._reactRetry=s;else if(i.data!=="$?"||r.readyState!=="loading")s();else{var u=function(){s(),r.removeEventListener("DOMContentLoaded",u)};r.addEventListener("DOMContentLoaded",u),i._reactRetry=u}}function rs(i){for(;i!=null;i=i.nextSibling){var s=i.nodeType;if(s===1||s===3)break;if(s===8){if(s=i.data,s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"||s==="F!"||s==="F")break;if(s==="/$"||s==="/&")return null}}return i}var xx=null;function DT(i){i=i.nextSibling;for(var s=0;i;){if(i.nodeType===8){var r=i.data;if(r==="/$"||r==="/&"){if(s===0)return rs(i.nextSibling);s--}else r!=="$"&&r!=="$!"&&r!=="$?"&&r!=="$~"&&r!=="&"||s++}i=i.nextSibling}return null}function RT(i){i=i.previousSibling;for(var s=0;i;){if(i.nodeType===8){var r=i.data;if(r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"){if(s===0)return i;s--}else r!=="/$"&&r!=="/&"||s++}i=i.previousSibling}return null}function LT(i,s,r){switch(s=fb(r),i){case"html":if(i=s.documentElement,!i)throw Error(n(452));return i;case"head":if(i=s.head,!i)throw Error(n(453));return i;case"body":if(i=s.body,!i)throw Error(n(454));return i;default:throw Error(n(451))}}function Rf(i){for(var s=i.attributes;s.length;)i.removeAttributeNode(s[0]);Sy(i)}var os=new Map,kT=new Set;function pb(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var Ga=V.d;V.d={f:uR,r:hR,D:dR,C:fR,L:pR,m:gR,X:bR,S:mR,M:yR};function uR(){var i=Ga.f(),s=ab();return i||s}function hR(i){var s=cu(i);s!==null&&s.tag===5&&s.type==="form"?Q1(s):Ga.r(i)}var Uu=typeof document>"u"?null:document;function OT(i,s,r){var u=Uu;if(u&&typeof s=="string"&&s){var g=Jn(s);g='link[rel="'+i+'"][href="'+g+'"]',typeof r=="string"&&(g+='[crossorigin="'+r+'"]'),kT.has(g)||(kT.add(g),i={rel:i,crossOrigin:r,href:s},u.querySelector(g)===null&&(s=u.createElement("link"),vi(s,"link",i),si(s),u.head.appendChild(s)))}}function dR(i){Ga.D(i),OT("dns-prefetch",i,null)}function fR(i,s){Ga.C(i,s),OT("preconnect",i,s)}function pR(i,s,r){Ga.L(i,s,r);var u=Uu;if(u&&i&&s){var g='link[rel="preload"][as="'+Jn(s)+'"]';s==="image"&&r&&r.imageSrcSet?(g+='[imagesrcset="'+Jn(r.imageSrcSet)+'"]',typeof r.imageSizes=="string"&&(g+='[imagesizes="'+Jn(r.imageSizes)+'"]')):g+='[href="'+Jn(i)+'"]';var b=g;switch(s){case"style":b=Hu(i);break;case"script":b=Gu(i)}os.has(b)||(i=y({rel:"preload",href:s==="image"&&r&&r.imageSrcSet?void 0:i,as:s},r),os.set(b,i),u.querySelector(g)!==null||s==="style"&&u.querySelector(Lf(b))||s==="script"&&u.querySelector(kf(b))||(s=u.createElement("link"),vi(s,"link",i),si(s),u.head.appendChild(s)))}}function gR(i,s){Ga.m(i,s);var r=Uu;if(r&&i){var u=s&&typeof s.as=="string"?s.as:"script",g='link[rel="modulepreload"][as="'+Jn(u)+'"][href="'+Jn(i)+'"]',b=g;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":b=Gu(i)}if(!os.has(b)&&(i=y({rel:"modulepreload",href:i},s),os.set(b,i),r.querySelector(g)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(r.querySelector(kf(b)))return}u=r.createElement("link"),vi(u,"link",i),si(u),r.head.appendChild(u)}}}function mR(i,s,r){Ga.S(i,s,r);var u=Uu;if(u&&i){var g=uu(u).hoistableStyles,b=Hu(i);s=s||"default";var S=g.get(b);if(!S){var D={loading:0,preload:null};if(S=u.querySelector(Lf(b)))D.loading=5;else{i=y({rel:"stylesheet",href:i,"data-precedence":s},r),(r=os.get(b))&&Ax(i,r);var O=S=u.createElement("link");si(O),vi(O,"link",i),O._p=new Promise(function(H,Y){O.onload=H,O.onerror=Y}),O.addEventListener("load",function(){D.loading|=1}),O.addEventListener("error",function(){D.loading|=2}),D.loading|=4,gb(S,s,u)}S={type:"stylesheet",instance:S,count:1,state:D},g.set(b,S)}}}function bR(i,s){Ga.X(i,s);var r=Uu;if(r&&i){var u=uu(r).hoistableScripts,g=Gu(i),b=u.get(g);b||(b=r.querySelector(kf(g)),b||(i=y({src:i,async:!0},s),(s=os.get(g))&&Sx(i,s),b=r.createElement("script"),si(b),vi(b,"link",i),r.head.appendChild(b)),b={type:"script",instance:b,count:1,state:null},u.set(g,b))}}function yR(i,s){Ga.M(i,s);var r=Uu;if(r&&i){var u=uu(r).hoistableScripts,g=Gu(i),b=u.get(g);b||(b=r.querySelector(kf(g)),b||(i=y({src:i,async:!0,type:"module"},s),(s=os.get(g))&&Sx(i,s),b=r.createElement("script"),si(b),vi(b,"link",i),r.head.appendChild(b)),b={type:"script",instance:b,count:1,state:null},u.set(g,b))}}function jT(i,s,r,u){var g=(g=Se.current)?pb(g):null;if(!g)throw Error(n(446));switch(i){case"meta":case"title":return null;case"style":return typeof r.precedence=="string"&&typeof r.href=="string"?(s=Hu(r.href),r=uu(g).hoistableStyles,u=r.get(s),u||(u={type:"style",instance:null,count:0,state:null},r.set(s,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(r.rel==="stylesheet"&&typeof r.href=="string"&&typeof r.precedence=="string"){i=Hu(r.href);var b=uu(g).hoistableStyles,S=b.get(i);if(S||(g=g.ownerDocument||g,S={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},b.set(i,S),(b=g.querySelector(Lf(i)))&&!b._p&&(S.instance=b,S.state.loading=5),os.has(i)||(r={rel:"preload",as:"style",href:r.href,crossOrigin:r.crossOrigin,integrity:r.integrity,media:r.media,hrefLang:r.hrefLang,referrerPolicy:r.referrerPolicy},os.set(i,r),b||vR(g,i,r,S.state))),s&&u===null)throw Error(n(528,""));return S}if(s&&u!==null)throw Error(n(529,""));return null;case"script":return s=r.async,r=r.src,typeof r=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=Gu(r),r=uu(g).hoistableScripts,u=r.get(s),u||(u={type:"script",instance:null,count:0,state:null},r.set(s,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,i))}}function Hu(i){return'href="'+Jn(i)+'"'}function Lf(i){return'link[rel="stylesheet"]['+i+"]"}function BT(i){return y({},i,{"data-precedence":i.precedence,precedence:null})}function vR(i,s,r,u){i.querySelector('link[rel="preload"][as="style"]['+s+"]")?u.loading=1:(s=i.createElement("link"),u.preload=s,s.addEventListener("load",function(){return u.loading|=1}),s.addEventListener("error",function(){return u.loading|=2}),vi(s,"link",r),si(s),i.head.appendChild(s))}function Gu(i){return'[src="'+Jn(i)+'"]'}function kf(i){return"script[async]"+i}function zT(i,s,r){if(s.count++,s.instance===null)switch(s.type){case"style":var u=i.querySelector('style[data-href~="'+Jn(r.href)+'"]');if(u)return s.instance=u,si(u),u;var g=y({},r,{"data-href":r.href,"data-precedence":r.precedence,href:null,precedence:null});return u=(i.ownerDocument||i).createElement("style"),si(u),vi(u,"style",g),gb(u,r.precedence,i),s.instance=u;case"stylesheet":g=Hu(r.href);var b=i.querySelector(Lf(g));if(b)return s.state.loading|=4,s.instance=b,si(b),b;u=BT(r),(g=os.get(g))&&Ax(u,g),b=(i.ownerDocument||i).createElement("link"),si(b);var S=b;return S._p=new Promise(function(D,O){S.onload=D,S.onerror=O}),vi(b,"link",u),s.state.loading|=4,gb(b,r.precedence,i),s.instance=b;case"script":return b=Gu(r.src),(g=i.querySelector(kf(b)))?(s.instance=g,si(g),g):(u=r,(g=os.get(b))&&(u=y({},r),Sx(u,g)),i=i.ownerDocument||i,g=i.createElement("script"),si(g),vi(g,"link",u),i.head.appendChild(g),s.instance=g);case"void":return null;default:throw Error(n(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(u=s.instance,s.state.loading|=4,gb(u,r.precedence,i));return s.instance}function gb(i,s,r){for(var u=r.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),g=u.length?u[u.length-1]:null,b=g,S=0;S<u.length;S++){var D=u[S];if(D.dataset.precedence===s)b=D;else if(b!==g)break}b?b.parentNode.insertBefore(i,b.nextSibling):(s=r.nodeType===9?r.head:r,s.insertBefore(i,s.firstChild))}function Ax(i,s){i.crossOrigin==null&&(i.crossOrigin=s.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=s.referrerPolicy),i.title==null&&(i.title=s.title)}function Sx(i,s){i.crossOrigin==null&&(i.crossOrigin=s.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=s.referrerPolicy),i.integrity==null&&(i.integrity=s.integrity)}var mb=null;function PT(i,s,r){if(mb===null){var u=new Map,g=mb=new Map;g.set(r,u)}else g=mb,u=g.get(r),u||(u=new Map,g.set(r,u));if(u.has(i))return u;for(u.set(i,null),r=r.getElementsByTagName(i),g=0;g<r.length;g++){var b=r[g];if(!(b[$d]||b[gi]||i==="link"&&b.getAttribute("rel")==="stylesheet")&&b.namespaceURI!=="http://www.w3.org/2000/svg"){var S=b.getAttribute(s)||"";S=i+S;var D=u.get(S);D?D.push(b):u.set(S,[b])}}return u}function IT(i,s,r){i=i.ownerDocument||i,i.head.insertBefore(r,s==="title"?i.querySelector("head > title"):null)}function xR(i,s,r){if(r===1||s.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return i=s.disabled,typeof s.precedence=="string"&&i==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function FT(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}function AR(i,s,r,u){if(r.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(r.state.loading&4)===0){if(r.instance===null){var g=Hu(u.href),b=s.querySelector(Lf(g));if(b){s=b._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(i.count++,i=bb.bind(i),s.then(i,i)),r.state.loading|=4,r.instance=b,si(b);return}b=s.ownerDocument||s,u=BT(u),(g=os.get(g))&&Ax(u,g),b=b.createElement("link"),si(b);var S=b;S._p=new Promise(function(D,O){S.onload=D,S.onerror=O}),vi(b,"link",u),r.instance=b}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(r,s),(s=r.state.preload)&&(r.state.loading&3)===0&&(i.count++,r=bb.bind(i),s.addEventListener("load",r),s.addEventListener("error",r))}}var wx=0;function SR(i,s){return i.stylesheets&&i.count===0&&vb(i,i.stylesheets),0<i.count||0<i.imgCount?function(r){var u=setTimeout(function(){if(i.stylesheets&&vb(i,i.stylesheets),i.unsuspend){var b=i.unsuspend;i.unsuspend=null,b()}},6e4+s);0<i.imgBytes&&wx===0&&(wx=62500*iR());var g=setTimeout(function(){if(i.waitingForImages=!1,i.count===0&&(i.stylesheets&&vb(i,i.stylesheets),i.unsuspend)){var b=i.unsuspend;i.unsuspend=null,b()}},(i.imgBytes>wx?50:800)+s);return i.unsuspend=r,function(){i.unsuspend=null,clearTimeout(u),clearTimeout(g)}}:null}function bb(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)vb(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var yb=null;function vb(i,s){i.stylesheets=null,i.unsuspend!==null&&(i.count++,yb=new Map,s.forEach(wR,i),yb=null,bb.call(i))}function wR(i,s){if(!(s.state.loading&4)){var r=yb.get(i);if(r)var u=r.get(null);else{r=new Map,yb.set(i,r);for(var g=i.querySelectorAll("link[data-precedence],style[data-precedence]"),b=0;b<g.length;b++){var S=g[b];(S.nodeName==="LINK"||S.getAttribute("media")!=="not all")&&(r.set(S.dataset.precedence,S),u=S)}u&&r.set(null,u)}g=s.instance,S=g.getAttribute("data-precedence"),b=r.get(S)||u,b===u&&r.set(null,g),r.set(S,g),this.count++,u=bb.bind(this),g.addEventListener("load",u),g.addEventListener("error",u),b?b.parentNode.insertBefore(g,b.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(g,i.firstChild)),s.state.loading|=4}}var Of={$$typeof:L,Provider:null,Consumer:null,_currentValue:st,_currentValue2:st,_threadCount:0};function ER(i,s,r,u,g,b,S,D,O){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=yy(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=yy(0),this.hiddenUpdates=yy(null),this.identifierPrefix=u,this.onUncaughtError=g,this.onCaughtError=b,this.onRecoverableError=S,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=O,this.incompleteTransitions=new Map}function UT(i,s,r,u,g,b,S,D,O,H,Y,Z){return i=new ER(i,s,r,S,O,H,Y,Z,D),s=1,b===!0&&(s|=24),b=An(3,null,null,s),i.current=b,b.stateNode=i,s=iv(),s.refCount++,i.pooledCache=s,s.refCount++,b.memoizedState={element:u,isDehydrated:r,cache:s},rv(b),i}function HT(i){return i?(i=xu,i):xu}function GT(i,s,r,u,g,b){g=HT(g),u.context===null?u.context=g:u.pendingContext=g,u=qr(s),u.payload={element:r},b=b===void 0?null:b,b!==null&&(u.callback=b),r=Xr(i,u,s),r!==null&&(an(r,i,s),df(r,i,s))}function VT(i,s){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var r=i.retryLane;i.retryLane=r!==0&&r<s?r:s}}function Ex(i,s){VT(i,s),(i=i.alternate)&&VT(i,s)}function qT(i){if(i.tag===13||i.tag===31){var s=yl(i,67108864);s!==null&&an(s,i,67108864),Ex(i,67108864)}}function XT(i){if(i.tag===13||i.tag===31){var s=_n();s=vy(s);var r=yl(i,s);r!==null&&an(r,i,s),Ex(i,s)}}var xb=!0;function TR(i,s,r,u){var g=P.T;P.T=null;var b=V.p;try{V.p=2,Tx(i,s,r,u)}finally{V.p=b,P.T=g}}function _R(i,s,r,u){var g=P.T;P.T=null;var b=V.p;try{V.p=8,Tx(i,s,r,u)}finally{V.p=b,P.T=g}}function Tx(i,s,r,u){if(xb){var g=_x(u);if(g===null)hx(i,s,u,Ab,r),$T(i,u);else if(NR(g,i,s,r,u))u.stopPropagation();else if($T(i,u),s&4&&-1<CR.indexOf(i)){for(;g!==null;){var b=cu(g);if(b!==null)switch(b.tag){case 3:if(b=b.stateNode,b.current.memoizedState.isDehydrated){var S=fl(b.pendingLanes);if(S!==0){var D=b;for(D.pendingLanes|=2,D.entangledLanes|=2;S;){var O=1<<31-vn(S);D.entanglements[1]|=O,S&=~O}Qs(b),(Xt&6)===0&&(nb=Fi()+500,Nf(0))}}break;case 31:case 13:D=yl(b,2),D!==null&&an(D,b,2),ab(),Ex(b,2)}if(b=_x(u),b===null&&hx(i,s,u,Ab,r),b===g)break;g=b}g!==null&&u.stopPropagation()}else hx(i,s,u,null,r)}}function _x(i){return i=Ny(i),Cx(i)}var Ab=null;function Cx(i){if(Ab=null,i=lu(i),i!==null){var s=l(i);if(s===null)i=null;else{var r=s.tag;if(r===13){if(i=c(s),i!==null)return i;i=null}else if(r===31){if(i=h(s),i!==null)return i;i=null}else if(r===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;i=null}else s!==i&&(i=null)}}return Ab=i,null}function YT(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(by()){case cm:return 2;case um:return 8;case bn:case Br:return 32;case Es:return 268435456;default:return 32}default:return 32}}var Nx=!1,no=null,so=null,ao=null,jf=new Map,Bf=new Map,ro=[],CR="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function $T(i,s){switch(i){case"focusin":case"focusout":no=null;break;case"dragenter":case"dragleave":so=null;break;case"mouseover":case"mouseout":ao=null;break;case"pointerover":case"pointerout":jf.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Bf.delete(s.pointerId)}}function zf(i,s,r,u,g,b){return i===null||i.nativeEvent!==b?(i={blockedOn:s,domEventName:r,eventSystemFlags:u,nativeEvent:b,targetContainers:[g]},s!==null&&(s=cu(s),s!==null&&qT(s)),i):(i.eventSystemFlags|=u,s=i.targetContainers,g!==null&&s.indexOf(g)===-1&&s.push(g),i)}function NR(i,s,r,u,g){switch(s){case"focusin":return no=zf(no,i,s,r,u,g),!0;case"dragenter":return so=zf(so,i,s,r,u,g),!0;case"mouseover":return ao=zf(ao,i,s,r,u,g),!0;case"pointerover":var b=g.pointerId;return jf.set(b,zf(jf.get(b)||null,i,s,r,u,g)),!0;case"gotpointercapture":return b=g.pointerId,Bf.set(b,zf(Bf.get(b)||null,i,s,r,u,g)),!0}return!1}function KT(i){var s=lu(i.target);if(s!==null){var r=l(s);if(r!==null){if(s=r.tag,s===13){if(s=c(r),s!==null){i.blockedOn=s,cw(i.priority,function(){XT(r)});return}}else if(s===31){if(s=h(r),s!==null){i.blockedOn=s,cw(i.priority,function(){XT(r)});return}}else if(s===3&&r.stateNode.current.memoizedState.isDehydrated){i.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}i.blockedOn=null}function Sb(i){if(i.blockedOn!==null)return!1;for(var s=i.targetContainers;0<s.length;){var r=_x(i.nativeEvent);if(r===null){r=i.nativeEvent;var u=new r.constructor(r.type,r);Cy=u,r.target.dispatchEvent(u),Cy=null}else return s=cu(r),s!==null&&qT(s),i.blockedOn=r,!1;s.shift()}return!0}function QT(i,s,r){Sb(i)&&r.delete(s)}function MR(){Nx=!1,no!==null&&Sb(no)&&(no=null),so!==null&&Sb(so)&&(so=null),ao!==null&&Sb(ao)&&(ao=null),jf.forEach(QT),Bf.forEach(QT)}function wb(i,s){i.blockedOn===s&&(i.blockedOn=null,Nx||(Nx=!0,d.unstable_scheduleCallback(d.unstable_NormalPriority,MR)))}var Eb=null;function WT(i){Eb!==i&&(Eb=i,d.unstable_scheduleCallback(d.unstable_NormalPriority,function(){Eb===i&&(Eb=null);for(var s=0;s<i.length;s+=3){var r=i[s],u=i[s+1],g=i[s+2];if(typeof u!="function"){if(Cx(u||r)===null)continue;break}var b=cu(r);b!==null&&(i.splice(s,3),s-=3,_v(b,{pending:!0,data:g,method:r.method,action:u},u,g))}}))}function Vu(i){function s(O){return wb(O,i)}no!==null&&wb(no,i),so!==null&&wb(so,i),ao!==null&&wb(ao,i),jf.forEach(s),Bf.forEach(s);for(var r=0;r<ro.length;r++){var u=ro[r];u.blockedOn===i&&(u.blockedOn=null)}for(;0<ro.length&&(r=ro[0],r.blockedOn===null);)KT(r),r.blockedOn===null&&ro.shift();if(r=(i.ownerDocument||i).$$reactFormReplay,r!=null)for(u=0;u<r.length;u+=3){var g=r[u],b=r[u+1],S=g[Zi]||null;if(typeof b=="function")S||WT(r);else if(S){var D=null;if(b&&b.hasAttribute("formAction")){if(g=b,S=b[Zi]||null)D=S.formAction;else if(Cx(g)!==null)continue}else D=S.action;typeof D=="function"?r[u+1]=D:(r.splice(u,3),u-=3),WT(r)}}}function ZT(){function i(b){b.canIntercept&&b.info==="react-transition"&&b.intercept({handler:function(){return new Promise(function(S){return g=S})},focusReset:"manual",scroll:"manual"})}function s(){g!==null&&(g(),g=null),u||setTimeout(r,20)}function r(){if(!u&&!navigation.transition){var b=navigation.currentEntry;b&&b.url!=null&&navigation.navigate(b.url,{state:b.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var u=!1,g=null;return navigation.addEventListener("navigate",i),navigation.addEventListener("navigatesuccess",s),navigation.addEventListener("navigateerror",s),setTimeout(r,100),function(){u=!0,navigation.removeEventListener("navigate",i),navigation.removeEventListener("navigatesuccess",s),navigation.removeEventListener("navigateerror",s),g!==null&&(g(),g=null)}}}function Mx(i){this._internalRoot=i}Tb.prototype.render=Mx.prototype.render=function(i){var s=this._internalRoot;if(s===null)throw Error(n(409));var r=s.current,u=_n();GT(r,u,i,s,null,null)},Tb.prototype.unmount=Mx.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var s=i.containerInfo;GT(i.current,2,null,i,null,null),ab(),s[ou]=null}};function Tb(i){this._internalRoot=i}Tb.prototype.unstable_scheduleHydration=function(i){if(i){var s=lw();i={blockedOn:null,target:i,priority:s};for(var r=0;r<ro.length&&s!==0&&s<ro[r].priority;r++);ro.splice(r,0,i),r===0&&KT(i)}};var JT=t.version;if(JT!=="19.2.3")throw Error(n(527,JT,"19.2.3"));V.findDOMNode=function(i){var s=i._reactInternals;if(s===void 0)throw typeof i.render=="function"?Error(n(188)):(i=Object.keys(i).join(","),Error(n(268,i)));return i=p(s),i=i!==null?m(i):null,i=i===null?null:i.stateNode,i};var DR={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:P,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var _b=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!_b.isDisabled&&_b.supportsFiber)try{qd=_b.inject(DR),yn=_b}catch{}}return If.createRoot=function(i,s){if(!a(i))throw Error(n(299));var r=!1,u="",g=rE,b=oE,S=lE;return s!=null&&(s.unstable_strictMode===!0&&(r=!0),s.identifierPrefix!==void 0&&(u=s.identifierPrefix),s.onUncaughtError!==void 0&&(g=s.onUncaughtError),s.onCaughtError!==void 0&&(b=s.onCaughtError),s.onRecoverableError!==void 0&&(S=s.onRecoverableError)),s=UT(i,1,!1,null,null,r,u,null,g,b,S,ZT),i[ou]=s.current,ux(i),new Mx(s)},If.hydrateRoot=function(i,s,r){if(!a(i))throw Error(n(299));var u=!1,g="",b=rE,S=oE,D=lE,O=null;return r!=null&&(r.unstable_strictMode===!0&&(u=!0),r.identifierPrefix!==void 0&&(g=r.identifierPrefix),r.onUncaughtError!==void 0&&(b=r.onUncaughtError),r.onCaughtError!==void 0&&(S=r.onCaughtError),r.onRecoverableError!==void 0&&(D=r.onRecoverableError),r.formState!==void 0&&(O=r.formState)),s=UT(i,1,!0,s,r??null,u,g,O,b,S,D,ZT),s.context=HT(null),r=s.current,u=_n(),u=vy(u),g=qr(u),g.callback=null,Xr(r,g,u),r=u,s.current.lanes=r,Yd(s,r),Qs(s),i[ou]=s.current,ux(i),new Tb(s)},If.version="19.2.3",If}var d_;function CL(){if(d_)return Lx.exports;d_=1;function d(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(d)}catch(t){console.error(t)}}return d(),Lx.exports=_L(),Lx.exports}var NL=CL(),Di=(d=>(d[d.STOPPED=0]="STOPPED",d[d.PLAYING=1]="PLAYING",d[d.PAUSED=2]="PAUSED",d[d.BUFFERING=3]="BUFFERING",d))(Di||{});const Bd=({children:d,className:t="",variant:e="primary",size:n="md",...a})=>{const l="rounded-full font-medium transition-colors focus:outline-none flex items-center justify-center gap-2",c={primary:"bg-indigo-600 text-white hover:bg-indigo-700 disabled:opacity-50",secondary:"bg-slate-700 text-slate-100 hover:bg-slate-600",ghost:"bg-transparent text-slate-400 hover:text-white hover:bg-slate-800/50",icon:"p-2 bg-transparent text-slate-200 hover:bg-slate-800 rounded-full"},h={sm:"px-3 py-1.5 text-xs",md:"px-4 py-2 text-sm",lg:"px-6 py-3 text-base"},f=c[e],p=e==="icon"?"":h[n];return A.jsx("button",{className:`${l} ${f} ${p} ${t}`,...a,children:d})},ML=({currentEpisode:d,onClose:t,onEpisodeComplete:e,onEpisodeStart:n,onEpisodeClick:a})=>{const l=$.useRef(null),[c,h]=$.useState(Di.STOPPED),[f,p]=$.useState(0),[m,y]=$.useState(0),[v,w]=$.useState(!1);$.useEffect(()=>{d&&l.current?(l.current.src=d.enclosure.url,l.current.play().catch(M=>console.error(M)),h(Di.PLAYING),n&&n(d.guid),"mediaSession"in navigator&&(navigator.mediaSession.metadata=new MediaMetadata({title:d.title,artist:"TEOVOZ - Podcast IA",album:"TEOVOZ",artwork:[{src:d.image,sizes:"96x96",type:"image/jpeg"},{src:d.image,sizes:"128x128",type:"image/jpeg"},{src:d.image,sizes:"192x192",type:"image/jpeg"},{src:d.image,sizes:"256x256",type:"image/jpeg"},{src:d.image,sizes:"384x384",type:"image/jpeg"},{src:d.image,sizes:"512x512",type:"image/jpeg"}]}),navigator.mediaSession.setActionHandler("play",()=>{var M;(M=l.current)==null||M.play(),h(Di.PLAYING)}),navigator.mediaSession.setActionHandler("pause",()=>{var M;(M=l.current)==null||M.pause(),h(Di.PAUSED)})),document.title=` ${d.title} | TEOVOZ`):d||(h(Di.STOPPED),document.title="TEOVOZ Podcast IA")},[d]);const C=M=>{M==null||M.stopPropagation(),l.current&&(c===Di.PLAYING?(l.current.pause(),h(Di.PAUSED)):(l.current.play(),h(Di.PLAYING)))},_=M=>{if(isNaN(M))return"00:00";const N=Math.floor(M/60),R=Math.floor(M%60);return`${N}:${R.toString().padStart(2,"0")}`};return d?A.jsxs(A.Fragment,{children:[v?A.jsxs("div",{className:"fixed inset-0 bg-app z-[200] flex flex-col animate-in slide-in-from-bottom duration-500",children:[A.jsxs("div",{className:"flex items-center justify-between p-6 pt-safe",children:[A.jsx(Bd,{variant:"icon",onClick:()=>w(!1),className:"bg-surface border border-app",children:A.jsx(OR,{size:24,className:"text-muted"})}),A.jsx("div",{className:"flex flex-col items-center",children:A.jsx("span",{className:"text-[10px] font-black tracking-[0.2em] text-muted uppercase",children:"TeoVoz Player"})}),A.jsx(Bd,{variant:"icon",onClick:t,className:"bg-surface border border-app",children:A.jsx(Zc,{size:24,className:"text-muted"})})]}),A.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center p-8 text-center space-y-10 overflow-y-auto no-scrollbar pb-12",children:[A.jsxs("div",{className:"w-full max-w-[300px] aspect-square rounded-[48px] overflow-hidden shadow-2xl border-white/5 border relative group",children:[A.jsx("img",{src:d.image,alt:d.title,className:"w-full h-full object-cover"}),A.jsx("div",{className:"absolute inset-0 bg-indigo-600/10 mix-blend-overlay"})]}),A.jsxs("div",{className:"space-y-4 w-full max-w-md",children:[A.jsx("h2",{className:"text-2xl font-black text-primary leading-tight px-4 tracking-tighter",children:d.title}),A.jsx("div",{className:"flex items-center justify-center gap-2",children:A.jsx("div",{className:"px-2 py-1 bg-surface border border-app rounded-lg text-[10px] font-black text-indigo-400 uppercase tracking-widest",children:"Premium Audio"})})]}),A.jsxs("div",{className:"w-full max-w-md space-y-10 pt-4",children:[A.jsxs("div",{className:"px-4",children:[A.jsxs("div",{className:"flex justify-between text-[10px] font-bold text-muted mb-3 uppercase tracking-widest",children:[A.jsx("span",{children:_(f)}),A.jsx("span",{children:_(m)})]}),A.jsx("input",{type:"range",min:"0",max:m||100,value:f,onChange:M=>{const N=parseFloat(M.target.value);p(N),l.current&&(l.current.currentTime=N)},className:"w-full h-1.5 bg-surface rounded-full appearance-none cursor-pointer accent-indigo-500"})]}),A.jsxs("div",{className:"flex items-center justify-around px-4",children:[A.jsx("button",{className:"text-muted active:scale-90 hover:text-primary transition-colors",onClick:()=>{l.current&&(l.current.currentTime-=15)},children:A.jsx(jR,{size:32})}),A.jsx("button",{className:"w-20 h-20 bg-indigo-600 text-white rounded-[28px] flex items-center justify-center shadow-2xl shadow-indigo-600/30 active:scale-95 transition-all",onClick:()=>C(),children:c===Di.PLAYING?A.jsx(e_,{size:36,fill:"currentColor"}):A.jsx(jd,{size:36,fill:"currentColor",className:"ml-1.5"})}),A.jsx("button",{className:"text-muted active:scale-90 hover:text-primary transition-colors",onClick:()=>{l.current&&(l.current.currentTime+=15)},children:A.jsx(i_,{size:32})})]})]})]})]}):A.jsxs("div",{onClick:()=>{a&&d?a(d):w(!0)},className:"relative w-full bg-surface border-t border-app animate-in slide-in-from-bottom duration-300 cursor-pointer",children:[A.jsx("div",{className:"absolute top-0 left-0 right-0 h-[1.5px] bg-white/5 overflow-hidden",children:A.jsx("div",{className:"h-full bg-indigo-500 transition-all duration-300 ease-linear",style:{width:`${f/(m||1)*100}%`}})}),A.jsxs("div",{className:"flex items-center justify-between px-4 py-3 gap-3",children:[A.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[A.jsxs("div",{className:"relative flex-shrink-0",children:[A.jsx("img",{src:d.image,alt:"Art",className:"w-10 h-10 rounded-lg bg-app object-cover shadow-lg border border-white/10"}),c===Di.PLAYING&&A.jsxs("div",{className:"absolute -bottom-1 -right-1 flex gap-0.5 items-end h-3 bg-indigo-600 px-1 rounded-sm",children:[A.jsx("div",{className:"w-1 bg-white animate-[bounce_0.6s_infinite] h-1.5"}),A.jsx("div",{className:"w-1 bg-white animate-[bounce_0.8s_infinite] h-2"}),A.jsx("div",{className:"w-1 bg-white animate-[bounce_0.5s_infinite] h-1"})]})]}),A.jsxs("div",{className:"truncate",children:[A.jsx("h4",{className:"text-sm font-bold text-primary truncate leading-none mb-1 tracking-tight",children:d.title}),A.jsx("p",{className:"text-[8px] text-indigo-400 font-black uppercase tracking-widest animate-pulse",children:c===Di.PLAYING?"Reproduciendo ahora":"En pausa"})]})]}),A.jsxs("div",{className:"flex items-center gap-1.5",children:[A.jsx("button",{onClick:C,className:"w-10 h-10 flex items-center justify-center rounded-full bg-primary text-app active:scale-90 transition-transform",children:c===Di.PLAYING?A.jsx(e_,{size:18,fill:"currentColor"}):A.jsx(jd,{size:18,fill:"currentColor",className:"ml-0.5"})}),A.jsx("button",{onClick:M=>{M.stopPropagation(),l.current&&(l.current.currentTime+=15)},className:"w-10 h-10 flex items-center justify-center rounded-full bg-surface border border-app text-muted hover:text-primary active:scale-90 transition-transform",children:A.jsx(i_,{size:18})}),A.jsx("button",{onClick:M=>{M.stopPropagation(),t()},className:"p-2 text-muted hover:text-primary active:scale-90 transition-colors",children:A.jsx(Zc,{size:20})})]})]})]}),A.jsx("audio",{ref:l,playsInline:!0,preload:"auto",title:d.title,onPlay:()=>h(Di.PLAYING),onPause:()=>h(Di.PAUSED),onTimeUpdate:()=>{l.current&&(p(l.current.currentTime),y(l.current.duration||0))},onEnded:()=>{h(Di.STOPPED),e&&e(d.guid)}})]}):null},DL=({activeTab:d,onTabChange:t,hasPlayer:e,notifCount:n=0})=>A.jsxs("div",{className:`border-t border-app px-4 py-3 flex items-center justify-between relative z-50 ${e?"pb-3":"pb-6"}`,children:[A.jsxs("a",{href:"index.html",className:`flex flex-col items-center gap-1 transition-colors ${d==="home"?"text-indigo-500":"text-muted hover:text-primary"}`,children:[A.jsx("div",{className:`p-1 rounded-xl transition-all ${d==="home"?"bg-indigo-500/10":"bg-transparent"}`,children:A.jsx(BR,{size:18,strokeWidth:2.5})}),A.jsx("span",{className:"text-[8px] font-black uppercase tracking-widest",children:"Inicio"})]}),A.jsxs("a",{href:"search.html",className:`flex flex-col items-center gap-1 transition-colors ${d==="search"?"text-indigo-500":"text-muted hover:text-primary"}`,children:[A.jsx("div",{className:`p-1 rounded-xl transition-all ${d==="search"?"bg-indigo-500/10":"bg-transparent"}`,children:A.jsx(_S,{size:18,strokeWidth:2.5})}),A.jsx("span",{className:"text-[8px] font-black uppercase tracking-widest",children:"Buscar"})]}),A.jsxs("a",{href:"favorites.html",className:`flex flex-col items-center gap-1 transition-colors ${d==="favorites"?"text-indigo-500":"text-muted hover:text-primary"}`,children:[A.jsx("div",{className:`p-1 rounded-xl transition-all ${d==="favorites"?"bg-indigo-500/10":"bg-transparent"}`,children:A.jsx(nu,{size:18,strokeWidth:2.5})}),A.jsx("span",{className:"text-[8px] font-black uppercase tracking-widest",children:"Favoritos"})]}),A.jsxs("button",{onClick:()=>t("share"),className:"flex flex-col items-center gap-1 transition-colors text-muted hover:text-primary",children:[A.jsx("div",{className:"p-1 rounded-xl transition-all bg-transparent",children:A.jsx(hC,{size:18,strokeWidth:2.5})}),A.jsx("span",{className:"text-[8px] font-black uppercase tracking-widest",children:"Compartir"})]})]}),RL=({onClose:d,currentTheme:t,onThemeChange:e})=>{const n=[{id:"deep",name:"TeoVoz Deep",description:"Estilo clsico e ndigo",icon:A.jsx(zR,{size:18}),preview:"bg-[#1e293b] border-[#6366f1]"},{id:"dark-pure",name:"Oscuro Puro",description:"Negro real para AMOLED",icon:A.jsx(PR,{size:18}),preview:"bg-black border-[#262626]"},{id:"light",name:"Claro Puro",description:"Blanco limpio y minimalista",icon:A.jsx(pC,{size:18}),preview:"bg-white border-[#e2e8f0]"}];return A.jsx("div",{className:"fixed inset-0 z-[120] flex items-center justify-center p-4 bg-black/70 animate-in fade-in duration-200",children:A.jsxs("div",{className:"bg-surface border-app border rounded-[32px] w-full max-w-sm p-6 shadow-2xl relative",children:[A.jsxs("div",{className:"flex items-center justify-between mb-6",children:[A.jsxs("div",{className:"flex items-center gap-3",children:[A.jsx("div",{className:"p-2 bg-indigo-500/10 rounded-lg text-indigo-500",children:A.jsx(dC,{size:16})}),A.jsx("h2",{className:"text-xs font-black text-muted uppercase tracking-[0.2em]",children:"Personalizar"})]}),A.jsx(Bd,{variant:"icon",onClick:d,className:"text-muted",children:A.jsx(Zc,{size:20})})]}),A.jsx("div",{className:"space-y-2",children:n.map(a=>A.jsxs("button",{onClick:()=>e(a.id),className:`w-full flex items-center gap-4 p-4 rounded-2xl border transition-all text-left ${t===a.id?"border-indigo-500 bg-indigo-500/5":"border-transparent bg-app/50"}`,children:[A.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center border ${a.preview}`,children:A.jsx("span",{className:a.id==="light"?"text-slate-900":"text-white",children:a.icon})}),A.jsxs("div",{className:"flex-1",children:[A.jsx("p",{className:"font-bold text-sm text-primary",children:a.name}),A.jsx("p",{className:"text-[9px] text-muted uppercase font-black tracking-wider leading-none mt-1",children:a.description})]}),t===a.id&&A.jsx(fC,{size:18,className:"text-indigo-500"})]},a.id))})]})})},LL=({onClose:d})=>{const[t,e]=$.useState({bookName:"",author:"",userName:"",userEmail:""}),n=a=>{a.preventDefault();const l="teovoz.app@gmail.com",c=t.bookName.toUpperCase(),f=encodeURIComponent(`SOLICITUD DE NUEVO LIBRO: ${c}`),p=encodeURIComponent(`Hola TEOVOZ,

Se ha recibido una nueva solicitud de resumen desde la aplicacin:

 LIBRO: ${t.bookName}
 AUTOR: ${t.author}

DATOS DEL SOLICITANTE:
 NOMBRE: ${t.userName}
 CORREO: ${t.userEmail}

Este es un mensaje generado automticamente para el equipo de TEOVOZ.`);window.location.href=`mailto:${l}?subject=${f}&body=${p}`,d()};return A.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4 bg-black/70 animate-in fade-in duration-200",children:A.jsx("div",{className:"bg-surface border-app border rounded-[32px] w-full max-w-sm p-8 shadow-2xl relative overflow-hidden",children:A.jsxs("div",{className:"relative z-10 animate-in zoom-in-95 duration-300",children:[A.jsxs("div",{className:"flex items-center justify-between mb-6",children:[A.jsxs("div",{className:"flex items-center gap-2",children:[A.jsx("div",{className:"p-2 bg-indigo-500/10 rounded-lg text-indigo-400",children:A.jsx(gC,{size:18})}),A.jsx("h2",{className:"text-xs font-black text-slate-400 uppercase tracking-[0.2em]",children:"Solicitar Resumen"})]}),A.jsx(Bd,{variant:"icon",onClick:d,className:"text-muted",children:A.jsx(Zc,{size:20})})]}),A.jsxs("form",{onSubmit:n,className:"space-y-4",children:[A.jsxs("div",{className:"space-y-1",children:[A.jsx("label",{className:"text-[10px] font-black uppercase tracking-widest text-slate-500 ml-1",children:"Nombre del Libro"}),A.jsxs("div",{className:"relative",children:[A.jsx(IR,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-500",size:16}),A.jsx("input",{required:!0,className:"w-full bg-app border border-app rounded-xl py-3 pl-10 pr-4 text-sm text-primary focus:outline-none focus:border-indigo-500 transition-all",placeholder:"Ej: El Alquimista",value:t.bookName,onChange:a=>e({...t,bookName:a.target.value})})]})]}),A.jsxs("div",{className:"space-y-1",children:[A.jsx("label",{className:"text-[10px] font-black uppercase tracking-widest text-slate-500 ml-1",children:"Autor"}),A.jsxs("div",{className:"relative",children:[A.jsx(mC,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-500",size:16}),A.jsx("input",{required:!0,className:"w-full bg-app border border-app rounded-xl py-3 pl-10 pr-4 text-sm text-primary focus:outline-none focus:border-indigo-500 transition-all",placeholder:"Ej: Paulo Coelho",value:t.author,onChange:a=>e({...t,author:a.target.value})})]})]}),A.jsx("div",{className:"pt-4",children:A.jsxs(Bd,{type:"submit",variant:"primary",className:"w-full py-4 rounded-2xl shadow-xl shadow-indigo-500/20",children:[A.jsx(FR,{size:18}),"Enviar Solicitud"]})}),A.jsx("p",{className:"text-center text-[9px] text-slate-500 uppercase tracking-tighter mt-2",children:"Se enviar va email a teovoz.app@gmail.com"})]})]})})})},kL=({onClose:d})=>{const[t,e]=m0.useState(()=>localStorage.getItem("teovoz_audio_mono")==="true"),n=()=>{const a=!t;e(a),localStorage.setItem("teovoz_audio_mono",String(a)),window.dispatchEvent(new CustomEvent("audio-settings-changed",{detail:{mono:a}}))};return A.jsx("div",{className:"fixed inset-0 z-[120] flex items-center justify-center p-4 bg-black/80 animate-in fade-in duration-200",children:A.jsxs("div",{className:"bg-surface border-app border rounded-[32px] w-full max-w-lg max-h-[85vh] flex flex-col shadow-2xl relative overflow-hidden",children:[A.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-app",children:[A.jsxs("div",{className:"flex items-center gap-3",children:[A.jsx("div",{className:"p-2 bg-indigo-500/10 rounded-lg text-indigo-400",children:A.jsx(bC,{size:18})}),A.jsx("h2",{className:"text-xs font-black text-muted uppercase tracking-[0.2em]",children:"Acerca de TeoVoz"})]}),A.jsx(Bd,{variant:"icon",onClick:d,className:"text-muted",children:A.jsx(Zc,{size:20})})]}),A.jsxs("div",{className:"flex-1 overflow-y-auto no-scrollbar p-6 space-y-10",children:[A.jsxs("div",{className:"text-center py-4",children:[A.jsx("div",{className:"w-16 h-16 rounded-2xl flex items-center justify-center shadow-xl mb-6 mx-auto transform rotate-3 overflow-hidden",children:A.jsx("img",{src:"/logo.svg",alt:"TeoVoz Logo",className:"w-full h-full object-cover"})}),A.jsxs("h1",{className:"text-3xl font-black text-primary mb-1 tracking-tighter uppercase",children:["TEO",A.jsx("span",{className:"text-indigo-500",children:"VOZ"})]}),A.jsx("p",{className:"text-[8px] text-muted font-black uppercase tracking-[0.3em]",children:"Versin 1.1.0 Premium"})]}),A.jsxs("section",{className:"space-y-3",children:[A.jsxs("div",{className:"flex items-center gap-2 text-indigo-500",children:[A.jsx(UR,{size:16}),A.jsx("h3",{className:"font-black uppercase text-[10px] tracking-widest",children:"Nuestra Visin"})]}),A.jsxs("div",{className:"text-muted text-sm leading-relaxed space-y-3 font-medium bg-app/50 p-5 rounded-2xl border border-app",children:[A.jsx("p",{children:"TeoVoz es el puente entre las ideas ms grandes y tu apretada agenda."}),A.jsxs("p",{children:["Transformamos libros influyentes en audios de ",A.jsx("span",{className:"text-primary font-bold",children:"15 minutos"}),"."]})]})]}),A.jsxs("section",{className:"space-y-3",children:[A.jsxs("div",{className:"flex items-center gap-2 text-indigo-500",children:[A.jsx("div",{className:"p-1 bg-indigo-500/10 rounded",children:A.jsx(HR,{size:14})}),A.jsx("h3",{className:"font-black uppercase text-[10px] tracking-widest",children:"Configuracin de Audio"})]}),A.jsxs("div",{className:"bg-surface border border-app p-4 rounded-xl flex items-center justify-between",children:[A.jsxs("div",{children:[A.jsx("h4",{className:"text-sm font-bold text-primary",children:"Audio Mono"}),A.jsx("p",{className:"text-[10px] text-muted",children:"Mezcla los canales para escuchar con un solo audfono."})]}),A.jsx("button",{onClick:n,className:`w-12 h-7 rounded-full transition-colors relative ${t?"bg-indigo-600":"bg-surface border border-muted"}`,children:A.jsx("div",{className:`w-5 h-5 bg-white rounded-full absolute top-1 transition-all ${t?"left-6":"left-1"}`})})]})]}),A.jsxs("section",{className:"space-y-3",children:[A.jsxs("div",{className:"flex items-center gap-2 text-indigo-500",children:[A.jsx(GR,{size:16}),A.jsx("h3",{className:"font-black uppercase text-[10px] tracking-widest",children:"Los Pilares"})]}),A.jsx("div",{className:"grid grid-cols-2 gap-2",children:["xito","Finanzas","Mente","Relaciones","Salud","Negocios"].map((a,l)=>A.jsxs("div",{className:"text-[9px] font-bold text-muted bg-app/30 px-3 py-2 rounded-xl border border-app flex items-center gap-2",children:[A.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-indigo-500"}),a]},l))})]}),A.jsxs("section",{className:"space-y-3",children:[A.jsxs("div",{className:"flex items-center gap-2 text-indigo-500",children:[A.jsx(mC,{size:16}),A.jsx("h3",{className:"font-black uppercase text-[10px] tracking-widest",children:"Desarrollo"})]}),A.jsx("div",{className:"bg-indigo-600/10 border border-indigo-500/20 p-5 rounded-2xl",children:A.jsxs("p",{className:"text-muted text-xs leading-relaxed",children:["Creado por ",A.jsx("span",{className:"text-indigo-400 font-black",children:"MigoCreativo"}),". Elevando el potencial humano a travs de la tecnologa."]})})]}),A.jsx("div",{className:"text-center pt-4 pb-6",children:A.jsxs("div",{className:"flex items-center justify-center gap-1.5 text-indigo-500 font-black bg-indigo-500/10 px-6 py-2.5 rounded-full border border-indigo-500/20 w-fit mx-auto mb-3",children:[A.jsx(nu,{size:14,fill:"currentColor"}),"Escucha. Aprende. Crece."]})})]})]})})},SC="@firebase/installations",NS="0.6.19";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wC=1e4,EC=`w:${NS}`,TC="FIS_v2",OL="https://firebaseinstallations.googleapis.com/v1",jL=3600*1e3,BL="installations",zL="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PL={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Jc=new xC(BL,zL,PL);function _C(d){return d instanceof AC&&d.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CC({projectId:d}){return`${OL}/projects/${d}/installations`}function NC(d){return{token:d.token,requestStatus:2,expiresIn:FL(d.expiresIn),creationTime:Date.now()}}async function MC(d,t){const n=(await t.json()).error;return Jc.create("request-failed",{requestName:d,serverCode:n.code,serverMessage:n.message,serverStatus:n.status})}function DC({apiKey:d}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":d})}function IL(d,{refreshToken:t}){const e=DC(d);return e.append("Authorization",UL(t)),e}async function RC(d){const t=await d();return t.status>=500&&t.status<600?d():t}function FL(d){return Number(d.replace("s","000"))}function UL(d){return`${TC} ${d}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HL({appConfig:d,heartbeatServiceProvider:t},{fid:e}){const n=CC(d),a=DC(d),l=t.getImmediate({optional:!0});if(l){const p=await l.getHeartbeatsHeader();p&&a.append("x-firebase-client",p)}const c={fid:e,authVersion:TC,appId:d.appId,sdkVersion:EC},h={method:"POST",headers:a,body:JSON.stringify(c)},f=await RC(()=>fetch(n,h));if(f.ok){const p=await f.json();return{fid:p.fid||e,registrationStatus:2,refreshToken:p.refreshToken,authToken:NC(p.authToken)}}else throw await MC("Create Installation",f)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LC(d){return new Promise(t=>{setTimeout(t,d)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GL(d){return btoa(String.fromCharCode(...d)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VL=/^[cdef][\w-]{21}$/,Zx="";function qL(){try{const d=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(d),d[0]=112+d[0]%16;const e=XL(d);return VL.test(e)?e:Zx}catch{return Zx}}function XL(d){return GL(d).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ny(d){return`${d.appName}!${d.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kC=new Map;function OC(d,t){const e=ny(d);jC(e,t),YL(e,t)}function jC(d,t){const e=kC.get(d);if(e)for(const n of e)n(t)}function YL(d,t){const e=$L();e&&e.postMessage({key:d,fid:t}),KL()}let Pl=null;function $L(){return!Pl&&"BroadcastChannel"in self&&(Pl=new BroadcastChannel("[Firebase] FID Change"),Pl.onmessage=d=>{jC(d.data.key,d.data.fid)}),Pl}function KL(){kC.size===0&&Pl&&(Pl.close(),Pl=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QL="firebase-installations-database",WL=1,tu="firebase-installations-store";let jx=null;function MS(){return jx||(jx=uL(QL,WL,{upgrade:(d,t)=>{switch(t){case 0:d.createObjectStore(tu)}}})),jx}async function A0(d,t){const e=ny(d),a=(await MS()).transaction(tu,"readwrite"),l=a.objectStore(tu),c=await l.get(e);return await l.put(t,e),await a.done,(!c||c.fid!==t.fid)&&OC(d,t.fid),t}async function BC(d){const t=ny(d),n=(await MS()).transaction(tu,"readwrite");await n.objectStore(tu).delete(t),await n.done}async function sy(d,t){const e=ny(d),a=(await MS()).transaction(tu,"readwrite"),l=a.objectStore(tu),c=await l.get(e),h=t(c);return h===void 0?await l.delete(e):await l.put(h,e),await a.done,h&&(!c||c.fid!==h.fid)&&OC(d,h.fid),h}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DS(d){let t;const e=await sy(d.appConfig,n=>{const a=ZL(n),l=JL(d,a);return t=l.registrationPromise,l.installationEntry});return e.fid===Zx?{installationEntry:await t}:{installationEntry:e,registrationPromise:t}}function ZL(d){const t=d||{fid:qL(),registrationStatus:0};return zC(t)}function JL(d,t){if(t.registrationStatus===0){if(!navigator.onLine){const a=Promise.reject(Jc.create("app-offline"));return{installationEntry:t,registrationPromise:a}}const e={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},n=tk(d,e);return{installationEntry:e,registrationPromise:n}}else return t.registrationStatus===1?{installationEntry:t,registrationPromise:ek(d)}:{installationEntry:t}}async function tk(d,t){try{const e=await HL(d,t);return A0(d.appConfig,e)}catch(e){throw _C(e)&&e.customData.serverCode===409?await BC(d.appConfig):await A0(d.appConfig,{fid:t.fid,registrationStatus:0}),e}}async function ek(d){let t=await f_(d.appConfig);for(;t.registrationStatus===1;)await LC(100),t=await f_(d.appConfig);if(t.registrationStatus===0){const{installationEntry:e,registrationPromise:n}=await DS(d);return n||e}return t}function f_(d){return sy(d,t=>{if(!t)throw Jc.create("installation-not-found");return zC(t)})}function zC(d){return ik(d)?{fid:d.fid,registrationStatus:0}:d}function ik(d){return d.registrationStatus===1&&d.registrationTime+wC<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nk({appConfig:d,heartbeatServiceProvider:t},e){const n=sk(d,e),a=IL(d,e),l=t.getImmediate({optional:!0});if(l){const p=await l.getHeartbeatsHeader();p&&a.append("x-firebase-client",p)}const c={installation:{sdkVersion:EC,appId:d.appId}},h={method:"POST",headers:a,body:JSON.stringify(c)},f=await RC(()=>fetch(n,h));if(f.ok){const p=await f.json();return NC(p)}else throw await MC("Generate Auth Token",f)}function sk(d,{fid:t}){return`${CC(d)}/${t}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RS(d,t=!1){let e;const n=await sy(d.appConfig,l=>{if(!PC(l))throw Jc.create("not-registered");const c=l.authToken;if(!t&&ok(c))return l;if(c.requestStatus===1)return e=ak(d,t),l;{if(!navigator.onLine)throw Jc.create("app-offline");const h=ck(l);return e=rk(d,h),h}});return e?await e:n.authToken}async function ak(d,t){let e=await p_(d.appConfig);for(;e.authToken.requestStatus===1;)await LC(100),e=await p_(d.appConfig);const n=e.authToken;return n.requestStatus===0?RS(d,t):n}function p_(d){return sy(d,t=>{if(!PC(t))throw Jc.create("not-registered");const e=t.authToken;return uk(e)?{...t,authToken:{requestStatus:0}}:t})}async function rk(d,t){try{const e=await nk(d,t),n={...t,authToken:e};return await A0(d.appConfig,n),e}catch(e){if(_C(e)&&(e.customData.serverCode===401||e.customData.serverCode===404))await BC(d.appConfig);else{const n={...t,authToken:{requestStatus:0}};await A0(d.appConfig,n)}throw e}}function PC(d){return d!==void 0&&d.registrationStatus===2}function ok(d){return d.requestStatus===2&&!lk(d)}function lk(d){const t=Date.now();return t<d.creationTime||d.creationTime+d.expiresIn<t+jL}function ck(d){const t={requestStatus:1,requestTime:Date.now()};return{...d,authToken:t}}function uk(d){return d.requestStatus===1&&d.requestTime+wC<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hk(d){const t=d,{installationEntry:e,registrationPromise:n}=await DS(t);return n?n.catch(console.error):RS(t).catch(console.error),e.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dk(d,t=!1){const e=d;return await fk(e),(await RS(e,t)).token}async function fk(d){const{registrationPromise:t}=await DS(d);t&&await t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pk(d){if(!d||!d.options)throw Bx("App Configuration");if(!d.name)throw Bx("App Name");const t=["projectId","apiKey","appId"];for(const e of t)if(!d.options[e])throw Bx(e);return{appName:d.name,projectId:d.options.projectId,apiKey:d.options.apiKey,appId:d.options.appId}}function Bx(d){return Jc.create("missing-app-config-values",{valueName:d})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IC="installations",gk="installations-internal",mk=d=>{const t=d.getProvider("app").getImmediate(),e=pk(t),n=ey(t,"heartbeat");return{app:t,appConfig:e,heartbeatServiceProvider:n,_delete:()=>Promise.resolve()}},bk=d=>{const t=d.getProvider("app").getImmediate(),e=ey(t,IC).getImmediate();return{getId:()=>hk(e),getToken:a=>dk(e,a)}};function yk(){y0(new v0(IC,mk,"PUBLIC")),y0(new v0(gk,bk,"PRIVATE"))}yk();b0(SC,NS);b0(SC,NS,"esm2020");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S0="analytics",vk="firebase_id",xk="origin",Ak=60*1e3,Sk="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",LS="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ki=new hL("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wk={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Kn=new xC("analytics","Analytics",wk);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ek(d){if(!d.startsWith(LS)){const t=Kn.create("invalid-gtag-resource",{gtagURL:d});return Ki.warn(t.message),""}return d}function FC(d){return Promise.all(d.map(t=>t.catch(e=>e)))}function Tk(d,t){let e;return window.trustedTypes&&(e=window.trustedTypes.createPolicy(d,t)),e}function _k(d,t){const e=Tk("firebase-js-sdk-policy",{createScriptURL:Ek}),n=document.createElement("script"),a=`${LS}?l=${d}&id=${t}`;n.src=e?e==null?void 0:e.createScriptURL(a):a,n.async=!0,document.head.appendChild(n)}function Ck(d){let t=[];return Array.isArray(window[d])?t=window[d]:window[d]=t,t}async function Nk(d,t,e,n,a,l){const c=n[a];try{if(c)await t[c];else{const f=(await FC(e)).find(p=>p.measurementId===a);f&&await t[f.appId]}}catch(h){Ki.error(h)}d("config",a,l)}async function Mk(d,t,e,n,a){try{let l=[];if(a&&a.send_to){let c=a.send_to;Array.isArray(c)||(c=[c]);const h=await FC(e);for(const f of c){const p=h.find(y=>y.measurementId===f),m=p&&t[p.appId];if(m)l.push(m);else{l=[];break}}}l.length===0&&(l=Object.values(t)),await Promise.all(l),d("event",n,a||{})}catch(l){Ki.error(l)}}function Dk(d,t,e,n){async function a(l,...c){try{if(l==="event"){const[h,f]=c;await Mk(d,t,e,h,f)}else if(l==="config"){const[h,f]=c;await Nk(d,t,e,n,h,f)}else if(l==="consent"){const[h,f]=c;d("consent",h,f)}else if(l==="get"){const[h,f,p]=c;d("get",h,f,p)}else if(l==="set"){const[h]=c;d("set",h)}else d(l,...c)}catch(h){Ki.error(h)}}return a}function Rk(d,t,e,n,a){let l=function(...c){window[n].push(arguments)};return window[a]&&typeof window[a]=="function"&&(l=window[a]),window[a]=Dk(l,d,t,e),{gtagCore:l,wrappedGtag:window[a]}}function Lk(d){const t=window.document.getElementsByTagName("script");for(const e of Object.values(t))if(e.src&&e.src.includes(LS)&&e.src.includes(d))return e;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kk=30,Ok=1e3;class jk{constructor(t={},e=Ok){this.throttleMetadata=t,this.intervalMillis=e}getThrottleMetadata(t){return this.throttleMetadata[t]}setThrottleMetadata(t,e){this.throttleMetadata[t]=e}deleteThrottleMetadata(t){delete this.throttleMetadata[t]}}const UC=new jk;function Bk(d){return new Headers({Accept:"application/json","x-goog-api-key":d})}async function zk(d){var c;const{appId:t,apiKey:e}=d,n={method:"GET",headers:Bk(e)},a=Sk.replace("{app-id}",t),l=await fetch(a,n);if(l.status!==200&&l.status!==304){let h="";try{const f=await l.json();(c=f.error)!=null&&c.message&&(h=f.error.message)}catch{}throw Kn.create("config-fetch-failed",{httpStatus:l.status,responseMessage:h})}return l.json()}async function Pk(d,t=UC,e){const{appId:n,apiKey:a,measurementId:l}=d.options;if(!n)throw Kn.create("no-app-id");if(!a){if(l)return{measurementId:l,appId:n};throw Kn.create("no-api-key")}const c=t.getThrottleMetadata(n)||{backoffCount:0,throttleEndTimeMillis:Date.now()},h=new Uk;return setTimeout(async()=>{h.abort()},Ak),HC({appId:n,apiKey:a,measurementId:l},c,h,t)}async function HC(d,{throttleEndTimeMillis:t,backoffCount:e},n,a=UC){var h;const{appId:l,measurementId:c}=d;try{await Ik(n,t)}catch(f){if(c)return Ki.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${c} provided in the "measurementId" field in the local Firebase config. [${f==null?void 0:f.message}]`),{appId:l,measurementId:c};throw f}try{const f=await zk(d);return a.deleteThrottleMetadata(l),f}catch(f){const p=f;if(!Fk(p)){if(a.deleteThrottleMetadata(l),c)return Ki.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${c} provided in the "measurementId" field in the local Firebase config. [${p==null?void 0:p.message}]`),{appId:l,measurementId:c};throw f}const m=Number((h=p==null?void 0:p.customData)==null?void 0:h.httpStatus)===503?r_(e,a.intervalMillis,kk):r_(e,a.intervalMillis),y={throttleEndTimeMillis:Date.now()+m,backoffCount:e+1};return a.setThrottleMetadata(l,y),Ki.debug(`Calling attemptFetch again in ${m} millis`),HC(d,y,n,a)}}function Ik(d,t){return new Promise((e,n)=>{const a=Math.max(t-Date.now(),0),l=setTimeout(e,a);d.addEventListener(()=>{clearTimeout(l),n(Kn.create("fetch-throttle",{throttleEndTimeMillis:t}))})})}function Fk(d){if(!(d instanceof AC)||!d.customData)return!1;const t=Number(d.customData.httpStatus);return t===429||t===500||t===503||t===504}class Uk{constructor(){this.listeners=[]}addEventListener(t){this.listeners.push(t)}abort(){this.listeners.forEach(t=>t())}}async function Hk(d,t,e,n,a){if(a&&a.global){d("event",e,n);return}else{const l=await t,c={...n,send_to:l};d("event",e,c)}}async function Gk(d,t,e,n){if(n&&n.global){const a={};for(const l of Object.keys(e))a[`user_properties.${l}`]=e[l];return d("set",a),Promise.resolve()}else{const a=await t;d("config",a,{update:!0,user_properties:e})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vk(){if(fL())try{await pL()}catch(d){return Ki.warn(Kn.create("indexeddb-unavailable",{errorInfo:d==null?void 0:d.toString()}).message),!1}else return Ki.warn(Kn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function qk(d,t,e,n,a,l,c){const h=Pk(d);h.then(v=>{e[v.measurementId]=v.appId,d.options.measurementId&&v.measurementId!==d.options.measurementId&&Ki.warn(`The measurement ID in the local Firebase config (${d.options.measurementId}) does not match the measurement ID fetched from the server (${v.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(v=>Ki.error(v)),t.push(h);const f=Vk().then(v=>{if(v)return n.getId()}),[p,m]=await Promise.all([h,f]);Lk(l)||_k(l,p.measurementId),a("js",new Date);const y=(c==null?void 0:c.config)??{};return y[xk]="firebase",y.update=!0,m!=null&&(y[vk]=m),a("config",p.measurementId,y),p.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xk{constructor(t){this.app=t}_delete(){return delete ah[this.app.options.appId],Promise.resolve()}}let ah={},g_=[];const m_={};let zx="dataLayer",Yk="gtag",b_,kS,y_=!1;function $k(){const d=[];if(dL()&&d.push("This is a browser extension environment."),bL()||d.push("Cookies are not available."),d.length>0){const t=d.map((n,a)=>`(${a+1}) ${n}`).join(" "),e=Kn.create("invalid-analytics-context",{errorInfo:t});Ki.warn(e.message)}}function Kk(d,t,e){$k();const n=d.options.appId;if(!n)throw Kn.create("no-app-id");if(!d.options.apiKey)if(d.options.measurementId)Ki.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${d.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Kn.create("no-api-key");if(ah[n]!=null)throw Kn.create("already-exists",{id:n});if(!y_){Ck(zx);const{wrappedGtag:l,gtagCore:c}=Rk(ah,g_,m_,zx,Yk);kS=l,b_=c,y_=!0}return ah[n]=qk(d,g_,m_,t,b_,zx,e),new Xk(d)}function Qk(d=gL()){d=CS(d);const t=ey(d,S0);return t.isInitialized()?t.getImmediate():Wk(d)}function Wk(d,t={}){const e=ey(d,S0);if(e.isInitialized()){const a=e.getImmediate();if(mL(t,e.getOptions()))return a;throw Kn.create("already-initialized")}return e.initialize({options:t})}function Zk(d,t,e){d=CS(d),Gk(kS,ah[d.app.options.appId],t,e).catch(n=>Ki.error(n))}function Jk(d,t,e,n){d=CS(d),Hk(kS,ah[d.app.options.appId],t,e,n).catch(a=>Ki.error(a))}const v_="@firebase/analytics",x_="0.10.19";function tO(){y0(new v0(S0,(t,{options:e})=>{const n=t.getProvider("app").getImmediate(),a=t.getProvider("installations-internal").getImmediate();return Kk(n,a,e)},"PUBLIC")),y0(new v0("analytics-internal",d,"PRIVATE")),b0(v_,x_),b0(v_,x_,"esm2020");function d(t){try{const e=t.getProvider(S0).getImmediate();return{logEvent:(n,a,l)=>Jk(e,n,a,l),setUserProperties:(n,a)=>Zk(e,n,a)}}catch(e){throw Kn.create("interop-component-reg-failed",{reason:e})}}}tO();const eO={apiKey:"AIzaSyBu9odaD8zX6q0tS9GKIEfm_iVJnWceGOg",authDomain:"teovoz-app.firebaseapp.com",databaseURL:"https://teovoz-app-default-rtdb.firebaseio.com",projectId:"teovoz-app",storageBucket:"teovoz-app.firebasestorage.app",messagingSenderId:"265111539880",appId:"1:265111539880:web:c01733932b5728b11db29d",measurementId:"G-MX523LY3B4"},GC=yL(eO);Qk(GC);const Vs=vL(GC);console.log("Firebase Analytics inicializado correctamente");let Cb=null;async function iO(d){const t=new TextEncoder().encode(d),e=await crypto.subtle.digest("SHA-256",t);return Array.from(new Uint8Array(e)).map(l=>l.toString(16).padStart(2,"0")).join("")}function nO(){return Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)}async function sO(){try{const d=await fetch("https://api.ipify.org?format=json",{method:"GET",headers:{Accept:"application/json"}});if(!d.ok)throw new Error(`HTTP error! status: ${d.status}`);return(await d.json()).ip}catch(d){throw console.warn(" No se pudo obtener la IP pblica:",d),d}}async function aO(){if(Cb)return Cb;try{console.log(" Obteniendo identificador nico de usuario...");const d=await sO();console.log(" IP obtenida correctamente");const t=await iO(d);return console.log(" IP hasheada (annima):",t.substring(0,16)+"..."),Cb=t,t}catch{console.warn(" Usando ID de sesin como fallback");const t=nO();return Cb=t,t}}let Px=null;async function OS(){return Px||(Px=await aO()),Px}const rO=async()=>{const d=await OS(),t=Gs(Vs,`status_global/${d}`),e=()=>{console.log(" Firebase: Enviando heartbeat para usuario nico:",d.substring(0,16)+"..."),Wc(t,{last_seen:Date.now(),platform:"web"}).then(()=>console.log(" Firebase: Heartbeat enviado correctamente")).catch(a=>console.error(" Firebase: Error al enviar heartbeat:",a))};e();const n=setInterval(e,6e4);return window.addEventListener("beforeunload",()=>{}),()=>clearInterval(n)},oO=d=>{const t=Gs(Vs,"status_global"),e=Date.now()-120*1e3;return iy(t,n=>{let a=0;n.forEach(l=>{const c=l.val();c.last_seen&&c.last_seen>e&&a++}),d(a)})},lO=async()=>{const d=await OS(),t=Gs(Vs,`unique_downloads/${d}`);(await x0(t)).exists()?console.log(" Firebase: Usuario ya registrado previamente"):(console.log(" Firebase: Nuevo usuario nico detectado:",d.substring(0,16)+"..."),await Wc(t,{first_seen:Date.now(),platform:"web"}),console.log(" Firebase: Usuario nico registrado"))},cO=d=>{const t=Gs(Vs,"unique_downloads");return iy(t,e=>{let n=0;e.forEach(()=>{n++}),d(n)})},uO=async d=>{const t=await OS(),e=Gs(Vs,`status_episodes/${d.guid}/listeners/${t}`);Wc(e,{last_seen:Date.now()});const n=setInterval(()=>{Wc(e,{last_seen:Date.now()})},6e4);return dO(d),()=>{clearInterval(n),Wc(e,{last_seen:null})}},hO=(d,t)=>{const e=Gs(Vs,`status_episodes/${d}/listeners`),n=Date.now()-120*1e3;return iy(e,a=>{let l=0;a.forEach(c=>{const h=c.val();h.last_seen&&h.last_seen>n&&l++}),t(l)})},dO=async d=>{const t=Gs(Vs,`status_episodes/${d.guid}/listeners`),e=Date.now()-120*1e3,n=await x0(t);let a=0;if(n.forEach(l=>{const c=l.val();c.last_seen&&c.last_seen>e&&a++}),a>2){const l=`trend_listen_${d.guid}_${new Date().getHours()}`,c=Gs(Vs,`public_notifications/${l}`);(await x0(c)).exists()||await Wc(c,{type:"listen_trend",episode:d,count:a,timestamp:Date.now()})}},fO=async d=>{const t=Gs(Vs,`episode_stats/${d.guid}`);await xL(t,l=>l===null?{favorite_count:1,title:d.title}:{...l,favorite_count:(l.favorite_count||0)+1,title:d.title});const n=(await x0(t)).val(),a=(n==null?void 0:n.favorite_count)||0;if(a>0&&a%5===0){const l=AL(Gs(Vs,"public_notifications"));await Wc(l,{type:"favorite_trend",episode:d,count:a,timestamp:Date.now()})}},pO=d=>{const t=Gs(Vs,"public_notifications"),e=Date.now()-10*1e3,n=new Set;return iy(t,a=>{a.forEach(l=>{const c=l.val(),h=l.key;h&&!n.has(h)&&c.timestamp&&c.timestamp>e&&(n.add(h),d(c))})})},gO=({onNavigate:d})=>{const[t,e]=$.useState(null),[n,a]=$.useState(!1);return $.useEffect(()=>{const l=pO(c=>{e(c),a(!0);const h=setTimeout(()=>{a(!1)},5e3);return()=>clearTimeout(h)});return()=>l()},[]),!t||!n?null:A.jsx("div",{onClick:()=>{d(t.episode),a(!1)},className:"fixed top-24 left-1/2 transform -translate-x-1/2 z-[200] max-w-[90%] w-auto cursor-pointer animate-in fade-in slide-in-from-top-4 duration-300",children:A.jsxs("div",{className:"bg-surface border border-app shadow-2xl rounded-2xl p-4 flex items-center gap-3 pr-6",children:[A.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center ${t.type==="favorite_trend"?"bg-pink-500/20 text-pink-500":"bg-amber-500/20 text-amber-500"}`,children:t.type==="favorite_trend"?A.jsx(nu,{className:"fill-current",size:20}):A.jsx(VR,{className:"fill-current",size:20})}),A.jsxs("div",{className:"flex flex-col",children:[A.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest opacity-60",children:t.type==="favorite_trend"?"LIBRO POPULAR!":"TENDENCIA AHORA"}),A.jsx("span",{className:"text-xs font-bold text-primary line-clamp-1 max-w-[200px]",children:t.episode.title}),A.jsx("span",{className:"text-[10px] font-medium text-muted",children:t.type==="favorite_trend"?`A ${t.count} personas les encanta esto`:`${t.count} personas escuchando ahora`})]})]})})},mO=({children:d,activeTab:t,currentEpisode:e,onEpisodeChange:n,notifCount:a=0,onEpisodeComplete:l,onEpisodeStart:c,onEpisodeClick:h})=>{const[f,p]=$.useState(null),m=e!==void 0?e:f,y=n||p,[v,w]=$.useState(()=>localStorage.getItem("teovoz_theme")||"deep"),[C,_]=$.useState(!1),[M,N]=$.useState(!1),[R,L]=$.useState(!1),[k,j]=$.useState(navigator.onLine),[z,I]=$.useState(1),[K,J]=$.useState(0);return $.useEffect(()=>{const W=()=>j(navigator.onLine);window.addEventListener("online",W),window.addEventListener("offline",W);const tt=P=>{const V=P.target.closest("a");if(!(!V||V.tagName!=="A")&&V.href.startsWith(window.location.origin)){const st=new URL(V.href),ut=st.pathname.endsWith(".html"),xt=st.pathname==="/"||st.pathname==="";(ut||xt||st.pathname===window.location.pathname)&&(P.preventDefault(),window.history.pushState({},"",V.href),window.dispatchEvent(new PopStateEvent("popstate")))}};document.addEventListener("click",tt);let X=null;(async()=>{X=await rO(),await lO()})();const et=oO(I),at=cO(J);return()=>{window.removeEventListener("online",W),window.removeEventListener("offline",W),document.removeEventListener("click",tt),X&&X(),et(),at()}},[]),$.useEffect(()=>{document.documentElement.setAttribute("data-theme",v),localStorage.setItem("teovoz_theme",v)},[v]),A.jsxs("div",{className:"min-h-screen bg-app text-primary transition-colors duration-300 pb-safe pt-[72px]",children:[A.jsx(gO,{onNavigate:W=>{const tt=`episode.html?guid=${encodeURIComponent(W.guid)}${W.categoryId?`&cat=${W.categoryId}`:""}`;window.history.pushState({},"",tt),window.dispatchEvent(new PopStateEvent("popstate"))}}),A.jsx("header",{className:"fixed top-0 left-0 right-0 z-[100] bg-surface border-b border-app h-[72px]",children:A.jsxs("div",{className:"max-w-2xl mx-auto px-4 h-full flex items-center justify-between",children:[A.jsxs("div",{className:"flex items-center gap-2",children:[(t!=="home"||window.location.pathname.includes("episode.html"))&&A.jsx("button",{onClick:()=>{const tt=new URLSearchParams(window.location.search).get("cat");if(window.location.pathname.includes("episode.html")&&tt){const et={requests:"go:Nuevo",productivity:"go:Productivi",money:"go:Dinero",mind:"go:Mente",love:"go:Amor",health:"go:Salud",business:"go:Negocio",history:"go:Historia",spirituality:"go:Filosofia"}[tt];if(et){console.log(`[App] Forced Back to Category: ${et}`),window.location.href=et;return}}window.history.length>1?window.history.back():window.location.href="go:Inicio"},className:"p-2.5 rounded-xl bg-app border border-app text-muted active:scale-90 transition-transform",children:A.jsx(yC,{size:16})}),A.jsxs("a",{href:"index.html",className:"flex items-center gap-2 cursor-pointer",children:[A.jsx("img",{src:"/logo.svg",alt:"TeoVoz Logo",className:"w-8 h-8 rounded-lg shadow-lg shadow-indigo-600/20"}),A.jsxs("div",{className:"flex flex-col",children:[A.jsxs("h1",{className:"text-base font-black tracking-tighter uppercase leading-none text-primary",children:["TEO",A.jsx("span",{className:"text-indigo-500",children:"VOZ"})]}),A.jsxs("div",{className:"flex flex-col gap-0.5 mt-0.5",children:[A.jsxs("div",{className:"flex items-center gap-1",children:[A.jsx("div",{className:`w-1 h-1 rounded-full ${k?"bg-emerald-500 animate-pulse":"bg-amber-500"}`}),A.jsx("span",{className:`text-[7px] font-black uppercase tracking-widest ${k?"text-emerald-500/80":"text-amber-500/80"}`,children:k?`En Lnea: ${z}`:"Modo Offline"})]}),A.jsxs("div",{className:"flex items-center gap-1",children:[A.jsx("div",{className:"w-1 h-1 rounded-full bg-indigo-500"}),A.jsxs("span",{className:"text-[7px] font-black uppercase tracking-widest text-indigo-500/80",children:["DESCARGA: ",K]})]})]})]})]})]}),A.jsxs("div",{className:"flex items-center gap-1.5",children:[A.jsxs("button",{onClick:()=>N(!0),className:"flex flex-col items-center gap-0.5 px-2.5 py-2 rounded-xl bg-indigo-600 text-white active:scale-95 transition-all shadow-lg shadow-indigo-600/10",children:[A.jsx(gC,{size:14}),A.jsx("span",{className:"text-[7px] font-black uppercase tracking-[0.1em]",children:"PEDIR"})]}),A.jsxs("button",{onClick:()=>_(!0),className:"flex flex-col items-center gap-0.5 px-2.5 py-2 rounded-xl bg-app border border-app text-muted hover:text-primary active:scale-95 transition-all",children:[A.jsx(dC,{size:14}),A.jsx("span",{className:"text-[7px] font-black uppercase tracking-[0.1em]",children:"TEMAS"})]}),A.jsxs("button",{onClick:()=>L(!0),className:"flex flex-col items-center gap-0.5 px-2.5 py-2 rounded-xl bg-app border border-app text-muted hover:text-primary active:scale-95 transition-all",children:[A.jsx(bC,{size:14}),A.jsx("span",{className:"text-[7px] font-black uppercase tracking-[0.1em]",children:"INFO"})]})]})]})}),!k&&A.jsxs("div",{className:"fixed top-[72px] left-0 right-0 z-[90] bg-amber-500 text-white py-2 px-4 flex items-center justify-center gap-2 animate-in slide-in-from-top duration-300",children:[A.jsx(qR,{size:14}),A.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest",children:"Modo Offline - Usando biblioteca local"})]}),A.jsx("main",{className:`max-w-2xl mx-auto px-0 pb-44 ${k?"":"mt-8"}`,children:!k&&t!=="favorites"&&t!=="home"?A.jsxs("div",{className:"flex flex-col items-center justify-center py-32 px-10 text-center animate-in fade-in duration-500",children:[A.jsx("div",{className:"w-20 h-20 bg-red-500/10 rounded-3xl flex items-center justify-center text-red-500 mb-6",children:A.jsx(XR,{size:40})}),A.jsx("h2",{className:"text-xl font-black mb-2 text-primary tracking-tighter uppercase",children:"Sin Conexin"}),A.jsx("p",{className:"text-muted text-sm mb-8 font-medium",children:"Esta seccin requiere internet para actualizarse."}),A.jsx("button",{onClick:()=>window.location.reload(),className:"bg-surface border border-app px-8 py-4 rounded-2xl font-black text-[10px] uppercase tracking-[0.2em] text-primary active:scale-95 transition-transform",children:"Reintentar"})]}):d}),A.jsxs("div",{className:"fixed bottom-0 left-0 right-0 z-[150] pb-safe flex flex-col bg-surface",children:[A.jsx(ML,{currentEpisode:m,onClose:()=>y(null),onEpisodeComplete:l,onEpisodeStart:c,onEpisodeClick:h}),A.jsx(DL,{activeTab:t,onTabChange:W=>{W==="share"&&(window.location.href="http://action_share")},hasPlayer:!!m,notifCount:a})]}),C&&A.jsx(RL,{currentTheme:v,onThemeChange:w,onClose:()=>_(!1)}),M&&A.jsx(LL,{onClose:()=>N(!1)}),R&&A.jsx(kL,{onClose:()=>L(!1)})]})},bO="https://anchor.fm/s/10d2e95c4/podcast/rss",Va={requests:"https://anchor.fm/s/10d4601dc/podcast/rss",productivity:bO,money:"https://anchor.fm/s/10d44d898/podcast/rss",mind:"https://anchor.fm/s/10d450d54/podcast/rss",love:"https://anchor.fm/s/10d4528ac/podcast/rss",health:"https://anchor.fm/s/10d2ecf30/podcast/rss",business:"https://anchor.fm/s/10d2edc14/podcast/rss",history:"https://anchor.fm/s/10d457280/podcast/rss",spirituality:"https://anchor.fm/s/10d457474/podcast/rss"},lo=(d,t)=>{if(!d)return"";const e=Array.isArray(t)?t:[t];for(const n of e){let a=d.getElementsByTagName(n);if((a==null?void 0:a.length)>0&&a[0].textContent)return a[0].textContent.trim();const l=n.includes(":")?n.split(":")[1]:n;if(a=d.getElementsByTagName(l),(a==null?void 0:a.length)>0&&a[0].textContent)return a[0].textContent.trim()}return""},yO=d=>{if(!d||d.includes(":"))return d||"";const t=parseInt(d,10);if(isNaN(t))return d;const e=Math.floor(t/3600),n=Math.floor(t%3600/60),a=t%60;return e>0?`${e}:${n.toString().padStart(2,"0")}:${a.toString().padStart(2,"0")}`:`${n}:${a.toString().padStart(2,"0")}`},vO=d=>{var c;const t=new DOMParser().parseFromString(d.replace(/^\uFEFF/,"").trim(),"text/xml");if(t.querySelector("parsererror"))throw new Error("Formato incompatible.");const e=t.querySelector("channel")||t.getElementsByTagName("channel")[0];if(!e)throw new Error("Contenido no vlido.");const a=((c=e.getElementsByTagName("itunes:image")[0])==null?void 0:c.getAttribute("href"))||"",l=Array.from(e.querySelectorAll("item")).map(h=>{var y,v,w,C,_;const f=((y=h.querySelector("enclosure"))==null?void 0:y.getAttribute("url"))||((v=h.getElementsByTagName("media:content")[0])==null?void 0:v.getAttribute("url"))||"",p=((w=h.getElementsByTagName("itunes:image")[0])==null?void 0:w.getAttribute("href"))||a,m=lo(h,["itunes:summary","content:encoded","description","itunes:subtitle"]);return{guid:lo(h,["guid","link"])||Math.random().toString(36).substring(7),title:lo(h,["title","itunes:title"]),description:m.replace(/<[^>]*>?/gm,"").substring(0,1500),contentSnippet:m,pubDate:lo(h,"pubDate"),image:p,duration:yO(lo(h,["itunes:duration","duration"])),enclosure:{url:f,length:((C=h.querySelector("enclosure"))==null?void 0:C.getAttribute("length"))||"0",type:((_=h.querySelector("enclosure"))==null?void 0:_.getAttribute("type"))||"audio/mpeg"}}}).filter(h=>h.enclosure.url&&h.title);return{title:lo(e,["title","itunes:title"]),description:lo(e,["description","itunes:summary"]),image:a,author:lo(e,["itunes:author","author"])||"TEOVOZ",episodes:l}},A_="teovoz_rss_cache_",xO=5*1e3,rl=async d=>{const t=`${A_}${btoa(d)}`,e=localStorage.getItem(t);if(e)try{const{timestamp:a,data:l}=JSON.parse(e);if(Date.now()-a<xO)return l}catch(a){console.warn("Error leyendo cach RSS:",a),localStorage.removeItem(t)}const n=[a=>`https://corsproxy.io/?${encodeURIComponent(a)}`,a=>`https://api.allorigins.win/raw?url=${encodeURIComponent(a)}`,a=>`https://api.codetabs.com/v1/proxy?quest=${encodeURIComponent(a)}`];for(const a of n)try{const l=await fetch(a(`${d}${d.includes("?")?"&":"?"}t=${Date.now()}`));if(!l.ok)continue;const c=await l.text();if(!c||c.trim()==="Not Found"||!c.includes("<channel>"))continue;const h=vO(c);try{localStorage.setItem(t,JSON.stringify({timestamp:Date.now(),data:h}))}catch(f){if(f instanceof DOMException&&f.name==="QuotaExceededError"){console.log("Limpiando cach de RSS antigua...");for(let p=0;p<localStorage.length;p++){const m=localStorage.key(p);m&&m.startsWith(A_)&&localStorage.removeItem(m)}}}return h}catch{continue}if(e)try{const{data:a}=JSON.parse(e);return a}catch{}throw new Error("Error al obtener el podcast.")},ol=[{id:"requests",name:"LO NUEVO - Pedido por Usuarios",icon:"sparkles",color:"bg-gradient-to-br from-indigo-500 via-purple-500 to-pink-500",rss:Va.requests},{id:"productivity",name:"Productividad y xito",icon:"zap",color:"bg-gradient-to-br from-indigo-600 to-blue-700",rss:Va.productivity},{id:"money",name:"Dinero y Libertad Financiera",icon:"banknote",color:"bg-gradient-to-br from-emerald-500 to-green-700",rss:Va.money},{id:"mind",name:"Mente y Psicologa",icon:"brain",color:"bg-gradient-to-br from-purple-600 to-indigo-800",rss:Va.mind},{id:"love",name:"Amor, Sexo y Relaciones",icon:"heart",color:"bg-gradient-to-br from-rose-500 to-red-700",rss:Va.love},{id:"health",name:"Salud y Bienestar",icon:"activity",color:"bg-gradient-to-br from-teal-500 to-emerald-600",rss:Va.health},{id:"business",name:"Liderazgo y Negocios",icon:"briefcase",color:"bg-gradient-to-br from-slate-700 to-slate-900",rss:Va.business},{id:"history",name:"Historia y Cultura",icon:"scroll-text",color:"bg-gradient-to-br from-amber-600 to-orange-800",rss:Va.history},{id:"spirituality",name:"Espiritualidad y Filosofa",icon:"sun",color:"bg-gradient-to-br from-violet-500 to-purple-700",rss:Va.spirituality}],Jx={requests:"go:Nuevo",productivity:"go:Productivi",money:"go:Dinero",mind:"go:Mente",love:"go:Amor",health:"go:Salud",business:"go:Negocio",history:"go:Historia",spirituality:"go:Filosofia"},AO={zap:ZR,banknote:WR,brain:QR,heart:nu,activity:KR,briefcase:$R,"scroll-text":YR,sun:pC,sparkles:ty},SO=$.memo(({categories:d,counts:t={}})=>{const e=n=>Jx[n]||`go:${n}`;return A.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 p-4 pt-0",children:d.map((n,a)=>{const l=AO[n.icon]||JR,c=!n.rss,h=t[n.id]||0,f=n.id==="requests";return A.jsxs("a",{href:c?"#":e(n.id),"aria-disabled":c,className:`
              ${c?"bg-slate-900/50 border-slate-800 opacity-60 grayscale pointer-events-none":n.color+" border-white/10"} 
              group relative h-40 rounded-[32px] p-5 
              flex flex-col justify-between items-start text-white 
              shadow-lg shadow-black/20
              overflow-hidden border
              block
              ${f?"col-span-2":""}
            `,children:[A.jsx("div",{className:"absolute -right-3 -bottom-3 opacity-10 z-0",children:c?A.jsx(n_,{size:100}):A.jsx(l,{size:100})}),A.jsx("div",{className:`
              ${c?"bg-slate-800":"bg-black/40"} 
              p-2.5 rounded-2xl z-10 border border-white/10
            `,children:c?A.jsx(n_,{size:18,className:"text-slate-600"}):A.jsx(l,{size:18})}),A.jsxs("div",{className:"z-10 text-left w-full mt-2 relative",children:[A.jsx("span",{className:"font-black text-[16px] uppercase leading-[1.1] block tracking-tighter drop-shadow-md",children:n.name}),!c&&A.jsxs("span",{className:"text-[8px] uppercase tracking-[0.25em] text-white/50 font-black mt-2 block",children:[h," LIBROS"]}),c&&A.jsx("span",{className:"text-[8px] uppercase tracking-[0.2em] text-slate-500 font-black mt-2 block",children:"Prximamente"})]})]},n.id)})})}),$n=({className:d=""})=>A.jsx("div",{className:`animate-pulse bg-surface-hover rounded-2xl ${d}`}),jS=()=>A.jsxs("div",{className:"bg-surface border border-app rounded-2xl p-4 flex gap-4 items-center",children:[A.jsx($n,{className:"w-20 h-20 flex-shrink-0"}),A.jsxs("div",{className:"flex-1 space-y-3",children:[A.jsxs("div",{className:"flex gap-2",children:[A.jsx($n,{className:"h-2 w-12"}),A.jsx($n,{className:"h-2 w-16"})]}),A.jsx($n,{className:"h-4 w-full"}),A.jsx($n,{className:"h-3 w-2/3"})]})]}),wO=()=>A.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[1,2,3,4,5,6,7,8].map(d=>A.jsx($n,{className:"h-40 rounded-[32px]"},d))}),EO=()=>A.jsxs("div",{className:"space-y-6",children:[A.jsxs("div",{className:"flex items-center gap-4",children:[A.jsx($n,{className:"w-12 h-12 rounded-2xl"}),A.jsxs("div",{className:"flex-1 space-y-2",children:[A.jsx($n,{className:"h-4 w-1/3"}),A.jsx($n,{className:"h-3 w-1/2"})]})]}),A.jsx("div",{className:"space-y-4",children:[1,2,3].map(d=>A.jsx(jS,{},d))})]}),S_=({title:d,episodes:t,onClose:e,onSelect:n,emptyMessage:a="No hay libros aqu.",type:l})=>A.jsxs("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-4",children:[A.jsx("div",{className:"absolute inset-0 bg-black/80",onClick:e}),A.jsxs("div",{className:"relative w-full max-w-lg bg-surface border border-app rounded-[32px] shadow-2xl overflow-hidden max-h-[80vh] flex flex-col animate-in zoom-in-95 duration-300",children:[A.jsxs("div",{className:"p-5 border-b border-app flex items-center justify-between bg-surface sticky top-0 z-10",children:[A.jsxs("div",{className:"flex items-center gap-3",children:[A.jsx("div",{className:`w-10 h-10 rounded-2xl flex items-center justify-center ${l==="history"?"bg-amber-500/10 text-amber-500":"bg-emerald-500/10 text-emerald-500"}`,children:l==="history"?A.jsx(Qx,{size:20}):A.jsx(s_,{size:20})}),A.jsx("h2",{className:"text-lg font-black text-primary tracking-tight",children:d})]}),A.jsx("button",{onClick:e,className:"p-2 rounded-xl hover:bg-white/5 active:scale-90 transition-all text-muted",children:A.jsx(Zc,{size:20})})]}),A.jsx("div",{className:"overflow-y-auto p-4 space-y-3",children:t.length===0?A.jsxs("div",{className:"py-12 text-center text-muted flex flex-col items-center gap-4",children:[A.jsx("div",{className:"w-16 h-16 rounded-full bg-white/5 flex items-center justify-center grayscale opacity-50",children:l==="history"?A.jsx(Qx,{size:32}):A.jsx(s_,{size:32})}),A.jsx("p",{children:a})]}):t.map(c=>A.jsxs("button",{onClick:()=>n(c),className:"w-full flex items-center gap-4 p-3 rounded-2xl bg-app border border-app hover:border-indigo-500/30 transition-all active:scale-[0.98] group text-left",children:[A.jsxs("div",{className:"relative w-16 h-16 rounded-xl overflow-hidden flex-shrink-0 bg-surface",children:[A.jsx("img",{src:c.image,alt:c.title,className:"w-full h-full object-cover"}),A.jsx("div",{className:"absolute inset-0 bg-black/20 group-hover:bg-black/40 transition-colors flex items-center justify-center opacity-0 group-hover:opacity-100",children:A.jsx(jd,{size:20,className:"text-white fill-current"})})]}),A.jsxs("div",{className:"flex-1 min-w-0",children:[A.jsx("h3",{className:"font-bold text-primary text-sm line-clamp-2 leading-tight mb-1",children:c.title}),A.jsx("p",{className:"text-[10px] text-muted font-medium line-clamp-1",children:l==="history"?"Continuar escuchando":"Completado"})]})]},c.guid))})]})]});let co=[],w_=null,E_={},Ix=!1;const TO=({onCategorySelect:d,onEpisodeSelect:t,listenedCount:e,lastPlayed:n,listenedGuids:a,historyGuids:l})=>{const[c,h]=$.useState(w_),[f,p]=$.useState(E_),[m,y]=$.useState(!1),[v,w]=$.useState(!1),[C,_]=$.useState(()=>{const R=localStorage.getItem("teovoz_total_episodes");return R?parseInt(R,10):0}),[M,N]=$.useState(!Ix);return $.useEffect(()=>{(async()=>{const L=ol.filter(j=>j.rss),k=L[Math.floor(Math.random()*L.length)];try{const j=ol.filter(it=>it.rss);if(j.length===0){N(!1);return}const[z,I]=await Promise.all([rl(j[0].rss),rl(k.rss||j[0].rss)]);if(co=z.episodes,I.episodes.length>0){const it=I.episodes[Math.floor(Math.random()*I.episodes.length)];h(it),w_=it}const K={},J=await Promise.all(L.map(async it=>{try{const et=await rl(it.rss);return{id:it.id,count:et.episodes.length,episodes:et.episodes}}catch{return{id:it.id,count:0,episodes:[]}}}));let W=0,tt=[...co];J.forEach(it=>{K[it.id]=it.count,W+=it.count,it.id!==j[0].id&&(tt=tt.concat(it.episodes))});const X=new Set;co=tt.filter(it=>X.has(it.guid)?!1:(X.add(it.guid),!0)),p(K),E_=K,_(W),localStorage.setItem("teovoz_total_episodes",W.toString()),Ix=!0}catch(j){console.error("Error loading home data:",j)}finally{N(!1)}})()},[]),M&&!Ix?A.jsxs("div",{className:"py-6 px-6 space-y-8",children:[A.jsx($n,{className:"w-full h-24 rounded-[28px]"}),A.jsx(wO,{})]}):A.jsxs("div",{className:"py-6",children:[c&&A.jsx("div",{className:"px-6 mb-10",children:A.jsxs("button",{onClick:()=>t(c),className:"w-full relative h-48 overflow-hidden rounded-[40px] text-left shadow-2xl group border border-app",children:[A.jsx("img",{src:c.image,className:"absolute inset-0 w-full h-full object-cover",alt:c.title}),A.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/90 via-black/40 to-transparent z-10"}),A.jsxs("div",{className:"relative z-20 h-full p-6 flex flex-col justify-end",children:[A.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[A.jsx("div",{className:"bg-indigo-600 p-1.5 rounded-lg shadow-lg",children:A.jsx(ty,{size:10,className:"text-white"})}),A.jsx("span",{className:"text-[9px] font-black uppercase tracking-[0.3em] text-white/90",children:"Sugerencia TEOVOZ"})]}),A.jsxs("div",{className:"flex items-end justify-between gap-4",children:[A.jsx("h3",{className:"text-xl font-black text-white leading-tight line-clamp-2 max-w-[70%] drop-shadow-md",children:c.title}),A.jsx("div",{className:"bg-white/95 text-white p-3 rounded-2xl border border-white/20 shadow-xl",children:A.jsx(jd,{size:20,fill:"currentColor"})})]})]})]})}),v&&A.jsx(S_,{title:"Mi Progreso",type:"progress",episodes:co.filter(R=>a.has(R.guid)),onClose:()=>w(!1),onSelect:R=>{w(!1),t(R)},emptyMessage:"An no has completado ningn libro."}),m&&A.jsx(S_,{title:"Libros Pendientes",type:"history",episodes:co.filter(R=>!a.has(R.guid)).sort((R,L)=>new Date(L.pubDate).getTime()-new Date(R.pubDate).getTime()).slice(0,15),onClose:()=>y(!1),onSelect:R=>{y(!1),t(R)},emptyMessage:"No hay libros pendientes."}),A.jsx("div",{className:"px-6 mb-10",children:A.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[A.jsxs("button",{onClick:()=>w(!0),className:"bg-surface border-app border rounded-[28px] p-5 flex flex-col gap-3 text-left group",children:[A.jsx("div",{className:"w-10 h-10 bg-indigo-600 rounded-xl flex items-center justify-center text-white",children:A.jsx(tL,{size:20})}),A.jsxs("div",{children:[A.jsx("p",{className:"text-[8px] font-black uppercase tracking-[0.2em] text-muted mb-1 leading-none",children:"Mi Progreso"}),A.jsxs("div",{className:"flex items-baseline gap-1",children:[A.jsx("span",{className:"text-2xl font-black text-primary tracking-tighter",children:e}),A.jsx("span",{className:"text-[9px] font-bold text-muted uppercase",children:"LIBROS"})]})]})]}),A.jsxs("button",{onClick:()=>y(!0),className:"bg-surface border-app border rounded-[28px] p-5 flex flex-col gap-3 text-left group",children:[A.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center ${co.filter(R=>!a.has(R.guid)).length>0?"bg-amber-500 text-white":"bg-amber-500/10 text-amber-500"}`,children:A.jsx(Qx,{size:20})}),A.jsxs("div",{className:"truncate w-full",children:[A.jsx("p",{className:"text-[8px] font-black uppercase tracking-[0.2em] text-muted mb-1 leading-none",children:"Pendientes"}),A.jsx("p",{className:"text-[10px] font-bold text-primary truncate tracking-tight",children:co.filter(R=>!a.has(R.guid)).length>0?`${Math.min(co.filter(R=>!a.has(R.guid)).length,15)} Nuevos`:"Sin pendientes"})]})]})]})}),A.jsxs("div",{className:"px-6 mb-5 flex items-center justify-between",children:[A.jsxs("div",{className:"flex items-center gap-3",children:[A.jsx("h2",{className:"text-xl font-black text-muted uppercase tracking-[0.25em]",children:"Bibliotecas"}),A.jsxs("div",{className:"px-4 py-2 bg-indigo-600/10 border border-indigo-600/20 rounded-2xl flex items-center gap-3 shadow-lg shadow-indigo-600/5",children:[A.jsx("div",{className:"w-2.5 h-2.5 bg-indigo-500 rounded-full animate-pulse shadow-[0_0_10px_rgba(99,102,241,0.6)]"}),A.jsxs("span",{className:"text-xl font-black text-indigo-500 tracking-tighter",children:[C," LIBROS"]})]})]}),A.jsx("div",{className:"h-[1px] flex-1 ml-4 bg-app"})]}),A.jsx(SO,{categories:ol,onSelect:d,counts:f})]})},_O=$.memo(({episode:d,onPlay:t,onToggleFavorite:e,isFavorite:n,isListened:a,isActive:l,podcastImage:c,showPodcastTitle:h})=>A.jsx("div",{onClick:()=>t(d),className:`group relative bg-surface border border-app hover:border-indigo-500/30 rounded-2xl p-4 transition-all active:scale-[0.98] cursor-pointer ${l?"border-indigo-500/50":""}`,children:A.jsxs("div",{className:"flex gap-4 items-center",children:[A.jsxs("div",{className:"relative flex-shrink-0 w-20 h-20 rounded-xl overflow-hidden bg-app border border-app",children:[A.jsx("img",{src:d.image||c||"",alt:"",className:"w-full h-full object-cover transition-transform duration-500 group-hover:scale-110",loading:"lazy"}),A.jsx("div",{className:"absolute inset-0 bg-black/20 group-hover:bg-black/40 flex items-center justify-center transition-colors",children:A.jsx(jd,{size:18,className:"text-white opacity-0 group-hover:opacity-100 transition-opacity",fill:"currentColor"})})]}),A.jsxs("div",{className:"flex-1 min-w-0 pr-2",children:[A.jsxs("div",{className:"flex items-center gap-2 text-[9px] font-black text-muted uppercase tracking-widest mb-1",children:[a&&A.jsxs("span",{className:"flex items-center gap-1 text-emerald-500 bg-emerald-500/10 px-1.5 py-0.5 rounded",children:[A.jsx(fC,{size:10}),"VISTO"]}),h&&A.jsx("span",{className:"text-indigo-500 truncate max-w-[120px]",children:"Podcast"}),A.jsx("span",{children:new Date(d.pubDate).toLocaleDateString(void 0,{day:"numeric",month:"short"})}),d.duration&&A.jsxs(A.Fragment,{children:[A.jsx("span",{children:""}),A.jsx("span",{children:d.duration})]})]}),A.jsx("h3",{className:`font-black text-[11px] uppercase tracking-tighter leading-tight mb-1.5 line-clamp-1 ${l?"text-indigo-500":"text-primary"}`,children:d.title}),A.jsx("p",{className:"text-[10px] text-muted leading-relaxed line-clamp-2 font-medium",children:d.description.replace(/\*\*/g,"")})]}),A.jsxs("div",{className:"flex flex-col items-center gap-3",children:[e&&A.jsx("button",{onClick:f=>{f.stopPropagation(),e(d)},className:`p-2 rounded-full transition-colors ${n?"text-red-500 bg-red-500/10":"text-muted hover:text-primary"}`,children:A.jsx(nu,{size:18,fill:n?"currentColor":"none"})}),A.jsx(vC,{size:16,className:"text-muted group-hover:text-indigo-400"})]})]})})),ay=$.memo(({episodes:d,onPlay:t,onToggleFavorite:e,favorites:n=new Set,listened:a=new Set,currentEpisodeId:l,emptyMessage:c="No hay libros disponibles.",podcastImage:h,showPodcastTitle:f=!1})=>d.length===0?A.jsx("div",{className:"text-center py-12 text-muted font-medium text-sm",children:A.jsx("p",{children:c})}):A.jsx("div",{className:"space-y-4 pb-32",children:d.map(p=>A.jsx(_O,{episode:p,onPlay:t,onToggleFavorite:e,isFavorite:n.has(p.guid),isListened:a.has(p.guid),isActive:l===p.guid,podcastImage:h,showPodcastTitle:f},p.guid))})),T_=d=>(d||"").normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase().trim(),__=(d,t)=>{const e=T_(d),n=T_(t);if(e.includes(n))return!0;if(n.length<4)return!1;let a=0,l=0;for(let h=0;h<n.length&&l<e.length;h++)n[h]!==e[l]&&(a++,n[h]===e[l+1]&&l++),l++;const c=n.length>6?2:1;return a<=c},CO=({onEpisodeSelect:d,favorites:t,listened:e})=>{const[n,a]=$.useState(""),[l,c]=$.useState([]),[h,f]=$.useState(!1);$.useEffect(()=>{(async()=>{f(!0);try{const y=ol.filter(C=>C.rss),w=(await Promise.all(y.map(C=>rl(C.rss)))).flatMap((C,_)=>C.episodes.map(M=>({...M,contentSnippet:`${M.contentSnippet||""}|||${C.title}`,categoryId:y[_].id})));c(w.sort((C,_)=>new Date(_.pubDate).getTime()-new Date(C.pubDate).getTime()))}catch(y){console.error(y)}finally{f(!1)}})()},[]);const p=$.useMemo(()=>!n||n.length<2?l.slice(0,15):l.filter(m=>{const y=__(m.title,n),v=m.description&&__(m.description.substring(0,200),n);return y||v}),[n,l]);return A.jsxs("div",{className:"animate-in fade-in duration-300 px-6",children:[A.jsx("div",{className:"sticky top-0 bg-app z-30 py-4 mb-6",children:A.jsxs("div",{className:"relative group",children:[A.jsx(_S,{className:`absolute left-4 top-1/2 -translate-y-1/2 transition-colors ${n?"text-indigo-500":"text-muted"}`,size:20}),A.jsx("input",{type:"text",placeholder:"Libros, autores o temas...",value:n,onChange:m=>a(m.target.value),className:"w-full bg-surface border-app border rounded-2xl py-4 pl-12 pr-4 text-primary focus:outline-none focus:border-indigo-500 transition-all shadow-lg shadow-black/10 text-base"}),n&&A.jsx("div",{className:"absolute right-4 top-1/2 -translate-y-1/2 flex items-center gap-2",children:A.jsx("span",{className:"text-[8px] font-black text-indigo-500 uppercase tracking-widest bg-indigo-500/10 px-2 py-1 rounded-md animate-pulse",children:"Bsqueda Inteligente"})})]})}),h&&l.length===0?A.jsx("div",{className:"space-y-4",children:[1,2,3,4,5,6].map(m=>A.jsx(jS,{},m))}):A.jsxs("div",{className:"relative",children:[n&&p.length>0&&A.jsxs("div",{className:"flex items-center gap-2 mb-4 px-2",children:[A.jsx(ty,{size:12,className:"text-indigo-500"}),A.jsxs("p",{className:"text-[10px] font-black text-muted uppercase tracking-widest",children:["Resultados encontrados (",p.length,")"]})]}),A.jsx(ay,{episodes:p,onPlay:d,favorites:t,listened:e,showPodcastTitle:!0,emptyMessage:n?`No encontramos nada parecido a "${n}". Prueba con otra palabra.`:"Cargando biblioteca..."})]})]})},NO=({episodes:d,onEpisodeSelect:t,favorites:e,listened:n})=>A.jsxs("div",{className:"animate-in fade-in slide-in-from-bottom-4 duration-500 px-6",children:[A.jsxs("div",{className:"mb-10 mt-2",children:[A.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[A.jsx(nu,{className:"text-red-500 fill-red-500",size:24}),A.jsx("h2",{className:"text-3xl font-black text-primary uppercase tracking-tighter",children:"Tus Favoritos"})]}),A.jsxs("p",{className:"text-xs text-muted font-bold uppercase tracking-widest",children:[d.length," libros guardados en tu biblioteca"]})]}),A.jsx(ay,{episodes:d,onPlay:t,favorites:e,listened:n,emptyMessage:"An no tienes libros favoritos. Explora las categoras para aadir contenido."})]}),MO=({onEpisodeSelect:d,viewedGuids:t,setViewedGuids:e,listened:n,dismissedGuids:a,setDismissedGuids:l})=>{const[c,h]=$.useState([]),[f,p]=$.useState(!0),m=async()=>{p(!0);try{const v=ol.filter(R=>R.rss),w=await Promise.all(v.map(R=>rl(R.rss).catch(()=>null)));let C=[];w.forEach(R=>{R&&(C=[...C,...R.episodes.slice(0,10)])}),C.sort((R,L)=>new Date(L.pubDate).getTime()-new Date(R.pubDate).getTime());const _=Array.from(new Map(C.map(R=>[R.guid,R])).values()).slice(0,15);h(_);const M=_.filter(R=>!a.has(R.guid));h(M);const N=_.filter(R=>!t.has(R.guid));if(N.length>0){const R=new Set(t);N.forEach(L=>R.add(L.guid)),e(R)}}catch(v){console.error(v)}finally{p(!1)}};$.useEffect(()=>{m()},[]);const y=()=>{const v=new Set(a);c.forEach(C=>v.add(C.guid)),l(v);const w=new Set(t);c.forEach(C=>w.add(C.guid)),e(w),h([])};return f?A.jsx("div",{className:"px-6 py-6",children:A.jsx(EO,{})}):A.jsxs("div",{className:"animate-in fade-in slide-in-from-right duration-500 px-6 py-4",children:[A.jsxs("div",{className:"mb-8 mt-2",children:[A.jsxs("div",{className:"flex items-center justify-between mb-2",children:[A.jsxs("div",{className:"flex items-center gap-3",children:[A.jsxs("div",{className:"relative",children:[A.jsx(a_,{className:"text-indigo-500",size:24}),c.length>0&&c.some(v=>!t.has(v.guid))&&A.jsx("span",{className:"absolute -top-1 -right-1 w-2 h-2 bg-indigo-500 rounded-full animate-ping"})]}),A.jsx("h2",{className:"text-3xl font-black text-primary uppercase tracking-tighter",children:"Novedades"})]}),c.length>0&&A.jsxs("button",{onClick:y,className:"flex items-center gap-1.5 px-3 py-1.5 rounded-xl bg-app border border-app text-muted hover:text-red-500 transition-colors active:scale-95",children:[A.jsx(eL,{size:12}),A.jsx("span",{className:"text-[9px] font-black uppercase tracking-widest",children:"Limpiar"})]})]}),A.jsx("p",{className:"text-[10px] text-muted font-bold uppercase tracking-widest",children:"Lo ltimo de tus canales favoritos"})]}),c.length===0?A.jsxs("div",{className:"flex flex-col items-center justify-center py-24 text-center animate-in fade-in duration-500",children:[A.jsx("div",{className:"w-16 h-16 bg-surface border border-app rounded-2xl flex items-center justify-center text-muted mb-4 opacity-40",children:A.jsx(a_,{size:24})}),A.jsx("p",{className:"text-[10px] font-black text-muted uppercase tracking-[0.2em]",children:"Cero novedades pendientes"}),A.jsxs("button",{onClick:m,className:"mt-6 flex items-center gap-2 text-indigo-500 font-black text-[10px] uppercase tracking-widest group",children:[A.jsx(iL,{size:12,className:"group-active:rotate-180 transition-transform duration-500"}),"Actualizar"]})]}):A.jsxs(A.Fragment,{children:[A.jsxs("div",{className:"bg-surface border border-app rounded-3xl p-5 mb-8 flex items-start gap-4",children:[A.jsx("div",{className:"p-2.5 bg-indigo-500/10 rounded-2xl text-indigo-500",children:A.jsx(ty,{size:18})}),A.jsxs("div",{children:[A.jsx("h4",{className:"text-xs font-bold text-primary mb-0.5 tracking-tight",children:"Contenido nuevo cada da!"}),A.jsx("p",{className:"text-[10px] text-muted leading-relaxed",children:"Monitoreamos todas las categoras por ti."})]})]}),A.jsxs("div",{className:"mb-6",children:[A.jsx("h3",{className:"text-[9px] font-black uppercase tracking-[0.3em] text-muted mb-4",children:"ltimos Lanzamientos"}),A.jsx(ay,{episodes:c,onPlay:d,favorites:new Set,listened:n,showPodcastTitle:!0})]})]})]})},Fx=d=>(d||"").normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase().trim(),DO=({category:d,onEpisodeSelect:t,favorites:e,listened:n,currentEpisodeId:a})=>{const[l,c]=$.useState(null),[h,f]=$.useState(!0),[p,m]=$.useState("");$.useEffect(()=>{const v=async()=>{f(!0);try{const w=await rl(d.rss);c(w)}catch(w){console.error(w)}finally{f(!1)}};d.rss&&v(),window.scrollTo(0,0)},[d]);const y=$.useMemo(()=>{if(!(l!=null&&l.episodes))return[];if(!p)return l.episodes;const v=Fx(p);return l.episodes.filter(w=>Fx(w.title).includes(v)||Fx(w.description).includes(v))},[l==null?void 0:l.episodes,p]);return A.jsxs("div",{className:"px-6",children:[A.jsxs("div",{className:"mb-6 mt-2",children:[A.jsx("h2",{className:"text-3xl font-black text-primary uppercase tracking-tighter mb-2",children:d.name}),A.jsxs("p",{className:"text-xs text-muted font-bold uppercase tracking-widest",children:[(l==null?void 0:l.episodes.length)||0," LIBROS disponibles"]})]}),A.jsxs("div",{className:"relative mb-6",children:[A.jsx(_S,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-muted",size:18}),A.jsx("input",{type:"text",placeholder:`Buscar en ${d.name}...`,value:p,onChange:v=>m(v.target.value),className:"w-full bg-surface border border-app rounded-2xl py-3 pl-12 pr-4 text-sm text-primary focus:outline-none focus:border-indigo-500 transition-colors"})]}),h?A.jsx("div",{className:"space-y-4",children:[1,2,3,4,5].map(v=>A.jsx(jS,{},v))}):A.jsx(ay,{episodes:y,onPlay:t,favorites:e,listened:n,currentEpisodeId:a,podcastImage:l==null?void 0:l.image,emptyMessage:p?"No se encontraron resultados.":"No hay libros disponibles."})]})},Yi=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),tA=[.001,0,0,.001,0,0],Ux=1.35,qn={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},wa={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},dp="pdfjs_internal_editor_",At={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,POPUP:16,SIGNATURE:101,COMMENT:102},Bt={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_THICKNESS:32,HIGHLIGHT_FREE:33,HIGHLIGHT_SHOW_ALL:34,DRAW_STEP:41},VC={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},xi={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},hp={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},Fe={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},Xu={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},tm={ERRORS:0,WARNINGS:1,INFOS:5},zd={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},Nb={moveTo:0,lineTo:1,curveTo:2,closePath:3},qC={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let ry=tm.WARNINGS;function RO(d){Number.isInteger(d)&&(ry=d)}function LO(){return ry}function oy(d){ry>=tm.INFOS&&console.info(`Info: ${d}`)}function St(d){ry>=tm.WARNINGS&&console.warn(`Warning: ${d}`)}function ge(d){throw new Error(d)}function Pt(d,t){d||ge(t)}function kO(d){switch(d==null?void 0:d.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function BS(d,t=null,e=null){if(!d)return null;if(e&&typeof d=="string"){if(e.addDefaultProtocol&&d.startsWith("www.")){const a=d.match(/\./g);(a==null?void 0:a.length)>=2&&(d=`http://${d}`)}if(e.tryConvertEncoding)try{d=PO(d)}catch{}}const n=t?URL.parse(d,t):URL.parse(d);return kO(n)?n:null}function zS(d,t,e=!1){const n=URL.parse(d);return n?(n.hash=t,n.href):e&&BS(d,"http://example.com")?d.split("#",1)[0]+`${t?`#${t}`:""}`:""}function Ct(d,t,e,n=!1){return Object.defineProperty(d,t,{value:e,enumerable:!n,configurable:!0,writable:!1}),e}const su=(function(){function t(e,n){this.message=e,this.name=n}return t.prototype=new Error,t.constructor=t,t})();class C_ extends su{constructor(t,e){super(t,"PasswordException"),this.code=e}}class Hx extends su{constructor(t,e){super(t,"UnknownErrorException"),this.details=e}}class w0 extends su{constructor(t){super(t,"InvalidPDFException")}}class fp extends su{constructor(t,e,n){super(t,"ResponseException"),this.status=e,this.missing=n}}class OO extends su{constructor(t){super(t,"FormatError")}}class Lr extends su{constructor(t){super(t,"AbortException")}}function XC(d){(typeof d!="object"||(d==null?void 0:d.length)===void 0)&&ge("Invalid argument for bytesToString");const t=d.length,e=8192;if(t<e)return String.fromCharCode.apply(null,d);const n=[];for(let a=0;a<t;a+=e){const l=Math.min(a+e,t),c=d.subarray(a,l);n.push(String.fromCharCode.apply(null,c))}return n.join("")}function em(d){typeof d!="string"&&ge("Invalid argument for stringToBytes");const t=d.length,e=new Uint8Array(t);for(let n=0;n<t;++n)e[n]=d.charCodeAt(n)&255;return e}function jO(d){return String.fromCharCode(d>>24&255,d>>16&255,d>>8&255,d&255)}function BO(){const d=new Uint8Array(4);return d[0]=1,new Uint32Array(d.buffer,0,1)[0]===1}function zO(){try{return new Function(""),!0}catch{return!1}}class fi{static get isLittleEndian(){return Ct(this,"isLittleEndian",BO())}static get isEvalSupported(){return Ct(this,"isEvalSupported",zO())}static get isOffscreenCanvasSupported(){return Ct(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return Ct(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get platform(){const{platform:t,userAgent:e}=navigator;return Ct(this,"platform",{isAndroid:e.includes("Android"),isLinux:t.includes("Linux"),isMac:t.includes("Mac"),isWindows:t.includes("Win"),isFirefox:e.includes("Firefox")})}static get isCSSRoundSupported(){var t,e;return Ct(this,"isCSSRoundSupported",(e=(t=globalThis.CSS)==null?void 0:t.supports)==null?void 0:e.call(t,"width: round(1.5px, 1px)"))}}const Gx=Array.from(Array(256).keys(),d=>d.toString(16).padStart(2,"0"));var Dr,Pb,eA;class ct{static makeHexColor(t,e,n){return`#${Gx[t]}${Gx[e]}${Gx[n]}`}static domMatrixToTransform(t){return[t.a,t.b,t.c,t.d,t.e,t.f]}static scaleMinMax(t,e){let n;t[0]?(t[0]<0&&(n=e[0],e[0]=e[2],e[2]=n),e[0]*=t[0],e[2]*=t[0],t[3]<0&&(n=e[1],e[1]=e[3],e[3]=n),e[1]*=t[3],e[3]*=t[3]):(n=e[0],e[0]=e[1],e[1]=n,n=e[2],e[2]=e[3],e[3]=n,t[1]<0&&(n=e[1],e[1]=e[3],e[3]=n),e[1]*=t[1],e[3]*=t[1],t[2]<0&&(n=e[0],e[0]=e[2],e[2]=n),e[0]*=t[2],e[2]*=t[2]),e[0]+=t[4],e[1]+=t[5],e[2]+=t[4],e[3]+=t[5]}static transform(t,e){return[t[0]*e[0]+t[2]*e[1],t[1]*e[0]+t[3]*e[1],t[0]*e[2]+t[2]*e[3],t[1]*e[2]+t[3]*e[3],t[0]*e[4]+t[2]*e[5]+t[4],t[1]*e[4]+t[3]*e[5]+t[5]]}static multiplyByDOMMatrix(t,e){return[t[0]*e.a+t[2]*e.b,t[1]*e.a+t[3]*e.b,t[0]*e.c+t[2]*e.d,t[1]*e.c+t[3]*e.d,t[0]*e.e+t[2]*e.f+t[4],t[1]*e.e+t[3]*e.f+t[5]]}static applyTransform(t,e,n=0){const a=t[n],l=t[n+1];t[n]=a*e[0]+l*e[2]+e[4],t[n+1]=a*e[1]+l*e[3]+e[5]}static applyTransformToBezier(t,e,n=0){const a=e[0],l=e[1],c=e[2],h=e[3],f=e[4],p=e[5];for(let m=0;m<6;m+=2){const y=t[n+m],v=t[n+m+1];t[n+m]=y*a+v*c+f,t[n+m+1]=y*l+v*h+p}}static applyInverseTransform(t,e){const n=t[0],a=t[1],l=e[0]*e[3]-e[1]*e[2];t[0]=(n*e[3]-a*e[2]+e[2]*e[5]-e[4]*e[3])/l,t[1]=(-n*e[1]+a*e[0]+e[4]*e[1]-e[5]*e[0])/l}static axialAlignedBoundingBox(t,e,n){const a=e[0],l=e[1],c=e[2],h=e[3],f=e[4],p=e[5],m=t[0],y=t[1],v=t[2],w=t[3];let C=a*m+f,_=C,M=a*v+f,N=M,R=h*y+p,L=R,k=h*w+p,j=k;if(l!==0||c!==0){const z=l*m,I=l*v,K=c*y,J=c*w;C+=K,N+=K,M+=J,_+=J,R+=z,j+=z,k+=I,L+=I}n[0]=Math.min(n[0],C,M,_,N),n[1]=Math.min(n[1],R,k,L,j),n[2]=Math.max(n[2],C,M,_,N),n[3]=Math.max(n[3],R,k,L,j)}static inverseTransform(t){const e=t[0]*t[3]-t[1]*t[2];return[t[3]/e,-t[1]/e,-t[2]/e,t[0]/e,(t[2]*t[5]-t[4]*t[3])/e,(t[4]*t[1]-t[5]*t[0])/e]}static singularValueDecompose2dScale(t,e){const n=t[0],a=t[1],l=t[2],c=t[3],h=n**2+a**2,f=n*l+a*c,p=l**2+c**2,m=(h+p)/2,y=Math.sqrt(m**2-(h*p-f**2));e[0]=Math.sqrt(m+y||1),e[1]=Math.sqrt(m-y||1)}static normalizeRect(t){const e=t.slice(0);return t[0]>t[2]&&(e[0]=t[2],e[2]=t[0]),t[1]>t[3]&&(e[1]=t[3],e[3]=t[1]),e}static intersect(t,e){const n=Math.max(Math.min(t[0],t[2]),Math.min(e[0],e[2])),a=Math.min(Math.max(t[0],t[2]),Math.max(e[0],e[2]));if(n>a)return null;const l=Math.max(Math.min(t[1],t[3]),Math.min(e[1],e[3])),c=Math.min(Math.max(t[1],t[3]),Math.max(e[1],e[3]));return l>c?null:[n,l,a,c]}static pointBoundingBox(t,e,n){n[0]=Math.min(n[0],t),n[1]=Math.min(n[1],e),n[2]=Math.max(n[2],t),n[3]=Math.max(n[3],e)}static rectBoundingBox(t,e,n,a,l){l[0]=Math.min(l[0],t,n),l[1]=Math.min(l[1],e,a),l[2]=Math.max(l[2],t,n),l[3]=Math.max(l[3],e,a)}static bezierBoundingBox(t,e,n,a,l,c,h,f,p){p[0]=Math.min(p[0],t,h),p[1]=Math.min(p[1],e,f),p[2]=Math.max(p[2],t,h),p[3]=Math.max(p[3],e,f),T(this,Dr,eA).call(this,t,n,l,h,e,a,c,f,3*(-t+3*(n-l)+h),6*(t-2*n+l),3*(n-t),p),T(this,Dr,eA).call(this,t,n,l,h,e,a,c,f,3*(-e+3*(a-c)+f),6*(e-2*a+c),3*(a-e),p)}}Dr=new WeakSet,Pb=function(t,e,n,a,l,c,h,f,p,m){if(p<=0||p>=1)return;const y=1-p,v=p*p,w=v*p,C=y*(y*(y*t+3*p*e)+3*v*n)+w*a,_=y*(y*(y*l+3*p*c)+3*v*h)+w*f;m[0]=Math.min(m[0],C),m[1]=Math.min(m[1],_),m[2]=Math.max(m[2],C),m[3]=Math.max(m[3],_)},eA=function(t,e,n,a,l,c,h,f,p,m,y,v){if(Math.abs(p)<1e-12){Math.abs(m)>=1e-12&&T(this,Dr,Pb).call(this,t,e,n,a,l,c,h,f,-y/m,v);return}const w=m**2-4*y*p;if(w<0)return;const C=Math.sqrt(w),_=2*p;T(this,Dr,Pb).call(this,t,e,n,a,l,c,h,f,(-m+C)/_,v),T(this,Dr,Pb).call(this,t,e,n,a,l,c,h,f,(-m-C)/_,v)},E(ct,Dr);function PO(d){return decodeURIComponent(escape(d))}let Vx=null,N_=null;function YC(d){return Vx||(Vx=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,N_=new Map([["","t"]])),d.replaceAll(Vx,(t,e,n)=>e?e.normalize("NFKC"):N_.get(n))}function PS(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const d=new Uint8Array(32);return crypto.getRandomValues(d),XC(d)}const IS="pdfjs_internal_id_";function IO(d,t,e){if(!Array.isArray(e)||e.length<2)return!1;const[n,a,...l]=e;if(!d(n)&&!Number.isInteger(n)||!t(a))return!1;const c=l.length;let h=!0;switch(a.name){case"XYZ":if(c<2||c>3)return!1;break;case"Fit":case"FitB":return c===0;case"FitH":case"FitBH":case"FitV":case"FitBV":if(c>1)return!1;break;case"FitR":if(c!==4)return!1;h=!1;break;default:return!1}for(const f of l)if(!(typeof f=="number"||h&&f===null))return!1;return!0}function Pi(d,t,e){return Math.min(Math.max(d,t),e)}function $C(d){return Uint8Array.prototype.toBase64?d.toBase64():btoa(XC(d))}function FO(d){return Uint8Array.fromBase64?Uint8Array.fromBase64(d):em(atob(d))}typeof Promise.try!="function"&&(Promise.try=function(d,...t){return new Promise(e=>{e(d(...t))})});typeof Math.sumPrecise!="function"&&(Math.sumPrecise=function(d){return d.reduce((t,e)=>t+e,0)});class pp{static textContent(t){const e=[],n={items:e,styles:Object.create(null)};function a(l){var f;if(!l)return;let c=null;const h=l.name;if(h==="#text")c=l.value;else if(pp.shouldBuildText(h))(f=l==null?void 0:l.attributes)!=null&&f.textContent?c=l.attributes.textContent:l.value&&(c=l.value);else return;if(c!==null&&e.push({str:c}),!!l.children)for(const p of l.children)a(p)}return a(t),n}static shouldBuildText(t){return!(t==="textarea"||t==="input"||t==="option"||t==="select")}}class FS{static setupStorage(t,e,n,a,l){const c=a.getValue(e,{value:null});switch(n.name){case"textarea":if(c.value!==null&&(t.textContent=c.value),l==="print")break;t.addEventListener("input",h=>{a.setValue(e,{value:h.target.value})});break;case"input":if(n.attributes.type==="radio"||n.attributes.type==="checkbox"){if(c.value===n.attributes.xfaOn?t.setAttribute("checked",!0):c.value===n.attributes.xfaOff&&t.removeAttribute("checked"),l==="print")break;t.addEventListener("change",h=>{a.setValue(e,{value:h.target.checked?h.target.getAttribute("xfaOn"):h.target.getAttribute("xfaOff")})})}else{if(c.value!==null&&t.setAttribute("value",c.value),l==="print")break;t.addEventListener("input",h=>{a.setValue(e,{value:h.target.value})})}break;case"select":if(c.value!==null){t.setAttribute("value",c.value);for(const h of n.children)h.attributes.value===c.value?h.attributes.selected=!0:h.attributes.hasOwnProperty("selected")&&delete h.attributes.selected}t.addEventListener("input",h=>{const f=h.target.options,p=f.selectedIndex===-1?"":f[f.selectedIndex].value;a.setValue(e,{value:p})});break}}static setAttributes({html:t,element:e,storage:n=null,intent:a,linkService:l}){const{attributes:c}=e,h=t instanceof HTMLAnchorElement;c.type==="radio"&&(c.name=`${c.name}-${a}`);for(const[f,p]of Object.entries(c))if(p!=null)switch(f){case"class":p.length&&t.setAttribute(f,p.join(" "));break;case"dataId":break;case"id":t.setAttribute("data-element-id",p);break;case"style":Object.assign(t.style,p);break;case"textContent":t.textContent=p;break;default:(!h||f!=="href"&&f!=="newWindow")&&t.setAttribute(f,p)}h&&l.addLinkAttributes(t,c.href,c.newWindow),n&&c.dataId&&this.setupStorage(t,c.dataId,e,n)}static render(t){var y,v;const e=t.annotationStorage,n=t.linkService,a=t.xfaHtml,l=t.intent||"display",c=document.createElement(a.name);a.attributes&&this.setAttributes({html:c,element:a,intent:l,linkService:n});const h=l!=="richText",f=t.div;if(f.append(c),t.viewport){const w=`matrix(${t.viewport.transform.join(",")})`;f.style.transform=w}h&&f.setAttribute("class","xfaLayer xfaFont");const p=[];if(a.children.length===0){if(a.value){const w=document.createTextNode(a.value);c.append(w),h&&pp.shouldBuildText(a.name)&&p.push(w)}return{textDivs:p}}const m=[[a,-1,c]];for(;m.length>0;){const[w,C,_]=m.at(-1);if(C+1===w.children.length){m.pop();continue}const M=w.children[++m.at(-1)[1]];if(M===null)continue;const{name:N}=M;if(N==="#text"){const L=document.createTextNode(M.value);p.push(L),_.append(L);continue}const R=(y=M==null?void 0:M.attributes)!=null&&y.xmlns?document.createElementNS(M.attributes.xmlns,N):document.createElement(N);if(_.append(R),M.attributes&&this.setAttributes({html:R,element:M,storage:e,intent:l,linkService:n}),((v=M.children)==null?void 0:v.length)>0)m.push([M,-1,R]);else if(M.value){const L=document.createTextNode(M.value);h&&pp.shouldBuildText(N)&&p.push(L),R.append(L)}}for(const w of f.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))w.setAttribute("readOnly",!0);return{textDivs:p}}static update(t){const e=`matrix(${t.viewport.transform.join(",")})`;t.div.style.transform=e,t.div.hidden=!1}}const qa="http://www.w3.org/2000/svg",jl=class jl{};nt(jl,"CSS",96),nt(jl,"PDF",72),nt(jl,"PDF_TO_CSS_UNITS",jl.CSS/jl.PDF);let kr=jl;async function Fd(d,t="text"){if(Vf(d,document.baseURI)){const e=await fetch(d);if(!e.ok)throw new Error(e.statusText);switch(t){case"arraybuffer":return e.arrayBuffer();case"blob":return e.blob();case"json":return e.json()}return e.text()}return new Promise((e,n)=>{const a=new XMLHttpRequest;a.open("GET",d,!0),a.responseType=t,a.onreadystatechange=()=>{if(a.readyState===XMLHttpRequest.DONE){if(a.status===200||a.status===0){switch(t){case"arraybuffer":case"blob":case"json":e(a.response);return}e(a.responseText);return}n(new Error(a.statusText))}},a.send(null)})}class im{constructor({viewBox:t,userUnit:e,scale:n,rotation:a,offsetX:l=0,offsetY:c=0,dontFlip:h=!1}){this.viewBox=t,this.userUnit=e,this.scale=n,this.rotation=a,this.offsetX=l,this.offsetY=c,n*=e;const f=(t[2]+t[0])/2,p=(t[3]+t[1])/2;let m,y,v,w;switch(a%=360,a<0&&(a+=360),a){case 180:m=-1,y=0,v=0,w=1;break;case 90:m=0,y=1,v=1,w=0;break;case 270:m=0,y=-1,v=-1,w=0;break;case 0:m=1,y=0,v=0,w=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}h&&(v=-v,w=-w);let C,_,M,N;m===0?(C=Math.abs(p-t[1])*n+l,_=Math.abs(f-t[0])*n+c,M=(t[3]-t[1])*n,N=(t[2]-t[0])*n):(C=Math.abs(f-t[0])*n+l,_=Math.abs(p-t[1])*n+c,M=(t[2]-t[0])*n,N=(t[3]-t[1])*n),this.transform=[m*n,y*n,v*n,w*n,C-m*n*f-v*n*p,_-y*n*f-w*n*p],this.width=M,this.height=N}get rawDims(){const t=this.viewBox;return Ct(this,"rawDims",{pageWidth:t[2]-t[0],pageHeight:t[3]-t[1],pageX:t[0],pageY:t[1]})}clone({scale:t=this.scale,rotation:e=this.rotation,offsetX:n=this.offsetX,offsetY:a=this.offsetY,dontFlip:l=!1}={}){return new im({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:t,rotation:e,offsetX:n,offsetY:a,dontFlip:l})}convertToViewportPoint(t,e){const n=[t,e];return ct.applyTransform(n,this.transform),n}convertToViewportRectangle(t){const e=[t[0],t[1]];ct.applyTransform(e,this.transform);const n=[t[2],t[3]];return ct.applyTransform(n,this.transform),[e[0],e[1],n[0],n[1]]}convertToPdfPoint(t,e){const n=[t,e];return ct.applyInverseTransform(n,this.transform),n}}class ly extends su{constructor(t,e=0){super(t,"RenderingCancelledException"),this.extraDelay=e}}function nm(d){const t=d.length;let e=0;for(;e<t&&d[e].trim()==="";)e++;return d.substring(e,e+5).toLowerCase()==="data:"}function cy(d){return typeof d=="string"&&/\.pdf$/i.test(d)}function KC(d){return[d]=d.split(/[#?]/,1),d.substring(d.lastIndexOf("/")+1)}function QC(d,t="document.pdf"){if(typeof d!="string")return t;if(nm(d))return St('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),t;const n=(h=>{try{return new URL(h)}catch{try{return new URL(decodeURIComponent(h))}catch{try{return new URL(h,"https://foo.bar")}catch{try{return new URL(decodeURIComponent(h),"https://foo.bar")}catch{return null}}}}})(d);if(!n)return t;const a=h=>{try{let f=decodeURIComponent(h);return f.includes("/")?(f=f.split("/").at(-1),f.test(/^\.pdf$/i)?f:h):f}catch{return h}},l=/\.pdf$/i,c=n.pathname.split("/").at(-1);if(l.test(c))return a(c);if(n.searchParams.size>0){const h=Array.from(n.searchParams.values()).reverse();for(const p of h)if(l.test(p))return a(p);const f=Array.from(n.searchParams.keys()).reverse();for(const p of f)if(l.test(p))return a(p)}if(n.hash){const f=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i.exec(n.hash);if(f)return a(f[0])}return t}class M_{constructor(){nt(this,"started",Object.create(null));nt(this,"times",[])}time(t){t in this.started&&St(`Timer is already running for ${t}`),this.started[t]=Date.now()}timeEnd(t){t in this.started||St(`Timer has not been started for ${t}`),this.times.push({name:t,start:this.started[t],end:Date.now()}),delete this.started[t]}toString(){const t=[];let e=0;for(const{name:n}of this.times)e=Math.max(n.length,e);for(const{name:n,start:a,end:l}of this.times)t.push(`${n.padEnd(e)} ${l-a}ms
`);return t.join("")}}function Vf(d,t){const e=t?URL.parse(d,t):URL.parse(d);return(e==null?void 0:e.protocol)==="http:"||(e==null?void 0:e.protocol)==="https:"}function Wn(d){d.preventDefault()}function Me(d){d.preventDefault(),d.stopPropagation()}function UO(d){console.log("Deprecated API usage: "+d)}var xp;class gp{static toDateObject(t){if(t instanceof Date)return t;if(!t||typeof t!="string")return null;o(this,xp)||x(this,xp,new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const e=o(this,xp).exec(t);if(!e)return null;const n=parseInt(e[1],10);let a=parseInt(e[2],10);a=a>=1&&a<=12?a-1:0;let l=parseInt(e[3],10);l=l>=1&&l<=31?l:1;let c=parseInt(e[4],10);c=c>=0&&c<=23?c:0;let h=parseInt(e[5],10);h=h>=0&&h<=59?h:0;let f=parseInt(e[6],10);f=f>=0&&f<=59?f:0;const p=e[7]||"Z";let m=parseInt(e[8],10);m=m>=0&&m<=23?m:0;let y=parseInt(e[9],10)||0;return y=y>=0&&y<=59?y:0,p==="-"?(c+=m,h+=y):p==="+"&&(c-=m,h-=y),new Date(Date.UTC(n,a,l,c,h,f))}}xp=new WeakMap,E(gp,xp);function WC(d,{scale:t=1,rotation:e=0}){const{width:n,height:a}=d.attributes.style,l=[0,0,parseInt(n),parseInt(a)];return new im({viewBox:l,userUnit:1,scale:t,rotation:e})}function Ud(d){if(d.startsWith("#")){const t=parseInt(d.slice(1),16);return[(t&16711680)>>16,(t&65280)>>8,t&255]}return d.startsWith("rgb(")?d.slice(4,-1).split(",").map(t=>parseInt(t)):d.startsWith("rgba(")?d.slice(5,-1).split(",").map(t=>parseInt(t)).slice(0,3):(St(`Not a valid color format: "${d}"`),[0,0,0])}function HO(d){const t=document.createElement("span");t.style.visibility="hidden",t.style.colorScheme="only light",document.body.append(t);for(const e of d.keys()){t.style.color=e;const n=window.getComputedStyle(t).color;d.set(e,Ud(n))}t.remove()}function Ne(d){const{a:t,b:e,c:n,d:a,e:l,f:c}=d.getTransform();return[t,e,n,a,l,c]}function Ws(d){const{a:t,b:e,c:n,d:a,e:l,f:c}=d.getTransform().invertSelf();return[t,e,n,a,l,c]}function ll(d,t,e=!1,n=!0){if(t instanceof im){const{pageWidth:a,pageHeight:l}=t.rawDims,{style:c}=d,h=fi.isCSSRoundSupported,f=`var(--total-scale-factor) * ${a}px`,p=`var(--total-scale-factor) * ${l}px`,m=h?`round(down, ${f}, var(--scale-round-x))`:`calc(${f})`,y=h?`round(down, ${p}, var(--scale-round-y))`:`calc(${p})`;!e||t.rotation%180===0?(c.width=m,c.height=y):(c.width=y,c.height=m)}n&&d.setAttribute("data-main-rotation",t.rotation)}class qs{constructor(){const{pixelRatio:t}=qs;this.sx=t,this.sy=t}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}limitCanvas(t,e,n,a,l=-1){let c=1/0,h=1/0,f=1/0;n=qs.capPixels(n,l),n>0&&(c=Math.sqrt(n/(t*e))),a!==-1&&(h=a/t,f=a/e);const p=Math.min(c,h,f);return this.sx>p||this.sy>p?(this.sx=p,this.sy=p,!0):!1}static get pixelRatio(){return globalThis.devicePixelRatio||1}static capPixels(t,e){if(e>=0){const n=Math.ceil(window.screen.availWidth*window.screen.availHeight*this.pixelRatio**2*(1+e/100));return t>0?Math.min(t,n):n}return t}}const E0=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"];class GO{static get isDarkMode(){var t;return Ct(this,"isDarkMode",!!((t=window==null?void 0:window.matchMedia)!=null&&t.call(window,"(prefers-color-scheme: dark)").matches))}}class ZC{static get commentForegroundColor(){const t=document.createElement("span");t.classList.add("comment","sidebar");const{style:e}=t;e.width=e.height="0",e.display="none",e.color="var(--comment-fg-color)",document.body.append(t);const{color:n}=window.getComputedStyle(t);return t.remove(),Ct(this,"commentForegroundColor",Ud(n))}}function JC(d,t,e,n){n=Math.min(Math.max(n??1,0),1);const a=255*(1-n);return d=Math.round(d*n+a),t=Math.round(t*n+a),e=Math.round(e*n+a),[d,t,e]}function D_(d,t){const e=d[0]/255,n=d[1]/255,a=d[2]/255,l=Math.max(e,n,a),c=Math.min(e,n,a),h=(l+c)/2;if(l===c)t[0]=t[1]=0;else{const f=l-c;switch(t[1]=h<.5?f/(l+c):f/(2-l-c),l){case e:t[0]=((n-a)/f+(n<a?6:0))*60;break;case n:t[0]=((a-e)/f+2)*60;break;case a:t[0]=((e-n)/f+4)*60;break}}t[2]=h}function iA(d,t){const e=d[0],n=d[1],a=d[2],l=(1-Math.abs(2*a-1))*n,c=l*(1-Math.abs(e/60%2-1)),h=a-l/2;switch(Math.floor(e/60)){case 0:t[0]=l+h,t[1]=c+h,t[2]=h;break;case 1:t[0]=c+h,t[1]=l+h,t[2]=h;break;case 2:t[0]=h,t[1]=l+h,t[2]=c+h;break;case 3:t[0]=h,t[1]=c+h,t[2]=l+h;break;case 4:t[0]=c+h,t[1]=h,t[2]=l+h;break;case 5:case 6:t[0]=l+h,t[1]=h,t[2]=c+h;break}}function R_(d){return d<=.03928?d/12.92:((d+.055)/1.055)**2.4}function L_(d,t,e){iA(d,e),e.map(R_);const n=.2126*e[0]+.7152*e[1]+.0722*e[2];iA(t,e),e.map(R_);const a=.2126*e[0]+.7152*e[1]+.0722*e[2];return n>a?(n+.05)/(a+.05):(a+.05)/(n+.05)}const k_=new Map;function t2(d,t){const e=d[0]+d[1]*256+d[2]*65536+t[0]*16777216+t[1]*4294967296+t[2]*1099511627776;let n=k_.get(e);if(n)return n;const a=new Float32Array(9),l=a.subarray(0,3),c=a.subarray(3,6);D_(d,c);const h=a.subarray(6,9);D_(t,h);const f=h[2]<.5,p=f?12:4.5;if(c[2]=f?Math.sqrt(c[2]):1-Math.sqrt(1-c[2]),L_(c,h,l)<p){let m,y;f?(m=c[2],y=1):(m=0,y=c[2]);const v=.005;for(;y-m>v;){const w=c[2]=(m+y)/2;f===L_(c,h,l)<p?m=w:y=w}c[2]=f?y:m}return iA(c,l),n=ct.makeHexColor(Math.round(l[0]*255),Math.round(l[1]*255),Math.round(l[2]*255)),k_.set(e,n),n}function US({html:d,dir:t,className:e},n){const a=document.createDocumentFragment();if(typeof d=="string"){const l=document.createElement("p");l.dir=t||"auto";const c=d.split(/(?:\r\n?|\n)/);for(let h=0,f=c.length;h<f;++h){const p=c[h];l.append(document.createTextNode(p)),h<f-1&&l.append(document.createElement("br"))}a.append(l)}else FS.render({xfaHtml:d,div:a,intent:"richText"});a.firstChild.classList.add("richText",e),n.append(a)}var ho,fo,us,hs,Ap,po,ch,uh,Sp,j0,e2,Ni,i2,n2,Yu,qf;const $a=class $a{constructor(t){E(this,Ni);E(this,ho,null);E(this,fo,null);E(this,us);E(this,hs,null);E(this,Ap,null);E(this,po,null);E(this,ch,null);E(this,uh,null);x(this,us,t),o($a,Sp)||x($a,Sp,Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"}))}render(){const t=x(this,ho,document.createElement("div"));t.classList.add("editToolbar","hidden"),t.setAttribute("role","toolbar");const e=o(this,us)._uiManager._signal;e instanceof AbortSignal&&!e.aborted&&(t.addEventListener("contextmenu",Wn,{signal:e}),t.addEventListener("pointerdown",T($a,j0,e2),{signal:e}));const n=x(this,hs,document.createElement("div"));n.className="buttons",t.append(n);const a=o(this,us).toolbarPosition;if(a){const{style:l}=t,c=o(this,us)._uiManager.direction==="ltr"?1-a[0]:a[0];l.insetInlineEnd=`${100*c}%`,l.top=`calc(${100*a[1]}% + var(--editor-toolbar-vert-offset))`}return t}get div(){return o(this,ho)}hide(){var t;o(this,ho).classList.add("hidden"),(t=o(this,fo))==null||t.hideDropdown()}show(){var t,e;o(this,ho).classList.remove("hidden"),(t=o(this,Ap))==null||t.shown(),(e=o(this,po))==null||e.shown()}addDeleteButton(){const{editorType:t,_uiManager:e}=o(this,us),n=document.createElement("button");n.classList.add("basic","deleteButton"),n.tabIndex=0,n.setAttribute("data-l10n-id",o($a,Sp)[t]),T(this,Ni,Yu).call(this,n)&&n.addEventListener("click",a=>{e.delete()},{signal:e._signal}),o(this,hs).append(n)}async addAltText(t){const e=await t.render();T(this,Ni,Yu).call(this,e),o(this,hs).append(e,o(this,Ni,qf)),x(this,Ap,t)}addComment(t,e=null){if(o(this,po))return;const n=t.renderForToolbar();if(!n)return;T(this,Ni,Yu).call(this,n);const a=x(this,ch,o(this,Ni,qf));e?(o(this,hs).insertBefore(n,e),o(this,hs).insertBefore(a,e)):o(this,hs).append(n,a),x(this,po,t),t.toolbar=this}addColorPicker(t){if(o(this,fo))return;x(this,fo,t);const e=t.renderButton();T(this,Ni,Yu).call(this,e),o(this,hs).append(e,o(this,Ni,qf))}async addEditSignatureButton(t){const e=x(this,uh,await t.renderEditButton(o(this,us)));T(this,Ni,Yu).call(this,e),o(this,hs).append(e,o(this,Ni,qf))}removeButton(t){var e,n;switch(t){case"comment":(e=o(this,po))==null||e.removeToolbarCommentButton(),x(this,po,null),(n=o(this,ch))==null||n.remove(),x(this,ch,null);break}}async addButton(t,e){switch(t){case"colorPicker":this.addColorPicker(e);break;case"altText":await this.addAltText(e);break;case"editSignature":await this.addEditSignatureButton(e);break;case"delete":this.addDeleteButton();break;case"comment":this.addComment(e);break}}async addButtonBefore(t,e,n){const a=o(this,hs).querySelector(n);a&&t==="comment"&&this.addComment(e,a)}updateEditSignatureButton(t){o(this,uh)&&(o(this,uh).title=t)}remove(){var t;o(this,ho).remove(),(t=o(this,fo))==null||t.destroy(),x(this,fo,null)}};ho=new WeakMap,fo=new WeakMap,us=new WeakMap,hs=new WeakMap,Ap=new WeakMap,po=new WeakMap,ch=new WeakMap,uh=new WeakMap,Sp=new WeakMap,j0=new WeakSet,e2=function(t){t.stopPropagation()},Ni=new WeakSet,i2=function(t){o(this,us)._focusEventsAllowed=!1,Me(t)},n2=function(t){o(this,us)._focusEventsAllowed=!0,Me(t)},Yu=function(t){const e=o(this,us)._uiManager._signal;return!(e instanceof AbortSignal)||e.aborted?!1:(t.addEventListener("focusin",T(this,Ni,i2).bind(this),{capture:!0,signal:e}),t.addEventListener("focusout",T(this,Ni,n2).bind(this),{capture:!0,signal:e}),t.addEventListener("contextmenu",Wn,{signal:e}),!0)},qf=function(){const t=document.createElement("div");return t.className="divider",t},E($a,j0),E($a,Sp,null);let nA=$a;var wp,Il,Qa,Or,s2,a2,sA;class VO{constructor(t){E(this,Or);E(this,wp,null);E(this,Il,null);E(this,Qa);x(this,Qa,t)}show(t,e,n){const[a,l]=T(this,Or,a2).call(this,e,n),{style:c}=o(this,Il)||x(this,Il,T(this,Or,s2).call(this));t.append(o(this,Il)),c.insetInlineEnd=`${100*a}%`,c.top=`calc(${100*l}% + var(--editor-toolbar-vert-offset))`}hide(){o(this,Il).remove()}}wp=new WeakMap,Il=new WeakMap,Qa=new WeakMap,Or=new WeakSet,s2=function(){const t=x(this,Il,document.createElement("div"));t.className="editToolbar",t.setAttribute("role","toolbar");const e=o(this,Qa)._signal;e instanceof AbortSignal&&!e.aborted&&t.addEventListener("contextmenu",Wn,{signal:e});const n=x(this,wp,document.createElement("div"));return n.className="buttons",t.append(n),o(this,Qa).hasCommentManager()&&T(this,Or,sA).call(this,"commentButton","pdfjs-comment-floating-button","pdfjs-comment-floating-button-label",()=>{o(this,Qa).commentSelection("floating_button")}),T(this,Or,sA).call(this,"highlightButton","pdfjs-highlight-floating-button1","pdfjs-highlight-floating-button-label",()=>{o(this,Qa).highlightSelection("floating_button")}),t},a2=function(t,e){let n=0,a=0;for(const l of t){const c=l.y+l.height;if(c<n)continue;const h=l.x+(e?l.width:0);if(c>n){a=h,n=c;continue}e?h>a&&(a=h):h<a&&(a=h)}return[e?1-a:a,n]},sA=function(t,e,n,a){const l=document.createElement("button");l.classList.add("basic",t),l.tabIndex=0,l.setAttribute("data-l10n-id",e);const c=document.createElement("span");l.append(c),c.className="visuallyHidden",c.setAttribute("data-l10n-id",n);const h=o(this,Qa)._signal;h instanceof AbortSignal&&!h.aborted&&(l.addEventListener("contextmenu",Wn,{signal:h}),l.addEventListener("click",a,{signal:h})),o(this,wp).append(l)};function r2(d,t,e){for(const n of e)t.addEventListener(n,d[n].bind(d))}var B0;class qO{constructor(){E(this,B0,0)}get id(){return`${dp}${Ze(this,B0)._++}`}}B0=new WeakMap;var hh,Ep,Li,dh,Ib;const JS=class JS{constructor(){E(this,dh);E(this,hh,PS());E(this,Ep,0);E(this,Li,null)}static get _isSVGFittingCanvas(){const t='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',n=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),a=new Image;a.src=t;const l=a.decode().then(()=>(n.drawImage(a,0,0,1,1,0,0,1,3),new Uint32Array(n.getImageData(0,0,1,1).data.buffer)[0]===0));return Ct(this,"_isSVGFittingCanvas",l)}async getFromFile(t){const{lastModified:e,name:n,size:a,type:l}=t;return T(this,dh,Ib).call(this,`${e}_${n}_${a}_${l}`,t)}async getFromUrl(t){return T(this,dh,Ib).call(this,t,t)}async getFromBlob(t,e){const n=await e;return T(this,dh,Ib).call(this,t,n)}async getFromId(t){o(this,Li)||x(this,Li,new Map);const e=o(this,Li).get(t);if(!e)return null;if(e.bitmap)return e.refCounter+=1,e;if(e.file)return this.getFromFile(e.file);if(e.blobPromise){const{blobPromise:n}=e;return delete e.blobPromise,this.getFromBlob(e.id,n)}return this.getFromUrl(e.url)}getFromCanvas(t,e){o(this,Li)||x(this,Li,new Map);let n=o(this,Li).get(t);if(n!=null&&n.bitmap)return n.refCounter+=1,n;const a=new OffscreenCanvas(e.width,e.height);return a.getContext("2d").drawImage(e,0,0),n={bitmap:a.transferToImageBitmap(),id:`image_${o(this,hh)}_${Ze(this,Ep)._++}`,refCounter:1,isSvg:!1},o(this,Li).set(t,n),o(this,Li).set(n.id,n),n}getSvgUrl(t){const e=o(this,Li).get(t);return e!=null&&e.isSvg?e.svgUrl:null}deleteId(t){var a;o(this,Li)||x(this,Li,new Map);const e=o(this,Li).get(t);if(!e||(e.refCounter-=1,e.refCounter!==0))return;const{bitmap:n}=e;if(!e.url&&!e.file){const l=new OffscreenCanvas(n.width,n.height);l.getContext("bitmaprenderer").transferFromImageBitmap(n),e.blobPromise=l.convertToBlob()}(a=n.close)==null||a.call(n),e.bitmap=null}isValidId(t){return t.startsWith(`image_${o(this,hh)}_`)}};hh=new WeakMap,Ep=new WeakMap,Li=new WeakMap,dh=new WeakSet,Ib=async function(t,e){o(this,Li)||x(this,Li,new Map);let n=o(this,Li).get(t);if(n===null)return null;if(n!=null&&n.bitmap)return n.refCounter+=1,n;try{n||(n={bitmap:null,id:`image_${o(this,hh)}_${Ze(this,Ep)._++}`,refCounter:0,isSvg:!1});let a;if(typeof e=="string"?(n.url=e,a=await Fd(e,"blob")):e instanceof File?a=n.file=e:e instanceof Blob&&(a=e),a.type==="image/svg+xml"){const l=JS._isSVGFittingCanvas,c=new FileReader,h=new Image,f=new Promise((p,m)=>{h.onload=()=>{n.bitmap=h,n.isSvg=!0,p()},c.onload=async()=>{const y=n.svgUrl=c.result;h.src=await l?`${y}#svgView(preserveAspectRatio(none))`:y},h.onerror=c.onerror=m});c.readAsDataURL(a),await f}else n.bitmap=await createImageBitmap(a);n.refCounter=1}catch(a){St(a),n=null}return o(this,Li).set(t,n),n&&o(this,Li).set(n.id,n),n};let aA=JS;var Ue,go,Tp,Ce;class XO{constructor(t=128){E(this,Ue,[]);E(this,go,!1);E(this,Tp);E(this,Ce,-1);x(this,Tp,t)}add({cmd:t,undo:e,post:n,mustExec:a,type:l=NaN,overwriteIfSameType:c=!1,keepUndo:h=!1}){if(a&&t(),o(this,go))return;const f={cmd:t,undo:e,post:n,type:l};if(o(this,Ce)===-1){o(this,Ue).length>0&&(o(this,Ue).length=0),x(this,Ce,0),o(this,Ue).push(f);return}if(c&&o(this,Ue)[o(this,Ce)].type===l){h&&(f.undo=o(this,Ue)[o(this,Ce)].undo),o(this,Ue)[o(this,Ce)]=f;return}const p=o(this,Ce)+1;p===o(this,Tp)?o(this,Ue).splice(0,1):(x(this,Ce,p),p<o(this,Ue).length&&o(this,Ue).splice(p)),o(this,Ue).push(f)}undo(){if(o(this,Ce)===-1)return;x(this,go,!0);const{undo:t,post:e}=o(this,Ue)[o(this,Ce)];t(),e==null||e(),x(this,go,!1),x(this,Ce,o(this,Ce)-1)}redo(){if(o(this,Ce)<o(this,Ue).length-1){x(this,Ce,o(this,Ce)+1),x(this,go,!0);const{cmd:t,post:e}=o(this,Ue)[o(this,Ce)];t(),e==null||e(),x(this,go,!1)}}hasSomethingToUndo(){return o(this,Ce)!==-1}hasSomethingToRedo(){return o(this,Ce)<o(this,Ue).length-1}cleanType(t){if(o(this,Ce)!==-1){for(let e=o(this,Ce);e>=0;e--)if(o(this,Ue)[e].type!==t){o(this,Ue).splice(e+1,o(this,Ce)-e),x(this,Ce,e);return}o(this,Ue).length=0,x(this,Ce,-1)}}destroy(){x(this,Ue,null)}}Ue=new WeakMap,go=new WeakMap,Tp=new WeakMap,Ce=new WeakMap;var z0,o2;class sm{constructor(t){E(this,z0);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:e}=fi.platform;for(const[n,a,l={}]of t)for(const c of n){const h=c.startsWith("mac+");e&&h?(this.callbacks.set(c.slice(4),{callback:a,options:l}),this.allKeys.add(c.split("+").at(-1))):!e&&!h&&(this.callbacks.set(c,{callback:a,options:l}),this.allKeys.add(c.split("+").at(-1)))}}exec(t,e){if(!this.allKeys.has(e.key))return;const n=this.callbacks.get(T(this,z0,o2).call(this,e));if(!n)return;const{callback:a,options:{bubbles:l=!1,args:c=[],checker:h=null}}=n;h&&!h(t,e)||(a.bind(t,...c,e)(),l||Me(e))}}z0=new WeakSet,o2=function(t){t.altKey&&this.buffer.push("alt"),t.ctrlKey&&this.buffer.push("ctrl"),t.metaKey&&this.buffer.push("meta"),t.shiftKey&&this.buffer.push("shift"),this.buffer.push(t.key);const e=this.buffer.join("+");return this.buffer.length=0,e};const P0=class P0{get _colors(){const t=new Map([["CanvasText",null],["Canvas",null]]);return HO(t),Ct(this,"_colors",t)}convert(t){const e=Ud(t);if(!window.matchMedia("(forced-colors: active)").matches)return e;for(const[n,a]of this._colors)if(a.every((l,c)=>l===e[c]))return P0._colorsMapping.get(n);return e}getHexCode(t){const e=this._colors.get(t);return e?ct.makeHexColor(...e):t}};nt(P0,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let rA=P0;var fh,Nn,ph,ke,ti,gh,ds,mh,fs,ki,mo,bo,bh,yo,ta,ps,Fl,_p,Cp,yh,Np,ea,vo,vh,xo,ia,I0,Ao,xh,Mp,So,Ul,Ah,wo,Dp,Ke,Jt,Wa,Eo,To,Rp,Sh,Lp,_o,na,Za,kp,Op,gs,rt,Fb,oA,l2,c2,Xf,u2,h2,d2,lA,f2,cA,uA,p2,Hi,Xa,g2,m2,hA,b2,Yf,dA;const eh=class eh{constructor(t,e,n,a,l,c,h,f,p,m,y,v,w,C,_,M){E(this,rt);E(this,fh,new AbortController);E(this,Nn,null);E(this,ph,null);E(this,ke,new Map);E(this,ti,new Map);E(this,gh,null);E(this,ds,null);E(this,mh,null);E(this,fs,new XO);E(this,ki,null);E(this,mo,null);E(this,bo,null);E(this,bh,0);E(this,yo,new Set);E(this,ta,null);E(this,ps,null);E(this,Fl,new Set);nt(this,"_editorUndoBar",null);E(this,_p,!1);E(this,Cp,!1);E(this,yh,!1);E(this,Np,null);E(this,ea,null);E(this,vo,null);E(this,vh,null);E(this,xo,!1);E(this,ia,null);E(this,I0,new qO);E(this,Ao,!1);E(this,xh,!1);E(this,Mp,!1);E(this,So,null);E(this,Ul,null);E(this,Ah,null);E(this,wo,null);E(this,Dp,null);E(this,Ke,At.NONE);E(this,Jt,new Set);E(this,Wa,null);E(this,Eo,null);E(this,To,null);E(this,Rp,null);E(this,Sh,null);E(this,Lp,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1});E(this,_o,[0,0]);E(this,na,null);E(this,Za,null);E(this,kp,null);E(this,Op,null);E(this,gs,null);const N=this._signal=o(this,fh).signal;x(this,Za,t),x(this,kp,e),x(this,Op,n),x(this,gh,a),x(this,ki,l),x(this,Eo,c),x(this,Sh,f),this._eventBus=h,h._on("editingaction",this.onEditingAction.bind(this),{signal:N}),h._on("pagechanging",this.onPageChanging.bind(this),{signal:N}),h._on("scalechanging",this.onScaleChanging.bind(this),{signal:N}),h._on("rotationchanging",this.onRotationChanging.bind(this),{signal:N}),h._on("setpreference",this.onSetPreference.bind(this),{signal:N}),h._on("switchannotationeditorparams",R=>this.updateParams(R.type,R.value),{signal:N}),window.addEventListener("pointerdown",()=>{x(this,xh,!0)},{capture:!0,signal:N}),window.addEventListener("pointerup",()=>{x(this,xh,!1)},{capture:!0,signal:N}),T(this,rt,u2).call(this),T(this,rt,p2).call(this),T(this,rt,lA).call(this),x(this,ds,f.annotationStorage),x(this,Np,f.filterFactory),x(this,To,p),x(this,vh,m||null),x(this,_p,y),x(this,Cp,v),x(this,yh,w),x(this,Dp,C||null),this.viewParameters={realScale:kr.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=_||null,this._supportsPinchToZoom=M!==!1,l==null||l.setSidebarUiManager(this)}static get _keyboardManager(){const t=eh.prototype,e=c=>o(c,Za).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&c.hasSomethingToControl(),n=(c,{target:h})=>{if(h instanceof HTMLInputElement){const{type:f}=h;return f!=="text"&&f!=="number"}return!0},a=this.TRANSLATE_SMALL,l=this.TRANSLATE_BIG;return Ct(this,"_keyboardManager",new sm([[["ctrl+a","mac+meta+a"],t.selectAll,{checker:n}],[["ctrl+z","mac+meta+z"],t.undo,{checker:n}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],t.redo,{checker:n}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],t.delete,{checker:n}],[["Enter","mac+Enter"],t.addNewEditorFromKeyboard,{checker:(c,{target:h})=>!(h instanceof HTMLButtonElement)&&o(c,Za).contains(h)&&!c.isEnterHandled}],[[" ","mac+ "],t.addNewEditorFromKeyboard,{checker:(c,{target:h})=>!(h instanceof HTMLButtonElement)&&o(c,Za).contains(document.activeElement)}],[["Escape","mac+Escape"],t.unselectAll],[["ArrowLeft","mac+ArrowLeft"],t.translateSelectedEditors,{args:[-a,0],checker:e}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t.translateSelectedEditors,{args:[-l,0],checker:e}],[["ArrowRight","mac+ArrowRight"],t.translateSelectedEditors,{args:[a,0],checker:e}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t.translateSelectedEditors,{args:[l,0],checker:e}],[["ArrowUp","mac+ArrowUp"],t.translateSelectedEditors,{args:[0,-a],checker:e}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t.translateSelectedEditors,{args:[0,-l],checker:e}],[["ArrowDown","mac+ArrowDown"],t.translateSelectedEditors,{args:[0,a],checker:e}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t.translateSelectedEditors,{args:[0,l],checker:e}]]))}destroy(){var t,e,n,a,l,c,h,f,p;(t=o(this,gs))==null||t.resolve(),x(this,gs,null),(e=o(this,fh))==null||e.abort(),x(this,fh,null),this._signal=null;for(const m of o(this,ti).values())m.destroy();o(this,ti).clear(),o(this,ke).clear(),o(this,Fl).clear(),(n=o(this,wo))==null||n.clear(),x(this,Nn,null),o(this,Jt).clear(),o(this,fs).destroy(),(a=o(this,gh))==null||a.destroy(),(l=o(this,ki))==null||l.destroy(),(c=o(this,Eo))==null||c.destroy(),(h=o(this,ia))==null||h.hide(),x(this,ia,null),(f=o(this,Ah))==null||f.destroy(),x(this,Ah,null),x(this,ph,null),o(this,ea)&&(clearTimeout(o(this,ea)),x(this,ea,null)),o(this,na)&&(clearTimeout(o(this,na)),x(this,na,null)),(p=this._editorUndoBar)==null||p.destroy(),x(this,Sh,null)}combinedSignal(t){return AbortSignal.any([this._signal,t.signal])}get mlManager(){return o(this,Dp)}get useNewAltTextFlow(){return o(this,Cp)}get useNewAltTextWhenAddingImage(){return o(this,yh)}get hcmFilter(){return Ct(this,"hcmFilter",o(this,To)?o(this,Np).addHCMFilter(o(this,To).foreground,o(this,To).background):"none")}get direction(){return Ct(this,"direction",getComputedStyle(o(this,Za)).direction)}get _highlightColors(){return Ct(this,"_highlightColors",o(this,vh)?new Map(o(this,vh).split(",").map(t=>(t=t.split("=").map(e=>e.trim()),t[1]=t[1].toUpperCase(),t))):null)}get highlightColors(){const{_highlightColors:t}=this;if(!t)return Ct(this,"highlightColors",null);const e=new Map,n=!!o(this,To);for(const[a,l]of t){const c=a.endsWith("_HCM");if(n&&c){e.set(a.replace("_HCM",""),l);continue}!n&&!c&&e.set(a,l)}return Ct(this,"highlightColors",e)}get highlightColorNames(){return Ct(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,t=>t.reverse())):null)}getNonHCMColor(t){if(!this._highlightColors)return t;const e=this.highlightColorNames.get(t);return this._highlightColors.get(e)||t}getNonHCMColorName(t){return this.highlightColorNames.get(t)||t}setCurrentDrawingSession(t){t?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),x(this,bo,t)}setMainHighlightColorPicker(t){x(this,Ah,t)}editAltText(t,e=!1){var n;(n=o(this,gh))==null||n.editAltText(this,t,e)}hasCommentManager(){return!!o(this,ki)}editComment(t,e,n,a){var l;(l=o(this,ki))==null||l.showDialog(this,t,e,n,a)}selectComment(t,e){const n=o(this,ti).get(t),a=n==null?void 0:n.getEditorByUID(e);a==null||a.toggleComment(!0,!0)}updateComment(t){var e;(e=o(this,ki))==null||e.updateComment(t.getData())}updatePopupColor(t){var e;(e=o(this,ki))==null||e.updatePopupColor(t)}removeComment(t){var e;(e=o(this,ki))==null||e.removeComments([t.uid])}toggleComment(t,e,n=void 0){var a;(a=o(this,ki))==null||a.toggleCommentPopup(t,e,n)}makeCommentColor(t,e){var n;return t&&((n=o(this,ki))==null?void 0:n.makeCommentColor(t,e))||null}getCommentDialogElement(){var t;return((t=o(this,ki))==null?void 0:t.dialogElement)||null}async waitForEditorsRendered(t){if(o(this,ti).has(t-1))return;const{resolve:e,promise:n}=Promise.withResolvers(),a=l=>{l.pageNumber===t&&(this._eventBus._off("editorsrendered",a),e())};this._eventBus.on("editorsrendered",a),await n}getSignature(t){var e;(e=o(this,Eo))==null||e.getSignature({uiManager:this,editor:t})}get signatureManager(){return o(this,Eo)}switchToMode(t,e){this._eventBus.on("annotationeditormodechanged",e,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:t})}setPreference(t,e){this._eventBus.dispatch("setpreference",{source:this,name:t,value:e})}onSetPreference({name:t,value:e}){switch(t){case"enableNewAltTextWhenAddingImage":x(this,yh,e);break}}onPageChanging({pageNumber:t}){x(this,bh,t-1)}focusMainContainer(){o(this,Za).focus()}findParent(t,e){for(const n of o(this,ti).values()){const{x:a,y:l,width:c,height:h}=n.div.getBoundingClientRect();if(t>=a&&t<=a+c&&e>=l&&e<=l+h)return n}return null}disableUserSelect(t=!1){o(this,kp).classList.toggle("noUserSelect",t)}addShouldRescale(t){o(this,Fl).add(t)}removeShouldRescale(t){o(this,Fl).delete(t)}onScaleChanging({scale:t}){var e;this.commitOrRemove(),this.viewParameters.realScale=t*kr.PDF_TO_CSS_UNITS;for(const n of o(this,Fl))n.onScaleChanging();(e=o(this,bo))==null||e.onScaleChanging()}onRotationChanging({pagesRotation:t}){this.commitOrRemove(),this.viewParameters.rotation=t}highlightSelection(t="",e=!1){const n=document.getSelection();if(!n||n.isCollapsed)return;const{anchorNode:a,anchorOffset:l,focusNode:c,focusOffset:h}=n,f=n.toString(),m=T(this,rt,Fb).call(this,n).closest(".textLayer"),y=this.getSelectionBoxes(m);if(!y)return;n.empty();const v=T(this,rt,oA).call(this,m),w=o(this,Ke)===At.NONE,C=()=>{const _=v==null?void 0:v.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:t,boxes:y,anchorNode:a,anchorOffset:l,focusNode:c,focusOffset:h,text:f});w&&this.showAllEditors("highlight",!0,!0),e&&(_==null||_.editComment())};if(w){this.switchToMode(At.HIGHLIGHT,C);return}C()}commentSelection(t=""){this.highlightSelection(t,!0)}getAndRemoveDataFromAnnotationStorage(t){if(!o(this,ds))return null;const e=`${dp}${t}`,n=o(this,ds).getRawValue(e);return n&&o(this,ds).remove(e),n}addToAnnotationStorage(t){!t.isEmpty()&&o(this,ds)&&!o(this,ds).has(t.id)&&o(this,ds).setValue(t.id,t)}a11yAlert(t,e=null){const n=o(this,Op);n&&(n.setAttribute("data-l10n-id",t),e?n.setAttribute("data-l10n-args",JSON.stringify(e)):n.removeAttribute("data-l10n-args"))}blur(){if(this.isShiftKeyDown=!1,o(this,xo)&&(x(this,xo,!1),T(this,rt,Xf).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:t}=document;for(const e of o(this,Jt))if(e.div.contains(t)){x(this,Ul,[e,t]),e._focusEventsAllowed=!1;break}}focus(){if(!o(this,Ul))return;const[t,e]=o(this,Ul);x(this,Ul,null),e.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this._signal}),e.focus()}addEditListeners(){T(this,rt,lA).call(this),T(this,rt,cA).call(this)}removeEditListeners(){T(this,rt,f2).call(this),T(this,rt,uA).call(this)}dragOver(t){for(const{type:e}of t.dataTransfer.items)for(const n of o(this,ps))if(n.isHandlingMimeForPasting(e)){t.dataTransfer.dropEffect="copy",t.preventDefault();return}}drop(t){for(const e of t.dataTransfer.items)for(const n of o(this,ps))if(n.isHandlingMimeForPasting(e.type)){n.paste(e,this.currentLayer),t.preventDefault();return}}copy(t){var n;if(t.preventDefault(),(n=o(this,Nn))==null||n.commitOrRemove(),!this.hasSelection)return;const e=[];for(const a of o(this,Jt)){const l=a.serialize(!0);l&&e.push(l)}e.length!==0&&t.clipboardData.setData("application/pdfjs",JSON.stringify(e))}cut(t){this.copy(t),this.delete()}async paste(t){t.preventDefault();const{clipboardData:e}=t;for(const l of e.items)for(const c of o(this,ps))if(c.isHandlingMimeForPasting(l.type)){c.paste(l,this.currentLayer);return}let n=e.getData("application/pdfjs");if(!n)return;try{n=JSON.parse(n)}catch(l){St(`paste: "${l.message}".`);return}if(!Array.isArray(n))return;this.unselectAll();const a=this.currentLayer;try{const l=[];for(const f of n){const p=await a.deserialize(f);if(!p)return;l.push(p)}const c=()=>{for(const f of l)T(this,rt,hA).call(this,f);T(this,rt,dA).call(this,l)},h=()=>{for(const f of l)f.remove()};this.addCommands({cmd:c,undo:h,mustExec:!0})}catch(l){St(`paste: "${l.message}".`)}}keydown(t){!this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!0),o(this,Ke)!==At.NONE&&!this.isEditorHandlingKeyboard&&eh._keyboardManager.exec(this,t)}keyup(t){this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!1,o(this,xo)&&(x(this,xo,!1),T(this,rt,Xf).call(this,"main_toolbar")))}onEditingAction({name:t}){switch(t){case"undo":case"redo":case"delete":case"selectAll":this[t]();break;case"highlightSelection":this.highlightSelection("context_menu");break;case"commentSelection":this.commentSelection("context_menu");break}}setEditingState(t){t?(T(this,rt,h2).call(this),T(this,rt,cA).call(this),T(this,rt,Hi).call(this,{isEditing:o(this,Ke)!==At.NONE,isEmpty:T(this,rt,Yf).call(this),hasSomethingToUndo:o(this,fs).hasSomethingToUndo(),hasSomethingToRedo:o(this,fs).hasSomethingToRedo(),hasSelectedEditor:!1})):(T(this,rt,d2).call(this),T(this,rt,uA).call(this),T(this,rt,Hi).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(t){if(!o(this,ps)){x(this,ps,t);for(const e of o(this,ps))T(this,rt,Xa).call(this,e.defaultPropertiesToUpdate)}}getId(){return o(this,I0).id}get currentLayer(){return o(this,ti).get(o(this,bh))}getLayer(t){return o(this,ti).get(t)}get currentPageIndex(){return o(this,bh)}addLayer(t){o(this,ti).set(t.pageIndex,t),o(this,Ao)?t.enable():t.disable()}removeLayer(t){o(this,ti).delete(t.pageIndex)}async updateMode(t,e=null,n=!1,a=!1,l=!1){var c,h,f,p,m,y;if(o(this,Ke)!==t&&!(o(this,gs)&&(await o(this,gs).promise,!o(this,gs)))){if(x(this,gs,Promise.withResolvers()),(c=o(this,bo))==null||c.commitOrRemove(),o(this,Ke)===At.POPUP&&((h=o(this,ki))==null||h.hideSidebar()),(f=o(this,ki))==null||f.destroyPopup(),x(this,Ke,t),t===At.NONE){this.setEditingState(!1),T(this,rt,m2).call(this);for(const v of o(this,ke).values())v.hideStandaloneCommentButton();(p=this._editorUndoBar)==null||p.hide(),this.toggleComment(null),o(this,gs).resolve();return}for(const v of o(this,ke).values())v.addStandaloneCommentButton();t===At.SIGNATURE&&await((m=o(this,Eo))==null?void 0:m.loadSignatures()),this.setEditingState(!0),await T(this,rt,g2).call(this),this.unselectAll();for(const v of o(this,ti).values())v.updateMode(t);if(t===At.POPUP){o(this,ph)||x(this,ph,await o(this,Sh).getAnnotationsByType(new Set(o(this,ps).map(C=>C._editorType))));const v=new Set,w=[];for(const C of o(this,ke).values()){const{annotationElementId:_,hasComment:M,deleted:N}=C;_&&v.add(_),M&&!N&&w.push(C.getData())}for(const C of o(this,ph)){const{id:_,popupRef:M,contentsObj:N}=C;M&&(N!=null&&N.str)&&!v.has(_)&&!o(this,yo).has(_)&&w.push(C)}(y=o(this,ki))==null||y.showSidebar(w)}if(!e){n&&this.addNewEditorFromKeyboard(),o(this,gs).resolve();return}for(const v of o(this,ke).values())v.uid===e?(this.setSelected(v),l?v.editComment():a?v.enterInEditMode():v.focus()):v.unselect();o(this,gs).resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(t){t.mode!==o(this,Ke)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,...t})}updateParams(t,e){if(o(this,ps)){switch(t){case Bt.CREATE:this.currentLayer.addNewEditor(e);return;case Bt.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(o(this,Rp)||x(this,Rp,new Map)).set(t,e),this.showAllEditors("highlight",e);break}if(this.hasSelection)for(const n of o(this,Jt))n.updateParams(t,e);else for(const n of o(this,ps))n.updateDefaultParams(t,e)}}showAllEditors(t,e,n=!1){var l;for(const c of o(this,ke).values())c.editorType===t&&c.show(e);(((l=o(this,Rp))==null?void 0:l.get(Bt.HIGHLIGHT_SHOW_ALL))??!0)!==e&&T(this,rt,Xa).call(this,[[Bt.HIGHLIGHT_SHOW_ALL,e]])}enableWaiting(t=!1){if(o(this,Mp)!==t){x(this,Mp,t);for(const e of o(this,ti).values())t?e.disableClick():e.enableClick(),e.div.classList.toggle("waiting",t)}}*getEditors(t){for(const e of o(this,ke).values())e.pageIndex===t&&(yield e)}getEditor(t){return o(this,ke).get(t)}addEditor(t){o(this,ke).set(t.id,t)}removeEditor(t){var e,n;t.div.contains(document.activeElement)&&(o(this,ea)&&clearTimeout(o(this,ea)),x(this,ea,setTimeout(()=>{this.focusMainContainer(),x(this,ea,null)},0))),o(this,ke).delete(t.id),t.annotationElementId&&((e=o(this,wo))==null||e.delete(t.annotationElementId)),this.unselect(t),(!t.annotationElementId||!o(this,yo).has(t.annotationElementId))&&((n=o(this,ds))==null||n.remove(t.id))}addDeletedAnnotationElement(t){o(this,yo).add(t.annotationElementId),this.addChangedExistingAnnotation(t),t.deleted=!0}isDeletedAnnotationElement(t){return o(this,yo).has(t)}removeDeletedAnnotationElement(t){o(this,yo).delete(t.annotationElementId),this.removeChangedExistingAnnotation(t),t.deleted=!1}setActiveEditor(t){o(this,Nn)!==t&&(x(this,Nn,t),t&&T(this,rt,Xa).call(this,t.propertiesToUpdate))}updateUI(t){o(this,rt,b2)===t&&T(this,rt,Xa).call(this,t.propertiesToUpdate)}updateUIForDefaultProperties(t){T(this,rt,Xa).call(this,t.defaultPropertiesToUpdate)}toggleSelected(t){if(o(this,Jt).has(t)){o(this,Jt).delete(t),t.unselect(),T(this,rt,Hi).call(this,{hasSelectedEditor:this.hasSelection});return}o(this,Jt).add(t),t.select(),T(this,rt,Xa).call(this,t.propertiesToUpdate),T(this,rt,Hi).call(this,{hasSelectedEditor:!0})}setSelected(t){var e;this.updateToolbar({mode:t.mode,editId:t.id}),(e=o(this,bo))==null||e.commitOrRemove();for(const n of o(this,Jt))n!==t&&n.unselect();o(this,Jt).clear(),o(this,Jt).add(t),t.select(),T(this,rt,Xa).call(this,t.propertiesToUpdate),T(this,rt,Hi).call(this,{hasSelectedEditor:!0})}isSelected(t){return o(this,Jt).has(t)}get firstSelectedEditor(){return o(this,Jt).values().next().value}unselect(t){t.unselect(),o(this,Jt).delete(t),T(this,rt,Hi).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return o(this,Jt).size!==0}get isEnterHandled(){return o(this,Jt).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){var t;o(this,fs).undo(),T(this,rt,Hi).call(this,{hasSomethingToUndo:o(this,fs).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:T(this,rt,Yf).call(this)}),(t=this._editorUndoBar)==null||t.hide()}redo(){o(this,fs).redo(),T(this,rt,Hi).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:o(this,fs).hasSomethingToRedo(),isEmpty:T(this,rt,Yf).call(this)})}addCommands(t){o(this,fs).add(t),T(this,rt,Hi).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:T(this,rt,Yf).call(this)})}cleanUndoStack(t){o(this,fs).cleanType(t)}delete(){var l;this.commitOrRemove();const t=(l=this.currentLayer)==null?void 0:l.endDrawingSession(!0);if(!this.hasSelection&&!t)return;const e=t?[t]:[...o(this,Jt)],n=()=>{var c;(c=this._editorUndoBar)==null||c.show(a,e.length===1?e[0].editorType:e.length);for(const h of e)h.remove()},a=()=>{for(const c of e)T(this,rt,hA).call(this,c)};this.addCommands({cmd:n,undo:a,mustExec:!0})}commitOrRemove(){var t;(t=o(this,Nn))==null||t.commitOrRemove()}hasSomethingToControl(){return o(this,Nn)||this.hasSelection}selectAll(){for(const t of o(this,Jt))t.commit();T(this,rt,dA).call(this,o(this,ke).values())}unselectAll(){var t;if(!(o(this,Nn)&&(o(this,Nn).commitOrRemove(),o(this,Ke)!==At.NONE))&&!((t=o(this,bo))!=null&&t.commitOrRemove())&&this.hasSelection){for(const e of o(this,Jt))e.unselect();o(this,Jt).clear(),T(this,rt,Hi).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(t,e,n=!1){if(n||this.commitOrRemove(),!this.hasSelection)return;o(this,_o)[0]+=t,o(this,_o)[1]+=e;const[a,l]=o(this,_o),c=[...o(this,Jt)],h=1e3;o(this,na)&&clearTimeout(o(this,na)),x(this,na,setTimeout(()=>{x(this,na,null),o(this,_o)[0]=o(this,_o)[1]=0,this.addCommands({cmd:()=>{for(const f of c)o(this,ke).has(f.id)&&(f.translateInPage(a,l),f.translationDone())},undo:()=>{for(const f of c)o(this,ke).has(f.id)&&(f.translateInPage(-a,-l),f.translationDone())},mustExec:!1})},h));for(const f of c)f.translateInPage(t,e),f.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),x(this,ta,new Map);for(const t of o(this,Jt))o(this,ta).set(t,{savedX:t.x,savedY:t.y,savedPageIndex:t.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!o(this,ta))return!1;this.disableUserSelect(!1);const t=o(this,ta);x(this,ta,null);let e=!1;for(const[{x:a,y:l,pageIndex:c},h]of t)h.newX=a,h.newY=l,h.newPageIndex=c,e||(e=a!==h.savedX||l!==h.savedY||c!==h.savedPageIndex);if(!e)return!1;const n=(a,l,c,h)=>{if(o(this,ke).has(a.id)){const f=o(this,ti).get(h);f?a._setParentAndPosition(f,l,c):(a.pageIndex=h,a.x=l,a.y=c)}};return this.addCommands({cmd:()=>{for(const[a,{newX:l,newY:c,newPageIndex:h}]of t)n(a,l,c,h)},undo:()=>{for(const[a,{savedX:l,savedY:c,savedPageIndex:h}]of t)n(a,l,c,h)},mustExec:!0}),!0}dragSelectedEditors(t,e){if(o(this,ta))for(const n of o(this,ta).keys())n.drag(t,e)}rebuild(t){if(t.parent===null){const e=this.getLayer(t.pageIndex);e?(e.changeParent(t),e.addOrRebuild(t)):(this.addEditor(t),this.addToAnnotationStorage(t),t.rebuild())}else t.parent.addOrRebuild(t)}get isEditorHandlingKeyboard(){var t;return((t=this.getActive())==null?void 0:t.shouldGetKeyboardEvents())||o(this,Jt).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(t){return o(this,Nn)===t}getActive(){return o(this,Nn)}getMode(){return o(this,Ke)}isEditingMode(){return o(this,Ke)!==At.NONE}get imageManager(){return Ct(this,"imageManager",new aA)}getSelectionBoxes(t){if(!t)return null;const e=document.getSelection();for(let p=0,m=e.rangeCount;p<m;p++)if(!t.contains(e.getRangeAt(p).commonAncestorContainer))return null;const{x:n,y:a,width:l,height:c}=t.getBoundingClientRect();let h;switch(t.getAttribute("data-main-rotation")){case"90":h=(p,m,y,v)=>({x:(m-a)/c,y:1-(p+y-n)/l,width:v/c,height:y/l});break;case"180":h=(p,m,y,v)=>({x:1-(p+y-n)/l,y:1-(m+v-a)/c,width:y/l,height:v/c});break;case"270":h=(p,m,y,v)=>({x:1-(m+v-a)/c,y:(p-n)/l,width:v/c,height:y/l});break;default:h=(p,m,y,v)=>({x:(p-n)/l,y:(m-a)/c,width:y/l,height:v/c});break}const f=[];for(let p=0,m=e.rangeCount;p<m;p++){const y=e.getRangeAt(p);if(!y.collapsed)for(const{x:v,y:w,width:C,height:_}of y.getClientRects())C===0||_===0||f.push(h(v,w,C,_))}return f.length===0?null:f}addChangedExistingAnnotation({annotationElementId:t,id:e}){(o(this,mh)||x(this,mh,new Map)).set(t,e)}removeChangedExistingAnnotation({annotationElementId:t}){var e;(e=o(this,mh))==null||e.delete(t)}renderAnnotationElement(t){var a;const e=(a=o(this,mh))==null?void 0:a.get(t.data.id);if(!e)return;const n=o(this,ds).getRawValue(e);n&&(o(this,Ke)===At.NONE&&!n.hasBeenModified||n.renderAnnotationElement(t))}setMissingCanvas(t,e,n){var l;const a=(l=o(this,wo))==null?void 0:l.get(t);a&&(a.setCanvas(e,n),o(this,wo).delete(t))}addMissingCanvas(t,e){(o(this,wo)||x(this,wo,new Map)).set(t,e)}};fh=new WeakMap,Nn=new WeakMap,ph=new WeakMap,ke=new WeakMap,ti=new WeakMap,gh=new WeakMap,ds=new WeakMap,mh=new WeakMap,fs=new WeakMap,ki=new WeakMap,mo=new WeakMap,bo=new WeakMap,bh=new WeakMap,yo=new WeakMap,ta=new WeakMap,ps=new WeakMap,Fl=new WeakMap,_p=new WeakMap,Cp=new WeakMap,yh=new WeakMap,Np=new WeakMap,ea=new WeakMap,vo=new WeakMap,vh=new WeakMap,xo=new WeakMap,ia=new WeakMap,I0=new WeakMap,Ao=new WeakMap,xh=new WeakMap,Mp=new WeakMap,So=new WeakMap,Ul=new WeakMap,Ah=new WeakMap,wo=new WeakMap,Dp=new WeakMap,Ke=new WeakMap,Jt=new WeakMap,Wa=new WeakMap,Eo=new WeakMap,To=new WeakMap,Rp=new WeakMap,Sh=new WeakMap,Lp=new WeakMap,_o=new WeakMap,na=new WeakMap,Za=new WeakMap,kp=new WeakMap,Op=new WeakMap,gs=new WeakMap,rt=new WeakSet,Fb=function({anchorNode:t}){return t.nodeType===Node.TEXT_NODE?t.parentElement:t},oA=function(t){const{currentLayer:e}=this;if(e.hasTextLayer(t))return e;for(const n of o(this,ti).values())if(n.hasTextLayer(t))return n;return null},l2=function(){const t=document.getSelection();if(!t||t.isCollapsed)return;const n=T(this,rt,Fb).call(this,t).closest(".textLayer"),a=this.getSelectionBoxes(n);a&&(o(this,ia)||x(this,ia,new VO(this)),o(this,ia).show(n,a,this.direction==="ltr"))},c2=function(){var l,c,h;const t=document.getSelection();if(!t||t.isCollapsed){o(this,Wa)&&((l=o(this,ia))==null||l.hide(),x(this,Wa,null),T(this,rt,Hi).call(this,{hasSelectedText:!1}));return}const{anchorNode:e}=t;if(e===o(this,Wa))return;const a=T(this,rt,Fb).call(this,t).closest(".textLayer");if(!a){o(this,Wa)&&((c=o(this,ia))==null||c.hide(),x(this,Wa,null),T(this,rt,Hi).call(this,{hasSelectedText:!1}));return}if((h=o(this,ia))==null||h.hide(),x(this,Wa,e),T(this,rt,Hi).call(this,{hasSelectedText:!0}),!(o(this,Ke)!==At.HIGHLIGHT&&o(this,Ke)!==At.NONE)&&(o(this,Ke)===At.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),x(this,xo,this.isShiftKeyDown),!this.isShiftKeyDown)){const f=o(this,Ke)===At.HIGHLIGHT?T(this,rt,oA).call(this,a):null;if(f==null||f.toggleDrawing(),o(this,xh)){const p=new AbortController,m=this.combinedSignal(p),y=v=>{v.type==="pointerup"&&v.button!==0||(p.abort(),f==null||f.toggleDrawing(!0),v.type==="pointerup"&&T(this,rt,Xf).call(this,"main_toolbar"))};window.addEventListener("pointerup",y,{signal:m}),window.addEventListener("blur",y,{signal:m})}else f==null||f.toggleDrawing(!0),T(this,rt,Xf).call(this,"main_toolbar")}},Xf=function(t=""){o(this,Ke)===At.HIGHLIGHT?this.highlightSelection(t):o(this,_p)&&T(this,rt,l2).call(this)},u2=function(){document.addEventListener("selectionchange",T(this,rt,c2).bind(this),{signal:this._signal})},h2=function(){if(o(this,vo))return;x(this,vo,new AbortController);const t=this.combinedSignal(o(this,vo));window.addEventListener("focus",this.focus.bind(this),{signal:t}),window.addEventListener("blur",this.blur.bind(this),{signal:t})},d2=function(){var t;(t=o(this,vo))==null||t.abort(),x(this,vo,null)},lA=function(){if(o(this,So))return;x(this,So,new AbortController);const t=this.combinedSignal(o(this,So));window.addEventListener("keydown",this.keydown.bind(this),{signal:t}),window.addEventListener("keyup",this.keyup.bind(this),{signal:t})},f2=function(){var t;(t=o(this,So))==null||t.abort(),x(this,So,null)},cA=function(){if(o(this,mo))return;x(this,mo,new AbortController);const t=this.combinedSignal(o(this,mo));document.addEventListener("copy",this.copy.bind(this),{signal:t}),document.addEventListener("cut",this.cut.bind(this),{signal:t}),document.addEventListener("paste",this.paste.bind(this),{signal:t})},uA=function(){var t;(t=o(this,mo))==null||t.abort(),x(this,mo,null)},p2=function(){const t=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:t}),document.addEventListener("drop",this.drop.bind(this),{signal:t})},Hi=function(t){Object.entries(t).some(([n,a])=>o(this,Lp)[n]!==a)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(o(this,Lp),t)}),o(this,Ke)===At.HIGHLIGHT&&t.hasSelectedEditor===!1&&T(this,rt,Xa).call(this,[[Bt.HIGHLIGHT_FREE,!0]]))},Xa=function(t){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:t})},g2=async function(){if(!o(this,Ao)){x(this,Ao,!0);const t=[];for(const e of o(this,ti).values())t.push(e.enable());await Promise.all(t);for(const e of o(this,ke).values())e.enable()}},m2=function(){if(this.unselectAll(),o(this,Ao)){x(this,Ao,!1);for(const t of o(this,ti).values())t.disable();for(const t of o(this,ke).values())t.disable()}},hA=function(t){const e=o(this,ti).get(t.pageIndex);e?e.addOrRebuild(t):(this.addEditor(t),this.addToAnnotationStorage(t))},b2=function(){let t=null;for(t of o(this,Jt));return t},Yf=function(){if(o(this,ke).size===0)return!0;if(o(this,ke).size===1)for(const t of o(this,ke).values())return t.isEmpty();return!1},dA=function(t){for(const e of o(this,Jt))e.unselect();o(this,Jt).clear();for(const e of t)e.isEmpty()||(o(this,Jt).add(e),e.select());T(this,rt,Hi).call(this,{hasSelectedEditor:this.hasSelection})},nt(eh,"TRANSLATE_SMALL",1),nt(eh,"TRANSLATE_BIG",10);let cl=eh;var ri,sa,Ds,wh,aa,Mn,Eh,ra,ln,Ja,Hl,oa,Co,Hs,$f,Ub;const Gi=class Gi{constructor(t){E(this,Hs);E(this,ri,null);E(this,sa,!1);E(this,Ds,null);E(this,wh,null);E(this,aa,null);E(this,Mn,null);E(this,Eh,!1);E(this,ra,null);E(this,ln,null);E(this,Ja,null);E(this,Hl,null);E(this,oa,!1);x(this,ln,t),x(this,oa,t._uiManager.useNewAltTextFlow),o(Gi,Co)||x(Gi,Co,Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"}))}static initialize(t){Gi._l10n??(Gi._l10n=t)}async render(){const t=x(this,Ds,document.createElement("button"));t.className="altText",t.tabIndex="0";const e=x(this,wh,document.createElement("span"));t.append(e),o(this,oa)?(t.classList.add("new"),t.setAttribute("data-l10n-id",o(Gi,Co).missing),e.setAttribute("data-l10n-id",o(Gi,Co)["missing-label"])):(t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const n=o(this,ln)._uiManager._signal;t.addEventListener("contextmenu",Wn,{signal:n}),t.addEventListener("pointerdown",l=>l.stopPropagation(),{signal:n});const a=l=>{l.preventDefault(),o(this,ln)._uiManager.editAltText(o(this,ln)),o(this,oa)&&o(this,ln)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:o(this,Hs,$f)}})};return t.addEventListener("click",a,{capture:!0,signal:n}),t.addEventListener("keydown",l=>{l.target===t&&l.key==="Enter"&&(x(this,Eh,!0),a(l))},{signal:n}),await T(this,Hs,Ub).call(this),t}finish(){o(this,Ds)&&(o(this,Ds).focus({focusVisible:o(this,Eh)}),x(this,Eh,!1))}isEmpty(){return o(this,oa)?o(this,ri)===null:!o(this,ri)&&!o(this,sa)}hasData(){return o(this,oa)?o(this,ri)!==null||!!o(this,Ja):this.isEmpty()}get guessedText(){return o(this,Ja)}async setGuessedText(t){o(this,ri)===null&&(x(this,Ja,t),x(this,Hl,await Gi._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:t})),T(this,Hs,Ub).call(this))}toggleAltTextBadge(t=!1){var e;if(!o(this,oa)||o(this,ri)){(e=o(this,ra))==null||e.remove(),x(this,ra,null);return}if(!o(this,ra)){const n=x(this,ra,document.createElement("div"));n.className="noAltTextBadge",o(this,ln).div.append(n)}o(this,ra).classList.toggle("hidden",!t)}serialize(t){let e=o(this,ri);return!t&&o(this,Ja)===e&&(e=o(this,Hl)),{altText:e,decorative:o(this,sa),guessedText:o(this,Ja),textWithDisclaimer:o(this,Hl)}}get data(){return{altText:o(this,ri),decorative:o(this,sa)}}set data({altText:t,decorative:e,guessedText:n,textWithDisclaimer:a,cancel:l=!1}){n&&(x(this,Ja,n),x(this,Hl,a)),!(o(this,ri)===t&&o(this,sa)===e)&&(l||(x(this,ri,t),x(this,sa,e)),T(this,Hs,Ub).call(this))}toggle(t=!1){o(this,Ds)&&(!t&&o(this,Mn)&&(clearTimeout(o(this,Mn)),x(this,Mn,null)),o(this,Ds).disabled=!t)}shown(){o(this,ln)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:o(this,Hs,$f)}})}destroy(){var t,e;(t=o(this,Ds))==null||t.remove(),x(this,Ds,null),x(this,wh,null),x(this,aa,null),(e=o(this,ra))==null||e.remove(),x(this,ra,null)}};ri=new WeakMap,sa=new WeakMap,Ds=new WeakMap,wh=new WeakMap,aa=new WeakMap,Mn=new WeakMap,Eh=new WeakMap,ra=new WeakMap,ln=new WeakMap,Ja=new WeakMap,Hl=new WeakMap,oa=new WeakMap,Co=new WeakMap,Hs=new WeakSet,$f=function(){return o(this,ri)&&"added"||o(this,ri)===null&&this.guessedText&&"review"||"missing"},Ub=async function(){var a,l,c;const t=o(this,Ds);if(!t)return;if(o(this,oa)){if(t.classList.toggle("done",!!o(this,ri)),t.setAttribute("data-l10n-id",o(Gi,Co)[o(this,Hs,$f)]),(a=o(this,wh))==null||a.setAttribute("data-l10n-id",o(Gi,Co)[`${o(this,Hs,$f)}-label`]),!o(this,ri)){(l=o(this,aa))==null||l.remove();return}}else{if(!o(this,ri)&&!o(this,sa)){t.classList.remove("done"),(c=o(this,aa))==null||c.remove();return}t.classList.add("done"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let e=o(this,aa);if(!e){x(this,aa,e=document.createElement("span")),e.className="tooltip",e.setAttribute("role","tooltip"),e.id=`alt-text-tooltip-${o(this,ln).id}`;const h=100,f=o(this,ln)._uiManager._signal;f.addEventListener("abort",()=>{clearTimeout(o(this,Mn)),x(this,Mn,null)},{once:!0}),t.addEventListener("mouseenter",()=>{x(this,Mn,setTimeout(()=>{x(this,Mn,null),o(this,aa).classList.add("show"),o(this,ln)._reportTelemetry({action:"alt_text_tooltip"})},h))},{signal:f}),t.addEventListener("mouseleave",()=>{var p;o(this,Mn)&&(clearTimeout(o(this,Mn)),x(this,Mn,null)),(p=o(this,aa))==null||p.classList.remove("show")},{signal:f})}o(this,sa)?e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(e.removeAttribute("data-l10n-id"),e.textContent=o(this,ri)),e.parentNode||t.append(e);const n=o(this,ln).getElementForAltText();n==null||n.setAttribute("aria-describedby",e.id)},E(Gi,Co,null),nt(Gi,"_l10n",null);let T0=Gi;var Ai,ms,Gl,me,jp,Vl,Rs,ql,Xl,Yl,Bp,fA;class Mb{constructor(t){E(this,Bp);E(this,Ai,null);E(this,ms,null);E(this,Gl,!1);E(this,me,null);E(this,jp,null);E(this,Vl,null);E(this,Rs,null);E(this,ql,null);E(this,Xl,!1);E(this,Yl,null);x(this,me,t)}renderForToolbar(){const t=x(this,ms,document.createElement("button"));return t.className="comment",T(this,Bp,fA).call(this,t,!1)}renderForStandalone(){const t=x(this,Ai,document.createElement("button"));t.className="annotationCommentButton";const e=o(this,me).commentButtonPosition;if(e){const{style:n}=t;n.insetInlineEnd=`calc(${100*(o(this,me)._uiManager.direction==="ltr"?1-e[0]:e[0])}% - var(--comment-button-dim))`,n.top=`calc(${100*e[1]}% - var(--comment-button-dim))`;const a=o(this,me).commentButtonColor;a&&(n.backgroundColor=a)}return T(this,Bp,fA).call(this,t,!0)}focusButton(){setTimeout(()=>{var t;(t=o(this,Ai)??o(this,ms))==null||t.focus()},0)}onUpdatedColor(){if(!o(this,Ai))return;const t=o(this,me).commentButtonColor;t&&(o(this,Ai).style.backgroundColor=t),o(this,me)._uiManager.updatePopupColor(o(this,me))}get commentButtonWidth(){var t;return(((t=o(this,Ai))==null?void 0:t.getBoundingClientRect().width)??0)/o(this,me).parent.boundingClientRect.width}get commentPopupPositionInLayer(){if(o(this,Yl))return o(this,Yl);if(!o(this,Ai))return null;const{x:t,y:e,height:n}=o(this,Ai).getBoundingClientRect(),{x:a,y:l,width:c,height:h}=o(this,me).parent.boundingClientRect;return[(t-a)/c,(e+n-l)/h]}set commentPopupPositionInLayer(t){x(this,Yl,t)}hasDefaultPopupPosition(){return o(this,Yl)===null}removeStandaloneCommentButton(){var t;(t=o(this,Ai))==null||t.remove(),x(this,Ai,null)}removeToolbarCommentButton(){var t;(t=o(this,ms))==null||t.remove(),x(this,ms,null)}setCommentButtonStates({selected:t,hasPopup:e}){o(this,Ai)&&(o(this,Ai).classList.toggle("selected",t),o(this,Ai).ariaExpanded=e)}edit(t){const e=this.commentPopupPositionInLayer;let n,a;if(e)[n,a]=e;else{[n,a]=o(this,me).commentButtonPosition;const{width:m,height:y,x:v,y:w}=o(this,me);n=v+n*m,a=w+a*y}const l=o(this,me).parent.boundingClientRect,{x:c,y:h,width:f,height:p}=l;o(this,me)._uiManager.editComment(o(this,me),c+n*f,h+a*p,{...t,parentDimensions:l})}finish(){o(this,ms)&&(o(this,ms).focus({focusVisible:o(this,Gl)}),x(this,Gl,!1))}isDeleted(){return o(this,Xl)||o(this,Rs)===""}isEmpty(){return o(this,Rs)===null}hasBeenEdited(){return this.isDeleted()||o(this,Rs)!==o(this,jp)}serialize(){return this.data}get data(){return{text:o(this,Rs),richText:o(this,Vl),date:o(this,ql),deleted:this.isDeleted()}}set data(t){if(t!==o(this,Rs)&&x(this,Vl,null),t===null){x(this,Rs,""),x(this,Xl,!0);return}x(this,Rs,t),x(this,ql,new Date),x(this,Xl,!1)}setInitialText(t,e=null){x(this,jp,t),this.data=t,x(this,ql,null),x(this,Vl,e)}shown(){}destroy(){var t,e;(t=o(this,ms))==null||t.remove(),x(this,ms,null),(e=o(this,Ai))==null||e.remove(),x(this,Ai,null),x(this,Rs,""),x(this,Vl,null),x(this,ql,null),x(this,me,null),x(this,Gl,!1),x(this,Xl,!1)}}Ai=new WeakMap,ms=new WeakMap,Gl=new WeakMap,me=new WeakMap,jp=new WeakMap,Vl=new WeakMap,Rs=new WeakMap,ql=new WeakMap,Xl=new WeakMap,Yl=new WeakMap,Bp=new WeakSet,fA=function(t,e){if(!o(this,me)._uiManager.hasCommentManager())return null;t.tabIndex="0",t.ariaHasPopup="dialog",e?(t.ariaControls="commentPopup",t.setAttribute("data-l10n-id","pdfjs-show-comment-button")):(t.ariaControlsElements=[o(this,me)._uiManager.getCommentDialogElement()],t.setAttribute("data-l10n-id","pdfjs-editor-edit-comment-button"));const n=o(this,me)._uiManager._signal;if(!(n instanceof AbortSignal)||n.aborted)return t;t.addEventListener("contextmenu",Wn,{signal:n}),e&&(t.addEventListener("focusin",l=>{o(this,me)._focusEventsAllowed=!1,Me(l)},{capture:!0,signal:n}),t.addEventListener("focusout",l=>{o(this,me)._focusEventsAllowed=!0,Me(l)},{capture:!0,signal:n})),t.addEventListener("pointerdown",l=>l.stopPropagation(),{signal:n});const a=l=>{l.preventDefault(),t===o(this,ms)?this.edit():o(this,me).toggleComment(!0)};return t.addEventListener("click",a,{capture:!0,signal:n}),t.addEventListener("keydown",l=>{l.target===t&&l.key==="Enter"&&(x(this,Gl,!0),a(l))},{signal:n}),t.addEventListener("pointerenter",()=>{o(this,me).toggleComment(!1,!0)},{signal:n}),t.addEventListener("pointerleave",()=>{o(this,me).toggleComment(!1,!1)},{signal:n}),t};var Th,$l,zp,Pp,Ip,Fp,Up,tr,Kl,er,Ql,ir,ul,y2,v2,x2;const tw=class tw{constructor({container:t,isPinchingDisabled:e=null,isPinchingStopped:n=null,onPinchStart:a=null,onPinching:l=null,onPinchEnd:c=null,signal:h}){E(this,ul);E(this,Th);E(this,$l,!1);E(this,zp,null);E(this,Pp);E(this,Ip);E(this,Fp);E(this,Up);E(this,tr,null);E(this,Kl);E(this,er,null);E(this,Ql);E(this,ir,null);x(this,Th,t),x(this,zp,n),x(this,Pp,e),x(this,Ip,a),x(this,Fp,l),x(this,Up,c),x(this,Ql,new AbortController),x(this,Kl,AbortSignal.any([h,o(this,Ql).signal])),t.addEventListener("touchstart",T(this,ul,y2).bind(this),{passive:!1,signal:o(this,Kl)})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/qs.pixelRatio}destroy(){var t,e;(t=o(this,Ql))==null||t.abort(),x(this,Ql,null),(e=o(this,tr))==null||e.abort(),x(this,tr,null)}};Th=new WeakMap,$l=new WeakMap,zp=new WeakMap,Pp=new WeakMap,Ip=new WeakMap,Fp=new WeakMap,Up=new WeakMap,tr=new WeakMap,Kl=new WeakMap,er=new WeakMap,Ql=new WeakMap,ir=new WeakMap,ul=new WeakSet,y2=function(t){var a,l,c;if((a=o(this,Pp))!=null&&a.call(this))return;if(t.touches.length===1){if(o(this,tr))return;const h=x(this,tr,new AbortController),f=AbortSignal.any([o(this,Kl),h.signal]),p=o(this,Th),m={capture:!0,signal:f,passive:!1},y=v=>{var w;v.pointerType==="touch"&&((w=o(this,tr))==null||w.abort(),x(this,tr,null))};p.addEventListener("pointerdown",v=>{v.pointerType==="touch"&&(Me(v),y(v))},m),p.addEventListener("pointerup",y,m),p.addEventListener("pointercancel",y,m);return}if(!o(this,ir)){x(this,ir,new AbortController);const h=AbortSignal.any([o(this,Kl),o(this,ir).signal]),f=o(this,Th),p={signal:h,capture:!1,passive:!1};f.addEventListener("touchmove",T(this,ul,v2).bind(this),p);const m=T(this,ul,x2).bind(this);f.addEventListener("touchend",m,p),f.addEventListener("touchcancel",m,p),p.capture=!0,f.addEventListener("pointerdown",Me,p),f.addEventListener("pointermove",Me,p),f.addEventListener("pointercancel",Me,p),f.addEventListener("pointerup",Me,p),(l=o(this,Ip))==null||l.call(this)}if(Me(t),t.touches.length!==2||(c=o(this,zp))!=null&&c.call(this)){x(this,er,null);return}let[e,n]=t.touches;e.identifier>n.identifier&&([e,n]=[n,e]),x(this,er,{touch0X:e.screenX,touch0Y:e.screenY,touch1X:n.screenX,touch1Y:n.screenY})},v2=function(t){var k;if(!o(this,er)||t.touches.length!==2)return;Me(t);let[e,n]=t.touches;e.identifier>n.identifier&&([e,n]=[n,e]);const{screenX:a,screenY:l}=e,{screenX:c,screenY:h}=n,f=o(this,er),{touch0X:p,touch0Y:m,touch1X:y,touch1Y:v}=f,w=y-p,C=v-m,_=c-a,M=h-l,N=Math.hypot(_,M)||1,R=Math.hypot(w,C)||1;if(!o(this,$l)&&Math.abs(R-N)<=tw.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(f.touch0X=a,f.touch0Y=l,f.touch1X=c,f.touch1Y=h,!o(this,$l)){x(this,$l,!0);return}const L=[(a+c)/2,(l+h)/2];(k=o(this,Fp))==null||k.call(this,L,R,N)},x2=function(t){var e;t.touches.length>=2||(o(this,ir)&&(o(this,ir).abort(),x(this,ir,null),(e=o(this,Up))==null||e.call(this)),o(this,er)&&(Me(t),x(this,er,null),x(this,$l,!1)))};let mp=tw;var Wl,Ls,Te,he,nr,_h,No,Hp,Si,Zl,sr,la,Mo,Gp,Jl,Dn,Vp,tc,ar,ca,Ch,Nh,bs,ec,qp,F0,vt,pA,Xp,gA,Hb,A2,S2,mA,Gb,bA,w2,E2,T2,yA,_2,vA,C2,N2,M2,xA,Kf;const wt=class wt{constructor(t){E(this,vt);E(this,Wl,null);E(this,Ls,null);E(this,Te,null);E(this,he,null);E(this,nr,null);E(this,_h,!1);E(this,No,null);E(this,Hp,"");E(this,Si,null);E(this,Zl,null);E(this,sr,null);E(this,la,null);E(this,Mo,null);E(this,Gp,"");E(this,Jl,!1);E(this,Dn,null);E(this,Vp,!1);E(this,tc,!1);E(this,ar,!1);E(this,ca,null);E(this,Ch,0);E(this,Nh,0);E(this,bs,null);E(this,ec,null);nt(this,"isSelected",!1);nt(this,"_isCopy",!1);nt(this,"_editToolbar",null);nt(this,"_initialOptions",Object.create(null));nt(this,"_initialData",null);nt(this,"_isVisible",!0);nt(this,"_uiManager",null);nt(this,"_focusEventsAllowed",!0);E(this,qp,!1);E(this,F0,wt._zIndex++);this.parent=t.parent,this.id=t.id,this.width=this.height=null,this.pageIndex=t.parent.pageIndex,this.name=t.name,this.div=null,this._uiManager=t.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=t.isCentered,this._structTreeParentId=null,this.annotationElementId=t.annotationElementId||null,this.creationDate=t.creationDate||new Date,this.modificationDate=t.modificationDate||null;const{rotation:e,rawDims:{pageWidth:n,pageHeight:a,pageX:l,pageY:c}}=this.parent.viewport;this.rotation=e,this.pageRotation=(360+e-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[n,a],this.pageTranslation=[l,c];const[h,f]=this.parentDimensions;this.x=t.x/h,this.y=t.y/f,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const t=wt.prototype._resizeWithKeyboard,e=cl.TRANSLATE_SMALL,n=cl.TRANSLATE_BIG;return Ct(this,"_resizerKeyboardManager",new sm([[["ArrowLeft","mac+ArrowLeft"],t,{args:[-e,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t,{args:[-n,0]}],[["ArrowRight","mac+ArrowRight"],t,{args:[e,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t,{args:[n,0]}],[["ArrowUp","mac+ArrowUp"],t,{args:[0,-e]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t,{args:[0,-n]}],[["ArrowDown","mac+ArrowDown"],t,{args:[0,e]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t,{args:[0,n]}],[["Escape","mac+Escape"],wt.prototype._stopResizingWithKeyboard]]))}get editorType(){return Object.getPrototypeOf(this).constructor._type}get mode(){return Object.getPrototypeOf(this).constructor._editorType}static get isDrawer(){return!1}static get _defaultLineColor(){return Ct(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(t){const e=new YO({id:t.parent.getNextId(),parent:t.parent,uiManager:t._uiManager});e.annotationElementId=t.annotationElementId,e.deleted=!0,e._uiManager.addToAnnotationStorage(e)}static initialize(t,e){if(wt._l10n??(wt._l10n=t),wt._l10nResizer||(wt._l10nResizer=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"})),wt._borderLineWidth!==-1)return;const n=getComputedStyle(document.documentElement);wt._borderLineWidth=parseFloat(n.getPropertyValue("--outline-width"))||0}static updateDefaultParams(t,e){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(t){return!1}static paste(t,e){ge("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return o(this,qp)}set _isDraggable(t){var e;x(this,qp,t),(e=this.div)==null||e.classList.toggle("draggable",t)}get uid(){return this.annotationElementId||this.id}get isEnterHandled(){return!0}center(){const[t,e]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*e/(t*2),this.y+=this.width*t/(e*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*e/(t*2),this.y-=this.width*t/(e*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(t){this._uiManager.addCommands(t)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=o(this,F0)}setParent(t){var e;t!==null?(this.pageIndex=t.pageIndex,this.pageDimensions=t.pageDimensions):(T(this,vt,Kf).call(this),(e=o(this,la))==null||e.remove(),x(this,la,null)),this.parent=t}focusin(t){this._focusEventsAllowed&&(o(this,Jl)?x(this,Jl,!1):this.parent.setSelected(this))}focusout(t){var n;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const e=t.relatedTarget;e!=null&&e.closest(`#${this.id}`)||(t.preventDefault(),(n=this.parent)!=null&&n.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.isInEditMode()&&this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(t,e,n,a){const[l,c]=this.parentDimensions;[n,a]=this.screenToPageTranslation(n,a),this.x=(t+n)/l,this.y=(e+a)/c,this.fixAndSetPosition()}_moveAfterPaste(t,e){const[n,a]=this.parentDimensions;this.setAt(t*n,e*a,this.width*n,this.height*a),this._onTranslated()}translate(t,e){T(this,vt,pA).call(this,this.parentDimensions,t,e)}translateInPage(t,e){o(this,Dn)||x(this,Dn,[this.x,this.y,this.width,this.height]),T(this,vt,pA).call(this,this.pageDimensions,t,e),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(t,e){o(this,Dn)||x(this,Dn,[this.x,this.y,this.width,this.height]);const{div:n,parentDimensions:[a,l]}=this;if(this.x+=t/a,this.y+=e/l,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:y,y:v}=this.div.getBoundingClientRect();this.parent.findNewParent(this,y,v)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:c,y:h}=this;const[f,p]=this.getBaseTranslation();c+=f,h+=p;const{style:m}=n;m.left=`${(100*c).toFixed(2)}%`,m.top=`${(100*h).toFixed(2)}%`,this._onTranslating(c,h),n.scrollIntoView({block:"nearest"})}_onTranslating(t,e){}_onTranslated(t,e){}get _hasBeenMoved(){return!!o(this,Dn)&&(o(this,Dn)[0]!==this.x||o(this,Dn)[1]!==this.y)}get _hasBeenResized(){return!!o(this,Dn)&&(o(this,Dn)[2]!==this.width||o(this,Dn)[3]!==this.height)}getBaseTranslation(){const[t,e]=this.parentDimensions,{_borderLineWidth:n}=wt,a=n/t,l=n/e;switch(this.rotation){case 90:return[-a,l];case 180:return[a,l];case 270:return[a,-l];default:return[-a,-l]}}get _mustFixPosition(){return!0}fixAndSetPosition(t=this.rotation){const{div:{style:e},pageDimensions:[n,a]}=this;let{x:l,y:c,width:h,height:f}=this;if(h*=n,f*=a,l*=n,c*=a,this._mustFixPosition)switch(t){case 0:l=Pi(l,0,n-h),c=Pi(c,0,a-f);break;case 90:l=Pi(l,0,n-f),c=Pi(c,h,a);break;case 180:l=Pi(l,h,n),c=Pi(c,f,a);break;case 270:l=Pi(l,f,n),c=Pi(c,0,a-h);break}this.x=l/=n,this.y=c/=a;const[p,m]=this.getBaseTranslation();l+=p,c+=m,e.left=`${(100*l).toFixed(2)}%`,e.top=`${(100*c).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(t,e){var n;return T(n=wt,Xp,gA).call(n,t,e,this.parentRotation)}pageTranslationToScreen(t,e){var n;return T(n=wt,Xp,gA).call(n,t,e,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:t,pageDimensions:[e,n]}=this;return[e*t,n*t]}setDims(){const{div:{style:t},width:e,height:n}=this;t.width=`${(100*e).toFixed(2)}%`,t.height=`${(100*n).toFixed(2)}%`}getInitialTranslation(){return[0,0]}_onResized(){}static _round(t){return Math.round(t*1e4)/1e4}_onResizing(){}altTextFinish(){var t;(t=o(this,Te))==null||t.finish()}get toolbarButtons(){return null}async addEditToolbar(){if(this._editToolbar||o(this,tc))return this._editToolbar;this._editToolbar=new nA(this),this.div.append(this._editToolbar.render());const{toolbarButtons:t}=this;if(t)for(const[e,n]of t)await this._editToolbar.addButton(e,n);return this.hasComment||this._editToolbar.addButton("comment",this.addCommentButton()),this._editToolbar.addButton("delete"),this._editToolbar}addCommentButtonInToolbar(){var t;(t=this._editToolbar)==null||t.addButtonBefore("comment",this.addCommentButton(),".deleteButton")}removeCommentButtonFromToolbar(){var t;(t=this._editToolbar)==null||t.removeButton("comment")}removeEditToolbar(){var t,e;(t=this._editToolbar)==null||t.remove(),this._editToolbar=null,(e=o(this,Te))==null||e.destroy()}addContainer(t){var n;const e=(n=this._editToolbar)==null?void 0:n.div;e?e.before(t):this.div.append(t)}getClientDimensions(){return this.div.getBoundingClientRect()}createAltText(){return o(this,Te)||(T0.initialize(wt._l10n),x(this,Te,new T0(this)),o(this,Wl)&&(o(this,Te).data=o(this,Wl),x(this,Wl,null))),o(this,Te)}get altTextData(){var t;return(t=o(this,Te))==null?void 0:t.data}set altTextData(t){o(this,Te)&&(o(this,Te).data=t)}get guessedAltText(){var t;return(t=o(this,Te))==null?void 0:t.guessedText}async setGuessedAltText(t){var e;await((e=o(this,Te))==null?void 0:e.setGuessedText(t))}serializeAltText(t){var e;return(e=o(this,Te))==null?void 0:e.serialize(t)}hasAltText(){return!!o(this,Te)&&!o(this,Te).isEmpty()}hasAltTextData(){var t;return((t=o(this,Te))==null?void 0:t.hasData())??!1}focusCommentButton(){var t;(t=o(this,he))==null||t.focusButton()}addCommentButton(){return o(this,he)||x(this,he,new Mb(this))}addStandaloneCommentButton(){if(o(this,nr)){this._uiManager.isEditingMode()&&o(this,nr).classList.remove("hidden");return}this.hasComment&&(x(this,nr,o(this,he).renderForStandalone()),this.div.append(o(this,nr)))}removeStandaloneCommentButton(){o(this,he).removeStandaloneCommentButton(),x(this,nr,null)}hideStandaloneCommentButton(){var t;(t=o(this,nr))==null||t.classList.add("hidden")}get comment(){const{data:{richText:t,text:e,date:n,deleted:a}}=o(this,he);return{text:e,richText:t,date:n,deleted:a,color:this.getNonHCMColor(),opacity:this.opacity??1}}set comment(t){o(this,he)||x(this,he,new Mb(this)),o(this,he).data=t,this.hasComment?(this.removeCommentButtonFromToolbar(),this.addStandaloneCommentButton(),this._uiManager.updateComment(this)):(this.addCommentButtonInToolbar(),this.removeStandaloneCommentButton(),this._uiManager.removeComment(this))}setCommentData({comment:t,popupRef:e,richText:n}){if(!e||(o(this,he)||x(this,he,new Mb(this)),o(this,he).setInitialText(t,n),!this.annotationElementId))return;const a=this._uiManager.getAndRemoveDataFromAnnotationStorage(this.annotationElementId);a&&this.updateFromAnnotationLayer(a)}get hasEditedComment(){var t;return(t=o(this,he))==null?void 0:t.hasBeenEdited()}get hasDeletedComment(){var t;return(t=o(this,he))==null?void 0:t.isDeleted()}get hasComment(){return!!o(this,he)&&!o(this,he).isEmpty()&&!o(this,he).isDeleted()}async editComment(t){o(this,he)||x(this,he,new Mb(this)),o(this,he).edit(t)}toggleComment(t,e=void 0){this.hasComment&&this._uiManager.toggleComment(this,t,e)}setSelectedCommentButton(t){o(this,he).setSelectedButton(t)}addComment(t){if(this.hasEditedComment){const[,,,a]=t.rect,[l]=this.pageDimensions,[c]=this.pageTranslation,h=c+l+1,f=a-100,p=h+180;t.popup={contents:this.comment.text,deleted:this.comment.deleted,rect:[h,f,p,a]}}}updateFromAnnotationLayer({popup:{contents:t,deleted:e}}){o(this,he).data=e?null:t}get parentBoundingClientRect(){return this.parent.boundingClientRect}render(){var c;const t=this.div=document.createElement("div");t.setAttribute("data-editor-rotation",(360-this.rotation)%360),t.className=this.name,t.setAttribute("id",this.id),t.tabIndex=o(this,_h)?-1:0,t.setAttribute("role","application"),this.defaultL10nId&&t.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||t.classList.add("hidden"),this.setInForeground(),T(this,vt,vA).call(this);const[e,n]=this.parentDimensions;this.parentRotation%180!==0&&(t.style.maxWidth=`${(100*n/e).toFixed(2)}%`,t.style.maxHeight=`${(100*e/n).toFixed(2)}%`);const[a,l]=this.getInitialTranslation();return this.translate(a,l),r2(this,t,["keydown","pointerdown","dblclick"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(o(this,ec)||x(this,ec,new mp({container:t,isPinchingDisabled:()=>!this.isSelected,onPinchStart:T(this,vt,w2).bind(this),onPinching:T(this,vt,E2).bind(this),onPinchEnd:T(this,vt,T2).bind(this),signal:this._uiManager._signal}))),this.addStandaloneCommentButton(),(c=this._uiManager._editorUndoBar)==null||c.hide(),t}pointerdown(t){const{isMac:e}=fi.platform;if(t.button!==0||t.ctrlKey&&e){t.preventDefault();return}if(x(this,Jl,!0),this._isDraggable){T(this,vt,_2).call(this,t);return}T(this,vt,yA).call(this,t)}_onStartDragging(){}_onStopDragging(){}moveInDOM(){o(this,ca)&&clearTimeout(o(this,ca)),x(this,ca,setTimeout(()=>{var t;x(this,ca,null),(t=this.parent)==null||t.moveEditorInDOM(this)},0))}_setParentAndPosition(t,e,n){t.changeParent(this),this.x=e,this.y=n,this.fixAndSetPosition(),this._onTranslated()}getRect(t,e,n=this.rotation){const a=this.parentScale,[l,c]=this.pageDimensions,[h,f]=this.pageTranslation,p=t/a,m=e/a,y=this.x*l,v=this.y*c,w=this.width*l,C=this.height*c;switch(n){case 0:return[y+p+h,c-v-m-C+f,y+p+w+h,c-v-m+f];case 90:return[y+m+h,c-v+p+f,y+m+C+h,c-v+p+w+f];case 180:return[y-p-w+h,c-v+m+f,y-p+h,c-v+m+C+f];case 270:return[y-m-C+h,c-v-p-w+f,y-m+h,c-v-p+f];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(t,e){const[n,a,l,c]=t,h=l-n,f=c-a;switch(this.rotation){case 0:return[n,e-c,h,f];case 90:return[n,e-a,f,h];case 180:return[l,e-a,h,f];case 270:return[l,e-c,f,h];default:throw new Error("Invalid rotation")}}getPDFRect(){return this.getRect(0,0)}getNonHCMColor(){return this.color&&wt._colorManager.convert(this._uiManager.getNonHCMColor(this.color))}onUpdatedColor(){var t;(t=o(this,he))==null||t.onUpdatedColor()}getData(){const{comment:{text:t,color:e,date:n,opacity:a,deleted:l,richText:c},uid:h,pageIndex:f,creationDate:p,modificationDate:m}=this;return{id:h,pageIndex:f,rect:this.getPDFRect(),richText:c,contentsObj:{str:t},creationDate:p,modificationDate:n||m,popupRef:!l,color:e,opacity:a}}onceAdded(t){}isEmpty(){return!1}enableEditMode(){return this.isInEditMode()?!1:(this.parent.setEditingState(!1),x(this,tc,!0),!0)}disableEditMode(){return this.isInEditMode()?(this.parent.setEditingState(!0),x(this,tc,!1),!0):!1}isInEditMode(){return o(this,tc)}shouldGetKeyboardEvents(){return o(this,ar)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:t,left:e,bottom:n,right:a}=this.getClientDimensions(),{innerHeight:l,innerWidth:c}=window;return e<c&&a>0&&t<l&&n>0}rebuild(){T(this,vt,vA).call(this)}rotate(t){}resize(){}serializeDeleted(){var t;return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:((t=this._initialData)==null?void 0:t.popupRef)||""}}serialize(t=!1,e=null){var n;return{annotationType:this.mode,pageIndex:this.pageIndex,rect:this.getPDFRect(),rotation:this.rotation,structTreeParentId:this._structTreeParentId,popupRef:((n=this._initialData)==null?void 0:n.popupRef)||""}}static async deserialize(t,e,n){const a=new this.prototype.constructor({parent:e,id:e.getNextId(),uiManager:n,annotationElementId:t.annotationElementId,creationDate:t.creationDate,modificationDate:t.modificationDate});a.rotation=t.rotation,x(a,Wl,t.accessibilityData),a._isCopy=t.isCopy||!1;const[l,c]=a.pageDimensions,[h,f,p,m]=a.getRectInCurrentCoords(t.rect,c);return a.x=h/l,a.y=f/c,a.width=p/l,a.height=m/c,a}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){var t,e;if((t=o(this,Mo))==null||t.abort(),x(this,Mo,null),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),o(this,ca)&&(clearTimeout(o(this,ca)),x(this,ca,null)),T(this,vt,Kf).call(this),this.removeEditToolbar(),o(this,bs)){for(const n of o(this,bs).values())clearTimeout(n);x(this,bs,null)}this.parent=null,(e=o(this,ec))==null||e.destroy(),x(this,ec,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(T(this,vt,A2).call(this),o(this,Si).classList.remove("hidden"))}get toolbarPosition(){return null}get commentButtonPosition(){return this._uiManager.direction==="ltr"?[1,0]:[0,0]}get commentButtonPositionInPage(){const{commentButtonPosition:[t,e]}=this,[n,a,l,c]=this.getPDFRect();return[wt._round(n+(l-n)*t),wt._round(a+(c-a)*(1-e))]}get commentButtonColor(){return this._uiManager.makeCommentColor(this.getNonHCMColor(),this.opacity)}get commentPopupPosition(){return o(this,he).commentPopupPositionInLayer}set commentPopupPosition(t){o(this,he).commentPopupPositionInLayer=t}hasDefaultPopupPosition(){return o(this,he).hasDefaultPopupPosition()}get commentButtonWidth(){return o(this,he).commentButtonWidth}get elementBeforePopup(){return this.div}setCommentButtonStates(t){o(this,he).setCommentButtonStates(t)}keydown(t){if(!this.isResizable||t.target!==this.div||t.key!=="Enter")return;this._uiManager.setSelected(this),x(this,sr,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const e=o(this,Si).children;if(!o(this,Ls)){x(this,Ls,Array.from(e));const c=T(this,vt,C2).bind(this),h=T(this,vt,N2).bind(this),f=this._uiManager._signal;for(const p of o(this,Ls)){const m=p.getAttribute("data-resizer-name");p.setAttribute("role","spinbutton"),p.addEventListener("keydown",c,{signal:f}),p.addEventListener("blur",h,{signal:f}),p.addEventListener("focus",T(this,vt,M2).bind(this,m),{signal:f}),p.setAttribute("data-l10n-id",wt._l10nResizer[m])}}const n=o(this,Ls)[0];let a=0;for(const c of e){if(c===n)break;a++}const l=(360-this.rotation+this.parentRotation)%360/90*(o(this,Ls).length/4);if(l!==a){if(l<a)for(let h=0;h<a-l;h++)o(this,Si).append(o(this,Si).firstChild);else if(l>a)for(let h=0;h<l-a;h++)o(this,Si).firstChild.before(o(this,Si).lastChild);let c=0;for(const h of e){const p=o(this,Ls)[c++].getAttribute("data-resizer-name");h.setAttribute("data-l10n-id",wt._l10nResizer[p])}}T(this,vt,xA).call(this,0),x(this,ar,!0),o(this,Si).firstChild.focus({focusVisible:!0}),t.preventDefault(),t.stopImmediatePropagation()}_resizeWithKeyboard(t,e){o(this,ar)&&T(this,vt,bA).call(this,o(this,Gp),{deltaX:t,deltaY:e,fromKeyboard:!0})}_stopResizingWithKeyboard(){T(this,vt,Kf).call(this),this.div.focus()}select(){var t,e,n;if(this.isSelected&&this._editToolbar){this._editToolbar.show();return}if(this.isSelected=!0,this.makeResizable(),(t=this.div)==null||t.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{var a,l;(a=this.div)!=null&&a.classList.contains("selectedEditor")&&((l=this._editToolbar)==null||l.show())});return}(e=this._editToolbar)==null||e.show(),(n=o(this,Te))==null||n.toggleAltTextBadge(!1)}focus(){this.div&&!this.div.contains(document.activeElement)&&setTimeout(()=>{var t;return(t=this.div)==null?void 0:t.focus({preventScroll:!0})},0)}unselect(){var t,e,n,a,l;this.isSelected&&(this.isSelected=!1,(t=o(this,Si))==null||t.classList.add("hidden"),(e=this.div)==null||e.classList.remove("selectedEditor"),(n=this.div)!=null&&n.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),(a=this._editToolbar)==null||a.hide(),(l=o(this,Te))==null||l.toggleAltTextBadge(!0),this.hasComment&&this._uiManager.toggleComment(this,!1,!1))}updateParams(t,e){}disableEditing(){}enableEditing(){}get canChangeContent(){return!1}enterInEditMode(){this.canChangeContent&&(this.enableEditMode(),this.div.focus())}dblclick(t){t.target.nodeName!=="BUTTON"&&(this.enterInEditMode(),this.parent.updateToolbar({mode:this.constructor._editorType,editId:this.id}))}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return o(this,Vp)}set isEditing(t){x(this,Vp,t),this.parent&&(t?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(t,e=!1){if(e){o(this,bs)||x(this,bs,new Map);const{action:n}=t;let a=o(this,bs).get(n);a&&clearTimeout(a),a=setTimeout(()=>{this._reportTelemetry(t),o(this,bs).delete(n),o(this,bs).size===0&&x(this,bs,null)},wt._telemetryTimeout),o(this,bs).set(n,a);return}t.type||(t.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:t}})}show(t=this._isVisible){this.div.classList.toggle("hidden",!t),this._isVisible=t}enable(){this.div&&(this.div.tabIndex=0),x(this,_h,!1)}disable(){this.div&&(this.div.tabIndex=-1),x(this,_h,!0)}updateFakeAnnotationElement(t){if(!o(this,la)&&!this.deleted){x(this,la,t.addFakeAnnotation(this));return}if(this.deleted){o(this,la).remove(),x(this,la,null);return}(this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized)&&o(this,la).updateEdited({rect:this.getPDFRect(),popup:this.comment})}renderAnnotationElement(t){if(this.deleted)return t.hide(),null;let e=t.container.querySelector(".annotationContent");if(!e)e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),t.container.prepend(e);else if(e.nodeName==="CANVAS"){const n=e;e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),n.before(e)}return e}resetAnnotationElement(t){const{firstChild:e}=t.container;(e==null?void 0:e.nodeName)==="DIV"&&e.classList.contains("annotationContent")&&e.remove()}};Wl=new WeakMap,Ls=new WeakMap,Te=new WeakMap,he=new WeakMap,nr=new WeakMap,_h=new WeakMap,No=new WeakMap,Hp=new WeakMap,Si=new WeakMap,Zl=new WeakMap,sr=new WeakMap,la=new WeakMap,Mo=new WeakMap,Gp=new WeakMap,Jl=new WeakMap,Dn=new WeakMap,Vp=new WeakMap,tc=new WeakMap,ar=new WeakMap,ca=new WeakMap,Ch=new WeakMap,Nh=new WeakMap,bs=new WeakMap,ec=new WeakMap,qp=new WeakMap,F0=new WeakMap,vt=new WeakSet,pA=function([t,e],n,a){[n,a]=this.screenToPageTranslation(n,a),this.x+=n/t,this.y+=a/e,this._onTranslating(this.x,this.y),this.fixAndSetPosition()},Xp=new WeakSet,gA=function(t,e,n){switch(n){case 90:return[e,-t];case 180:return[-t,-e];case 270:return[-e,t];default:return[t,e]}},Hb=function(t){switch(t){case 90:{const[e,n]=this.pageDimensions;return[0,-e/n,n/e,0]}case 180:return[-1,0,0,-1];case 270:{const[e,n]=this.pageDimensions;return[0,e/n,-n/e,0]}default:return[1,0,0,1]}},A2=function(){if(o(this,Si))return;x(this,Si,document.createElement("div")),o(this,Si).classList.add("resizers");const t=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],e=this._uiManager._signal;for(const n of t){const a=document.createElement("div");o(this,Si).append(a),a.classList.add("resizer",n),a.setAttribute("data-resizer-name",n),a.addEventListener("pointerdown",T(this,vt,S2).bind(this,n),{signal:e}),a.addEventListener("contextmenu",Wn,{signal:e}),a.tabIndex=-1}this.div.prepend(o(this,Si))},S2=function(t,e){var m;e.preventDefault();const{isMac:n}=fi.platform;if(e.button!==0||e.ctrlKey&&n)return;(m=o(this,Te))==null||m.toggle(!1);const a=this._isDraggable;this._isDraggable=!1,x(this,Zl,[e.screenX,e.screenY]);const l=new AbortController,c=this._uiManager.combinedSignal(l);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",T(this,vt,bA).bind(this,t),{passive:!0,capture:!0,signal:c}),window.addEventListener("touchmove",Me,{passive:!1,signal:c}),window.addEventListener("contextmenu",Wn,{signal:c}),x(this,sr,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const h=this.parent.div.style.cursor,f=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(e.target).cursor;const p=()=>{var y;l.abort(),this.parent.togglePointerEvents(!0),(y=o(this,Te))==null||y.toggle(!0),this._isDraggable=a,this.parent.div.style.cursor=h,this.div.style.cursor=f,T(this,vt,Gb).call(this)};window.addEventListener("pointerup",p,{signal:c}),window.addEventListener("blur",p,{signal:c})},mA=function(t,e,n,a){this.width=n,this.height=a,this.x=t,this.y=e,this.setDims(),this.fixAndSetPosition(),this._onResized()},Gb=function(){if(!o(this,sr))return;const{savedX:t,savedY:e,savedWidth:n,savedHeight:a}=o(this,sr);x(this,sr,null);const l=this.x,c=this.y,h=this.width,f=this.height;l===t&&c===e&&h===n&&f===a||this.addCommands({cmd:T(this,vt,mA).bind(this,l,c,h,f),undo:T(this,vt,mA).bind(this,t,e,n,a),mustExec:!0})},bA=function(t,e){const[n,a]=this.parentDimensions,l=this.x,c=this.y,h=this.width,f=this.height,p=wt.MIN_SIZE/n,m=wt.MIN_SIZE/a,y=T(this,vt,Hb).call(this,this.rotation),v=(P,V)=>[y[0]*P+y[2]*V,y[1]*P+y[3]*V],w=T(this,vt,Hb).call(this,360-this.rotation),C=(P,V)=>[w[0]*P+w[2]*V,w[1]*P+w[3]*V];let _,M,N=!1,R=!1;switch(t){case"topLeft":N=!0,_=(P,V)=>[0,0],M=(P,V)=>[P,V];break;case"topMiddle":_=(P,V)=>[P/2,0],M=(P,V)=>[P/2,V];break;case"topRight":N=!0,_=(P,V)=>[P,0],M=(P,V)=>[0,V];break;case"middleRight":R=!0,_=(P,V)=>[P,V/2],M=(P,V)=>[0,V/2];break;case"bottomRight":N=!0,_=(P,V)=>[P,V],M=(P,V)=>[0,0];break;case"bottomMiddle":_=(P,V)=>[P/2,V],M=(P,V)=>[P/2,0];break;case"bottomLeft":N=!0,_=(P,V)=>[0,V],M=(P,V)=>[P,0];break;case"middleLeft":R=!0,_=(P,V)=>[0,V/2],M=(P,V)=>[P,V/2];break}const L=_(h,f),k=M(h,f);let j=v(...k);const z=wt._round(l+j[0]),I=wt._round(c+j[1]);let K=1,J=1,W,tt;if(e.fromKeyboard)({deltaX:W,deltaY:tt}=e);else{const{screenX:P,screenY:V}=e,[st,ut]=o(this,Zl);[W,tt]=this.screenToPageTranslation(P-st,V-ut),o(this,Zl)[0]=P,o(this,Zl)[1]=V}if([W,tt]=C(W/n,tt/a),N){const P=Math.hypot(h,f);K=J=Math.max(Math.min(Math.hypot(k[0]-L[0]-W,k[1]-L[1]-tt)/P,1/h,1/f),p/h,m/f)}else R?K=Pi(Math.abs(k[0]-L[0]-W),p,1)/h:J=Pi(Math.abs(k[1]-L[1]-tt),m,1)/f;const X=wt._round(h*K),it=wt._round(f*J);j=v(...M(X,it));const et=z-j[0],at=I-j[1];o(this,Dn)||x(this,Dn,[this.x,this.y,this.width,this.height]),this.width=X,this.height=it,this.x=et,this.y=at,this.setDims(),this.fixAndSetPosition(),this._onResizing()},w2=function(){var t;x(this,sr,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height}),(t=o(this,Te))==null||t.toggle(!1),this.parent.togglePointerEvents(!1)},E2=function(t,e,n){let l=.7*(n/e)+1-.7;if(l===1)return;const c=T(this,vt,Hb).call(this,this.rotation),h=(z,I)=>[c[0]*z+c[2]*I,c[1]*z+c[3]*I],[f,p]=this.parentDimensions,m=this.x,y=this.y,v=this.width,w=this.height,C=wt.MIN_SIZE/f,_=wt.MIN_SIZE/p;l=Math.max(Math.min(l,1/v,1/w),C/v,_/w);const M=wt._round(v*l),N=wt._round(w*l);if(M===v&&N===w)return;o(this,Dn)||x(this,Dn,[m,y,v,w]);const R=h(v/2,w/2),L=wt._round(m+R[0]),k=wt._round(y+R[1]),j=h(M/2,N/2);this.x=L-j[0],this.y=k-j[1],this.width=M,this.height=N,this.setDims(),this.fixAndSetPosition(),this._onResizing()},T2=function(){var t;(t=o(this,Te))==null||t.toggle(!0),this.parent.togglePointerEvents(!0),T(this,vt,Gb).call(this)},yA=function(t){const{isMac:e}=fi.platform;t.ctrlKey&&!e||t.shiftKey||t.metaKey&&e?this.parent.toggleSelected(this):this.parent.setSelected(this)},_2=function(t){const{isSelected:e}=this;this._uiManager.setUpDragSession();let n=!1;const a=new AbortController,l=this._uiManager.combinedSignal(a),c={capture:!0,passive:!1,signal:l},h=p=>{a.abort(),x(this,No,null),x(this,Jl,!1),this._uiManager.endDragSession()||T(this,vt,yA).call(this,p),n&&this._onStopDragging()};e&&(x(this,Ch,t.clientX),x(this,Nh,t.clientY),x(this,No,t.pointerId),x(this,Hp,t.pointerType),window.addEventListener("pointermove",p=>{n||(n=!0,this._uiManager.toggleComment(this,!0,!1),this._onStartDragging());const{clientX:m,clientY:y,pointerId:v}=p;if(v!==o(this,No)){Me(p);return}const[w,C]=this.screenToPageTranslation(m-o(this,Ch),y-o(this,Nh));x(this,Ch,m),x(this,Nh,y),this._uiManager.dragSelectedEditors(w,C)},c),window.addEventListener("touchmove",Me,c),window.addEventListener("pointerdown",p=>{p.pointerType===o(this,Hp)&&(o(this,ec)||p.isPrimary)&&h(p),Me(p)},c));const f=p=>{if(!o(this,No)||o(this,No)===p.pointerId){h(p);return}Me(p)};window.addEventListener("pointerup",f,{signal:l}),window.addEventListener("blur",f,{signal:l})},vA=function(){if(o(this,Mo)||!this.div)return;x(this,Mo,new AbortController);const t=this._uiManager.combinedSignal(o(this,Mo));this.div.addEventListener("focusin",this.focusin.bind(this),{signal:t}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:t})},C2=function(t){wt._resizerKeyboardManager.exec(this,t)},N2=function(t){var e;o(this,ar)&&((e=t.relatedTarget)==null?void 0:e.parentNode)!==o(this,Si)&&T(this,vt,Kf).call(this)},M2=function(t){x(this,Gp,o(this,ar)?t:"")},xA=function(t){if(o(this,Ls))for(const e of o(this,Ls))e.tabIndex=t},Kf=function(){x(this,ar,!1),T(this,vt,xA).call(this,-1),T(this,vt,Gb).call(this)},E(wt,Xp),nt(wt,"_l10n",null),nt(wt,"_l10nResizer",null),nt(wt,"_borderLineWidth",-1),nt(wt,"_colorManager",new rA),nt(wt,"_zIndex",1),nt(wt,"_telemetryTimeout",1e3);let be=wt;class YO extends be{constructor(t){super(t),this.annotationElementId=t.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const O_=3285377520,ls=4294901760,Zs=65535;class D2{constructor(t){this.h1=t?t&4294967295:O_,this.h2=t?t&4294967295:O_}update(t){let e,n;if(typeof t=="string"){e=new Uint8Array(t.length*2),n=0;for(let _=0,M=t.length;_<M;_++){const N=t.charCodeAt(_);N<=255?e[n++]=N:(e[n++]=N>>>8,e[n++]=N&255)}}else if(ArrayBuffer.isView(t))e=t.slice(),n=e.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const a=n>>2,l=n-a*4,c=new Uint32Array(e.buffer,0,a);let h=0,f=0,p=this.h1,m=this.h2;const y=3432918353,v=461845907,w=y&Zs,C=v&Zs;for(let _=0;_<a;_++)_&1?(h=c[_],h=h*y&ls|h*w&Zs,h=h<<15|h>>>17,h=h*v&ls|h*C&Zs,p^=h,p=p<<13|p>>>19,p=p*5+3864292196):(f=c[_],f=f*y&ls|f*w&Zs,f=f<<15|f>>>17,f=f*v&ls|f*C&Zs,m^=f,m=m<<13|m>>>19,m=m*5+3864292196);switch(h=0,l){case 3:h^=e[a*4+2]<<16;case 2:h^=e[a*4+1]<<8;case 1:h^=e[a*4],h=h*y&ls|h*w&Zs,h=h<<15|h>>>17,h=h*v&ls|h*C&Zs,a&1?p^=h:m^=h}this.h1=p,this.h2=m}hexdigest(){let t=this.h1,e=this.h2;return t^=e>>>1,t=t*3981806797&ls|t*36045&Zs,e=e*4283543511&ls|((e<<16|t>>>16)*2950163797&ls)>>>16,t^=e>>>1,t=t*444984403&ls|t*60499&Zs,e=e*3301882366&ls|((e<<16|t>>>16)*3120437893&ls)>>>16,t^=e>>>1,(t>>>0).toString(16).padStart(8,"0")+(e>>>0).toString(16).padStart(8,"0")}}const AA=Object.freeze({map:null,hash:"",transfer:void 0});var ic,nc,rr,wi,U0,R2;class HS{constructor(){E(this,U0);E(this,ic,!1);E(this,nc,null);E(this,rr,null);E(this,wi,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(t,e){const n=o(this,wi).get(t);return n===void 0?e:Object.assign(e,n)}getRawValue(t){return o(this,wi).get(t)}remove(t){const e=o(this,wi).get(t);if(e!==void 0&&(e instanceof be&&o(this,rr).delete(e.annotationElementId),o(this,wi).delete(t),o(this,wi).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function")){for(const n of o(this,wi).values())if(n instanceof be)return;this.onAnnotationEditor(null)}}setValue(t,e){const n=o(this,wi).get(t);let a=!1;if(n!==void 0)for(const[l,c]of Object.entries(e))n[l]!==c&&(a=!0,n[l]=c);else a=!0,o(this,wi).set(t,e);a&&T(this,U0,R2).call(this),e instanceof be&&((o(this,rr)||x(this,rr,new Map)).set(e.annotationElementId,e),typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(e.constructor._type))}has(t){return o(this,wi).has(t)}get size(){return o(this,wi).size}resetModified(){o(this,ic)&&(x(this,ic,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new L2(this)}get serializable(){if(o(this,wi).size===0)return AA;const t=new Map,e=new D2,n=[],a=Object.create(null);let l=!1;for(const[c,h]of o(this,wi)){const f=h instanceof be?h.serialize(!1,a):h;f&&(t.set(c,f),e.update(`${c}:${JSON.stringify(f)}`),l||(l=!!f.bitmap))}if(l)for(const c of t.values())c.bitmap&&n.push(c.bitmap);return t.size>0?{map:t,hash:e.hexdigest(),transfer:n}:AA}get editorStats(){let t=null;const e=new Map;let n=0,a=0;for(const l of o(this,wi).values()){if(!(l instanceof be)){l.popup&&(l.popup.deleted?a+=1:n+=1);continue}l.isCommentDeleted?a+=1:l.hasEditedComment&&(n+=1);const c=l.telemetryFinalData;if(!c)continue;const{type:h}=c;e.has(h)||e.set(h,Object.getPrototypeOf(l).constructor),t||(t=Object.create(null));const f=t[h]||(t[h]=new Map);for(const[p,m]of Object.entries(c)){if(p==="type")continue;let y=f.get(p);y||(y=new Map,f.set(p,y));const v=y.get(m)??0;y.set(m,v+1)}}if((a>0||n>0)&&(t||(t=Object.create(null)),t.comments={deleted:a,edited:n}),!t)return null;for(const[l,c]of e)t[l]=c.computeTelemetryFinalData(t[l]);return t}resetModifiedIds(){x(this,nc,null)}updateEditor(t,e){var a;const n=(a=o(this,rr))==null?void 0:a.get(t);return n?(n.updateFromAnnotationLayer(e),!0):!1}getEditor(t){var e;return((e=o(this,rr))==null?void 0:e.get(t))||null}get modifiedIds(){if(o(this,nc))return o(this,nc);const t=[];if(o(this,rr))for(const e of o(this,rr).values())e.serialize()&&t.push(e.annotationElementId);return x(this,nc,{ids:new Set(t),hash:t.join(",")})}[Symbol.iterator](){return o(this,wi).entries()}}ic=new WeakMap,nc=new WeakMap,rr=new WeakMap,wi=new WeakMap,U0=new WeakSet,R2=function(){o(this,ic)||(x(this,ic,!0),typeof this.onSetModified=="function"&&this.onSetModified())};var Yp;class L2 extends HS{constructor(e){super();E(this,Yp);const{map:n,hash:a,transfer:l}=e.serializable,c=structuredClone(n,l?{transfer:l}:null);x(this,Yp,{map:c,hash:a,transfer:l})}get print(){ge("Should not call PrintAnnotationStorage.print")}get serializable(){return o(this,Yp)}get modifiedIds(){return Ct(this,"modifiedIds",{ids:new Set,hash:""})}}Yp=new WeakMap;var Mh;class $O{constructor({ownerDocument:t=globalThis.document,styleElement:e=null}){E(this,Mh,new Set);this._document=t,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(t){this.nativeFontFaces.add(t),this._document.fonts.add(t)}removeNativeFontFace(t){this.nativeFontFaces.delete(t),this._document.fonts.delete(t)}insertRule(t){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const e=this.styleElement.sheet;e.insertRule(t,e.cssRules.length)}clear(){for(const t of this.nativeFontFaces)this._document.fonts.delete(t);this.nativeFontFaces.clear(),o(this,Mh).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:t,disableFontFace:e,_inspectFont:n}){if(!(!t||o(this,Mh).has(t.loadedName))){if(Pt(!e,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:a,src:l,style:c}=t,h=new FontFace(a,l,c);this.addNativeFontFace(h);try{await h.load(),o(this,Mh).add(a),n==null||n(t)}catch{St(`Cannot load system font: ${t.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(h)}return}ge("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(t){if(t.attached||t.missingFile&&!t.systemFontInfo)return;if(t.attached=!0,t.systemFontInfo){await this.loadSystemFont(t);return}if(this.isFontLoadingAPISupported){const n=t.createNativeFontFace();if(n){this.addNativeFontFace(n);try{await n.loaded}catch(a){throw St(`Failed to load font '${n.family}': '${a}'.`),t.disableFontFace=!0,a}}return}const e=t.createFontFaceRule();if(e){if(this.insertRule(e),this.isSyncFontLoadingSupported)return;await new Promise(n=>{const a=this._queueLoadingCallback(n);this._prepareFontLoadEvent(t,a)})}}get isFontLoadingAPISupported(){var e;const t=!!((e=this._document)!=null&&e.fonts);return Ct(this,"isFontLoadingAPISupported",t)}get isSyncFontLoadingSupported(){return Ct(this,"isSyncFontLoadingSupported",Yi||fi.platform.isFirefox)}_queueLoadingCallback(t){function e(){for(Pt(!a.done,"completeRequest() cannot be called twice."),a.done=!0;n.length>0&&n[0].done;){const l=n.shift();setTimeout(l.callback,0)}}const{loadingRequests:n}=this,a={done:!1,complete:e,callback:t};return n.push(a),a}get _loadTestFont(){const t=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return Ct(this,"_loadTestFont",t)}_prepareFontLoadEvent(t,e){function n(k,j){return k.charCodeAt(j)<<24|k.charCodeAt(j+1)<<16|k.charCodeAt(j+2)<<8|k.charCodeAt(j+3)&255}function a(k,j,z,I){const K=k.substring(0,j),J=k.substring(j+z);return K+I+J}let l,c;const h=this._document.createElement("canvas");h.width=1,h.height=1;const f=h.getContext("2d");let p=0;function m(k,j){if(++p>30){St("Load test font never loaded."),j();return}if(f.font="30px "+k,f.fillText(".",0,20),f.getImageData(0,0,1,1).data[3]>0){j();return}setTimeout(m.bind(null,k,j))}const y=`lt${Date.now()}${this.loadTestFontId++}`;let v=this._loadTestFont;v=a(v,976,y.length,y);const C=16,_=1482184792;let M=n(v,C);for(l=0,c=y.length-3;l<c;l+=4)M=M-_+n(y,l)|0;l<y.length&&(M=M-_+n(y+"XXX",l)|0),v=a(v,C,4,jO(M));const N=`url(data:font/opentype;base64,${btoa(v)});`,R=`@font-face {font-family:"${y}";src:${N}}`;this.insertRule(R);const L=this._document.createElement("div");L.style.visibility="hidden",L.style.width=L.style.height="10px",L.style.position="absolute",L.style.top=L.style.left="0px";for(const k of[t.loadedName,y]){const j=this._document.createElement("span");j.textContent="Hi",j.style.fontFamily=k,L.append(j)}this._document.body.append(L),m(y,()=>{L.remove(),e.complete()})}}Mh=new WeakMap;var se;class KO{constructor(t,e=null,n,a){E(this,se);this.compiledGlyphs=Object.create(null),x(this,se,t),this._inspectFont=e,n&&Object.assign(this,n),a&&(this.charProcOperatorList=a)}createNativeFontFace(){var e;if(!this.data||this.disableFontFace)return null;let t;if(!this.cssFontInfo)t=new FontFace(this.loadedName,this.data,{});else{const n={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(n.style=`oblique ${this.cssFontInfo.italicAngle}deg`),t=new FontFace(this.cssFontInfo.fontFamily,this.data,n)}return(e=this._inspectFont)==null||e.call(this,this),t}createFontFaceRule(){var n;if(!this.data||this.disableFontFace)return null;const t=`url(data:${this.mimetype};base64,${$C(this.data)});`;let e;if(!this.cssFontInfo)e=`@font-face {font-family:"${this.loadedName}";src:${t}}`;else{let a=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(a+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),e=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${a}src:${t}}`}return(n=this._inspectFont)==null||n.call(this,this,t),e}getPathGenerator(t,e){if(this.compiledGlyphs[e]!==void 0)return this.compiledGlyphs[e];const n=this.loadedName+"_path_"+e;let a;try{a=t.get(n)}catch(c){St(`getPathGenerator - ignoring character: "${c}".`)}const l=new Path2D(a||"");return this.fontExtraProperties||t.delete(n),this.compiledGlyphs[e]=l}get black(){return o(this,se).black}get bold(){return o(this,se).bold}get disableFontFace(){return o(this,se).disableFontFace??!1}get fontExtraProperties(){return o(this,se).fontExtraProperties??!1}get isInvalidPDFjsFont(){return o(this,se).isInvalidPDFjsFont}get isType3Font(){return o(this,se).isType3Font}get italic(){return o(this,se).italic}get missingFile(){return o(this,se).missingFile}get remeasure(){return o(this,se).remeasure}get vertical(){return o(this,se).vertical}get ascent(){return o(this,se).ascent}get defaultWidth(){return o(this,se).defaultWidth}get descent(){return o(this,se).descent}get bbox(){return o(this,se).bbox}get fontMatrix(){return o(this,se).fontMatrix}get fallbackName(){return o(this,se).fallbackName}get loadedName(){return o(this,se).loadedName}get mimetype(){return o(this,se).mimetype}get name(){return o(this,se).name}get data(){return o(this,se).data}clearData(){o(this,se).clearData()}get cssFontInfo(){return o(this,se).cssFontInfo}get systemFontInfo(){return o(this,se).systemFontInfo}get defaultVMetrics(){return o(this,se).defaultVMetrics}}se=new WeakMap;function QO(d){if(d instanceof URL)return d.href;if(typeof d=="string"){if(Yi)return d;const t=URL.parse(d,window.location);if(t)return t.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function WO(d){if(Yi&&typeof Buffer<"u"&&d instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(d instanceof Uint8Array&&d.byteLength===d.buffer.byteLength)return d;if(typeof d=="string")return em(d);if(d instanceof ArrayBuffer||ArrayBuffer.isView(d)||typeof d=="object"&&!isNaN(d==null?void 0:d.length))return new Uint8Array(d);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function Db(d){if(typeof d!="string")return null;if(d.endsWith("/"))return d;throw new Error(`Invalid factory url: "${d}" must include trailing slash.`)}const SA=d=>typeof d=="object"&&Number.isInteger(d==null?void 0:d.num)&&d.num>=0&&Number.isInteger(d==null?void 0:d.gen)&&d.gen>=0,ZO=d=>typeof d=="object"&&typeof(d==null?void 0:d.name)=="string",k2=IO.bind(null,SA,ZO);var or,H0;class JO{constructor(){E(this,or,new Map);E(this,H0,Promise.resolve())}postMessage(t,e){const n={data:structuredClone(t,e?{transfer:e}:null)};o(this,H0).then(()=>{for(const[a]of o(this,or))a.call(this,n)})}addEventListener(t,e,n=null){let a=null;if((n==null?void 0:n.signal)instanceof AbortSignal){const{signal:l}=n;if(l.aborted){St("LoopbackPort - cannot use an `aborted` signal.");return}const c=()=>this.removeEventListener(t,e);a=()=>l.removeEventListener("abort",c),l.addEventListener("abort",c)}o(this,or).set(e,a)}removeEventListener(t,e){const n=o(this,or).get(e);n==null||n(),o(this,or).delete(e)}terminate(){for(const[,t]of o(this,or))t==null||t();o(this,or).clear()}}or=new WeakMap,H0=new WeakMap;const Rb={DATA:1,ERROR:2},$e={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function j_(){}function rn(d){if(d instanceof Lr||d instanceof w0||d instanceof C_||d instanceof fp||d instanceof Hx)return d;switch(d instanceof Error||typeof d=="object"&&d!==null||ge('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),d.name){case"AbortException":return new Lr(d.message);case"InvalidPDFException":return new w0(d.message);case"PasswordException":return new C_(d.message,d.code);case"ResponseException":return new fp(d.message,d.status,d.missing);case"UnknownErrorException":return new Hx(d.message,d.details)}return new Hx(d.message,d.toString())}var Dh,ws,O2,j2,B2,Vb;class Qf{constructor(t,e,n){E(this,ws);E(this,Dh,new AbortController);this.sourceName=t,this.targetName=e,this.comObj=n,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),n.addEventListener("message",T(this,ws,O2).bind(this),{signal:o(this,Dh).signal})}on(t,e){const n=this.actionHandler;if(n[t])throw new Error(`There is already an actionName called "${t}"`);n[t]=e}send(t,e,n){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,data:e},n)}sendWithPromise(t,e,n){const a=this.callbackId++,l=Promise.withResolvers();this.callbackCapabilities[a]=l;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,callbackId:a,data:e},n)}catch(c){l.reject(c)}return l.promise}sendWithStream(t,e,n,a){const l=this.streamId++,c=this.sourceName,h=this.targetName,f=this.comObj;return new ReadableStream({start:p=>{const m=Promise.withResolvers();return this.streamControllers[l]={controller:p,startCall:m,pullCall:null,cancelCall:null,isClosed:!1},f.postMessage({sourceName:c,targetName:h,action:t,streamId:l,data:e,desiredSize:p.desiredSize},a),m.promise},pull:p=>{const m=Promise.withResolvers();return this.streamControllers[l].pullCall=m,f.postMessage({sourceName:c,targetName:h,stream:$e.PULL,streamId:l,desiredSize:p.desiredSize}),m.promise},cancel:p=>{Pt(p instanceof Error,"cancel must have a valid reason");const m=Promise.withResolvers();return this.streamControllers[l].cancelCall=m,this.streamControllers[l].isClosed=!0,f.postMessage({sourceName:c,targetName:h,stream:$e.CANCEL,streamId:l,reason:rn(p)}),m.promise}},n)}destroy(){var t;(t=o(this,Dh))==null||t.abort(),x(this,Dh,null)}}Dh=new WeakMap,ws=new WeakSet,O2=function({data:t}){if(t.targetName!==this.sourceName)return;if(t.stream){T(this,ws,B2).call(this,t);return}if(t.callback){const n=t.callbackId,a=this.callbackCapabilities[n];if(!a)throw new Error(`Cannot resolve callback ${n}`);if(delete this.callbackCapabilities[n],t.callback===Rb.DATA)a.resolve(t.data);else if(t.callback===Rb.ERROR)a.reject(rn(t.reason));else throw new Error("Unexpected callback case");return}const e=this.actionHandler[t.action];if(!e)throw new Error(`Unknown action from worker: ${t.action}`);if(t.callbackId){const n=this.sourceName,a=t.sourceName,l=this.comObj;Promise.try(e,t.data).then(function(c){l.postMessage({sourceName:n,targetName:a,callback:Rb.DATA,callbackId:t.callbackId,data:c})},function(c){l.postMessage({sourceName:n,targetName:a,callback:Rb.ERROR,callbackId:t.callbackId,reason:rn(c)})});return}if(t.streamId){T(this,ws,j2).call(this,t);return}e(t.data)},j2=function(t){const e=t.streamId,n=this.sourceName,a=t.sourceName,l=this.comObj,c=this,h=this.actionHandler[t.action],f={enqueue(p,m=1,y){if(this.isCancelled)return;const v=this.desiredSize;this.desiredSize-=m,v>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),l.postMessage({sourceName:n,targetName:a,stream:$e.ENQUEUE,streamId:e,chunk:p},y)},close(){this.isCancelled||(this.isCancelled=!0,l.postMessage({sourceName:n,targetName:a,stream:$e.CLOSE,streamId:e}),delete c.streamSinks[e])},error(p){Pt(p instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,l.postMessage({sourceName:n,targetName:a,stream:$e.ERROR,streamId:e,reason:rn(p)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:t.desiredSize,ready:null};f.sinkCapability.resolve(),f.ready=f.sinkCapability.promise,this.streamSinks[e]=f,Promise.try(h,t.data,f).then(function(){l.postMessage({sourceName:n,targetName:a,stream:$e.START_COMPLETE,streamId:e,success:!0})},function(p){l.postMessage({sourceName:n,targetName:a,stream:$e.START_COMPLETE,streamId:e,reason:rn(p)})})},B2=function(t){const e=t.streamId,n=this.sourceName,a=t.sourceName,l=this.comObj,c=this.streamControllers[e],h=this.streamSinks[e];switch(t.stream){case $e.START_COMPLETE:t.success?c.startCall.resolve():c.startCall.reject(rn(t.reason));break;case $e.PULL_COMPLETE:t.success?c.pullCall.resolve():c.pullCall.reject(rn(t.reason));break;case $e.PULL:if(!h){l.postMessage({sourceName:n,targetName:a,stream:$e.PULL_COMPLETE,streamId:e,success:!0});break}h.desiredSize<=0&&t.desiredSize>0&&h.sinkCapability.resolve(),h.desiredSize=t.desiredSize,Promise.try(h.onPull||j_).then(function(){l.postMessage({sourceName:n,targetName:a,stream:$e.PULL_COMPLETE,streamId:e,success:!0})},function(p){l.postMessage({sourceName:n,targetName:a,stream:$e.PULL_COMPLETE,streamId:e,reason:rn(p)})});break;case $e.ENQUEUE:if(Pt(c,"enqueue should have stream controller"),c.isClosed)break;c.controller.enqueue(t.chunk);break;case $e.CLOSE:if(Pt(c,"close should have stream controller"),c.isClosed)break;c.isClosed=!0,c.controller.close(),T(this,ws,Vb).call(this,c,e);break;case $e.ERROR:Pt(c,"error should have stream controller"),c.controller.error(rn(t.reason)),T(this,ws,Vb).call(this,c,e);break;case $e.CANCEL_COMPLETE:t.success?c.cancelCall.resolve():c.cancelCall.reject(rn(t.reason)),T(this,ws,Vb).call(this,c,e);break;case $e.CANCEL:if(!h)break;const f=rn(t.reason);Promise.try(h.onCancel||j_,f).then(function(){l.postMessage({sourceName:n,targetName:a,stream:$e.CANCEL_COMPLETE,streamId:e,success:!0})},function(p){l.postMessage({sourceName:n,targetName:a,stream:$e.CANCEL_COMPLETE,streamId:e,reason:rn(p)})}),h.sinkCapability.reject(f),h.isCancelled=!0,delete this.streamSinks[e];break;default:throw new Error("Unexpected stream case")}},Vb=async function(t,e){var n,a,l;await Promise.allSettled([(n=t.startCall)==null?void 0:n.promise,(a=t.pullCall)==null?void 0:a.promise,(l=t.cancelCall)==null?void 0:l.promise]),delete this.streamControllers[e]};var $p;class z2{constructor({enableHWA:t=!1}){E(this,$p,!1);x(this,$p,t)}create(t,e){if(t<=0||e<=0)throw new Error("Invalid canvas size");const n=this._createCanvas(t,e);return{canvas:n,context:n.getContext("2d",{willReadFrequently:!o(this,$p)})}}reset(t,e,n){if(!t.canvas)throw new Error("Canvas is not specified");if(e<=0||n<=0)throw new Error("Invalid canvas size");t.canvas.width=e,t.canvas.height=n}destroy(t){if(!t.canvas)throw new Error("Canvas is not specified");t.canvas.width=0,t.canvas.height=0,t.canvas=null,t.context=null}_createCanvas(t,e){ge("Abstract method `_createCanvas` called.")}}$p=new WeakMap;class tj extends z2{constructor({ownerDocument:t=globalThis.document,enableHWA:e=!1}){super({enableHWA:e}),this._document=t}_createCanvas(t,e){const n=this._document.createElement("canvas");return n.width=t,n.height=e,n}}class P2{constructor({baseUrl:t=null,isCompressed:e=!0}){this.baseUrl=t,this.isCompressed=e}async fetch({name:t}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!t)throw new Error("CMap name must be specified.");const e=this.baseUrl+t+(this.isCompressed?".bcmap":"");return this._fetch(e).then(n=>({cMapData:n,isCompressed:this.isCompressed})).catch(n=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${e}`)})}async _fetch(t){ge("Abstract method `_fetch` called.")}}class B_ extends P2{async _fetch(t){const e=await Fd(t,this.isCompressed?"arraybuffer":"text");return e instanceof ArrayBuffer?new Uint8Array(e):em(e)}}class I2{addFilter(t){return"none"}addHCMFilter(t,e){return"none"}addAlphaFilter(t){return"none"}addLuminosityFilter(t){return"none"}addHighlightHCMFilter(t,e,n,a,l){return"none"}destroy(t=!1){}}var sc,Rh,lr,cr,Oi,ac,rc,ot,Ri,Wf,$u,qb,Ku,F2,wA,Qu,Zf,Jf,EA,tp;class ej extends I2{constructor({docId:e,ownerDocument:n=globalThis.document}){super();E(this,ot);E(this,sc);E(this,Rh);E(this,lr);E(this,cr);E(this,Oi);E(this,ac);E(this,rc,0);x(this,cr,e),x(this,Oi,n)}addFilter(e){if(!e)return"none";let n=o(this,ot,Ri).get(e);if(n)return n;const[a,l,c]=T(this,ot,qb).call(this,e),h=e.length===1?a:`${a}${l}${c}`;if(n=o(this,ot,Ri).get(h),n)return o(this,ot,Ri).set(e,n),n;const f=`g_${o(this,cr)}_transfer_map_${Ze(this,rc)._++}`,p=T(this,ot,Ku).call(this,f);o(this,ot,Ri).set(e,p),o(this,ot,Ri).set(h,p);const m=T(this,ot,Qu).call(this,f);return T(this,ot,Jf).call(this,a,l,c,m),p}addHCMFilter(e,n){var C;const a=`${e}-${n}`,l="base";let c=o(this,ot,Wf).get(l);if((c==null?void 0:c.key)===a||(c?((C=c.filter)==null||C.remove(),c.key=a,c.url="none",c.filter=null):(c={key:a,url:"none",filter:null},o(this,ot,Wf).set(l,c)),!e||!n))return c.url;const h=T(this,ot,tp).call(this,e);e=ct.makeHexColor(...h);const f=T(this,ot,tp).call(this,n);if(n=ct.makeHexColor(...f),o(this,ot,$u).style.color="",e==="#000000"&&n==="#ffffff"||e===n)return c.url;const p=new Array(256);for(let _=0;_<=255;_++){const M=_/255;p[_]=M<=.03928?M/12.92:((M+.055)/1.055)**2.4}const m=p.join(","),y=`g_${o(this,cr)}_hcm_filter`,v=c.filter=T(this,ot,Qu).call(this,y);T(this,ot,Jf).call(this,m,m,m,v),T(this,ot,wA).call(this,v);const w=(_,M)=>{const N=h[_]/255,R=f[_]/255,L=new Array(M+1);for(let k=0;k<=M;k++)L[k]=N+k/M*(R-N);return L.join(",")};return T(this,ot,Jf).call(this,w(0,5),w(1,5),w(2,5),v),c.url=T(this,ot,Ku).call(this,y),c.url}addAlphaFilter(e){let n=o(this,ot,Ri).get(e);if(n)return n;const[a]=T(this,ot,qb).call(this,[e]),l=`alpha_${a}`;if(n=o(this,ot,Ri).get(l),n)return o(this,ot,Ri).set(e,n),n;const c=`g_${o(this,cr)}_alpha_map_${Ze(this,rc)._++}`,h=T(this,ot,Ku).call(this,c);o(this,ot,Ri).set(e,h),o(this,ot,Ri).set(l,h);const f=T(this,ot,Qu).call(this,c);return T(this,ot,EA).call(this,a,f),h}addLuminosityFilter(e){let n=o(this,ot,Ri).get(e||"luminosity");if(n)return n;let a,l;if(e?([a]=T(this,ot,qb).call(this,[e]),l=`luminosity_${a}`):l="luminosity",n=o(this,ot,Ri).get(l),n)return o(this,ot,Ri).set(e,n),n;const c=`g_${o(this,cr)}_luminosity_map_${Ze(this,rc)._++}`,h=T(this,ot,Ku).call(this,c);o(this,ot,Ri).set(e,h),o(this,ot,Ri).set(l,h);const f=T(this,ot,Qu).call(this,c);return T(this,ot,F2).call(this,f),e&&T(this,ot,EA).call(this,a,f),h}addHighlightHCMFilter(e,n,a,l,c){var R;const h=`${n}-${a}-${l}-${c}`;let f=o(this,ot,Wf).get(e);if((f==null?void 0:f.key)===h||(f?((R=f.filter)==null||R.remove(),f.key=h,f.url="none",f.filter=null):(f={key:h,url:"none",filter:null},o(this,ot,Wf).set(e,f)),!n||!a))return f.url;const[p,m]=[n,a].map(T(this,ot,tp).bind(this));let y=Math.round(.2126*p[0]+.7152*p[1]+.0722*p[2]),v=Math.round(.2126*m[0]+.7152*m[1]+.0722*m[2]),[w,C]=[l,c].map(T(this,ot,tp).bind(this));v<y&&([y,v,w,C]=[v,y,C,w]),o(this,ot,$u).style.color="";const _=(L,k,j)=>{const z=new Array(256),I=(v-y)/j,K=L/255,J=(k-L)/(255*j);let W=0;for(let tt=0;tt<=j;tt++){const X=Math.round(y+tt*I),it=K+tt*J;for(let et=W;et<=X;et++)z[et]=it;W=X+1}for(let tt=W;tt<256;tt++)z[tt]=z[W-1];return z.join(",")},M=`g_${o(this,cr)}_hcm_${e}_filter`,N=f.filter=T(this,ot,Qu).call(this,M);return T(this,ot,wA).call(this,N),T(this,ot,Jf).call(this,_(w[0],C[0],5),_(w[1],C[1],5),_(w[2],C[2],5),N),f.url=T(this,ot,Ku).call(this,M),f.url}destroy(e=!1){var n,a,l,c;e&&((n=o(this,ac))!=null&&n.size)||((a=o(this,lr))==null||a.parentNode.parentNode.remove(),x(this,lr,null),(l=o(this,Rh))==null||l.clear(),x(this,Rh,null),(c=o(this,ac))==null||c.clear(),x(this,ac,null),x(this,rc,0))}}sc=new WeakMap,Rh=new WeakMap,lr=new WeakMap,cr=new WeakMap,Oi=new WeakMap,ac=new WeakMap,rc=new WeakMap,ot=new WeakSet,Ri=function(){return o(this,Rh)||x(this,Rh,new Map)},Wf=function(){return o(this,ac)||x(this,ac,new Map)},$u=function(){if(!o(this,lr)){const e=o(this,Oi).createElement("div"),{style:n}=e;n.visibility="hidden",n.contain="strict",n.width=n.height=0,n.position="absolute",n.top=n.left=0,n.zIndex=-1;const a=o(this,Oi).createElementNS(qa,"svg");a.setAttribute("width",0),a.setAttribute("height",0),x(this,lr,o(this,Oi).createElementNS(qa,"defs")),e.append(a),a.append(o(this,lr)),o(this,Oi).body.append(e)}return o(this,lr)},qb=function(e){if(e.length===1){const p=e[0],m=new Array(256);for(let v=0;v<256;v++)m[v]=p[v]/255;const y=m.join(",");return[y,y,y]}const[n,a,l]=e,c=new Array(256),h=new Array(256),f=new Array(256);for(let p=0;p<256;p++)c[p]=n[p]/255,h[p]=a[p]/255,f[p]=l[p]/255;return[c.join(","),h.join(","),f.join(",")]},Ku=function(e){if(o(this,sc)===void 0){x(this,sc,"");const n=o(this,Oi).URL;n!==o(this,Oi).baseURI&&(nm(n)?St('#createUrl: ignore "data:"-URL for performance reasons.'):x(this,sc,zS(n,"")))}return`url(${o(this,sc)}#${e})`},F2=function(e){const n=o(this,Oi).createElementNS(qa,"feColorMatrix");n.setAttribute("type","matrix"),n.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),e.append(n)},wA=function(e){const n=o(this,Oi).createElementNS(qa,"feColorMatrix");n.setAttribute("type","matrix"),n.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),e.append(n)},Qu=function(e){const n=o(this,Oi).createElementNS(qa,"filter");return n.setAttribute("color-interpolation-filters","sRGB"),n.setAttribute("id",e),o(this,ot,$u).append(n),n},Zf=function(e,n,a){const l=o(this,Oi).createElementNS(qa,n);l.setAttribute("type","discrete"),l.setAttribute("tableValues",a),e.append(l)},Jf=function(e,n,a,l){const c=o(this,Oi).createElementNS(qa,"feComponentTransfer");l.append(c),T(this,ot,Zf).call(this,c,"feFuncR",e),T(this,ot,Zf).call(this,c,"feFuncG",n),T(this,ot,Zf).call(this,c,"feFuncB",a)},EA=function(e,n){const a=o(this,Oi).createElementNS(qa,"feComponentTransfer");n.append(a),T(this,ot,Zf).call(this,a,"feFuncA",e)},tp=function(e){return o(this,ot,$u).style.color=e,Ud(getComputedStyle(o(this,ot,$u)).getPropertyValue("color"))};class U2{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!t)throw new Error("Font filename must be specified.");const e=`${this.baseUrl}${t}`;return this._fetch(e).catch(n=>{throw new Error(`Unable to load font data at: ${e}`)})}async _fetch(t){ge("Abstract method `_fetch` called.")}}class z_ extends U2{async _fetch(t){const e=await Fd(t,"arraybuffer");return new Uint8Array(e)}}class H2{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!t)throw new Error("Wasm filename must be specified.");const e=`${this.baseUrl}${t}`;return this._fetch(e).catch(n=>{throw new Error(`Unable to load wasm data at: ${e}`)})}async _fetch(t){ge("Abstract method `_fetch` called.")}}class P_ extends H2{async _fetch(t){const e=await Fd(t,"arraybuffer");return new Uint8Array(e)}}Yi&&St("Please use the `legacy` build in Node.js environments.");async function GS(d){const e=await process.getBuiltinModule("fs").promises.readFile(d);return new Uint8Array(e)}class ij extends I2{}class nj extends z2{_createCanvas(t,e){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(t,e)}}class sj extends P2{async _fetch(t){return GS(t)}}class aj extends U2{async _fetch(t){return GS(t)}}class rj extends H2{async _fetch(t){return GS(t)}}const qu="__forcedDependency",{floor:I_,ceil:F_}=Math;function Lb(d,t,e,n,a,l){d[t*4+0]=Math.min(d[t*4+0],e),d[t*4+1]=Math.min(d[t*4+1],n),d[t*4+2]=Math.max(d[t*4+2],a),d[t*4+3]=Math.max(d[t*4+3],l)}const TA=new Uint32Array(new Uint8Array([255,255,0,0]).buffer)[0];var Lh,Do;class oj{constructor(t,e){E(this,Lh);E(this,Do);x(this,Lh,t),x(this,Do,e)}get length(){return o(this,Lh).length}isEmpty(t){return o(this,Lh)[t]===TA}minX(t){return o(this,Do)[t*4+0]/256}minY(t){return o(this,Do)[t*4+1]/256}maxX(t){return(o(this,Do)[t*4+2]+1)/256}maxY(t){return(o(this,Do)[t*4+3]+1)/256}}Lh=new WeakMap,Do=new WeakMap;const kb=(d,t)=>{if(!d)return;let e=d.get(t);return e||(e={dependencies:new Set,isRenderingOperation:!1},d.set(t,e)),e};var cn,un,oc,ks,lc,ur,te,ae,hr,hn,Kp,kh,cc,uc,dr,ji,ua,Qp,_A;class lj{constructor(t,e,n=!1){E(this,Qp);E(this,cn,{__proto__:null});E(this,un,{__proto__:null,transform:[],moveText:[],sameLineText:[],[qu]:[]});E(this,oc,new Map);E(this,ks,[]);E(this,lc,[]);E(this,ur,[[1,0,0,1,0,0]]);E(this,te,[-1/0,-1/0,1/0,1/0]);E(this,ae,new Float64Array([1/0,1/0,-1/0,-1/0]));E(this,hr,-1);E(this,hn,new Set);E(this,Kp,new Map);E(this,kh,new Map);E(this,cc);E(this,uc);E(this,dr);E(this,ji);E(this,ua);x(this,cc,t.width),x(this,uc,t.height),T(this,Qp,_A).call(this,e),n&&x(this,ua,new Map)}growOperationsCount(t){t>=o(this,ji).length&&T(this,Qp,_A).call(this,t,o(this,ji))}save(t){return x(this,cn,{__proto__:o(this,cn)}),x(this,un,{__proto__:o(this,un),transform:{__proto__:o(this,un).transform},moveText:{__proto__:o(this,un).moveText},sameLineText:{__proto__:o(this,un).sameLineText},[qu]:{__proto__:o(this,un)[qu]}}),x(this,te,{__proto__:o(this,te)}),o(this,ks).push(t),this}restore(t){var a;const e=Object.getPrototypeOf(o(this,cn));if(e===null)return this;x(this,cn,e),x(this,un,Object.getPrototypeOf(o(this,un))),x(this,te,Object.getPrototypeOf(o(this,te)));const n=o(this,ks).pop();return n!==void 0&&((a=kb(o(this,ua),t))==null||a.dependencies.add(n),o(this,ji)[t]=o(this,ji)[n]),this}recordOpenMarker(t){return o(this,ks).push(t),this}getOpenMarker(){return o(this,ks).length===0?null:o(this,ks).at(-1)}recordCloseMarker(t){var n;const e=o(this,ks).pop();return e!==void 0&&((n=kb(o(this,ua),t))==null||n.dependencies.add(e),o(this,ji)[t]=o(this,ji)[e]),this}beginMarkedContent(t){return o(this,lc).push(t),this}endMarkedContent(t){var n;const e=o(this,lc).pop();return e!==void 0&&((n=kb(o(this,ua),t))==null||n.dependencies.add(e),o(this,ji)[t]=o(this,ji)[e]),this}pushBaseTransform(t){return o(this,ur).push(ct.multiplyByDOMMatrix(o(this,ur).at(-1),t.getTransform())),this}popBaseTransform(){return o(this,ur).length>1&&o(this,ur).pop(),this}recordSimpleData(t,e){return o(this,cn)[t]=e,this}recordIncrementalData(t,e){return o(this,un)[t].push(e),this}resetIncrementalData(t,e){return o(this,un)[t].length=0,this}recordNamedData(t,e){return o(this,oc).set(t,e),this}recordSimpleDataFromNamed(t,e,n){o(this,cn)[t]=o(this,oc).get(e)??n}recordFutureForcedDependency(t,e){return this.recordIncrementalData(qu,e),this}inheritSimpleDataAsFutureForcedDependencies(t){for(const e of t)e in o(this,cn)&&this.recordFutureForcedDependency(e,o(this,cn)[e]);return this}inheritPendingDependenciesAsFutureForcedDependencies(){for(const t of o(this,hn))this.recordFutureForcedDependency(qu,t);return this}resetBBox(t){return o(this,hr)!==t&&(x(this,hr,t),o(this,ae)[0]=1/0,o(this,ae)[1]=1/0,o(this,ae)[2]=-1/0,o(this,ae)[3]=-1/0),this}recordClipBox(t,e,n,a,l,c){const h=ct.multiplyByDOMMatrix(o(this,ur).at(-1),e.getTransform()),f=[1/0,1/0,-1/0,-1/0];ct.axialAlignedBoundingBox([n,l,a,c],h,f);const p=ct.intersect(o(this,te),f);return p?(o(this,te)[0]=p[0],o(this,te)[1]=p[1],o(this,te)[2]=p[2],o(this,te)[3]=p[3]):(o(this,te)[0]=o(this,te)[1]=1/0,o(this,te)[2]=o(this,te)[3]=-1/0),this}recordBBox(t,e,n,a,l,c){const h=o(this,te);if(h[0]===1/0)return this;const f=ct.multiplyByDOMMatrix(o(this,ur).at(-1),e.getTransform());if(h[0]===-1/0)return ct.axialAlignedBoundingBox([n,l,a,c],f,o(this,ae)),this;const p=[1/0,1/0,-1/0,-1/0];return ct.axialAlignedBoundingBox([n,l,a,c],f,p),o(this,ae)[0]=Math.min(o(this,ae)[0],Math.max(p[0],h[0])),o(this,ae)[1]=Math.min(o(this,ae)[1],Math.max(p[1],h[1])),o(this,ae)[2]=Math.max(o(this,ae)[2],Math.min(p[2],h[2])),o(this,ae)[3]=Math.max(o(this,ae)[3],Math.min(p[3],h[3])),this}recordCharacterBBox(t,e,n,a=1,l=0,c=0,h){const f=n.bbox;let p,m;if(f&&(p=f[2]!==f[0]&&f[3]!==f[1]&&o(this,kh).get(n),p!==!1&&(m=[0,0,0,0],ct.axialAlignedBoundingBox(f,n.fontMatrix,m),(a!==1||l!==0||c!==0)&&ct.scaleMinMax([a,0,0,-a,l,c],m),p)))return this.recordBBox(t,e,m[0],m[2],m[1],m[3]);if(!h)return this.recordFullPageBBox(t);const y=h();return f&&m&&p===void 0&&(p=m[0]<=l-y.actualBoundingBoxLeft&&m[2]>=l+y.actualBoundingBoxRight&&m[1]<=c-y.actualBoundingBoxAscent&&m[3]>=c+y.actualBoundingBoxDescent,o(this,kh).set(n,p),p)?this.recordBBox(t,e,m[0],m[2],m[1],m[3]):this.recordBBox(t,e,l-y.actualBoundingBoxLeft,l+y.actualBoundingBoxRight,c-y.actualBoundingBoxAscent,c+y.actualBoundingBoxDescent)}recordFullPageBBox(t){return o(this,ae)[0]=Math.max(0,o(this,te)[0]),o(this,ae)[1]=Math.max(0,o(this,te)[1]),o(this,ae)[2]=Math.min(o(this,cc),o(this,te)[2]),o(this,ae)[3]=Math.min(o(this,uc),o(this,te)[3]),this}getSimpleIndex(t){return o(this,cn)[t]}recordDependencies(t,e){const n=o(this,hn),a=o(this,cn),l=o(this,un);for(const c of e)c in o(this,cn)?n.add(a[c]):c in l&&l[c].forEach(n.add,n);return this}recordNamedDependency(t,e){return o(this,oc).has(e)&&o(this,hn).add(o(this,oc).get(e)),this}recordOperation(t,e=!1){if(this.recordDependencies(t,[qu]),o(this,ua)){const n=kb(o(this,ua),t),{dependencies:a}=n;o(this,hn).forEach(a.add,a),o(this,ks).forEach(a.add,a),o(this,lc).forEach(a.add,a),a.delete(t),n.isRenderingOperation=!0}if(o(this,hr)===t){const n=I_(o(this,ae)[0]*256/o(this,cc)),a=I_(o(this,ae)[1]*256/o(this,uc)),l=F_(o(this,ae)[2]*256/o(this,cc)),c=F_(o(this,ae)[3]*256/o(this,uc));Lb(o(this,dr),t,n,a,l,c);for(const h of o(this,hn))h!==t&&Lb(o(this,dr),h,n,a,l,c);for(const h of o(this,ks))h!==t&&Lb(o(this,dr),h,n,a,l,c);for(const h of o(this,lc))h!==t&&Lb(o(this,dr),h,n,a,l,c);e||(o(this,hn).clear(),x(this,hr,-1))}return this}recordShowTextOperation(t,e=!1){const n=Array.from(o(this,hn));this.recordOperation(t,e),this.recordIncrementalData("sameLineText",t);for(const a of n)this.recordIncrementalData("sameLineText",a);return this}bboxToClipBoxDropOperation(t,e=!1){return o(this,hr)===t&&(x(this,hr,-1),o(this,te)[0]=Math.max(o(this,te)[0],o(this,ae)[0]),o(this,te)[1]=Math.max(o(this,te)[1],o(this,ae)[1]),o(this,te)[2]=Math.min(o(this,te)[2],o(this,ae)[2]),o(this,te)[3]=Math.min(o(this,te)[3],o(this,ae)[3]),e||o(this,hn).clear()),this}_takePendingDependencies(){const t=o(this,hn);return x(this,hn,new Set),t}_extractOperation(t){const e=o(this,Kp).get(t);return o(this,Kp).delete(t),e}_pushPendingDependencies(t){for(const e of t)o(this,hn).add(e)}take(){return o(this,kh).clear(),new oj(o(this,ji),o(this,dr))}takeDebugMetadata(){return o(this,ua)}}cn=new WeakMap,un=new WeakMap,oc=new WeakMap,ks=new WeakMap,lc=new WeakMap,ur=new WeakMap,te=new WeakMap,ae=new WeakMap,hr=new WeakMap,hn=new WeakMap,Kp=new WeakMap,kh=new WeakMap,cc=new WeakMap,uc=new WeakMap,dr=new WeakMap,ji=new WeakMap,ua=new WeakMap,Qp=new WeakSet,_A=function(t,e){const n=new ArrayBuffer(t*4);x(this,dr,new Uint8ClampedArray(n)),x(this,ji,new Uint32Array(n)),e&&e.length>0?(o(this,ji).set(e),o(this,ji).fill(TA,e.length)):o(this,ji).fill(TA)};var de,Oe,Os,Oh,jh;const ew=class ew{constructor(t,e,n){E(this,de);E(this,Oe);E(this,Os);E(this,Oh,0);E(this,jh,0);if(t instanceof ew&&o(t,Os)===!!n)return t;x(this,de,t),x(this,Oe,e),x(this,Os,!!n)}growOperationsCount(){throw new Error("Unreachable")}save(t){return Ze(this,jh)._++,o(this,de).save(o(this,Oe)),this}restore(t){return o(this,jh)>0&&(o(this,de).restore(o(this,Oe)),Ze(this,jh)._--),this}recordOpenMarker(t){return Ze(this,Oh)._++,this}getOpenMarker(){return o(this,Oh)>0?o(this,Oe):o(this,de).getOpenMarker()}recordCloseMarker(t){return Ze(this,Oh)._--,this}beginMarkedContent(t){return this}endMarkedContent(t){return this}pushBaseTransform(t){return o(this,de).pushBaseTransform(t),this}popBaseTransform(){return o(this,de).popBaseTransform(),this}recordSimpleData(t,e){return o(this,de).recordSimpleData(t,o(this,Oe)),this}recordIncrementalData(t,e){return o(this,de).recordIncrementalData(t,o(this,Oe)),this}resetIncrementalData(t,e){return o(this,de).resetIncrementalData(t,o(this,Oe)),this}recordNamedData(t,e){return this}recordSimpleDataFromNamed(t,e,n){return o(this,de).recordSimpleDataFromNamed(t,e,o(this,Oe)),this}recordFutureForcedDependency(t,e){return o(this,de).recordFutureForcedDependency(t,o(this,Oe)),this}inheritSimpleDataAsFutureForcedDependencies(t){return o(this,de).inheritSimpleDataAsFutureForcedDependencies(t),this}inheritPendingDependenciesAsFutureForcedDependencies(){return o(this,de).inheritPendingDependenciesAsFutureForcedDependencies(),this}resetBBox(t){return o(this,Os)||o(this,de).resetBBox(o(this,Oe)),this}recordClipBox(t,e,n,a,l,c){return o(this,Os)||o(this,de).recordClipBox(o(this,Oe),e,n,a,l,c),this}recordBBox(t,e,n,a,l,c){return o(this,Os)||o(this,de).recordBBox(o(this,Oe),e,n,a,l,c),this}recordCharacterBBox(t,e,n,a,l,c,h){return o(this,Os)||o(this,de).recordCharacterBBox(o(this,Oe),e,n,a,l,c,h),this}recordFullPageBBox(t){return o(this,Os)||o(this,de).recordFullPageBBox(o(this,Oe)),this}getSimpleIndex(t){return o(this,de).getSimpleIndex(t)}recordDependencies(t,e){return o(this,de).recordDependencies(o(this,Oe),e),this}recordNamedDependency(t,e){return o(this,de).recordNamedDependency(o(this,Oe),e),this}recordOperation(t){return o(this,de).recordOperation(o(this,Oe),!0),this}recordShowTextOperation(t){return o(this,de).recordShowTextOperation(o(this,Oe),!0),this}bboxToClipBoxDropOperation(t){return o(this,Os)||o(this,de).bboxToClipBoxDropOperation(o(this,Oe),!0),this}take(){throw new Error("Unreachable")}takeDebugMetadata(){throw new Error("Unreachable")}};de=new WeakMap,Oe=new WeakMap,Os=new WeakMap,Oh=new WeakMap,jh=new WeakMap;let _0=ew;const cs={stroke:["path","transform","filter","strokeColor","strokeAlpha","lineWidth","lineCap","lineJoin","miterLimit","dash"],fill:["path","transform","filter","fillColor","fillAlpha","globalCompositeOperation","SMask"],imageXObject:["transform","SMask","filter","fillAlpha","strokeAlpha","globalCompositeOperation"],rawFillPath:["filter","fillColor","fillAlpha"],showText:["transform","leading","charSpacing","wordSpacing","hScale","textRise","moveText","textMatrix","font","fontObj","filter","fillColor","textRenderingMode","SMask","fillAlpha","strokeAlpha","globalCompositeOperation","sameLineText"],transform:["transform"],transformAndFill:["transform","fillColor"]},_i={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function CA(d,t){if(!t)return;const e=t[2]-t[0],n=t[3]-t[1],a=new Path2D;a.rect(t[0],t[1],e,n),d.clip(a)}class VS{isModifyingCurrentTransform(){return!1}getPattern(){ge("Abstract method `getPattern` called.")}}class cj extends VS{constructor(t){super(),this._type=t[1],this._bbox=t[2],this._colorStops=t[3],this._p0=t[4],this._p1=t[5],this._r0=t[6],this._r1=t[7],this.matrix=null}_createGradient(t){let e;this._type==="axial"?e=t.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(e=t.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const n of this._colorStops)e.addColorStop(n[0],n[1]);return e}getPattern(t,e,n,a){let l;if(a===_i.STROKE||a===_i.FILL){const c=e.current.getClippedPathBoundingBox(a,Ne(t))||[0,0,0,0],h=Math.ceil(c[2]-c[0])||1,f=Math.ceil(c[3]-c[1])||1,p=e.cachedCanvases.getCanvas("pattern",h,f),m=p.context;m.clearRect(0,0,m.canvas.width,m.canvas.height),m.beginPath(),m.rect(0,0,m.canvas.width,m.canvas.height),m.translate(-c[0],-c[1]),n=ct.transform(n,[1,0,0,1,c[0],c[1]]),m.transform(...e.baseTransform),this.matrix&&m.transform(...this.matrix),CA(m,this._bbox),m.fillStyle=this._createGradient(m),m.fill(),l=t.createPattern(p.canvas,"no-repeat");const y=new DOMMatrix(n);l.setTransform(y)}else CA(t,this._bbox),l=this._createGradient(t);return l}}function qx(d,t,e,n,a,l,c,h){const f=t.coords,p=t.colors,m=d.data,y=d.width*4;let v;f[e+1]>f[n+1]&&(v=e,e=n,n=v,v=l,l=c,c=v),f[n+1]>f[a+1]&&(v=n,n=a,a=v,v=c,c=h,h=v),f[e+1]>f[n+1]&&(v=e,e=n,n=v,v=l,l=c,c=v);const w=(f[e]+t.offsetX)*t.scaleX,C=(f[e+1]+t.offsetY)*t.scaleY,_=(f[n]+t.offsetX)*t.scaleX,M=(f[n+1]+t.offsetY)*t.scaleY,N=(f[a]+t.offsetX)*t.scaleX,R=(f[a+1]+t.offsetY)*t.scaleY;if(C>=R)return;const L=p[l],k=p[l+1],j=p[l+2],z=p[c],I=p[c+1],K=p[c+2],J=p[h],W=p[h+1],tt=p[h+2],X=Math.round(C),it=Math.round(R);let et,at,P,V,st,ut,xt,$t;for(let mt=X;mt<=it;mt++){if(mt<M){const Ut=mt<C?0:(C-mt)/(C-M);et=w-(w-_)*Ut,at=L-(L-z)*Ut,P=k-(k-I)*Ut,V=j-(j-K)*Ut}else{let Ut;mt>R?Ut=1:M===R?Ut=0:Ut=(M-mt)/(M-R),et=_-(_-N)*Ut,at=z-(z-J)*Ut,P=I-(I-W)*Ut,V=K-(K-tt)*Ut}let ht;mt<C?ht=0:mt>R?ht=1:ht=(C-mt)/(C-R),st=w-(w-N)*ht,ut=L-(L-J)*ht,xt=k-(k-W)*ht,$t=j-(j-tt)*ht;const Rt=Math.round(Math.min(et,st)),Qt=Math.round(Math.max(et,st));let Se=y*mt+Rt*4;for(let Ut=Rt;Ut<=Qt;Ut++)ht=(et-Ut)/(et-st),ht<0?ht=0:ht>1&&(ht=1),m[Se++]=at-(at-ut)*ht|0,m[Se++]=P-(P-xt)*ht|0,m[Se++]=V-(V-$t)*ht|0,m[Se++]=255}}function uj(d,t,e){const n=t.coords,a=t.colors;let l,c;switch(t.type){case"lattice":const h=t.verticesPerRow,f=Math.floor(n.length/h)-1,p=h-1;for(l=0;l<f;l++){let m=l*h;for(let y=0;y<p;y++,m++)qx(d,e,n[m],n[m+1],n[m+h],a[m],a[m+1],a[m+h]),qx(d,e,n[m+h+1],n[m+1],n[m+h],a[m+h+1],a[m+1],a[m+h])}break;case"triangles":for(l=0,c=n.length;l<c;l+=3)qx(d,e,n[l],n[l+1],n[l+2],a[l],a[l+1],a[l+2]);break;default:throw new Error("illegal figure")}}class hj extends VS{constructor(t){super(),this._coords=t[2],this._colors=t[3],this._figures=t[4],this._bounds=t[5],this._bbox=t[6],this._background=t[7],this.matrix=null}_createMeshCanvas(t,e,n){const h=Math.floor(this._bounds[0]),f=Math.floor(this._bounds[1]),p=Math.ceil(this._bounds[2])-h,m=Math.ceil(this._bounds[3])-f,y=Math.min(Math.ceil(Math.abs(p*t[0]*1.1)),3e3),v=Math.min(Math.ceil(Math.abs(m*t[1]*1.1)),3e3),w=p/y,C=m/v,_={coords:this._coords,colors:this._colors,offsetX:-h,offsetY:-f,scaleX:1/w,scaleY:1/C},M=y+4,N=v+4,R=n.getCanvas("mesh",M,N),L=R.context,k=L.createImageData(y,v);if(e){const z=k.data;for(let I=0,K=z.length;I<K;I+=4)z[I]=e[0],z[I+1]=e[1],z[I+2]=e[2],z[I+3]=255}for(const z of this._figures)uj(k,z,_);return L.putImageData(k,2,2),{canvas:R.canvas,offsetX:h-2*w,offsetY:f-2*C,scaleX:w,scaleY:C}}isModifyingCurrentTransform(){return!0}getPattern(t,e,n,a){CA(t,this._bbox);const l=new Float32Array(2);if(a===_i.SHADING)ct.singularValueDecompose2dScale(Ne(t),l);else if(this.matrix){ct.singularValueDecompose2dScale(this.matrix,l);const[h,f]=l;ct.singularValueDecompose2dScale(e.baseTransform,l),l[0]*=h,l[1]*=f}else ct.singularValueDecompose2dScale(e.baseTransform,l);const c=this._createMeshCanvas(l,a===_i.SHADING?null:this._background,e.cachedCanvases);return a!==_i.SHADING&&(t.setTransform(...e.baseTransform),this.matrix&&t.transform(...this.matrix)),t.translate(c.offsetX,c.offsetY),t.scale(c.scaleX,c.scaleY),t.createPattern(c.canvas,"no-repeat")}}class dj extends VS{getPattern(){return"hotpink"}}function fj(d){switch(d[0]){case"RadialAxial":return new cj(d);case"Mesh":return new hj(d);case"Dummy":return new dj}throw new Error(`Unknown IR type: ${d[0]}`)}const U_={COLORED:1,UNCOLORED:2},G0=class G0{constructor(t,e,n,a){this.color=t[1],this.operatorList=t[2],this.matrix=t[3],this.bbox=t[4],this.xstep=t[5],this.ystep=t[6],this.paintType=t[7],this.tilingType=t[8],this.ctx=e,this.canvasGraphicsFactory=n,this.baseTransform=a}createPatternCanvas(t,e){var ut,xt;const{bbox:n,operatorList:a,paintType:l,tilingType:c,color:h,canvasGraphicsFactory:f}=this;let{xstep:p,ystep:m}=this;p=Math.abs(p),m=Math.abs(m),oy("TilingType: "+c);const y=n[0],v=n[1],w=n[2],C=n[3],_=w-y,M=C-v,N=new Float32Array(2);ct.singularValueDecompose2dScale(this.matrix,N);const[R,L]=N;ct.singularValueDecompose2dScale(this.baseTransform,N);const k=R*N[0],j=L*N[1];let z=_,I=M,K=!1,J=!1;const W=Math.ceil(p*k),tt=Math.ceil(m*j),X=Math.ceil(_*k),it=Math.ceil(M*j);W>=X?z=p:K=!0,tt>=it?I=m:J=!0;const et=this.getSizeAndScale(z,this.ctx.canvas.width,k),at=this.getSizeAndScale(I,this.ctx.canvas.height,j),P=t.cachedCanvases.getCanvas("pattern",et.size,at.size),V=P.context,st=f.createCanvasGraphics(V,e);if(st.groupLevel=t.groupLevel,this.setFillAndStrokeStyleToContext(st,l,h),V.translate(-et.scale*y,-at.scale*v),st.transform(0,et.scale,0,0,at.scale,0,0),V.save(),(ut=st.dependencyTracker)==null||ut.save(),this.clipBbox(st,y,v,w,C),st.baseTransform=Ne(st.ctx),st.executeOperatorList(a),st.endDrawing(),(xt=st.dependencyTracker)==null||xt.restore(),V.restore(),K||J){const $t=P.canvas;K&&(z=p),J&&(I=m);const mt=this.getSizeAndScale(z,this.ctx.canvas.width,k),ht=this.getSizeAndScale(I,this.ctx.canvas.height,j),Rt=mt.size,Qt=ht.size,Se=t.cachedCanvases.getCanvas("pattern-workaround",Rt,Qt),Ut=Se.context,Wi=K?Math.floor(_/p):0,Mi=J?Math.floor(M/m):0;for(let pi=0;pi<=Wi;pi++)for(let It=0;It<=Mi;It++)Ut.drawImage($t,Rt*pi,Qt*It,Rt,Qt,0,0,Rt,Qt);return{canvas:Se.canvas,scaleX:mt.scale,scaleY:ht.scale,offsetX:y,offsetY:v}}return{canvas:P.canvas,scaleX:et.scale,scaleY:at.scale,offsetX:y,offsetY:v}}getSizeAndScale(t,e,n){const a=Math.max(G0.MAX_PATTERN_SIZE,e);let l=Math.ceil(t*n);return l>=a?l=a:n=l/t,{scale:n,size:l}}clipBbox(t,e,n,a,l){const c=a-e,h=l-n;t.ctx.rect(e,n,c,h),ct.axialAlignedBoundingBox([e,n,a,l],Ne(t.ctx),t.current.minMax),t.clip(),t.endPath()}setFillAndStrokeStyleToContext(t,e,n){const a=t.ctx,l=t.current;switch(e){case U_.COLORED:const{fillStyle:c,strokeStyle:h}=this.ctx;a.fillStyle=l.fillColor=c,a.strokeStyle=l.strokeColor=h;break;case U_.UNCOLORED:a.fillStyle=a.strokeStyle=n,l.fillColor=l.strokeColor=n;break;default:throw new OO(`Unsupported paint type: ${e}`)}}isModifyingCurrentTransform(){return!1}getPattern(t,e,n,a,l){let c=n;a!==_i.SHADING&&(c=ct.transform(c,e.baseTransform),this.matrix&&(c=ct.transform(c,this.matrix)));const h=this.createPatternCanvas(e,l);let f=new DOMMatrix(c);f=f.translate(h.offsetX,h.offsetY),f=f.scale(1/h.scaleX,1/h.scaleY);const p=t.createPattern(h.canvas,"repeat");return p.setTransform(f),p}};nt(G0,"MAX_PATTERN_SIZE",3e3);let NA=G0;function pj({src:d,srcPos:t=0,dest:e,width:n,height:a,nonBlackColor:l=4294967295,inverseDecode:c=!1}){const h=fi.isLittleEndian?4278190080:255,[f,p]=c?[l,h]:[h,l],m=n>>3,y=n&7,v=d.length;e=new Uint32Array(e.buffer);let w=0;for(let C=0;C<a;C++){for(const M=t+m;t<M;t++){const N=t<v?d[t]:255;e[w++]=N&128?p:f,e[w++]=N&64?p:f,e[w++]=N&32?p:f,e[w++]=N&16?p:f,e[w++]=N&8?p:f,e[w++]=N&4?p:f,e[w++]=N&2?p:f,e[w++]=N&1?p:f}if(y===0)continue;const _=t<v?d[t++]:255;for(let M=0;M<y;M++)e[w++]=_&1<<7-M?p:f}return{srcPos:t,destPos:w}}const H_=16,G_=100,gj=15,V_=10,gn=16,Xx=new DOMMatrix,Xn=new Float32Array(2),th=new Float32Array([1/0,1/0,-1/0,-1/0]);function mj(d,t){if(d._removeMirroring)throw new Error("Context is already forwarding operations.");d.__originalSave=d.save,d.__originalRestore=d.restore,d.__originalRotate=d.rotate,d.__originalScale=d.scale,d.__originalTranslate=d.translate,d.__originalTransform=d.transform,d.__originalSetTransform=d.setTransform,d.__originalResetTransform=d.resetTransform,d.__originalClip=d.clip,d.__originalMoveTo=d.moveTo,d.__originalLineTo=d.lineTo,d.__originalBezierCurveTo=d.bezierCurveTo,d.__originalRect=d.rect,d.__originalClosePath=d.closePath,d.__originalBeginPath=d.beginPath,d._removeMirroring=()=>{d.save=d.__originalSave,d.restore=d.__originalRestore,d.rotate=d.__originalRotate,d.scale=d.__originalScale,d.translate=d.__originalTranslate,d.transform=d.__originalTransform,d.setTransform=d.__originalSetTransform,d.resetTransform=d.__originalResetTransform,d.clip=d.__originalClip,d.moveTo=d.__originalMoveTo,d.lineTo=d.__originalLineTo,d.bezierCurveTo=d.__originalBezierCurveTo,d.rect=d.__originalRect,d.closePath=d.__originalClosePath,d.beginPath=d.__originalBeginPath,delete d._removeMirroring},d.save=function(){t.save(),this.__originalSave()},d.restore=function(){t.restore(),this.__originalRestore()},d.translate=function(e,n){t.translate(e,n),this.__originalTranslate(e,n)},d.scale=function(e,n){t.scale(e,n),this.__originalScale(e,n)},d.transform=function(e,n,a,l,c,h){t.transform(e,n,a,l,c,h),this.__originalTransform(e,n,a,l,c,h)},d.setTransform=function(e,n,a,l,c,h){t.setTransform(e,n,a,l,c,h),this.__originalSetTransform(e,n,a,l,c,h)},d.resetTransform=function(){t.resetTransform(),this.__originalResetTransform()},d.rotate=function(e){t.rotate(e),this.__originalRotate(e)},d.clip=function(e){t.clip(e),this.__originalClip(e)},d.moveTo=function(e,n){t.moveTo(e,n),this.__originalMoveTo(e,n)},d.lineTo=function(e,n){t.lineTo(e,n),this.__originalLineTo(e,n)},d.bezierCurveTo=function(e,n,a,l,c,h){t.bezierCurveTo(e,n,a,l,c,h),this.__originalBezierCurveTo(e,n,a,l,c,h)},d.rect=function(e,n,a,l){t.rect(e,n,a,l),this.__originalRect(e,n,a,l)},d.closePath=function(){t.closePath(),this.__originalClosePath()},d.beginPath=function(){t.beginPath(),this.__originalBeginPath()}}class bj{constructor(t){this.canvasFactory=t,this.cache=Object.create(null)}getCanvas(t,e,n){let a;return this.cache[t]!==void 0?(a=this.cache[t],this.canvasFactory.reset(a,e,n)):(a=this.canvasFactory.create(e,n),this.cache[t]=a),a}delete(t){delete this.cache[t]}clear(){for(const t in this.cache){const e=this.cache[t];this.canvasFactory.destroy(e),delete this.cache[t]}}}function Ob(d,t,e,n,a,l,c,h,f,p){const[m,y,v,w,C,_]=Ne(d);if(y===0&&v===0){const R=c*m+C,L=Math.round(R),k=h*w+_,j=Math.round(k),z=(c+f)*m+C,I=Math.abs(Math.round(z)-L)||1,K=(h+p)*w+_,J=Math.abs(Math.round(K)-j)||1;return d.setTransform(Math.sign(m),0,0,Math.sign(w),L,j),d.drawImage(t,e,n,a,l,0,0,I,J),d.setTransform(m,y,v,w,C,_),[I,J]}if(m===0&&w===0){const R=h*v+C,L=Math.round(R),k=c*y+_,j=Math.round(k),z=(h+p)*v+C,I=Math.abs(Math.round(z)-L)||1,K=(c+f)*y+_,J=Math.abs(Math.round(K)-j)||1;return d.setTransform(0,Math.sign(y),Math.sign(v),0,L,j),d.drawImage(t,e,n,a,l,0,0,J,I),d.setTransform(m,y,v,w,C,_),[J,I]}d.drawImage(t,e,n,a,l,c,h,f,p);const M=Math.hypot(m,y),N=Math.hypot(v,w);return[M*f,N*p]}class q_{constructor(t,e,n){nt(this,"alphaIsShape",!1);nt(this,"fontSize",0);nt(this,"fontSizeScale",1);nt(this,"textMatrix",null);nt(this,"textMatrixScale",1);nt(this,"fontMatrix",tA);nt(this,"leading",0);nt(this,"x",0);nt(this,"y",0);nt(this,"lineX",0);nt(this,"lineY",0);nt(this,"charSpacing",0);nt(this,"wordSpacing",0);nt(this,"textHScale",1);nt(this,"textRenderingMode",xi.FILL);nt(this,"textRise",0);nt(this,"fillColor","#000000");nt(this,"strokeColor","#000000");nt(this,"patternFill",!1);nt(this,"patternStroke",!1);nt(this,"fillAlpha",1);nt(this,"strokeAlpha",1);nt(this,"lineWidth",1);nt(this,"activeSMask",null);nt(this,"transferMaps","none");n==null||n(this),this.clipBox=new Float32Array([0,0,t,e]),this.minMax=th.slice()}clone(){const t=Object.create(this);return t.clipBox=this.clipBox.slice(),t.minMax=this.minMax.slice(),t}getPathBoundingBox(t=_i.FILL,e=null){const n=this.minMax.slice();if(t===_i.STROKE){e||ge("Stroke bounding box must include transform."),ct.singularValueDecompose2dScale(e,Xn);const a=Xn[0]*this.lineWidth/2,l=Xn[1]*this.lineWidth/2;n[0]-=a,n[1]-=l,n[2]+=a,n[3]+=l}return n}updateClipFromPath(){const t=ct.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(t||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(t){this.clipBox.set(t,0),this.minMax.set(th,0)}getClippedPathBoundingBox(t=_i.FILL,e=null){return ct.intersect(this.clipBox,this.getPathBoundingBox(t,e))}}function X_(d,t){if(t instanceof ImageData){d.putImageData(t,0,0);return}const e=t.height,n=t.width,a=e%gn,l=(e-a)/gn,c=a===0?l:l+1,h=d.createImageData(n,gn);let f=0,p;const m=t.data,y=h.data;let v,w,C,_;if(t.kind===hp.GRAYSCALE_1BPP){const M=m.byteLength,N=new Uint32Array(y.buffer,0,y.byteLength>>2),R=N.length,L=n+7>>3,k=4294967295,j=fi.isLittleEndian?4278190080:255;for(v=0;v<c;v++){for(C=v<l?gn:a,p=0,w=0;w<C;w++){const z=M-f;let I=0;const K=z>L?n:z*8-7,J=K&-8;let W=0,tt=0;for(;I<J;I+=8)tt=m[f++],N[p++]=tt&128?k:j,N[p++]=tt&64?k:j,N[p++]=tt&32?k:j,N[p++]=tt&16?k:j,N[p++]=tt&8?k:j,N[p++]=tt&4?k:j,N[p++]=tt&2?k:j,N[p++]=tt&1?k:j;for(;I<K;I++)W===0&&(tt=m[f++],W=128),N[p++]=tt&W?k:j,W>>=1}for(;p<R;)N[p++]=0;d.putImageData(h,0,v*gn)}}else if(t.kind===hp.RGBA_32BPP){for(w=0,_=n*gn*4,v=0;v<l;v++)y.set(m.subarray(f,f+_)),f+=_,d.putImageData(h,0,w),w+=gn;v<c&&(_=n*a*4,y.set(m.subarray(f,f+_)),d.putImageData(h,0,w))}else if(t.kind===hp.RGB_24BPP)for(C=gn,_=n*C,v=0;v<c;v++){for(v>=l&&(C=a,_=n*C),p=0,w=_;w--;)y[p++]=m[f++],y[p++]=m[f++],y[p++]=m[f++],y[p++]=255;d.putImageData(h,0,v*gn)}else throw new Error(`bad image kind: ${t.kind}`)}function Y_(d,t){if(t.bitmap){d.drawImage(t.bitmap,0,0);return}const e=t.height,n=t.width,a=e%gn,l=(e-a)/gn,c=a===0?l:l+1,h=d.createImageData(n,gn);let f=0;const p=t.data,m=h.data;for(let y=0;y<c;y++){const v=y<l?gn:a;({srcPos:f}=pj({src:p,srcPos:f,dest:m,width:n,height:v,nonBlackColor:0})),d.putImageData(h,0,y*gn)}}function Ff(d,t){const e=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const n of e)d[n]!==void 0&&(t[n]=d[n]);d.setLineDash!==void 0&&(t.setLineDash(d.getLineDash()),t.lineDashOffset=d.lineDashOffset)}function jb(d){d.strokeStyle=d.fillStyle="#000000",d.fillRule="nonzero",d.globalAlpha=1,d.lineWidth=1,d.lineCap="butt",d.lineJoin="miter",d.miterLimit=10,d.globalCompositeOperation="source-over",d.font="10px sans-serif",d.setLineDash!==void 0&&(d.setLineDash([]),d.lineDashOffset=0);const{filter:t}=d;t!=="none"&&t!==""&&(d.filter="none")}function $_(d,t){if(t)return!0;ct.singularValueDecompose2dScale(d,Xn);const e=Math.fround(qs.pixelRatio*kr.PDF_TO_CSS_UNITS);return Xn[0]<=e&&Xn[1]<=e}const yj=["butt","round","square"],vj=["miter","round","bevel"],xj={},K_={};var Xs,MA,DA,RA;const iw=class iw{constructor(t,e,n,a,l,{optionalContentConfig:c,markedContentStack:h=null},f,p,m){E(this,Xs);this.ctx=t,this.current=new q_(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=e,this.objs=n,this.canvasFactory=a,this.filterFactory=l,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=h||[],this.optionalContentConfig=c,this.cachedCanvases=new bj(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=f,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=p,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map,this.dependencyTracker=m??null}getObject(t,e,n=null){var a;return typeof e=="string"?((a=this.dependencyTracker)==null||a.recordNamedDependency(t,e),e.startsWith("g_")?this.commonObjs.get(e):this.objs.get(e)):n}beginDrawing({transform:t,viewport:e,transparency:n=!1,background:a=null}){const l=this.ctx.canvas.width,c=this.ctx.canvas.height,h=this.ctx.fillStyle;if(this.ctx.fillStyle=a||"#ffffff",this.ctx.fillRect(0,0,l,c),this.ctx.fillStyle=h,n){const f=this.cachedCanvases.getCanvas("transparent",l,c);this.compositeCtx=this.ctx,this.transparentCanvas=f.canvas,this.ctx=f.context,this.ctx.save(),this.ctx.transform(...Ne(this.compositeCtx))}this.ctx.save(),jb(this.ctx),t&&(this.ctx.transform(...t),this.outputScaleX=t[0],this.outputScaleY=t[0]),this.ctx.transform(...e.transform),this.viewportScale=e.scale,this.baseTransform=Ne(this.ctx)}executeOperatorList(t,e,n,a,l){var N;const c=t.argsArray,h=t.fnArray;let f=e||0;const p=c.length;if(p===f)return f;const m=p-f>V_&&typeof n=="function",y=m?Date.now()+gj:0;let v=0;const w=this.commonObjs,C=this.objs;let _,M;for(;;){if(a!==void 0&&f===a.nextBreakPoint)return a.breakIt(f,n),f;if(!l||l(f))if(_=h[f],M=c[f]??null,_!==zd.dependency)M===null?this[_](f):this[_](f,...M);else for(const R of M){(N=this.dependencyTracker)==null||N.recordNamedData(R,f);const L=R.startsWith("g_")?w:C;if(!L.has(R))return L.get(R,n),f}if(f++,f===p)return f;if(m&&++v>V_){if(Date.now()>y)return n(),f;v=0}}}endDrawing(){T(this,Xs,MA).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const t of this._cachedBitmapsMap.values()){for(const e of t.values())typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement&&(e.width=e.height=0);t.clear()}this._cachedBitmapsMap.clear(),T(this,Xs,DA).call(this)}_scaleImage(t,e){const n=t.width??t.displayWidth,a=t.height??t.displayHeight;let l=Math.max(Math.hypot(e[0],e[1]),1),c=Math.max(Math.hypot(e[2],e[3]),1),h=n,f=a,p="prescale1",m,y;for(;l>2&&h>1||c>2&&f>1;){let v=h,w=f;l>2&&h>1&&(v=h>=16384?Math.floor(h/2)-1||1:Math.ceil(h/2),l/=h/v),c>2&&f>1&&(w=f>=16384?Math.floor(f/2)-1||1:Math.ceil(f)/2,c/=f/w),m=this.cachedCanvases.getCanvas(p,v,w),y=m.context,y.clearRect(0,0,v,w),y.drawImage(t,0,0,h,f,0,0,v,w),t=m.canvas,h=v,f=w,p=p==="prescale1"?"prescale2":"prescale1"}return{img:t,paintWidth:h,paintHeight:f}}_createMaskCanvas(t,e){var W,tt;const n=this.ctx,{width:a,height:l}=e,c=this.current.fillColor,h=this.current.patternFill,f=Ne(n);let p,m,y,v;if((e.bitmap||e.data)&&e.count>1){const X=e.bitmap||e.data.buffer;m=JSON.stringify(h?f:[f.slice(0,4),c]),p=this._cachedBitmapsMap.get(X),p||(p=new Map,this._cachedBitmapsMap.set(X,p));const it=p.get(m);if(it&&!h){const et=Math.round(Math.min(f[0],f[2])+f[4]),at=Math.round(Math.min(f[1],f[3])+f[5]);return(W=this.dependencyTracker)==null||W.recordDependencies(t,cs.transformAndFill),{canvas:it,offsetX:et,offsetY:at}}y=it}y||(v=this.cachedCanvases.getCanvas("maskCanvas",a,l),Y_(v.context,e));let w=ct.transform(f,[1/a,0,0,-1/l,0,0]);w=ct.transform(w,[1,0,0,1,0,-l]);const C=th.slice();ct.axialAlignedBoundingBox([0,0,a,l],w,C);const[_,M,N,R]=C,L=Math.round(N-_)||1,k=Math.round(R-M)||1,j=this.cachedCanvases.getCanvas("fillCanvas",L,k),z=j.context,I=_,K=M;z.translate(-I,-K),z.transform(...w),y||(y=this._scaleImage(v.canvas,Ws(z)),y=y.img,p&&h&&p.set(m,y)),z.imageSmoothingEnabled=$_(Ne(z),e.interpolate),Ob(z,y,0,0,y.width,y.height,0,0,a,l),z.globalCompositeOperation="source-in";const J=ct.transform(Ws(z),[1,0,0,1,-I,-K]);return z.fillStyle=h?c.getPattern(n,this,J,_i.FILL,t):c,z.fillRect(0,0,a,l),p&&!h&&(this.cachedCanvases.delete("fillCanvas"),p.set(m,j.canvas)),(tt=this.dependencyTracker)==null||tt.recordDependencies(t,cs.transformAndFill),{canvas:j.canvas,offsetX:Math.round(I),offsetY:Math.round(K)}}setLineWidth(t,e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("lineWidth",t),e!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=e,this.ctx.lineWidth=e}setLineCap(t,e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("lineCap",t),this.ctx.lineCap=yj[e]}setLineJoin(t,e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("lineJoin",t),this.ctx.lineJoin=vj[e]}setMiterLimit(t,e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("miterLimit",t),this.ctx.miterLimit=e}setDash(t,e,n){var l;(l=this.dependencyTracker)==null||l.recordSimpleData("dash",t);const a=this.ctx;a.setLineDash!==void 0&&(a.setLineDash(e),a.lineDashOffset=n)}setRenderingIntent(t,e){}setFlatness(t,e){}setGState(t,e){var n,a,l,c,h;for(const[f,p]of e)switch(f){case"LW":this.setLineWidth(t,p);break;case"LC":this.setLineCap(t,p);break;case"LJ":this.setLineJoin(t,p);break;case"ML":this.setMiterLimit(t,p);break;case"D":this.setDash(t,p[0],p[1]);break;case"RI":this.setRenderingIntent(t,p);break;case"FL":this.setFlatness(t,p);break;case"Font":this.setFont(t,p[0],p[1]);break;case"CA":(n=this.dependencyTracker)==null||n.recordSimpleData("strokeAlpha",t),this.current.strokeAlpha=p;break;case"ca":(a=this.dependencyTracker)==null||a.recordSimpleData("fillAlpha",t),this.ctx.globalAlpha=this.current.fillAlpha=p;break;case"BM":(l=this.dependencyTracker)==null||l.recordSimpleData("globalCompositeOperation",t),this.ctx.globalCompositeOperation=p;break;case"SMask":(c=this.dependencyTracker)==null||c.recordSimpleData("SMask",t),this.current.activeSMask=p?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":(h=this.dependencyTracker)==null||h.recordSimpleData("filter",t),this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(p);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const t=this.inSMaskMode;this.current.activeSMask&&!t?this.beginSMaskMode():!this.current.activeSMask&&t&&this.endSMaskMode()}beginSMaskMode(t){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const e=this.ctx.canvas.width,n=this.ctx.canvas.height,a="smaskGroupAt"+this.groupLevel,l=this.cachedCanvases.getCanvas(a,e,n);this.suspendedCtx=this.ctx;const c=this.ctx=l.context;c.setTransform(this.suspendedCtx.getTransform()),Ff(this.suspendedCtx,c),mj(c,this.suspendedCtx),this.setGState(t,[["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),Ff(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(t){if(!this.current.activeSMask)return;t?(t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.ceil(t[2]),t[3]=Math.ceil(t[3])):t=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const e=this.current.activeSMask,n=this.suspendedCtx;this.composeSMask(n,e,this.ctx,t),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(t,e,n,a){const l=a[0],c=a[1],h=a[2]-l,f=a[3]-c;h===0||f===0||(this.genericComposeSMask(e.context,n,h,f,e.subtype,e.backdrop,e.transferMap,l,c,e.offsetX,e.offsetY),t.save(),t.globalAlpha=1,t.globalCompositeOperation="source-over",t.setTransform(1,0,0,1,0,0),t.drawImage(n.canvas,0,0),t.restore())}genericComposeSMask(t,e,n,a,l,c,h,f,p,m,y){let v=t.canvas,w=f-m,C=p-y;if(c)if(w<0||C<0||w+n>v.width||C+a>v.height){const M=this.cachedCanvases.getCanvas("maskExtension",n,a),N=M.context;N.drawImage(v,-w,-C),N.globalCompositeOperation="destination-atop",N.fillStyle=c,N.fillRect(0,0,n,a),N.globalCompositeOperation="source-over",v=M.canvas,w=C=0}else{t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0);const M=new Path2D;M.rect(w,C,n,a),t.clip(M),t.globalCompositeOperation="destination-atop",t.fillStyle=c,t.fillRect(w,C,n,a),t.restore()}e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0),l==="Alpha"&&h?e.filter=this.filterFactory.addAlphaFilter(h):l==="Luminosity"&&(e.filter=this.filterFactory.addLuminosityFilter(h));const _=new Path2D;_.rect(f,p,n,a),e.clip(_),e.globalCompositeOperation="destination-in",e.drawImage(v,w,C,n,a,f,p,n,a),e.restore()}save(t){var n;this.inSMaskMode&&Ff(this.ctx,this.suspendedCtx),this.ctx.save();const e=this.current;this.stateStack.push(e),this.current=e.clone(),(n=this.dependencyTracker)==null||n.save(t)}restore(t){var e;if((e=this.dependencyTracker)==null||e.restore(t),this.stateStack.length===0){this.inSMaskMode&&this.endSMaskMode();return}this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&Ff(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}transform(t,e,n,a,l,c,h){var f;(f=this.dependencyTracker)==null||f.recordIncrementalData("transform",t),this.ctx.transform(e,n,a,l,c,h),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(t,e,n,a){let[l]=n;if(!a){l||(l=n[0]=new Path2D),this[e](t,l);return}if(this.dependencyTracker!==null){const c=e===zd.stroke?this.current.lineWidth/2:0;this.dependencyTracker.resetBBox(t).recordBBox(t,this.ctx,a[0]-c,a[2]+c,a[1]-c,a[3]+c).recordDependencies(t,["transform"])}if(!(l instanceof Path2D)){const c=n[0]=new Path2D;for(let h=0,f=l.length;h<f;)switch(l[h++]){case Nb.moveTo:c.moveTo(l[h++],l[h++]);break;case Nb.lineTo:c.lineTo(l[h++],l[h++]);break;case Nb.curveTo:c.bezierCurveTo(l[h++],l[h++],l[h++],l[h++],l[h++],l[h++]);break;case Nb.closePath:c.closePath();break;default:St(`Unrecognized drawing path operator: ${l[h-1]}`);break}l=c}ct.axialAlignedBoundingBox(a,Ne(this.ctx),this.current.minMax),this[e](t,l),this._pathStartIdx=t}closePath(t){this.ctx.closePath()}stroke(t,e,n=!0){var c;const a=this.ctx,l=this.current.strokeColor;if(a.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(typeof l=="object"&&(l!=null&&l.getPattern)){const h=l.isModifyingCurrentTransform()?a.getTransform():null;if(a.save(),a.strokeStyle=l.getPattern(a,this,Ws(a),_i.STROKE,t),h){const f=new Path2D;f.addPath(e,a.getTransform().invertSelf().multiplySelf(h)),e=f}this.rescaleAndStroke(e,!1),a.restore()}else this.rescaleAndStroke(e,!0);(c=this.dependencyTracker)==null||c.recordDependencies(t,cs.stroke),n&&this.consumePath(t,e,this.current.getClippedPathBoundingBox(_i.STROKE,Ne(this.ctx))),a.globalAlpha=this.current.fillAlpha}closeStroke(t,e){this.stroke(t,e)}fill(t,e,n=!0){var p,m,y;const a=this.ctx,l=this.current.fillColor,c=this.current.patternFill;let h=!1;if(c){const v=l.isModifyingCurrentTransform()?a.getTransform():null;if((p=this.dependencyTracker)==null||p.save(t),a.save(),a.fillStyle=l.getPattern(a,this,Ws(a),_i.FILL,t),v){const w=new Path2D;w.addPath(e,a.getTransform().invertSelf().multiplySelf(v)),e=w}h=!0}const f=this.current.getClippedPathBoundingBox();this.contentVisible&&f!==null&&(this.pendingEOFill?(a.fill(e,"evenodd"),this.pendingEOFill=!1):a.fill(e)),(m=this.dependencyTracker)==null||m.recordDependencies(t,cs.fill),h&&(a.restore(),(y=this.dependencyTracker)==null||y.restore(t)),n&&this.consumePath(t,e,f)}eoFill(t,e){this.pendingEOFill=!0,this.fill(t,e)}fillStroke(t,e){this.fill(t,e,!1),this.stroke(t,e,!1),this.consumePath(t,e)}eoFillStroke(t,e){this.pendingEOFill=!0,this.fillStroke(t,e)}closeFillStroke(t,e){this.fillStroke(t,e)}closeEOFillStroke(t,e){this.pendingEOFill=!0,this.fillStroke(t,e)}endPath(t,e){this.consumePath(t,e)}rawFillPath(t,e){var n;this.ctx.fill(e),(n=this.dependencyTracker)==null||n.recordDependencies(t,cs.rawFillPath).recordOperation(t)}clip(t){var e;(e=this.dependencyTracker)==null||e.recordFutureForcedDependency("clipMode",t),this.pendingClip=xj}eoClip(t){var e;(e=this.dependencyTracker)==null||e.recordFutureForcedDependency("clipMode",t),this.pendingClip=K_}beginText(t){var e;this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0,(e=this.dependencyTracker)==null||e.recordOpenMarker(t).resetIncrementalData("sameLineText").resetIncrementalData("moveText",t)}endText(t){const e=this.pendingTextPaths,n=this.ctx;if(this.dependencyTracker){const{dependencyTracker:a}=this;e!==void 0&&a.recordFutureForcedDependency("textClip",a.getOpenMarker()).recordFutureForcedDependency("textClip",t),a.recordCloseMarker(t)}if(e!==void 0){const a=new Path2D,l=n.getTransform().invertSelf();for(const{transform:c,x:h,y:f,fontSize:p,path:m}of e)m&&a.addPath(m,new DOMMatrix(c).preMultiplySelf(l).translate(h,f).scale(p,-p));n.clip(a)}delete this.pendingTextPaths}setCharSpacing(t,e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("charSpacing",t),this.current.charSpacing=e}setWordSpacing(t,e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("wordSpacing",t),this.current.wordSpacing=e}setHScale(t,e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("hScale",t),this.current.textHScale=e/100}setLeading(t,e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("leading",t),this.current.leading=-e}setFont(t,e,n){var y,v;(y=this.dependencyTracker)==null||y.recordSimpleData("font",t).recordSimpleDataFromNamed("fontObj",e,t);const a=this.commonObjs.get(e),l=this.current;if(!a)throw new Error(`Can't find font for ${e}`);if(l.fontMatrix=a.fontMatrix||tA,(l.fontMatrix[0]===0||l.fontMatrix[3]===0)&&St("Invalid font matrix for font "+e),n<0?(n=-n,l.fontDirection=-1):l.fontDirection=1,this.current.font=a,this.current.fontSize=n,a.isType3Font)return;const c=a.loadedName||"sans-serif",h=((v=a.systemFontInfo)==null?void 0:v.css)||`"${c}", ${a.fallbackName}`;let f="normal";a.black?f="900":a.bold&&(f="bold");const p=a.italic?"italic":"normal";let m=n;n<H_?m=H_:n>G_&&(m=G_),this.current.fontSizeScale=n/m,this.ctx.font=`${p} ${f} ${m}px ${h}`}setTextRenderingMode(t,e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("textRenderingMode",t),this.current.textRenderingMode=e}setTextRise(t,e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("textRise",t),this.current.textRise=e}moveText(t,e,n){var a;(a=this.dependencyTracker)==null||a.resetIncrementalData("sameLineText").recordIncrementalData("moveText",t),this.current.x=this.current.lineX+=e,this.current.y=this.current.lineY+=n}setLeadingMoveText(t,e,n){this.setLeading(t,-n),this.moveText(t,e,n)}setTextMatrix(t,e){var a;(a=this.dependencyTracker)==null||a.recordSimpleData("textMatrix",t);const{current:n}=this;n.textMatrix=e,n.textMatrixScale=Math.hypot(e[0],e[1]),n.x=n.lineX=0,n.y=n.lineY=0}nextLine(t){var e;this.moveText(t,0,this.current.leading),(e=this.dependencyTracker)==null||e.recordIncrementalData("moveText",this.dependencyTracker.getSimpleIndex("leading")??t)}paintChar(t,e,n,a,l,c){var N,R,L,k;const h=this.ctx,f=this.current,p=f.font,m=f.textRenderingMode,y=f.fontSize/f.fontSizeScale,v=m&xi.FILL_STROKE_MASK,w=!!(m&xi.ADD_TO_PATH_FLAG),C=f.patternFill&&!p.missingFile,_=f.patternStroke&&!p.missingFile;let M;if((p.disableFontFace||w||C||_)&&!p.missingFile&&(M=p.getPathGenerator(this.commonObjs,e)),M&&(p.disableFontFace||C||_)){h.save(),h.translate(n,a),h.scale(y,-y),(N=this.dependencyTracker)==null||N.recordCharacterBBox(t,h,p);let j;if(v===xi.FILL||v===xi.FILL_STROKE)if(l){j=h.getTransform(),h.setTransform(...l);const z=T(this,Xs,RA).call(this,M,j,l);h.fill(z)}else h.fill(M);if(v===xi.STROKE||v===xi.FILL_STROKE)if(c){j||(j=h.getTransform()),h.setTransform(...c);const{a:z,b:I,c:K,d:J}=j,W=ct.inverseTransform(c),tt=ct.transform([z,I,K,J,0,0],W);ct.singularValueDecompose2dScale(tt,Xn),h.lineWidth*=Math.max(Xn[0],Xn[1])/y,h.stroke(T(this,Xs,RA).call(this,M,j,c))}else h.lineWidth/=y,h.stroke(M);h.restore()}else(v===xi.FILL||v===xi.FILL_STROKE)&&(h.fillText(e,n,a),(R=this.dependencyTracker)==null||R.recordCharacterBBox(t,h,p,y,n,a,()=>h.measureText(e))),(v===xi.STROKE||v===xi.FILL_STROKE)&&(this.dependencyTracker&&((L=this.dependencyTracker)==null||L.recordCharacterBBox(t,h,p,y,n,a,()=>h.measureText(e)).recordDependencies(t,cs.stroke)),h.strokeText(e,n,a));w&&((this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:Ne(h),x:n,y:a,fontSize:y,path:M}),(k=this.dependencyTracker)==null||k.recordCharacterBBox(t,h,p,y,n,a))}get isFontSubpixelAAEnabled(){const{context:t}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);t.scale(1.5,1),t.fillText("I",0,10);const e=t.getImageData(0,0,10,10).data;let n=!1;for(let a=3;a<e.length;a+=4)if(e[a]>0&&e[a]<255){n=!0;break}return Ct(this,"isFontSubpixelAAEnabled",n)}showText(t,e){var K,J,W,tt;this.dependencyTracker&&(this.dependencyTracker.recordDependencies(t,cs.showText).resetBBox(t),this.current.textRenderingMode&xi.ADD_TO_PATH_FLAG&&this.dependencyTracker.recordFutureForcedDependency("textClip",t).inheritPendingDependenciesAsFutureForcedDependencies());const n=this.current,a=n.font;if(a.isType3Font){this.showType3Text(t,e),(K=this.dependencyTracker)==null||K.recordShowTextOperation(t);return}const l=n.fontSize;if(l===0){(J=this.dependencyTracker)==null||J.recordOperation(t);return}const c=this.ctx,h=n.fontSizeScale,f=n.charSpacing,p=n.wordSpacing,m=n.fontDirection,y=n.textHScale*m,v=e.length,w=a.vertical,C=w?1:-1,_=a.defaultVMetrics,M=l*n.fontMatrix[0],N=n.textRenderingMode===xi.FILL&&!a.disableFontFace&&!n.patternFill;c.save(),n.textMatrix&&c.transform(...n.textMatrix),c.translate(n.x,n.y+n.textRise),m>0?c.scale(y,-1):c.scale(y,1);let R,L;if(n.patternFill){c.save();const X=n.fillColor.getPattern(c,this,Ws(c),_i.FILL,t);R=Ne(c),c.restore(),c.fillStyle=X}if(n.patternStroke){c.save();const X=n.strokeColor.getPattern(c,this,Ws(c),_i.STROKE,t);L=Ne(c),c.restore(),c.strokeStyle=X}let k=n.lineWidth;const j=n.textMatrixScale;if(j===0||k===0){const X=n.textRenderingMode&xi.FILL_STROKE_MASK;(X===xi.STROKE||X===xi.FILL_STROKE)&&(k=this.getSinglePixelWidth())}else k/=j;if(h!==1&&(c.scale(h,h),k/=h),c.lineWidth=k,a.isInvalidPDFjsFont){const X=[];let it=0;for(const at of e)X.push(at.unicode),it+=at.width;const et=X.join("");if(c.fillText(et,0,0),this.dependencyTracker!==null){const at=c.measureText(et);this.dependencyTracker.recordBBox(t,this.ctx,-at.actualBoundingBoxLeft,at.actualBoundingBoxRight,-at.actualBoundingBoxAscent,at.actualBoundingBoxDescent).recordShowTextOperation(t)}n.x+=it*M*y,c.restore(),this.compose();return}let z=0,I;for(I=0;I<v;++I){const X=e[I];if(typeof X=="number"){z+=C*X*l/1e3;continue}let it=!1;const et=(X.isSpace?p:0)+f,at=X.fontChar,P=X.accent;let V,st,ut=X.width;if(w){const mt=X.vmetric||_,ht=-(X.vmetric?mt[1]:ut*.5)*M,Rt=mt[2]*M;ut=mt?-mt[0]:ut,V=ht/h,st=(z+Rt)/h}else V=z/h,st=0;let xt;if(a.remeasure&&ut>0){xt=c.measureText(at);const mt=xt.width*1e3/l*h;if(ut<mt&&this.isFontSubpixelAAEnabled){const ht=ut/mt;it=!0,c.save(),c.scale(ht,1),V/=ht}else ut!==mt&&(V+=(ut-mt)/2e3*l/h)}if(this.contentVisible&&(X.isInFont||a.missingFile)){if(N&&!P)c.fillText(at,V,st),(W=this.dependencyTracker)==null||W.recordCharacterBBox(t,c,xt?{bbox:null}:a,l/h,V,st,()=>xt??c.measureText(at));else if(this.paintChar(t,at,V,st,R,L),P){const mt=V+l*P.offset.x/h,ht=st-l*P.offset.y/h;this.paintChar(t,P.fontChar,mt,ht,R,L)}}const $t=w?ut*M-et*m:ut*M+et*m;z+=$t,it&&c.restore()}w?n.y-=z:n.x+=z*y,c.restore(),this.compose(),(tt=this.dependencyTracker)==null||tt.recordShowTextOperation(t)}showType3Text(t,e){const n=this.ctx,a=this.current,l=a.font,c=a.fontSize,h=a.fontDirection,f=l.vertical?1:-1,p=a.charSpacing,m=a.wordSpacing,y=a.textHScale*h,v=a.fontMatrix||tA,w=e.length,C=a.textRenderingMode===xi.INVISIBLE;let _,M,N,R;if(C||c===0)return;this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,n.save(),a.textMatrix&&n.transform(...a.textMatrix),n.translate(a.x,a.y+a.textRise),n.scale(y,h);const L=this.dependencyTracker;for(this.dependencyTracker=L?new _0(L,t):null,_=0;_<w;++_){if(M=e[_],typeof M=="number"){R=f*M*c/1e3,this.ctx.translate(R,0),a.x+=R*y;continue}const k=(M.isSpace?m:0)+p,j=l.charProcOperatorList[M.operatorListId];j?this.contentVisible&&(this.save(),n.scale(c,c),n.transform(...v),this.executeOperatorList(j),this.restore()):St(`Type3 character "${M.operatorListId}" is not available.`);const z=[M.width,0];ct.applyTransform(z,v),N=z[0]*c+k,n.translate(N,0),a.x+=N*y}n.restore(),L&&(this.dependencyTracker=L)}setCharWidth(t,e,n){}setCharWidthAndBounds(t,e,n,a,l,c,h){var p;const f=new Path2D;f.rect(a,l,c-a,h-l),this.ctx.clip(f),(p=this.dependencyTracker)==null||p.recordBBox(t,this.ctx,a,c,l,h).recordClipBox(t,this.ctx,a,c,l,h),this.endPath(t)}getColorN_Pattern(t,e){let n;if(e[0]==="TilingPattern"){const a=this.baseTransform||Ne(this.ctx),l={createCanvasGraphics:(c,h)=>new iw(c,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack},void 0,void 0,this.dependencyTracker?new _0(this.dependencyTracker,h,!0):null)};n=new NA(e,this.ctx,l,a)}else n=this._getPattern(t,e[1],e[2]);return n}setStrokeColorN(t,...e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("strokeColor",t),this.current.strokeColor=this.getColorN_Pattern(t,e),this.current.patternStroke=!0}setFillColorN(t,...e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("fillColor",t),this.current.fillColor=this.getColorN_Pattern(t,e),this.current.patternFill=!0}setStrokeRGBColor(t,e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("strokeColor",t),this.ctx.strokeStyle=this.current.strokeColor=e,this.current.patternStroke=!1}setStrokeTransparent(t){var e;(e=this.dependencyTracker)==null||e.recordSimpleData("strokeColor",t),this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(t,e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("fillColor",t),this.ctx.fillStyle=this.current.fillColor=e,this.current.patternFill=!1}setFillTransparent(t){var e;(e=this.dependencyTracker)==null||e.recordSimpleData("fillColor",t),this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(t,e,n=null){let a;return this.cachedPatterns.has(e)?a=this.cachedPatterns.get(e):(a=fj(this.getObject(t,e)),this.cachedPatterns.set(e,a)),n&&(a.matrix=n),a}shadingFill(t,e){var c;if(!this.contentVisible)return;const n=this.ctx;this.save(t);const a=this._getPattern(t,e);n.fillStyle=a.getPattern(n,this,Ws(n),_i.SHADING,t);const l=Ws(n);if(l){const{width:h,height:f}=n.canvas,p=th.slice();ct.axialAlignedBoundingBox([0,0,h,f],l,p);const[m,y,v,w]=p;this.ctx.fillRect(m,y,v-m,w-y)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);(c=this.dependencyTracker)==null||c.resetBBox(t).recordFullPageBBox(t).recordDependencies(t,cs.transform).recordDependencies(t,cs.fill).recordOperation(t),this.compose(this.current.getClippedPathBoundingBox()),this.restore(t)}beginInlineImage(){ge("Should not call beginInlineImage")}beginImageData(){ge("Should not call beginImageData")}paintFormXObjectBegin(t,e,n){var a;if(this.contentVisible&&(this.save(t),this.baseTransformStack.push(this.baseTransform),e&&this.transform(t,...e),this.baseTransform=Ne(this.ctx),n)){ct.axialAlignedBoundingBox(n,this.baseTransform,this.current.minMax);const[l,c,h,f]=n,p=new Path2D;p.rect(l,c,h-l,f-c),this.ctx.clip(p),(a=this.dependencyTracker)==null||a.recordClipBox(t,this.ctx,l,h,c,f),this.endPath(t)}}paintFormXObjectEnd(t){this.contentVisible&&(this.restore(t),this.baseTransform=this.baseTransformStack.pop())}beginGroup(t,e){var L;if(!this.contentVisible)return;this.save(t),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const n=this.ctx;e.isolated||oy("TODO: Support non-isolated groups."),e.knockout&&St("Knockout groups not supported.");const a=Ne(n);if(e.matrix&&n.transform(...e.matrix),!e.bbox)throw new Error("Bounding box is required.");let l=th.slice();ct.axialAlignedBoundingBox(e.bbox,Ne(n),l);const c=[0,0,n.canvas.width,n.canvas.height];l=ct.intersect(l,c)||[0,0,0,0];const h=Math.floor(l[0]),f=Math.floor(l[1]),p=Math.max(Math.ceil(l[2])-h,1),m=Math.max(Math.ceil(l[3])-f,1);this.current.startNewPathAndClipBox([0,0,p,m]);let y="groupAt"+this.groupLevel;e.smask&&(y+="_smask_"+this.smaskCounter++%2);const v=this.cachedCanvases.getCanvas(y,p,m),w=v.context;w.translate(-h,-f),w.transform(...a);let C=new Path2D;const[_,M,N,R]=e.bbox;if(C.rect(_,M,N-_,R-M),e.matrix){const k=new Path2D;k.addPath(C,new DOMMatrix(e.matrix)),C=k}w.clip(C),e.smask&&this.smaskStack.push({canvas:v.canvas,context:w,offsetX:h,offsetY:f,subtype:e.smask.subtype,backdrop:e.smask.backdrop,transferMap:e.smask.transferMap||null,startTransformInverse:null}),(!e.smask||this.dependencyTracker)&&(n.setTransform(1,0,0,1,0,0),n.translate(h,f),n.save()),Ff(n,w),this.ctx=w,(L=this.dependencyTracker)==null||L.inheritSimpleDataAsFutureForcedDependencies(["fillAlpha","strokeAlpha","globalCompositeOperation"]).pushBaseTransform(n),this.setGState(t,[["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(n),this.groupLevel++}endGroup(t,e){var l;if(!this.contentVisible)return;this.groupLevel--;const n=this.ctx,a=this.groupStack.pop();if(this.ctx=a,this.ctx.imageSmoothingEnabled=!1,(l=this.dependencyTracker)==null||l.popBaseTransform(),e.smask)this.tempSMask=this.smaskStack.pop(),this.restore(t),this.dependencyTracker&&this.ctx.restore();else{this.ctx.restore();const c=Ne(this.ctx);this.restore(t),this.ctx.save(),this.ctx.setTransform(...c);const h=th.slice();ct.axialAlignedBoundingBox([0,0,n.canvas.width,n.canvas.height],c,h),this.ctx.drawImage(n.canvas,0,0),this.ctx.restore(),this.compose(h)}}beginAnnotation(t,e,n,a,l,c){if(T(this,Xs,MA).call(this),jb(this.ctx),this.ctx.save(),this.save(t),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),n){const h=n[2]-n[0],f=n[3]-n[1];if(c&&this.annotationCanvasMap){a=a.slice(),a[4]-=n[0],a[5]-=n[1],n=n.slice(),n[0]=n[1]=0,n[2]=h,n[3]=f,ct.singularValueDecompose2dScale(Ne(this.ctx),Xn);const{viewportScale:p}=this,m=Math.ceil(h*this.outputScaleX*p),y=Math.ceil(f*this.outputScaleY*p);this.annotationCanvas=this.canvasFactory.create(m,y);const{canvas:v,context:w}=this.annotationCanvas;this.annotationCanvasMap.set(e,v),this.annotationCanvas.savedCtx=this.ctx,this.ctx=w,this.ctx.save(),this.ctx.setTransform(Xn[0],0,0,-Xn[1],0,f*Xn[1]),jb(this.ctx)}else{jb(this.ctx),this.endPath(t);const p=new Path2D;p.rect(n[0],n[1],h,f),this.ctx.clip(p)}}this.current=new q_(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(t,...a),this.transform(t,...l)}endAnnotation(t){this.annotationCanvas&&(this.ctx.restore(),T(this,Xs,DA).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(t,e){var h;if(!this.contentVisible)return;const n=e.count;e=this.getObject(t,e.data,e),e.count=n;const a=this.ctx,l=this._createMaskCanvas(t,e),c=l.canvas;a.save(),a.setTransform(1,0,0,1,0,0),a.drawImage(c,l.offsetX,l.offsetY),(h=this.dependencyTracker)==null||h.resetBBox(t).recordBBox(t,this.ctx,l.offsetX,l.offsetX+c.width,l.offsetY,l.offsetY+c.height).recordOperation(t),a.restore(),this.compose()}paintImageMaskXObjectRepeat(t,e,n,a=0,l=0,c,h){var y,v,w;if(!this.contentVisible)return;e=this.getObject(t,e.data,e);const f=this.ctx;f.save();const p=Ne(f);f.transform(n,a,l,c,0,0);const m=this._createMaskCanvas(t,e);f.setTransform(1,0,0,1,m.offsetX-p[4],m.offsetY-p[5]),(y=this.dependencyTracker)==null||y.resetBBox(t);for(let C=0,_=h.length;C<_;C+=2){const M=ct.transform(p,[n,a,l,c,h[C],h[C+1]]);f.drawImage(m.canvas,M[4],M[5]),(v=this.dependencyTracker)==null||v.recordBBox(t,this.ctx,M[4],M[4]+m.canvas.width,M[5],M[5]+m.canvas.height)}f.restore(),this.compose(),(w=this.dependencyTracker)==null||w.recordOperation(t)}paintImageMaskXObjectGroup(t,e){var c,h,f;if(!this.contentVisible)return;const n=this.ctx,a=this.current.fillColor,l=this.current.patternFill;(c=this.dependencyTracker)==null||c.resetBBox(t).recordDependencies(t,cs.transformAndFill);for(const p of e){const{data:m,width:y,height:v,transform:w}=p,C=this.cachedCanvases.getCanvas("maskCanvas",y,v),_=C.context;_.save();const M=this.getObject(t,m,p);Y_(_,M),_.globalCompositeOperation="source-in",_.fillStyle=l?a.getPattern(_,this,Ws(n),_i.FILL,t):a,_.fillRect(0,0,y,v),_.restore(),n.save(),n.transform(...w),n.scale(1,-1),Ob(n,C.canvas,0,0,y,v,0,-1,1,1),(h=this.dependencyTracker)==null||h.recordBBox(t,n,0,y,0,v),n.restore()}this.compose(),(f=this.dependencyTracker)==null||f.recordOperation(t)}paintImageXObject(t,e){if(!this.contentVisible)return;const n=this.getObject(t,e);if(!n){St("Dependent image isn't ready yet");return}this.paintInlineImageXObject(t,n)}paintImageXObjectRepeat(t,e,n,a,l){if(!this.contentVisible)return;const c=this.getObject(t,e);if(!c){St("Dependent image isn't ready yet");return}const h=c.width,f=c.height,p=[];for(let m=0,y=l.length;m<y;m+=2)p.push({transform:[n,0,0,a,l[m],l[m+1]],x:0,y:0,w:h,h:f});this.paintInlineImageXObjectGroup(t,c,p)}applyTransferMapsToCanvas(t){return this.current.transferMaps!=="none"&&(t.filter=this.current.transferMaps,t.drawImage(t.canvas,0,0),t.filter="none"),t.canvas}applyTransferMapsToBitmap(t){if(this.current.transferMaps==="none")return t.bitmap;const{bitmap:e,width:n,height:a}=t,l=this.cachedCanvases.getCanvas("inlineImage",n,a),c=l.context;return c.filter=this.current.transferMaps,c.drawImage(e,0,0),c.filter="none",l.canvas}paintInlineImageXObject(t,e){var p;if(!this.contentVisible)return;const n=e.width,a=e.height,l=this.ctx;this.save(t);const{filter:c}=l;c!=="none"&&c!==""&&(l.filter="none"),l.scale(1/n,-1/a);let h;if(e.bitmap)h=this.applyTransferMapsToBitmap(e);else if(typeof HTMLElement=="function"&&e instanceof HTMLElement||!e.data)h=e;else{const y=this.cachedCanvases.getCanvas("inlineImage",n,a).context;X_(y,e),h=this.applyTransferMapsToCanvas(y)}const f=this._scaleImage(h,Ws(l));l.imageSmoothingEnabled=$_(Ne(l),e.interpolate),(p=this.dependencyTracker)==null||p.resetBBox(t).recordBBox(t,l,0,n,-a,0).recordDependencies(t,cs.imageXObject).recordOperation(t),Ob(l,f.img,0,0,f.paintWidth,f.paintHeight,0,-a,n,a),this.compose(),this.restore(t)}paintInlineImageXObjectGroup(t,e,n){var c,h,f;if(!this.contentVisible)return;const a=this.ctx;let l;if(e.bitmap)l=e.bitmap;else{const p=e.width,m=e.height,v=this.cachedCanvases.getCanvas("inlineImage",p,m).context;X_(v,e),l=this.applyTransferMapsToCanvas(v)}(c=this.dependencyTracker)==null||c.resetBBox(t);for(const p of n)a.save(),a.transform(...p.transform),a.scale(1,-1),Ob(a,l,p.x,p.y,p.w,p.h,0,-1,1,1),(h=this.dependencyTracker)==null||h.recordBBox(t,a,0,1,-1,0),a.restore();(f=this.dependencyTracker)==null||f.recordOperation(t),this.compose()}paintSolidColorImageMask(t){var e;this.contentVisible&&((e=this.dependencyTracker)==null||e.resetBBox(t).recordBBox(t,this.ctx,0,1,0,1).recordDependencies(t,cs.fill).recordOperation(t),this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(t,e){}markPointProps(t,e,n){}beginMarkedContent(t,e){var n;(n=this.dependencyTracker)==null||n.beginMarkedContent(t),this.markedContentStack.push({visible:!0})}beginMarkedContentProps(t,e,n){var a;(a=this.dependencyTracker)==null||a.beginMarkedContent(t),e==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(n)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(t){var e;(e=this.dependencyTracker)==null||e.endMarkedContent(t),this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(t){}endCompat(t){}consumePath(t,e,n){var c,h;const a=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(n);const l=this.ctx;this.pendingClip?(a||(this.pendingClip===K_?l.clip(e,"evenodd"):l.clip(e)),this.pendingClip=null,(c=this.dependencyTracker)==null||c.bboxToClipBoxDropOperation(t).recordFutureForcedDependency("clipPath",t)):(h=this.dependencyTracker)==null||h.recordOperation(t),this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const t=Ne(this.ctx);if(t[1]===0&&t[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(t[0]),Math.abs(t[3]));else{const e=Math.abs(t[0]*t[3]-t[2]*t[1]),n=Math.hypot(t[0],t[2]),a=Math.hypot(t[1],t[3]);this._cachedGetSinglePixelWidth=Math.max(n,a)/e}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:t}=this.current,{a:e,b:n,c:a,d:l}=this.ctx.getTransform();let c,h;if(n===0&&a===0){const f=Math.abs(e),p=Math.abs(l);if(f===p)if(t===0)c=h=1/f;else{const m=f*t;c=h=m<1?1/m:1}else if(t===0)c=1/f,h=1/p;else{const m=f*t,y=p*t;c=m<1?1/m:1,h=y<1?1/y:1}}else{const f=Math.abs(e*l-n*a),p=Math.hypot(e,n),m=Math.hypot(a,l);if(t===0)c=m/f,h=p/f;else{const y=t*f;c=m>y?m/y:1,h=p>y?p/y:1}}this._cachedScaleForStroking[0]=c,this._cachedScaleForStroking[1]=h}return this._cachedScaleForStroking}rescaleAndStroke(t,e){const{ctx:n,current:{lineWidth:a}}=this,[l,c]=this.getScaleForStroking();if(l===c){n.lineWidth=(a||1)*l,n.stroke(t);return}const h=n.getLineDash();e&&n.save(),n.scale(l,c),Xx.a=1/l,Xx.d=1/c;const f=new Path2D;if(f.addPath(t,Xx),h.length>0){const p=Math.max(l,c);n.setLineDash(h.map(m=>m/p)),n.lineDashOffset/=p}n.lineWidth=a||1,n.stroke(f),e&&n.restore()}isContentVisible(){for(let t=this.markedContentStack.length-1;t>=0;t--)if(!this.markedContentStack[t].visible)return!1;return!0}};Xs=new WeakSet,MA=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},DA=function(){if(this.pageColors){const t=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(t!=="none"){const e=this.ctx.filter;this.ctx.filter=t,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=e}}},RA=function(t,e,n){const a=new Path2D;return a.addPath(t,new DOMMatrix(n).invertSelf().multiplySelf(e)),a};let rh=iw;for(const d in zd)rh.prototype[d]!==void 0&&(rh.prototype[zd[d]]=rh.prototype[d]);var Bh,zh,Wp,Ph,Xb;const ih=class ih{constructor(t){E(this,Ph);E(this,Bh);E(this,zh);E(this,Wp);x(this,Bh,t),x(this,zh,new DataView(o(this,Bh))),x(this,Wp,new TextDecoder)}static write(t){const e=new TextEncoder,n={};let a=0;for(const p of ih.strings){const m=e.encode(t[p]);n[p]=m,a+=4+m.length}const l=new ArrayBuffer(a),c=new Uint8Array(l),h=new DataView(l);let f=0;for(const p of ih.strings){const m=n[p],y=m.length;h.setUint32(f,y),c.set(m,f+4),f+=4+y}return Pt(f===l.byteLength,"CssFontInfo.write: Buffer overflow"),l}get fontFamily(){return T(this,Ph,Xb).call(this,0)}get fontWeight(){return T(this,Ph,Xb).call(this,1)}get italicAngle(){return T(this,Ph,Xb).call(this,2)}};Bh=new WeakMap,zh=new WeakMap,Wp=new WeakMap,Ph=new WeakSet,Xb=function(t){Pt(t<ih.strings.length,"Invalid string index");let e=0;for(let a=0;a<t;a++)e+=o(this,zh).getUint32(e)+4;const n=o(this,zh).getUint32(e);return o(this,Wp).decode(new Uint8Array(o(this,Bh),e+4,n))},nt(ih,"strings",["fontFamily","fontWeight","italicAngle"]);let C0=ih;var Ro,ha,hc,dc,ep;const nh=class nh{constructor(t){E(this,dc);E(this,Ro);E(this,ha);E(this,hc);x(this,Ro,t),x(this,ha,new DataView(o(this,Ro))),x(this,hc,new TextDecoder)}static write(t){const e=new TextEncoder,n={};let a=0;for(const v of nh.strings){const w=e.encode(t[v]);n[v]=w,a+=4+w.length}a+=4;let l,c,h=1+a;t.style&&(l=e.encode(t.style.style),c=e.encode(t.style.weight),h+=4+l.length+4+c.length);const f=new ArrayBuffer(h),p=new Uint8Array(f),m=new DataView(f);let y=0;m.setUint8(y++,t.guessFallback?1:0),m.setUint32(y,0),y+=4,a=0;for(const v of nh.strings){const w=n[v],C=w.length;a+=4+C,m.setUint32(y,C),p.set(w,y+4),y+=4+C}return m.setUint32(y-a-4,a),t.style&&(m.setUint32(y,l.length),p.set(l,y+4),y+=4+l.length,m.setUint32(y,c.length),p.set(c,y+4),y+=4+c.length),Pt(y<=f.byteLength,"SubstitionInfo.write: Buffer overflow"),f.transferToFixedLength(y)}get guessFallback(){return o(this,ha).getUint8(0)!==0}get css(){return T(this,dc,ep).call(this,0)}get loadedName(){return T(this,dc,ep).call(this,1)}get baseFontName(){return T(this,dc,ep).call(this,2)}get src(){return T(this,dc,ep).call(this,3)}get style(){let t=1;t+=4+o(this,ha).getUint32(t);const e=o(this,ha).getUint32(t),n=o(this,hc).decode(new Uint8Array(o(this,Ro),t+4,e));t+=4+e;const a=o(this,ha).getUint32(t),l=o(this,hc).decode(new Uint8Array(o(this,Ro),t+4,a));return{style:n,weight:l}}};Ro=new WeakMap,ha=new WeakMap,hc=new WeakMap,dc=new WeakSet,ep=function(t){Pt(t<nh.strings.length,"Invalid string index");let e=5;for(let a=0;a<t;a++)e+=o(this,ha).getUint32(e)+4;const n=o(this,ha).getUint32(e);return o(this,hc).decode(new Uint8Array(o(this,Ro),e+4,n))},nt(nh,"strings",["css","loadedName","baseFontName","src"]);let N0=nh;var Ih,Fh,Uh,Hh,Rn,da,Zp,re,ze,Ns,Yb,ip;const Tt=class Tt{constructor({data:t,extra:e}){E(this,ze);E(this,da);E(this,Zp);E(this,re);x(this,da,t),x(this,Zp,new TextDecoder),x(this,re,new DataView(o(this,da))),e&&Object.assign(this,e)}get black(){return T(this,ze,Ns).call(this,0)}get bold(){return T(this,ze,Ns).call(this,1)}get disableFontFace(){return T(this,ze,Ns).call(this,2)}get fontExtraProperties(){return T(this,ze,Ns).call(this,3)}get isInvalidPDFjsFont(){return T(this,ze,Ns).call(this,4)}get isType3Font(){return T(this,ze,Ns).call(this,5)}get italic(){return T(this,ze,Ns).call(this,6)}get missingFile(){return T(this,ze,Ns).call(this,7)}get remeasure(){return T(this,ze,Ns).call(this,8)}get vertical(){return T(this,ze,Ns).call(this,9)}get ascent(){return T(this,ze,Yb).call(this,0)}get defaultWidth(){return T(this,ze,Yb).call(this,1)}get descent(){return T(this,ze,Yb).call(this,2)}get bbox(){let t=o(Tt,Fh);if(o(this,re).getUint8(t)===0)return;t+=1;const n=[];for(let a=0;a<4;a++)n.push(o(this,re).getInt16(t,!0)),t+=2;return n}get fontMatrix(){let t=o(Tt,Uh);if(o(this,re).getUint8(t)===0)return;t+=1;const n=[];for(let a=0;a<6;a++)n.push(o(this,re).getFloat64(t,!0)),t+=8;return n}get defaultVMetrics(){let t=o(Tt,Hh);if(o(this,re).getUint8(t)===0)return;t+=1;const n=[];for(let a=0;a<3;a++)n.push(o(this,re).getInt16(t,!0)),t+=2;return n}get fallbackName(){return T(this,ze,ip).call(this,0)}get loadedName(){return T(this,ze,ip).call(this,1)}get mimetype(){return T(this,ze,ip).call(this,2)}get name(){return T(this,ze,ip).call(this,3)}get data(){let t=o(Tt,Rn);const e=o(this,re).getUint32(t);t+=4+e;const n=o(this,re).getUint32(t);t+=4+n;const a=o(this,re).getUint32(t);t+=4+a;const l=o(this,re).getUint32(t);if(l!==0)return new Uint8Array(o(this,da),t+4,l)}clearData(){let t=o(Tt,Rn);const e=o(this,re).getUint32(t);t+=4+e;const n=o(this,re).getUint32(t);t+=4+n;const a=o(this,re).getUint32(t);t+=4+a;const l=o(this,re).getUint32(t);new Uint8Array(o(this,da),t+4,l).fill(0),o(this,re).setUint32(t,0)}get cssFontInfo(){let t=o(Tt,Rn);const e=o(this,re).getUint32(t);t+=4+e;const n=o(this,re).getUint32(t);t+=4+n;const a=o(this,re).getUint32(t);if(a===0)return null;const l=new Uint8Array(a);return l.set(new Uint8Array(o(this,da),t+4,a)),new C0(l.buffer)}get systemFontInfo(){let t=o(Tt,Rn);const e=o(this,re).getUint32(t);t+=4+e;const n=o(this,re).getUint32(t);if(n===0)return null;const a=new Uint8Array(n);return a.set(new Uint8Array(o(this,da),t+4,n)),new N0(a.buffer)}static write(t){const e=t.systemFontInfo?N0.write(t.systemFontInfo):null,n=t.cssFontInfo?C0.write(t.cssFontInfo):null,a=new TextEncoder,l={};let c=0;for(const _ of Tt.strings)l[_]=a.encode(t[_]),c+=4+l[_].length;const h=o(Tt,Rn)+4+c+4+(e?e.byteLength:0)+4+(n?n.byteLength:0)+4+(t.data?t.data.length:0),f=new ArrayBuffer(h),p=new Uint8Array(f),m=new DataView(f);let y=0;const v=Tt.bools.length;let w=0,C=0;for(let _=0;_<v;_++){const M=t[Tt.bools[_]];w|=(M===void 0?0:M?2:1)<<C,C+=2,(C===8||_===v-1)&&(m.setUint8(y++,w),w=0,C=0)}Pt(y===o(Tt,Ih),"FontInfo.write: Boolean properties offset mismatch");for(const _ of Tt.numbers)m.setFloat64(y,t[_]),y+=8;if(Pt(y===o(Tt,Fh),"FontInfo.write: Number properties offset mismatch"),t.bbox){m.setUint8(y++,4);for(const _ of t.bbox)m.setInt16(y,_,!0),y+=2}else m.setUint8(y++,0),y+=8;if(Pt(y===o(Tt,Uh),"FontInfo.write: BBox properties offset mismatch"),t.fontMatrix){m.setUint8(y++,6);for(const _ of t.fontMatrix)m.setFloat64(y,_,!0),y+=8}else m.setUint8(y++,0),y+=48;if(Pt(y===o(Tt,Hh),"FontInfo.write: FontMatrix properties offset mismatch"),t.defaultVMetrics){m.setUint8(y++,1);for(const _ of t.defaultVMetrics)m.setInt16(y,_,!0),y+=2}else m.setUint8(y++,0),y+=6;Pt(y===o(Tt,Rn),"FontInfo.write: DefaultVMetrics properties offset mismatch"),m.setUint32(o(Tt,Rn),0),y+=4;for(const _ of Tt.strings){const M=l[_],N=M.length;m.setUint32(y,N),p.set(M,y+4),y+=4+N}if(m.setUint32(o(Tt,Rn),y-o(Tt,Rn)-4),!e)m.setUint32(y,0),y+=4;else{const _=e.byteLength;m.setUint32(y,_),Pt(y+4+_<=f.byteLength,"FontInfo.write: Buffer overflow at systemFontInfo"),p.set(new Uint8Array(e),y+4),y+=4+_}if(!n)m.setUint32(y,0),y+=4;else{const _=n.byteLength;m.setUint32(y,_),Pt(y+4+_<=f.byteLength,"FontInfo.write: Buffer overflow at cssFontInfo"),p.set(new Uint8Array(n),y+4),y+=4+_}return t.data===void 0?(m.setUint32(y,0),y+=4):(m.setUint32(y,t.data.length),p.set(t.data,y+4),y+=4+t.data.length),Pt(y<=f.byteLength,"FontInfo.write: Buffer overflow"),f.transferToFixedLength(y)}};Ih=new WeakMap,Fh=new WeakMap,Uh=new WeakMap,Hh=new WeakMap,Rn=new WeakMap,da=new WeakMap,Zp=new WeakMap,re=new WeakMap,ze=new WeakSet,Ns=function(t){Pt(t<Tt.bools.length,"Invalid boolean index");const e=Math.floor(t/4),n=t*2%8,a=o(this,re).getUint8(e)>>n&3;return a===0?void 0:a===2},Yb=function(t){return Pt(t<Tt.numbers.length,"Invalid number index"),o(this,re).getFloat64(o(Tt,Ih)+t*8)},ip=function(t){Pt(t<Tt.strings.length,"Invalid string index");let e=o(Tt,Rn)+4;for(let l=0;l<t;l++)e+=o(this,re).getUint32(e)+4;const n=o(this,re).getUint32(e),a=new Uint8Array(n);return a.set(new Uint8Array(o(this,da),e+4,n)),o(this,Zp).decode(a)},nt(Tt,"bools",["black","bold","disableFontFace","fontExtraProperties","isInvalidPDFjsFont","isType3Font","italic","missingFile","remeasure","vertical"]),nt(Tt,"numbers",["ascent","defaultWidth","descent"]),nt(Tt,"strings",["fallbackName","loadedName","mimetype","name"]),E(Tt,Ih,Math.ceil(Tt.bools.length*2/8)),E(Tt,Fh,o(Tt,Ih)+Tt.numbers.length*8),E(Tt,Uh,o(Tt,Fh)+1+8),E(Tt,Hh,o(Tt,Uh)+1+48),E(Tt,Rn,o(Tt,Hh)+1+6);let LA=Tt;var Jp,tg;class As{static get workerPort(){return o(this,Jp)}static set workerPort(t){if(!(typeof Worker<"u"&&t instanceof Worker)&&t!==null)throw new Error("Invalid `workerPort` type.");x(this,Jp,t)}static get workerSrc(){return o(this,tg)}static set workerSrc(t){if(typeof t!="string")throw new Error("Invalid `workerSrc` type.");x(this,tg,t)}}Jp=new WeakMap,tg=new WeakMap,E(As,Jp,null),E(As,tg,"");var Gh,eg;class Aj{constructor({parsedData:t,rawData:e}){E(this,Gh);E(this,eg);x(this,Gh,t),x(this,eg,e)}getRaw(){return o(this,eg)}get(t){return o(this,Gh).get(t)??null}[Symbol.iterator](){return o(this,Gh).entries()}}Gh=new WeakMap,eg=new WeakMap;const Wu=Symbol("INTERNAL");var ig,ng,sg,Vh;class Sj{constructor(t,{name:e,intent:n,usage:a,rbGroups:l}){E(this,ig,!1);E(this,ng,!1);E(this,sg,!1);E(this,Vh,!0);x(this,ig,!!(t&qn.DISPLAY)),x(this,ng,!!(t&qn.PRINT)),this.name=e,this.intent=n,this.usage=a,this.rbGroups=l}get visible(){if(o(this,sg))return o(this,Vh);if(!o(this,Vh))return!1;const{print:t,view:e}=this.usage;return o(this,ig)?(e==null?void 0:e.viewState)!=="OFF":o(this,ng)?(t==null?void 0:t.printState)!=="OFF":!0}_setVisible(t,e,n=!1){t!==Wu&&ge("Internal method `_setVisible` called."),x(this,sg,n),x(this,Vh,e)}}ig=new WeakMap,ng=new WeakMap,sg=new WeakMap,Vh=new WeakMap;var Lo,oe,qh,Xh,ag,kA;class wj{constructor(t,e=qn.DISPLAY){E(this,ag);E(this,Lo,null);E(this,oe,new Map);E(this,qh,null);E(this,Xh,null);if(this.renderingIntent=e,this.name=null,this.creator=null,t!==null){this.name=t.name,this.creator=t.creator,x(this,Xh,t.order);for(const n of t.groups)o(this,oe).set(n.id,new Sj(e,n));if(t.baseState==="OFF")for(const n of o(this,oe).values())n._setVisible(Wu,!1);for(const n of t.on)o(this,oe).get(n)._setVisible(Wu,!0);for(const n of t.off)o(this,oe).get(n)._setVisible(Wu,!1);x(this,qh,this.getHash())}}isVisible(t){if(o(this,oe).size===0)return!0;if(!t)return oy("Optional content group not defined."),!0;if(t.type==="OCG")return o(this,oe).has(t.id)?o(this,oe).get(t.id).visible:(St(`Optional content group not found: ${t.id}`),!0);if(t.type==="OCMD"){if(t.expression)return T(this,ag,kA).call(this,t.expression);if(!t.policy||t.policy==="AnyOn"){for(const e of t.ids){if(!o(this,oe).has(e))return St(`Optional content group not found: ${e}`),!0;if(o(this,oe).get(e).visible)return!0}return!1}else if(t.policy==="AllOn"){for(const e of t.ids){if(!o(this,oe).has(e))return St(`Optional content group not found: ${e}`),!0;if(!o(this,oe).get(e).visible)return!1}return!0}else if(t.policy==="AnyOff"){for(const e of t.ids){if(!o(this,oe).has(e))return St(`Optional content group not found: ${e}`),!0;if(!o(this,oe).get(e).visible)return!0}return!1}else if(t.policy==="AllOff"){for(const e of t.ids){if(!o(this,oe).has(e))return St(`Optional content group not found: ${e}`),!0;if(o(this,oe).get(e).visible)return!1}return!0}return St(`Unknown optional content policy ${t.policy}.`),!0}return St(`Unknown group type ${t.type}.`),!0}setVisibility(t,e=!0,n=!0){var l;const a=o(this,oe).get(t);if(!a){St(`Optional content group not found: ${t}`);return}if(n&&e&&a.rbGroups.length)for(const c of a.rbGroups)for(const h of c)h!==t&&((l=o(this,oe).get(h))==null||l._setVisible(Wu,!1,!0));a._setVisible(Wu,!!e,!0),x(this,Lo,null)}setOCGState({state:t,preserveRB:e}){let n;for(const a of t){switch(a){case"ON":case"OFF":case"Toggle":n=a;continue}const l=o(this,oe).get(a);if(l)switch(n){case"ON":this.setVisibility(a,!0,e);break;case"OFF":this.setVisibility(a,!1,e);break;case"Toggle":this.setVisibility(a,!l.visible,e);break}}x(this,Lo,null)}get hasInitialVisibility(){return o(this,qh)===null||this.getHash()===o(this,qh)}getOrder(){return o(this,oe).size?o(this,Xh)?o(this,Xh).slice():[...o(this,oe).keys()]:null}getGroup(t){return o(this,oe).get(t)||null}getHash(){if(o(this,Lo)!==null)return o(this,Lo);const t=new D2;for(const[e,n]of o(this,oe))t.update(`${e}:${n.visible}`);return x(this,Lo,t.hexdigest())}[Symbol.iterator](){return o(this,oe).entries()}}Lo=new WeakMap,oe=new WeakMap,qh=new WeakMap,Xh=new WeakMap,ag=new WeakSet,kA=function(t){const e=t.length;if(e<2)return!0;const n=t[0];for(let a=1;a<e;a++){const l=t[a];let c;if(Array.isArray(l))c=T(this,ag,kA).call(this,l);else if(o(this,oe).has(l))c=o(this,oe).get(l).visible;else return St(`Optional content group not found: ${l}`),!0;switch(n){case"And":if(!c)return!1;break;case"Or":if(c)return!0;break;case"Not":return!c;default:return!0}}return n==="And"};class Ej{constructor(t,{disableRange:e=!1,disableStream:n=!1}){Pt(t,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:a,initialData:l,progressiveDone:c,contentDispositionFilename:h}=t;if(this._queuedChunks=[],this._progressiveDone=c,this._contentDispositionFilename=h,(l==null?void 0:l.length)>0){const f=l instanceof Uint8Array&&l.byteLength===l.buffer.byteLength?l.buffer:new Uint8Array(l).buffer;this._queuedChunks.push(f)}this._pdfDataRangeTransport=t,this._isStreamingSupported=!n,this._isRangeSupported=!e,this._contentLength=a,this._fullRequestReader=null,this._rangeReaders=[],t.addRangeListener((f,p)=>{this._onReceiveData({begin:f,chunk:p})}),t.addProgressListener((f,p)=>{this._onProgress({loaded:f,total:p})}),t.addProgressiveReadListener(f=>{this._onReceiveData({chunk:f})}),t.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),t.transportReady()}_onReceiveData({begin:t,chunk:e}){const n=e instanceof Uint8Array&&e.byteLength===e.buffer.byteLength?e.buffer:new Uint8Array(e).buffer;if(t===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(n):this._queuedChunks.push(n);else{const a=this._rangeReaders.some(function(l){return l._begin!==t?!1:(l._enqueue(n),!0)});Pt(a,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var t;return((t=this._fullRequestReader)==null?void 0:t._loaded)??0}_onProgress(t){var e,n,a,l;t.total===void 0?(n=(e=this._rangeReaders[0])==null?void 0:e.onProgress)==null||n.call(e,{loaded:t.loaded}):(l=(a=this._fullRequestReader)==null?void 0:a.onProgress)==null||l.call(a,{loaded:t.loaded,total:t.total})}_onProgressiveDone(){var t;(t=this._fullRequestReader)==null||t.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(t){const e=this._rangeReaders.indexOf(t);e>=0&&this._rangeReaders.splice(e,1)}getFullReader(){Pt(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const t=this._queuedChunks;return this._queuedChunks=null,new Tj(this,t,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const n=new _j(this,t,e);return this._pdfDataRangeTransport.requestDataRange(t,e),this._rangeReaders.push(n),n}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const n of this._rangeReaders.slice(0))n.cancel(t);this._pdfDataRangeTransport.abort()}}class Tj{constructor(t,e,n=!1,a=null){this._stream=t,this._done=n||!1,this._filename=cy(a)?a:null,this._queuedChunks=e||[],this._loaded=0;for(const l of this._queuedChunks)this._loaded+=l.byteLength;this._requests=[],this._headersReady=Promise.resolve(),t._fullRequestReader=this,this.onProgress=null}_enqueue(t){this._done||(this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunks.push(t),this._loaded+=t.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class _j{constructor(t,e,n){this._stream=t,this._begin=e,this._end=n,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(t){if(!this._done){if(this._requests.length===0)this._queuedChunk=t;else{this._requests.shift().resolve({value:t,done:!1});for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function Cj(d){let t=!0,e=n("filename\\*","i").exec(d);if(e){e=e[1];let m=h(e);return m=unescape(m),m=f(m),m=p(m),l(m)}if(e=c(d),e){const m=p(e);return l(m)}if(e=n("filename","i").exec(d),e){e=e[1];let m=h(e);return m=p(m),l(m)}function n(m,y){return new RegExp("(?:^|;)\\s*"+m+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',y)}function a(m,y){if(m){if(!/^[\x00-\xFF]+$/.test(y))return y;try{const v=new TextDecoder(m,{fatal:!0}),w=em(y);y=v.decode(w),t=!1}catch{}}return y}function l(m){return t&&/[\x80-\xff]/.test(m)&&(m=a("utf-8",m),t&&(m=a("iso-8859-1",m))),m}function c(m){const y=[];let v;const w=n("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(v=w.exec(m))!==null;){let[,_,M,N]=v;if(_=parseInt(_,10),_ in y){if(_===0)break;continue}y[_]=[M,N]}const C=[];for(let _=0;_<y.length&&_ in y;++_){let[M,N]=y[_];N=h(N),M&&(N=unescape(N),_===0&&(N=f(N))),C.push(N)}return C.join("")}function h(m){if(m.startsWith('"')){const y=m.slice(1).split('\\"');for(let v=0;v<y.length;++v){const w=y[v].indexOf('"');w!==-1&&(y[v]=y[v].slice(0,w),y.length=v+1),y[v]=y[v].replaceAll(/\\(.)/g,"$1")}m=y.join('"')}return m}function f(m){const y=m.indexOf("'");if(y===-1)return m;const v=m.slice(0,y),C=m.slice(y+1).replace(/^[^']*'/,"");return a(v,C)}function p(m){return!m.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(m)?m:m.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(y,v,w,C){if(w==="q"||w==="Q")return C=C.replaceAll("_"," "),C=C.replaceAll(/=([0-9a-fA-F]{2})/g,function(_,M){return String.fromCharCode(parseInt(M,16))}),a(v,C);try{C=atob(C)}catch{}return a(v,C)})}return""}function G2(d,t){const e=new Headers;if(!d||!t||typeof t!="object")return e;for(const n in t){const a=t[n];a!==void 0&&e.append(n,a)}return e}function uy(d){var t;return((t=URL.parse(d))==null?void 0:t.origin)??null}function V2({responseHeaders:d,isHttp:t,rangeChunkSize:e,disableRange:n}){const a={allowRangeRequests:!1,suggestedLength:void 0},l=parseInt(d.get("Content-Length"),10);return!Number.isInteger(l)||(a.suggestedLength=l,l<=2*e)||n||!t||d.get("Accept-Ranges")!=="bytes"||(d.get("Content-Encoding")||"identity")!=="identity"||(a.allowRangeRequests=!0),a}function q2(d){const t=d.get("Content-Disposition");if(t){let e=Cj(t);if(e.includes("%"))try{e=decodeURIComponent(e)}catch{}if(cy(e))return e}return null}function am(d,t){return new fp(`Unexpected server response (${d}) while retrieving PDF "${t}".`,d,d===404||d===0&&t.startsWith("file:"))}function X2(d){return d===200||d===206}function Y2(d,t,e){return{method:"GET",headers:d,signal:e.signal,mode:"cors",credentials:t?"include":"same-origin",redirect:"follow"}}function $2(d){return d instanceof Uint8Array?d.buffer:d instanceof ArrayBuffer?d:(St(`getArrayBuffer - unexpected data format: ${d}`),new Uint8Array(d).buffer)}class Nj{constructor(t){nt(this,"_responseOrigin",null);this.source=t,this.isHttp=/^https?:/i.test(t.url),this.headers=G2(this.isHttp,t.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var t;return((t=this._fullRequestReader)==null?void 0:t._loaded)??0}getFullReader(){return Pt(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new Mj(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const n=new Dj(this,t,e);return this._rangeRequestReaders.push(n),n}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const n of this._rangeRequestReaders.slice(0))n.cancel(t)}}class Mj{constructor(t){this._stream=t,this._reader=null,this._loaded=0,this._filename=null;const e=t.source;this._withCredentials=e.withCredentials||!1,this._contentLength=e.length,this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange;const n=new Headers(t.headers),a=e.url;fetch(a,Y2(n,this._withCredentials,this._abortController)).then(l=>{if(t._responseOrigin=uy(l.url),!X2(l.status))throw am(l.status,a);this._reader=l.body.getReader(),this._headersCapability.resolve();const c=l.headers,{allowRangeRequests:h,suggestedLength:f}=V2({responseHeaders:c,isHttp:t.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=h,this._contentLength=f||this._contentLength,this._filename=q2(c),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new Lr("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;await this._headersCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded,total:this._contentLength}),{value:$2(t),done:!1})}cancel(t){var e;(e=this._reader)==null||e.cancel(t),this._abortController.abort()}}class Dj{constructor(t,e,n){this._stream=t,this._reader=null,this._loaded=0;const a=t.source;this._withCredentials=a.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!a.disableStream,this._abortController=new AbortController;const l=new Headers(t.headers);l.append("Range",`bytes=${e}-${n-1}`);const c=a.url;fetch(c,Y2(l,this._withCredentials,this._abortController)).then(h=>{const f=uy(h.url);if(f!==t._responseOrigin)throw new Error(`Expected range response-origin "${f}" to match "${t._responseOrigin}".`);if(!X2(h.status))throw am(h.status,c);this._readCapability.resolve(),this._reader=h.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;await this._readCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded}),{value:$2(t),done:!1})}cancel(t){var e;(e=this._reader)==null||e.cancel(t),this._abortController.abort()}}const Yx=200,$x=206;function Rj(d){const t=d.response;return typeof t!="string"?t:em(t).buffer}class Lj{constructor({url:t,httpHeaders:e,withCredentials:n}){nt(this,"_responseOrigin",null);this.url=t,this.isHttp=/^https?:/i.test(t),this.headers=G2(this.isHttp,e),this.withCredentials=n||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(t){const e=new XMLHttpRequest,n=this.currXhrId++,a=this.pendingRequests[n]={xhr:e};e.open("GET",this.url),e.withCredentials=this.withCredentials;for(const[l,c]of this.headers)e.setRequestHeader(l,c);return this.isHttp&&"begin"in t&&"end"in t?(e.setRequestHeader("Range",`bytes=${t.begin}-${t.end-1}`),a.expectedStatus=$x):a.expectedStatus=Yx,e.responseType="arraybuffer",Pt(t.onError,"Expected `onError` callback to be provided."),e.onerror=()=>{t.onError(e.status)},e.onreadystatechange=this.onStateChange.bind(this,n),e.onprogress=this.onProgress.bind(this,n),a.onHeadersReceived=t.onHeadersReceived,a.onDone=t.onDone,a.onError=t.onError,a.onProgress=t.onProgress,e.send(null),n}onProgress(t,e){var a;const n=this.pendingRequests[t];n&&((a=n.onProgress)==null||a.call(n,e))}onStateChange(t,e){const n=this.pendingRequests[t];if(!n)return;const a=n.xhr;if(a.readyState>=2&&n.onHeadersReceived&&(n.onHeadersReceived(),delete n.onHeadersReceived),a.readyState!==4||!(t in this.pendingRequests))return;if(delete this.pendingRequests[t],a.status===0&&this.isHttp){n.onError(a.status);return}const l=a.status||Yx;if(!(l===Yx&&n.expectedStatus===$x)&&l!==n.expectedStatus){n.onError(a.status);return}const h=Rj(a);if(l===$x){const f=a.getResponseHeader("Content-Range"),p=/bytes (\d+)-(\d+)\/(\d+)/.exec(f);p?n.onDone({begin:parseInt(p[1],10),chunk:h}):(St('Missing or invalid "Content-Range" header.'),n.onError(0))}else h?n.onDone({begin:0,chunk:h}):n.onError(a.status)}getRequestXhr(t){return this.pendingRequests[t].xhr}isPendingRequest(t){return t in this.pendingRequests}abortRequest(t){const e=this.pendingRequests[t].xhr;delete this.pendingRequests[t],e.abort()}}class kj{constructor(t){this._source=t,this._manager=new Lj(t),this._rangeChunkSize=t.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(t){const e=this._rangeRequestReaders.indexOf(t);e>=0&&this._rangeRequestReaders.splice(e,1)}getFullReader(){return Pt(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new Oj(this._manager,this._source),this._fullRequestReader}getRangeReader(t,e){const n=new jj(this._manager,t,e);return n.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(n),n}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const n of this._rangeRequestReaders.slice(0))n.cancel(t)}}class Oj{constructor(t,e){this._manager=t,this._url=e.url,this._fullRequestId=t.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._contentLength=e.length,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const t=this._fullRequestId,e=this._manager.getRequestXhr(t);this._manager._responseOrigin=uy(e.responseURL);const n=e.getAllResponseHeaders(),a=new Headers(n?n.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(h=>{const[f,...p]=h.split(": ");return[f,p.join(": ")]}):[]),{allowRangeRequests:l,suggestedLength:c}=V2({responseHeaders:a,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});l&&(this._isRangeSupported=!0),this._contentLength=c||this._contentLength,this._filename=q2(a),this._isRangeSupported&&this._manager.abortRequest(t),this._headersCapability.resolve()}_onDone(t){if(t&&(this._requests.length>0?this._requests.shift().resolve({value:t.chunk,done:!1}):this._cachedChunks.push(t.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(t){this._storedError=am(t,this._url),this._headersCapability.reject(this._storedError);for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(t){var e;(e=this.onProgress)==null||e.call(this,{loaded:t.loaded,total:t.lengthComputable?t.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0,this._headersCapability.reject(t);for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class jj{constructor(t,e,n){this._manager=t,this._url=t.url,this._requestId=t.request({begin:e,end:n,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){var e;const t=uy((e=this._manager.getRequestXhr(this._requestId))==null?void 0:e.responseURL);t!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${t}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){var t;(t=this.onClosed)==null||t.call(this,this)}_onDone(t){const e=t.chunk;this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunk=e,this._done=!0;for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(t){this._storedError??(this._storedError=am(t,this._url));for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(t){var e;this.isStreamingSupported||(e=this.onProgress)==null||e.call(this,{loaded:t.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const Bj=/^[a-z][a-z0-9\-+.]+:/i;function zj(d){if(Bj.test(d))return new URL(d);const t=process.getBuiltinModule("url");return new URL(t.pathToFileURL(d))}class Pj{constructor(t){this.source=t,this.url=zj(t.url),Pt(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var t;return((t=this._fullRequestReader)==null?void 0:t._loaded)??0}getFullReader(){return Pt(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new Ij(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const n=new Fj(this,t,e);return this._rangeRequestReaders.push(n),n}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const n of this._rangeRequestReaders.slice(0))n.cancel(t)}}class Ij{constructor(t){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null;const e=t.source;this._contentLength=e.length,this._loaded=0,this._filename=null,this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const n=process.getBuiltinModule("fs");n.promises.lstat(this._url).then(a=>{this._contentLength=a.size,this._setReadableStream(n.createReadStream(this._url)),this._headersCapability.resolve()},a=>{a.code==="ENOENT"&&(a=am(0,this._url.href)),this._storedError=a,this._headersCapability.reject(a)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new Lr("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class Fj{constructor(t,e,n){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const a=t.source;this._isStreamingSupported=!a.disableStream;const l=process.getBuiltinModule("fs");this._setReadableStream(l.createReadStream(this._url,{start:e,end:n-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const Uf=Symbol("INITIAL_DATA");var Ln,rg,OA;class K2{constructor(){E(this,rg);E(this,Ln,Object.create(null))}get(t,e=null){if(e){const a=T(this,rg,OA).call(this,t);return a.promise.then(()=>e(a.data)),null}const n=o(this,Ln)[t];if(!n||n.data===Uf)throw new Error(`Requesting object that isn't resolved yet ${t}.`);return n.data}has(t){const e=o(this,Ln)[t];return!!e&&e.data!==Uf}delete(t){const e=o(this,Ln)[t];return!e||e.data===Uf?!1:(delete o(this,Ln)[t],!0)}resolve(t,e=null){const n=T(this,rg,OA).call(this,t);n.data=e,n.resolve()}clear(){var t;for(const e in o(this,Ln)){const{data:n}=o(this,Ln)[e];(t=n==null?void 0:n.bitmap)==null||t.close()}x(this,Ln,Object.create(null))}*[Symbol.iterator](){for(const t in o(this,Ln)){const{data:e}=o(this,Ln)[t];e!==Uf&&(yield[t,e])}}}Ln=new WeakMap,rg=new WeakSet,OA=function(t){var e;return(e=o(this,Ln))[t]||(e[t]={...Promise.withResolvers(),data:Uf})};const Uj=1e5,Q_=30;var cC,ko,dn,og,lg,fc,fr,cg,ug,pc,Yh,$h,Oo,Kh,hg,Qh,gc,dg,fg,Be,Wh,mc,pg,jo,Zh,jr,Q2,W2,jA,Qn,$b,BA,Z2,J2;let bp=(Be=class{constructor({textContentSource:t,container:e,viewport:n}){E(this,jr);E(this,ko,Promise.withResolvers());E(this,dn,null);E(this,og,!1);E(this,lg,!!((cC=globalThis.FontInspector)!=null&&cC.enabled));E(this,fc,null);E(this,fr,null);E(this,cg,0);E(this,ug,0);E(this,pc,null);E(this,Yh,null);E(this,$h,0);E(this,Oo,0);E(this,Kh,Object.create(null));E(this,hg,[]);E(this,Qh,null);E(this,gc,[]);E(this,dg,new WeakMap);E(this,fg,null);var f;if(t instanceof ReadableStream)x(this,Qh,t);else if(typeof t=="object")x(this,Qh,new ReadableStream({start(p){p.enqueue(t),p.close()}}));else throw new Error('No "textContentSource" parameter specified.');x(this,dn,x(this,Yh,e)),x(this,Oo,n.scale*qs.pixelRatio),x(this,$h,n.rotation),x(this,fr,{div:null,properties:null,ctx:null});const{pageWidth:a,pageHeight:l,pageX:c,pageY:h}=n.rawDims;x(this,fg,[1,0,0,-1,-c,h+l]),x(this,ug,a),x(this,cg,l),T(f=Be,Qn,Z2).call(f),ll(e,n),o(this,ko).promise.finally(()=>{o(Be,Zh).delete(this),x(this,fr,null),x(this,Kh,null)}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:t,isFirefox:e}=fi.platform;return Ct(this,"fontFamilyMap",new Map([["sans-serif",`${t&&e?"Calibri, ":""}sans-serif`],["monospace",`${t&&e?"Lucida Console, ":""}monospace`]]))}render(){const t=()=>{o(this,pc).read().then(({value:e,done:n})=>{if(n){o(this,ko).resolve();return}o(this,fc)??x(this,fc,e.lang),Object.assign(o(this,Kh),e.styles),T(this,jr,Q2).call(this,e.items),t()},o(this,ko).reject)};return x(this,pc,o(this,Qh).getReader()),o(Be,Zh).add(this),t(),o(this,ko).promise}update({viewport:t,onBefore:e=null}){var l;const n=t.scale*qs.pixelRatio,a=t.rotation;if(a!==o(this,$h)&&(e==null||e(),x(this,$h,a),ll(o(this,Yh),{rotation:a})),n!==o(this,Oo)){e==null||e(),x(this,Oo,n);const c={div:null,properties:null,ctx:T(l=Be,Qn,$b).call(l,o(this,fc))};for(const h of o(this,gc))c.properties=o(this,dg).get(h),c.div=h,T(this,jr,jA).call(this,c)}}cancel(){var e;const t=new Lr("TextLayer task cancelled.");(e=o(this,pc))==null||e.cancel(t).catch(()=>{}),x(this,pc,null),o(this,ko).reject(t)}get textDivs(){return o(this,gc)}get textContentItemsStr(){return o(this,hg)}static cleanup(){if(!(o(this,Zh).size>0)){o(this,Wh).clear();for(const{canvas:t}of o(this,mc).values())t.remove();o(this,mc).clear()}}},ko=new WeakMap,dn=new WeakMap,og=new WeakMap,lg=new WeakMap,fc=new WeakMap,fr=new WeakMap,cg=new WeakMap,ug=new WeakMap,pc=new WeakMap,Yh=new WeakMap,$h=new WeakMap,Oo=new WeakMap,Kh=new WeakMap,hg=new WeakMap,Qh=new WeakMap,gc=new WeakMap,dg=new WeakMap,fg=new WeakMap,Wh=new WeakMap,mc=new WeakMap,pg=new WeakMap,jo=new WeakMap,Zh=new WeakMap,jr=new WeakSet,Q2=function(t){var a,l;if(o(this,og))return;(l=o(this,fr)).ctx??(l.ctx=T(a=Be,Qn,$b).call(a,o(this,fc)));const e=o(this,gc),n=o(this,hg);for(const c of t){if(e.length>Uj){St("Ignoring additional textDivs for performance reasons."),x(this,og,!0);return}if(c.str===void 0){if(c.type==="beginMarkedContentProps"||c.type==="beginMarkedContent"){const h=o(this,dn);x(this,dn,document.createElement("span")),o(this,dn).classList.add("markedContent"),c.id&&o(this,dn).setAttribute("id",`${c.id}`),h.append(o(this,dn))}else c.type==="endMarkedContent"&&x(this,dn,o(this,dn).parentNode);continue}n.push(c.str),T(this,jr,W2).call(this,c)}},W2=function(t){var _;const e=document.createElement("span"),n={angle:0,canvasWidth:0,hasText:t.str!=="",hasEOL:t.hasEOL,fontSize:0};o(this,gc).push(e);const a=ct.transform(o(this,fg),t.transform);let l=Math.atan2(a[1],a[0]);const c=o(this,Kh)[t.fontName];c.vertical&&(l+=Math.PI/2);let h=o(this,lg)&&c.fontSubstitution||c.fontFamily;h=Be.fontFamilyMap.get(h)||h;const f=Math.hypot(a[2],a[3]),p=f*T(_=Be,Qn,J2).call(_,h,c,o(this,fc));let m,y;l===0?(m=a[4],y=a[5]-p):(m=a[4]+p*Math.sin(l),y=a[5]-p*Math.cos(l));const v="calc(var(--total-scale-factor) *",w=e.style;o(this,dn)===o(this,Yh)?(w.left=`${(100*m/o(this,ug)).toFixed(2)}%`,w.top=`${(100*y/o(this,cg)).toFixed(2)}%`):(w.left=`${v}${m.toFixed(2)}px)`,w.top=`${v}${y.toFixed(2)}px)`),w.fontSize=`${v}${(o(Be,jo)*f).toFixed(2)}px)`,w.fontFamily=h,n.fontSize=f,e.setAttribute("role","presentation"),e.textContent=t.str,e.dir=t.dir,o(this,lg)&&(e.dataset.fontName=c.fontSubstitutionLoadedName||t.fontName),l!==0&&(n.angle=l*(180/Math.PI));let C=!1;if(t.str.length>1)C=!0;else if(t.str!==" "&&t.transform[0]!==t.transform[3]){const M=Math.abs(t.transform[0]),N=Math.abs(t.transform[3]);M!==N&&Math.max(M,N)/Math.min(M,N)>1.5&&(C=!0)}if(C&&(n.canvasWidth=c.vertical?t.height:t.width),o(this,dg).set(e,n),o(this,fr).div=e,o(this,fr).properties=n,T(this,jr,jA).call(this,o(this,fr)),n.hasText&&o(this,dn).append(e),n.hasEOL){const M=document.createElement("br");M.setAttribute("role","presentation"),o(this,dn).append(M)}},jA=function(t){var h;const{div:e,properties:n,ctx:a}=t,{style:l}=e;let c="";if(o(Be,jo)>1&&(c=`scale(${1/o(Be,jo)})`),n.canvasWidth!==0&&n.hasText){const{fontFamily:f}=l,{canvasWidth:p,fontSize:m}=n;T(h=Be,Qn,BA).call(h,a,m*o(this,Oo),f);const{width:y}=a.measureText(e.textContent);y>0&&(c=`scaleX(${p*o(this,Oo)/y}) ${c}`)}n.angle!==0&&(c=`rotate(${n.angle}deg) ${c}`),c.length>0&&(l.transform=c)},Qn=new WeakSet,$b=function(t=null){let e=o(this,mc).get(t||(t=""));if(!e){const n=document.createElement("canvas");n.className="hiddenCanvasElement",n.lang=t,document.body.append(n),e=n.getContext("2d",{alpha:!1,willReadFrequently:!0}),o(this,mc).set(t,e),o(this,pg).set(e,{size:0,family:""})}return e},BA=function(t,e,n){const a=o(this,pg).get(t);e===a.size&&n===a.family||(t.font=`${e}px ${n}`,a.size=e,a.family=n)},Z2=function(){if(o(this,jo)!==null)return;const t=document.createElement("div");t.style.opacity=0,t.style.lineHeight=1,t.style.fontSize="1px",t.style.position="absolute",t.textContent="X",document.body.append(t),x(this,jo,t.getBoundingClientRect().height),t.remove()},J2=function(t,e,n){const a=o(this,Wh).get(t);if(a)return a;const l=T(this,Qn,$b).call(this,n);l.canvas.width=l.canvas.height=Q_,T(this,Qn,BA).call(this,l,Q_,t);const c=l.measureText(""),h=c.fontBoundingBoxAscent,f=Math.abs(c.fontBoundingBoxDescent);l.canvas.width=l.canvas.height=0;let p=.8;return h?p=h/(h+f):(fi.platform.isFirefox&&St("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),e.ascent?p=e.ascent:e.descent&&(p=1+e.descent)),o(this,Wh).set(t,p),p},E(Be,Qn),E(Be,Wh,new Map),E(Be,mc,new Map),E(Be,pg,new WeakMap),E(Be,jo,null),E(Be,Zh,new Set),Be);const Hj=100;function qS(d={}){typeof d=="string"||d instanceof URL?d={url:d}:(d instanceof ArrayBuffer||ArrayBuffer.isView(d))&&(d={data:d});const t=new zA,{docId:e}=t,n=d.url?QO(d.url):null,a=d.data?WO(d.data):null,l=d.httpHeaders||null,c=d.withCredentials===!0,h=d.password??null,f=d.range instanceof XS?d.range:null,p=Number.isInteger(d.rangeChunkSize)&&d.rangeChunkSize>0?d.rangeChunkSize:2**16;let m=d.worker instanceof Pd?d.worker:null;const y=d.verbosity,v=typeof d.docBaseUrl=="string"&&!nm(d.docBaseUrl)?d.docBaseUrl:null,w=Db(d.cMapUrl),C=d.cMapPacked!==!1,_=d.CMapReaderFactory||(Yi?sj:B_),M=Db(d.iccUrl),N=Db(d.standardFontDataUrl),R=d.StandardFontDataFactory||(Yi?aj:z_),L=Db(d.wasmUrl),k=d.WasmFactory||(Yi?rj:P_),j=d.stopAtErrors!==!0,z=Number.isInteger(d.maxImageSize)&&d.maxImageSize>-1?d.maxImageSize:-1,I=d.isEvalSupported!==!1,K=typeof d.isOffscreenCanvasSupported=="boolean"?d.isOffscreenCanvasSupported:!Yi,J=typeof d.isImageDecoderSupported=="boolean"?d.isImageDecoderSupported:!Yi&&(fi.platform.isFirefox||!globalThis.chrome),W=Number.isInteger(d.canvasMaxAreaInBytes)?d.canvasMaxAreaInBytes:-1,tt=typeof d.disableFontFace=="boolean"?d.disableFontFace:Yi,X=d.fontExtraProperties===!0,it=d.enableXfa===!0,et=d.ownerDocument||globalThis.document,at=d.disableRange===!0,P=d.disableStream===!0,V=d.disableAutoFetch===!0,st=d.pdfBug===!0,ut=d.CanvasFactory||(Yi?nj:tj),xt=d.FilterFactory||(Yi?ij:ej),$t=d.enableHWA===!0,mt=d.useWasm!==!1,ht=f?f.length:d.length??NaN,Rt=typeof d.useSystemFonts=="boolean"?d.useSystemFonts:!Yi&&!tt,Qt=typeof d.useWorkerFetch=="boolean"?d.useWorkerFetch:!!(_===B_&&R===z_&&k===P_&&w&&N&&L&&Vf(w,document.baseURI)&&Vf(N,document.baseURI)&&Vf(L,document.baseURI)),Se=null;RO(y);const Ut={canvasFactory:new ut({ownerDocument:et,enableHWA:$t}),filterFactory:new xt({docId:e,ownerDocument:et}),cMapReaderFactory:Qt?null:new _({baseUrl:w,isCompressed:C}),standardFontDataFactory:Qt?null:new R({baseUrl:N}),wasmFactory:Qt?null:new k({baseUrl:L})};m||(m=Pd.create({verbosity:y,port:As.workerPort}),t._worker=m);const Wi={docId:e,apiVersion:"5.4.296",data:a,password:h,disableAutoFetch:V,rangeChunkSize:p,length:ht,docBaseUrl:v,enableXfa:it,evaluatorOptions:{maxImageSize:z,disableFontFace:tt,ignoreErrors:j,isEvalSupported:I,isOffscreenCanvasSupported:K,isImageDecoderSupported:J,canvasMaxAreaInBytes:W,fontExtraProperties:X,useSystemFonts:Rt,useWasm:mt,useWorkerFetch:Qt,cMapUrl:w,iccUrl:M,standardFontDataUrl:N,wasmUrl:L}},Mi={ownerDocument:et,pdfBug:st,styleElement:Se,loadingParams:{disableAutoFetch:V,enableXfa:it}};return m.promise.then(function(){if(t.destroyed)throw new Error("Loading aborted");if(m.destroyed)throw new Error("Worker was destroyed");const pi=m.messageHandler.sendWithPromise("GetDocRequest",Wi,a?[a.buffer]:null);let It;if(f)It=new Ej(f,{disableRange:at,disableStream:P});else if(!a){if(!n)throw new Error("getDocument - no `url` parameter provided.");const mn=Vf(n)?Nj:Yi?Pj:kj;It=new mn({url:n,length:ht,httpHeaders:l,withCredentials:c,rangeChunkSize:p,disableRange:at,disableStream:P})}return pi.then(mn=>{if(t.destroyed)throw new Error("Loading aborted");if(m.destroyed)throw new Error("Worker was destroyed");const ce=new Qf(e,mn,m.port),Ft=new qj(ce,t,It,Mi,Ut,$t);t._transport=Ft,ce.send("Ready",null)})}).catch(t._capability.reject),t}var V0;const q0=class q0{constructor(){nt(this,"_capability",Promise.withResolvers());nt(this,"_transport",null);nt(this,"_worker",null);nt(this,"docId",`d${Ze(q0,V0)._++}`);nt(this,"destroyed",!1);nt(this,"onPassword",null);nt(this,"onProgress",null)}get promise(){return this._capability.promise}async destroy(){var t,e,n,a;this.destroyed=!0;try{(t=this._worker)!=null&&t.port&&(this._worker._pendingDestroy=!0),await((e=this._transport)==null?void 0:e.destroy())}catch(l){throw(n=this._worker)!=null&&n.port&&delete this._worker._pendingDestroy,l}this._transport=null,(a=this._worker)==null||a.destroy(),this._worker=null}async getData(){return this._transport.getData()}};V0=new WeakMap,E(q0,V0,0);let zA=q0;var bc,gg,mg,bg,yg,uC;let XS=(uC=class{constructor(t,e,n=!1,a=null){E(this,bc,Promise.withResolvers());E(this,gg,[]);E(this,mg,[]);E(this,bg,[]);E(this,yg,[]);this.length=t,this.initialData=e,this.progressiveDone=n,this.contentDispositionFilename=a}addRangeListener(t){o(this,yg).push(t)}addProgressListener(t){o(this,bg).push(t)}addProgressiveReadListener(t){o(this,mg).push(t)}addProgressiveDoneListener(t){o(this,gg).push(t)}onDataRange(t,e){for(const n of o(this,yg))n(t,e)}onDataProgress(t,e){o(this,bc).promise.then(()=>{for(const n of o(this,bg))n(t,e)})}onDataProgressiveRead(t){o(this,bc).promise.then(()=>{for(const e of o(this,mg))e(t)})}onDataProgressiveDone(){o(this,bc).promise.then(()=>{for(const t of o(this,gg))t()})}transportReady(){o(this,bc).resolve()}requestDataRange(t,e){ge("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}},bc=new WeakMap,gg=new WeakMap,mg=new WeakMap,bg=new WeakMap,yg=new WeakMap,uC);class Gj{constructor(t,e){this._pdfInfo=t,this._transport=e}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return Ct(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(t){return this._transport.getPage(t)}getPageIndex(t){return this._transport.getPageIndex(t)}getDestinations(){return this._transport.getDestinations()}getDestination(t){return this._transport.getDestination(t)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getAnnotationsByType(t,e){return this._transport.getAnnotationsByType(t,e)}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getOptionalContentConfig(e)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(t=!1){return this._transport.startCleanup(t||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(t){return this._transport.cachedPageNumber(t)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var pr,yc,np;class Vj{constructor(t,e,n,a=!1){E(this,yc);E(this,pr,!1);this._pageIndex=t,this._pageInfo=e,this._transport=n,this._stats=a?new M_:null,this._pdfBug=a,this.commonObjs=n.commonObjs,this.objs=new K2,this._intentStates=new Map,this.destroyed=!1,this.recordedBBoxes=null}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:t,rotation:e=this.rotate,offsetX:n=0,offsetY:a=0,dontFlip:l=!1}={}){return new im({viewBox:this.view,userUnit:this.userUnit,scale:t,rotation:e,offsetX:n,offsetY:a,dontFlip:l})}getAnnotations({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getAnnotations(this._pageIndex,e)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return Ct(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var t;return((t=this._transport._htmlForXfa)==null?void 0:t.children[this._pageIndex])||null}render({canvasContext:t,canvas:e=t.canvas,viewport:n,intent:a="display",annotationMode:l=wa.ENABLE,transform:c=null,background:h=null,optionalContentConfigPromise:f=null,annotationCanvasMap:p=null,pageColors:m=null,printAnnotationStorage:y=null,isEditing:v=!1,recordOperations:w=!1,operationsFilter:C=null}){var J,W,tt;(J=this._stats)==null||J.time("Overall");const _=this._transport.getRenderingIntent(a,l,y,v),{renderingIntent:M,cacheKey:N}=_;x(this,pr,!1),f||(f=this._transport.getOptionalContentConfig(M));let R=this._intentStates.get(N);R||(R=Object.create(null),this._intentStates.set(N,R)),R.streamReaderCancelTimeout&&(clearTimeout(R.streamReaderCancelTimeout),R.streamReaderCancelTimeout=null);const L=!!(M&qn.PRINT);R.displayReadyCapability||(R.displayReadyCapability=Promise.withResolvers(),R.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(W=this._stats)==null||W.time("Page Request"),this._pumpOperatorList(_));const k=!!(this._pdfBug&&((tt=globalThis.StepperManager)!=null&&tt.enabled)),j=!this.recordedBBoxes&&(w||k),z=X=>{var it,et;if(R.renderTasks.delete(I),j){const at=(it=I.gfx)==null?void 0:it.dependencyTracker.take();at&&(I.stepper&&I.stepper.setOperatorBBoxes(at,I.gfx.dependencyTracker.takeDebugMetadata()),w&&(this.recordedBBoxes=at))}L&&x(this,pr,!0),T(this,yc,np).call(this),X?(I.capability.reject(X),this._abortOperatorList({intentState:R,reason:X instanceof Error?X:new Error(X)})):I.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),(et=globalThis.Stats)!=null&&et.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},I=new PA({callback:z,params:{canvas:e,canvasContext:t,dependencyTracker:j?new lj(e,R.operatorList.length,k):null,viewport:n,transform:c,background:h},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:p,operatorList:R.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!L,pdfBug:this._pdfBug,pageColors:m,enableHWA:this._transport.enableHWA,operationsFilter:C});(R.renderTasks||(R.renderTasks=new Set)).add(I);const K=I.task;return Promise.all([R.displayReadyCapability.promise,f]).then(([X,it])=>{var et;if(this.destroyed){z();return}if((et=this._stats)==null||et.time("Rendering"),!(it.renderingIntent&M))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");I.initializeGraphics({transparency:X,optionalContentConfig:it}),I.operatorListChanged()}).catch(z),K}getOperatorList({intent:t="display",annotationMode:e=wa.ENABLE,printAnnotationStorage:n=null,isEditing:a=!1}={}){var p;function l(){h.operatorList.lastChunk&&(h.opListReadCapability.resolve(h.operatorList),h.renderTasks.delete(f))}const c=this._transport.getRenderingIntent(t,e,n,a,!0);let h=this._intentStates.get(c.cacheKey);h||(h=Object.create(null),this._intentStates.set(c.cacheKey,h));let f;return h.opListReadCapability||(f=Object.create(null),f.operatorListChanged=l,h.opListReadCapability=Promise.withResolvers(),(h.renderTasks||(h.renderTasks=new Set)).add(f),h.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(p=this._stats)==null||p.time("Page Request"),this._pumpOperatorList(c)),h.opListReadCapability.promise}streamTextContent({includeMarkedContent:t=!1,disableNormalization:e=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:t===!0,disableNormalization:e===!0},{highWaterMark:100,size(a){return a.items.length}})}getTextContent(t={}){if(this._transport._htmlForXfa)return this.getXfa().then(n=>pp.textContent(n));const e=this.streamTextContent(t);return new Promise(function(n,a){function l(){c.read().then(function({value:f,done:p}){if(p){n(h);return}h.lang??(h.lang=f.lang),Object.assign(h.styles,f.styles),h.items.push(...f.items),l()},a)}const c=e.getReader(),h={items:[],styles:Object.create(null),lang:null};l()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const t=[];for(const e of this._intentStates.values())if(this._abortOperatorList({intentState:e,reason:new Error("Page was destroyed."),force:!0}),!e.opListReadCapability)for(const n of e.renderTasks)t.push(n.completed),n.cancel();return this.objs.clear(),x(this,pr,!1),Promise.all(t)}cleanup(t=!1){x(this,pr,!0);const e=T(this,yc,np).call(this);return t&&e&&this._stats&&(this._stats=new M_),e}_startRenderPage(t,e){var a,l;const n=this._intentStates.get(e);n&&((a=this._stats)==null||a.timeEnd("Page Request"),(l=n.displayReadyCapability)==null||l.resolve(t))}_renderPageChunk(t,e){for(let n=0,a=t.length;n<a;n++)e.operatorList.fnArray.push(t.fnArray[n]),e.operatorList.argsArray.push(t.argsArray[n]);e.operatorList.lastChunk=t.lastChunk,e.operatorList.separateAnnots=t.separateAnnots;for(const n of e.renderTasks)n.operatorListChanged();t.lastChunk&&T(this,yc,np).call(this)}_pumpOperatorList({renderingIntent:t,cacheKey:e,annotationStorageSerializable:n,modifiedIds:a}){const{map:l,transfer:c}=n,f=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:t,cacheKey:e,annotationStorage:l,modifiedIds:a},c).getReader(),p=this._intentStates.get(e);p.streamReader=f;const m=()=>{f.read().then(({value:y,done:v})=>{if(v){p.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(y,p),m())},y=>{if(p.streamReader=null,!this._transport.destroyed){if(p.operatorList){p.operatorList.lastChunk=!0;for(const v of p.renderTasks)v.operatorListChanged();T(this,yc,np).call(this)}if(p.displayReadyCapability)p.displayReadyCapability.reject(y);else if(p.opListReadCapability)p.opListReadCapability.reject(y);else throw y}})};m()}_abortOperatorList({intentState:t,reason:e,force:n=!1}){if(t.streamReader){if(t.streamReaderCancelTimeout&&(clearTimeout(t.streamReaderCancelTimeout),t.streamReaderCancelTimeout=null),!n){if(t.renderTasks.size>0)return;if(e instanceof ly){let a=Hj;e.extraDelay>0&&e.extraDelay<1e3&&(a+=e.extraDelay),t.streamReaderCancelTimeout=setTimeout(()=>{t.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:t,reason:e,force:!0})},a);return}}if(t.streamReader.cancel(new Lr(e.message)).catch(()=>{}),t.streamReader=null,!this._transport.destroyed){for(const[a,l]of this._intentStates)if(l===t){this._intentStates.delete(a);break}this.cleanup()}}}get stats(){return this._stats}}pr=new WeakMap,yc=new WeakSet,np=function(){if(!o(this,pr)||this.destroyed)return!1;for(const{renderTasks:t,operatorList:e}of this._intentStates.values())if(t.size>0||!e.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),x(this,pr,!1),!0};var Bo,js,gr,vc,X0,xc,Ac,$i,Kb,tN,eN,sp,Jh,Qb;const Ee=class Ee{constructor({name:t=null,port:e=null,verbosity:n=LO()}={}){E(this,$i);E(this,Bo,Promise.withResolvers());E(this,js,null);E(this,gr,null);E(this,vc,null);if(this.name=t,this.destroyed=!1,this.verbosity=n,e){if(o(Ee,Ac).has(e))throw new Error("Cannot use more than one PDFWorker per port.");o(Ee,Ac).set(e,this),T(this,$i,tN).call(this,e)}else T(this,$i,eN).call(this)}get promise(){return o(this,Bo).promise}get port(){return o(this,gr)}get messageHandler(){return o(this,js)}destroy(){var t,e;this.destroyed=!0,(t=o(this,vc))==null||t.terminate(),x(this,vc,null),o(Ee,Ac).delete(o(this,gr)),x(this,gr,null),(e=o(this,js))==null||e.destroy(),x(this,js,null)}static create(t){const e=o(this,Ac).get(t==null?void 0:t.port);if(e){if(e._pendingDestroy)throw new Error("PDFWorker.create - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return e}return new Ee(t)}static get workerSrc(){if(As.workerSrc)return As.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return Ct(this,"_setupFakeWorkerGlobal",(async()=>o(this,Jh,Qb)?o(this,Jh,Qb):(await import(this.workerSrc)).WorkerMessageHandler)())}};Bo=new WeakMap,js=new WeakMap,gr=new WeakMap,vc=new WeakMap,X0=new WeakMap,xc=new WeakMap,Ac=new WeakMap,$i=new WeakSet,Kb=function(){o(this,Bo).resolve(),o(this,js).send("configure",{verbosity:this.verbosity})},tN=function(t){x(this,gr,t),x(this,js,new Qf("main","worker",t)),o(this,js).on("ready",()=>{}),T(this,$i,Kb).call(this)},eN=function(){if(o(Ee,xc)||o(Ee,Jh,Qb)){T(this,$i,sp).call(this);return}let{workerSrc:t}=Ee;try{Ee._isSameOrigin(window.location,t)||(t=Ee._createCDNWrapper(new URL(t,window.location).href));const e=new Worker(t,{type:"module"}),n=new Qf("main","worker",e),a=()=>{l.abort(),n.destroy(),e.terminate(),this.destroyed?o(this,Bo).reject(new Error("Worker was destroyed")):T(this,$i,sp).call(this)},l=new AbortController;e.addEventListener("error",()=>{o(this,vc)||a()},{signal:l.signal}),n.on("test",h=>{if(l.abort(),this.destroyed||!h){a();return}x(this,js,n),x(this,gr,e),x(this,vc,e),T(this,$i,Kb).call(this)}),n.on("ready",h=>{if(l.abort(),this.destroyed){a();return}try{c()}catch{T(this,$i,sp).call(this)}});const c=()=>{const h=new Uint8Array;n.send("test",h,[h.buffer])};c();return}catch{oy("The worker has been disabled.")}T(this,$i,sp).call(this)},sp=function(){o(Ee,xc)||(St("Setting up fake worker."),x(Ee,xc,!0)),Ee._setupFakeWorkerGlobal.then(t=>{if(this.destroyed){o(this,Bo).reject(new Error("Worker was destroyed"));return}const e=new JO;x(this,gr,e);const n=`fake${Ze(Ee,X0)._++}`,a=new Qf(n+"_worker",n,e);t.setup(a,e),x(this,js,new Qf(n,n+"_worker",e)),T(this,$i,Kb).call(this)}).catch(t=>{o(this,Bo).reject(new Error(`Setting up fake worker failed: "${t.message}".`))})},Jh=new WeakSet,Qb=function(){var t;try{return((t=globalThis.pdfjsWorker)==null?void 0:t.WorkerMessageHandler)||null}catch{return null}},E(Ee,Jh),E(Ee,X0,0),E(Ee,xc,!1),E(Ee,Ac,new WeakMap),Yi&&(x(Ee,xc,!0),As.workerSrc||(As.workerSrc="./pdf.worker.mjs")),Ee._isSameOrigin=(t,e)=>{const n=URL.parse(t);if(!(n!=null&&n.origin)||n.origin==="null")return!1;const a=new URL(e,n);return n.origin===a.origin},Ee._createCDNWrapper=t=>{const e=`await import("${t}");`;return URL.createObjectURL(new Blob([e],{type:"text/javascript"}))},Ee.fromPort=t=>{if(UO("`PDFWorker.fromPort` - please use `PDFWorker.create` instead."),!(t!=null&&t.port))throw new Error("PDFWorker.fromPort - invalid method signature.");return Ee.create(t)};let Pd=Ee;var mr,fa,td,ed,br,Sc,ap;class qj{constructor(t,e,n,a,l,c){E(this,Sc);E(this,mr,new Map);E(this,fa,new Map);E(this,td,new Map);E(this,ed,new Map);E(this,br,null);this.messageHandler=t,this.loadingTask=e,this.commonObjs=new K2,this.fontLoader=new $O({ownerDocument:a.ownerDocument,styleElement:a.styleElement}),this.loadingParams=a.loadingParams,this._params=a,this.canvasFactory=l.canvasFactory,this.filterFactory=l.filterFactory,this.cMapReaderFactory=l.cMapReaderFactory,this.standardFontDataFactory=l.standardFontDataFactory,this.wasmFactory=l.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=n,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.enableHWA=c,this.setupMessageHandler()}get annotationStorage(){return Ct(this,"annotationStorage",new HS)}getRenderingIntent(t,e=wa.ENABLE,n=null,a=!1,l=!1){let c=qn.DISPLAY,h=AA;switch(t){case"any":c=qn.ANY;break;case"display":break;case"print":c=qn.PRINT;break;default:St(`getRenderingIntent - invalid intent: ${t}`)}const f=c&qn.PRINT&&n instanceof L2?n:this.annotationStorage;switch(e){case wa.DISABLE:c+=qn.ANNOTATIONS_DISABLE;break;case wa.ENABLE:break;case wa.ENABLE_FORMS:c+=qn.ANNOTATIONS_FORMS;break;case wa.ENABLE_STORAGE:c+=qn.ANNOTATIONS_STORAGE,h=f.serializable;break;default:St(`getRenderingIntent - invalid annotationMode: ${e}`)}a&&(c+=qn.IS_EDITING),l&&(c+=qn.OPLIST);const{ids:p,hash:m}=f.modifiedIds,y=[c,h.hash,m];return{renderingIntent:c,cacheKey:y.join("_"),annotationStorageSerializable:h,modifiedIds:p}}destroy(){var n;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),(n=o(this,br))==null||n.reject(new Error("Worker was destroyed during onPassword callback"));const t=[];for(const a of o(this,fa).values())t.push(a._destroy());o(this,fa).clear(),o(this,td).clear(),o(this,ed).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const e=this.messageHandler.sendWithPromise("Terminate",null);return t.push(e),Promise.all(t).then(()=>{var a,l;this.commonObjs.clear(),this.fontLoader.clear(),o(this,mr).clear(),this.filterFactory.destroy(),bp.cleanup(),(a=this._networkStream)==null||a.cancelAllRequests(new Lr("Worker was terminated.")),(l=this.messageHandler)==null||l.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:t,loadingTask:e}=this;t.on("GetReader",(n,a)=>{Pt(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=l=>{this._lastProgress={loaded:l.loaded,total:l.total}},a.onPull=()=>{this._fullReader.read().then(function({value:l,done:c}){if(c){a.close();return}Pt(l instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),a.enqueue(new Uint8Array(l),1,[l])}).catch(l=>{a.error(l)})},a.onCancel=l=>{this._fullReader.cancel(l),a.ready.catch(c=>{if(!this.destroyed)throw c})}}),t.on("ReaderHeadersReady",async n=>{var h;await this._fullReader.headersReady;const{isStreamingSupported:a,isRangeSupported:l,contentLength:c}=this._fullReader;return(!a||!l)&&(this._lastProgress&&((h=e.onProgress)==null||h.call(e,this._lastProgress)),this._fullReader.onProgress=f=>{var p;(p=e.onProgress)==null||p.call(e,{loaded:f.loaded,total:f.total})}),{isStreamingSupported:a,isRangeSupported:l,contentLength:c}}),t.on("GetRangeReader",(n,a)=>{Pt(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const l=this._networkStream.getRangeReader(n.begin,n.end);if(!l){a.close();return}a.onPull=()=>{l.read().then(function({value:c,done:h}){if(h){a.close();return}Pt(c instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),a.enqueue(new Uint8Array(c),1,[c])}).catch(c=>{a.error(c)})},a.onCancel=c=>{l.cancel(c),a.ready.catch(h=>{if(!this.destroyed)throw h})}}),t.on("GetDoc",({pdfInfo:n})=>{this._numPages=n.numPages,this._htmlForXfa=n.htmlForXfa,delete n.htmlForXfa,e._capability.resolve(new Gj(n,this))}),t.on("DocException",n=>{e._capability.reject(rn(n))}),t.on("PasswordRequest",n=>{x(this,br,Promise.withResolvers());try{if(!e.onPassword)throw rn(n);const a=l=>{l instanceof Error?o(this,br).reject(l):o(this,br).resolve({password:l})};e.onPassword(a,n.code)}catch(a){o(this,br).reject(a)}return o(this,br).promise}),t.on("DataLoaded",n=>{var a;(a=e.onProgress)==null||a.call(e,{loaded:n.length,total:n.length}),this.downloadInfoCapability.resolve(n)}),t.on("StartRenderPage",n=>{if(this.destroyed)return;o(this,fa).get(n.pageIndex)._startRenderPage(n.transparency,n.cacheKey)}),t.on("commonobj",([n,a,l])=>{var c;if(this.destroyed||this.commonObjs.has(n))return null;switch(a){case"Font":if("error"in l){const y=l.error;St(`Error during font loading: ${y}`),this.commonObjs.resolve(n,y);break}const h=new LA(l),f=this._params.pdfBug&&((c=globalThis.FontInspector)!=null&&c.enabled)?(y,v)=>globalThis.FontInspector.fontAdded(y,v):null,p=new KO(h,f,l.extra,l.charProcOperatorList);this.fontLoader.bind(p).catch(()=>t.sendWithPromise("FontFallback",{id:n})).finally(()=>{!p.fontExtraProperties&&p.data&&p.clearData(),this.commonObjs.resolve(n,p)});break;case"CopyLocalImage":const{imageRef:m}=l;Pt(m,"The imageRef must be defined.");for(const y of o(this,fa).values())for(const[,v]of y.objs)if((v==null?void 0:v.ref)===m)return v.dataLen?(this.commonObjs.resolve(n,structuredClone(v)),v.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(n,l);break;default:throw new Error(`Got unknown common object type ${a}`)}return null}),t.on("obj",([n,a,l,c])=>{var f;if(this.destroyed)return;const h=o(this,fa).get(a);if(!h.objs.has(n)){if(h._intentStates.size===0){(f=c==null?void 0:c.bitmap)==null||f.close();return}switch(l){case"Image":case"Pattern":h.objs.resolve(n,c);break;default:throw new Error(`Got unknown object type ${l}`)}}}),t.on("DocProgress",n=>{var a;this.destroyed||(a=e.onProgress)==null||a.call(e,{loaded:n.loaded,total:n.total})}),t.on("FetchBinaryData",async n=>{if(this.destroyed)throw new Error("Worker was destroyed.");const a=this[n.type];if(!a)throw new Error(`${n.type} not initialized, see the \`useWorkerFetch\` parameter.`);return a.fetch(n)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var n;this.annotationStorage.size<=0&&St("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:t,transfer:e}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:t,filename:((n=this._fullReader)==null?void 0:n.filename)??null},e).finally(()=>{this.annotationStorage.resetModified()})}getPage(t){if(!Number.isInteger(t)||t<=0||t>this._numPages)return Promise.reject(new Error("Invalid page request."));const e=t-1,n=o(this,td).get(e);if(n)return n;const a=this.messageHandler.sendWithPromise("GetPage",{pageIndex:e}).then(l=>{if(this.destroyed)throw new Error("Transport destroyed");l.refStr&&o(this,ed).set(l.refStr,t);const c=new Vj(e,l,this,this._params.pdfBug);return o(this,fa).set(e,c),c});return o(this,td).set(e,a),a}getPageIndex(t){return SA(t)?this.messageHandler.sendWithPromise("GetPageIndex",{num:t.num,gen:t.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(t,e){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:t,intent:e})}getFieldObjects(){return T(this,Sc,ap).call(this,"GetFieldObjects")}hasJSActions(){return T(this,Sc,ap).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(t){return typeof t!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:t})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getAnnotationsByType(t,e){return this.messageHandler.sendWithPromise("GetAnnotationsByType",{types:t,pageIndexesToSkip:e})}getDocJSActions(){return T(this,Sc,ap).call(this,"GetDocJSActions")}getPageJSActions(t){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:t})}getStructTree(t){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:t})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(t){return T(this,Sc,ap).call(this,"GetOptionalContentConfig").then(e=>new wj(e,t))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const t="GetMetadata",e=o(this,mr).get(t);if(e)return e;const n=this.messageHandler.sendWithPromise(t,null).then(a=>{var l,c;return{info:a[0],metadata:a[1]?new Aj(a[1]):null,contentDispositionFilename:((l=this._fullReader)==null?void 0:l.filename)??null,contentLength:((c=this._fullReader)==null?void 0:c.contentLength)??null}});return o(this,mr).set(t,n),n}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(t=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const e of o(this,fa).values())if(!e.cleanup())throw new Error(`startCleanup: Page ${e.pageNumber} is currently rendering.`);this.commonObjs.clear(),t||this.fontLoader.clear(),o(this,mr).clear(),this.filterFactory.destroy(!0),bp.cleanup()}}cachedPageNumber(t){if(!SA(t))return null;const e=t.gen===0?`${t.num}R`:`${t.num}R${t.gen}`;return o(this,ed).get(e)??null}}mr=new WeakMap,fa=new WeakMap,td=new WeakMap,ed=new WeakMap,br=new WeakMap,Sc=new WeakSet,ap=function(t,e=null){const n=o(this,mr).get(t);if(n)return n;const a=this.messageHandler.sendWithPromise(t,e);return o(this,mr).set(t,a),a};var zo;class Xj{constructor(t){E(this,zo,null);nt(this,"onContinue",null);nt(this,"onError",null);x(this,zo,t)}get promise(){return o(this,zo).capability.promise}cancel(t=0){o(this,zo).cancel(null,t)}get separateAnnots(){const{separateAnnots:t}=o(this,zo).operatorList;if(!t)return!1;const{annotationCanvasMap:e}=o(this,zo);return t.form||t.canvas&&(e==null?void 0:e.size)>0}}zo=new WeakMap;var Po,wc;const Bl=class Bl{constructor({callback:t,params:e,objs:n,commonObjs:a,annotationCanvasMap:l,operatorList:c,pageIndex:h,canvasFactory:f,filterFactory:p,useRequestAnimationFrame:m=!1,pdfBug:y=!1,pageColors:v=null,enableHWA:w=!1,operationsFilter:C=null}){E(this,Po,null);this.callback=t,this.params=e,this.objs=n,this.commonObjs=a,this.annotationCanvasMap=l,this.operatorListIdx=null,this.operatorList=c,this._pageIndex=h,this.canvasFactory=f,this.filterFactory=p,this._pdfBug=y,this.pageColors=v,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=m===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new Xj(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=e.canvas,this._canvasContext=e.canvas?null:e.canvasContext,this._enableHWA=w,this._dependencyTracker=e.dependencyTracker,this._operationsFilter=C}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:t=!1,optionalContentConfig:e}){var f,p;if(this.cancelled)return;if(this._canvas){if(o(Bl,wc).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");o(Bl,wc).add(this._canvas)}this._pdfBug&&((f=globalThis.StepperManager)!=null&&f.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{viewport:n,transform:a,background:l,dependencyTracker:c}=this.params,h=this._canvasContext||this._canvas.getContext("2d",{alpha:!1,willReadFrequently:!this._enableHWA});this.gfx=new rh(h,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:e},this.annotationCanvasMap,this.pageColors,c),this.gfx.beginDrawing({transform:a,viewport:n,transparency:t,background:l}),this.operatorListIdx=0,this.graphicsReady=!0,(p=this.graphicsReadyCallback)==null||p.call(this)}cancel(t=null,e=0){var n,a,l;this.running=!1,this.cancelled=!0,(n=this.gfx)==null||n.endDrawing(),o(this,Po)&&(window.cancelAnimationFrame(o(this,Po)),x(this,Po,null)),o(Bl,wc).delete(this._canvas),t||(t=new ly(`Rendering cancelled, page ${this._pageIndex+1}`,e)),this.callback(t),(l=(a=this.task).onError)==null||l.call(a,t)}operatorListChanged(){var t,e;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(t=this.gfx.dependencyTracker)==null||t.growOperationsCount(this.operatorList.fnArray.length),(e=this.stepper)==null||e.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?x(this,Po,window.requestAnimationFrame(()=>{x(this,Po,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper,this._operationsFilter),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),o(Bl,wc).delete(this._canvas),this.callback())))}};Po=new WeakMap,wc=new WeakMap,E(Bl,wc,new WeakSet);let PA=Bl;const YS="5.4.296",iN="f56dc8601";var kn,Ec,id,ei,vg,nd,yr,xg,Io,Bs,Ag,le,IA,FA,UA,Ll,nN,uo;const on=class on{constructor({editor:t=null,uiManager:e=null}){E(this,le);E(this,kn,null);E(this,Ec,null);E(this,id);E(this,ei,null);E(this,vg,!1);E(this,nd,!1);E(this,yr,null);E(this,xg);E(this,Io,null);E(this,Bs,null);var n,a;t?(x(this,nd,!1),x(this,yr,t)):x(this,nd,!0),x(this,Bs,(t==null?void 0:t._uiManager)||e),x(this,xg,o(this,Bs)._eventBus),x(this,id,((n=t==null?void 0:t.color)==null?void 0:n.toUpperCase())||((a=o(this,Bs))==null?void 0:a.highlightColors.values().next().value)||"#FFFF98"),o(on,Ag)||x(on,Ag,Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"}))}static get _keyboardManager(){return Ct(this,"_keyboardManager",new sm([[["Escape","mac+Escape"],on.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],on.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],on.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],on.prototype._moveToPrevious],[["Home","mac+Home"],on.prototype._moveToBeginning],[["End","mac+End"],on.prototype._moveToEnd]]))}renderButton(){const t=x(this,kn,document.createElement("button"));t.className="colorPicker",t.tabIndex="0",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),t.ariaHasPopup="true",o(this,yr)&&(t.ariaControls=`${o(this,yr).id}_colorpicker_dropdown`);const e=o(this,Bs)._signal;t.addEventListener("click",T(this,le,Ll).bind(this),{signal:e}),t.addEventListener("keydown",T(this,le,UA).bind(this),{signal:e});const n=x(this,Ec,document.createElement("span"));return n.className="swatch",n.ariaHidden="true",n.style.backgroundColor=o(this,id),t.append(n),t}renderMainDropdown(){const t=x(this,ei,T(this,le,IA).call(this));return t.ariaOrientation="horizontal",t.ariaLabelledBy="highlightColorPickerLabel",t}_colorSelectFromKeyboard(t){if(t.target===o(this,kn)){T(this,le,Ll).call(this,t);return}const e=t.target.getAttribute("data-color");e&&T(this,le,FA).call(this,e,t)}_moveToNext(t){var e,n;if(!o(this,le,uo)){T(this,le,Ll).call(this,t);return}if(t.target===o(this,kn)){(e=o(this,ei).firstChild)==null||e.focus();return}(n=t.target.nextSibling)==null||n.focus()}_moveToPrevious(t){var e,n;if(t.target===((e=o(this,ei))==null?void 0:e.firstChild)||t.target===o(this,kn)){o(this,le,uo)&&this._hideDropdownFromKeyboard();return}o(this,le,uo)||T(this,le,Ll).call(this,t),(n=t.target.previousSibling)==null||n.focus()}_moveToBeginning(t){var e;if(!o(this,le,uo)){T(this,le,Ll).call(this,t);return}(e=o(this,ei).firstChild)==null||e.focus()}_moveToEnd(t){var e;if(!o(this,le,uo)){T(this,le,Ll).call(this,t);return}(e=o(this,ei).lastChild)==null||e.focus()}hideDropdown(){var t,e;(t=o(this,ei))==null||t.classList.add("hidden"),o(this,kn).ariaExpanded="false",(e=o(this,Io))==null||e.abort(),x(this,Io,null)}_hideDropdownFromKeyboard(){var t;if(!o(this,nd)){if(!o(this,le,uo)){(t=o(this,yr))==null||t.unselect();return}this.hideDropdown(),o(this,kn).focus({preventScroll:!0,focusVisible:o(this,vg)})}}updateColor(t){if(o(this,Ec)&&(o(this,Ec).style.backgroundColor=t),!o(this,ei))return;const e=o(this,Bs).highlightColors.values();for(const n of o(this,ei).children)n.ariaSelected=e.next().value===t.toUpperCase()}destroy(){var t,e;(t=o(this,kn))==null||t.remove(),x(this,kn,null),x(this,Ec,null),(e=o(this,ei))==null||e.remove(),x(this,ei,null)}};kn=new WeakMap,Ec=new WeakMap,id=new WeakMap,ei=new WeakMap,vg=new WeakMap,nd=new WeakMap,yr=new WeakMap,xg=new WeakMap,Io=new WeakMap,Bs=new WeakMap,Ag=new WeakMap,le=new WeakSet,IA=function(){const t=document.createElement("div"),e=o(this,Bs)._signal;t.addEventListener("contextmenu",Wn,{signal:e}),t.className="dropdown",t.role="listbox",t.ariaMultiSelectable="false",t.ariaOrientation="vertical",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown"),o(this,yr)&&(t.id=`${o(this,yr).id}_colorpicker_dropdown`);for(const[n,a]of o(this,Bs).highlightColors){const l=document.createElement("button");l.tabIndex="0",l.role="option",l.setAttribute("data-color",a),l.title=n,l.setAttribute("data-l10n-id",o(on,Ag)[n]);const c=document.createElement("span");l.append(c),c.className="swatch",c.style.backgroundColor=a,l.ariaSelected=a===o(this,id),l.addEventListener("click",T(this,le,FA).bind(this,a),{signal:e}),t.append(l)}return t.addEventListener("keydown",T(this,le,UA).bind(this),{signal:e}),t},FA=function(t,e){e.stopPropagation(),o(this,xg).dispatch("switchannotationeditorparams",{source:this,type:Bt.HIGHLIGHT_COLOR,value:t}),this.updateColor(t)},UA=function(t){on._keyboardManager.exec(this,t)},Ll=function(t){if(o(this,le,uo)){this.hideDropdown();return}if(x(this,vg,t.detail===0),o(this,Io)||(x(this,Io,new AbortController),window.addEventListener("pointerdown",T(this,le,nN).bind(this),{signal:o(this,Bs).combinedSignal(o(this,Io))})),o(this,kn).ariaExpanded="true",o(this,ei)){o(this,ei).classList.remove("hidden");return}const e=x(this,ei,T(this,le,IA).call(this));o(this,kn).append(e)},nN=function(t){var e;(e=o(this,ei))!=null&&e.contains(t.target)||this.hideDropdown()},uo=function(){return o(this,ei)&&!o(this,ei).classList.contains("hidden")},E(on,Ag,null);let yp=on;var pa,Sg,sd,wg;const zl=class zl{constructor(t){E(this,pa,null);E(this,Sg,null);E(this,sd,null);x(this,Sg,t),x(this,sd,t._uiManager),o(zl,wg)||x(zl,wg,Object.freeze({freetext:"pdfjs-editor-color-picker-free-text-input",ink:"pdfjs-editor-color-picker-ink-input"}))}renderButton(){if(o(this,pa))return o(this,pa);const{editorType:t,colorType:e,colorValue:n}=o(this,Sg),a=x(this,pa,document.createElement("input"));return a.type="color",a.value=n||"#000000",a.className="basicColorPicker",a.tabIndex=0,a.setAttribute("data-l10n-id",o(zl,wg)[t]),a.addEventListener("input",()=>{o(this,sd).updateParams(e,a.value)},{signal:o(this,sd)._signal}),a}update(t){o(this,pa)&&(o(this,pa).value=t)}destroy(){var t;(t=o(this,pa))==null||t.remove(),x(this,pa,null)}hideDropdown(){}};pa=new WeakMap,Sg=new WeakMap,sd=new WeakMap,wg=new WeakMap,E(zl,wg,null);let M0=zl;function W_(d){return Math.floor(Math.max(0,Math.min(1,d))*255).toString(16).padStart(2,"0")}function Hf(d){return Math.max(0,Math.min(255,255*d))}class Z_{static CMYK_G([t,e,n,a]){return["G",1-Math.min(1,.3*t+.59*n+.11*e+a)]}static G_CMYK([t]){return["CMYK",0,0,0,1-t]}static G_RGB([t]){return["RGB",t,t,t]}static G_rgb([t]){return t=Hf(t),[t,t,t]}static G_HTML([t]){const e=W_(t);return`#${e}${e}${e}`}static RGB_G([t,e,n]){return["G",.3*t+.59*e+.11*n]}static RGB_rgb(t){return t.map(Hf)}static RGB_HTML(t){return`#${t.map(W_).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([t,e,n,a]){return["RGB",1-Math.min(1,t+a),1-Math.min(1,n+a),1-Math.min(1,e+a)]}static CMYK_rgb([t,e,n,a]){return[Hf(1-Math.min(1,t+a)),Hf(1-Math.min(1,n+a)),Hf(1-Math.min(1,e+a))]}static CMYK_HTML(t){const e=this.CMYK_RGB(t).slice(1);return this.RGB_HTML(e)}static RGB_CMYK([t,e,n]){const a=1-t,l=1-e,c=1-n,h=Math.min(a,l,c);return["CMYK",a,l,c,h]}}class Yj{create(t,e,n=!1){if(t<=0||e<=0)throw new Error("Invalid SVG dimensions");const a=this._createSVG("svg:svg");return a.setAttribute("version","1.1"),n||(a.setAttribute("width",`${t}px`),a.setAttribute("height",`${e}px`)),a.setAttribute("preserveAspectRatio","none"),a.setAttribute("viewBox",`0 0 ${t} ${e}`),a}createElement(t){if(typeof t!="string")throw new Error("Invalid SVG element type");return this._createSVG(t)}_createSVG(t){ge("Abstract method `_createSVG` called.")}}class vp extends Yj{_createSVG(t){return document.createElementNS(qa,t)}}const $j=9,eu=new WeakSet,Kj=new Date().getTimezoneOffset()*60*1e3;class J_{static create(t){switch(t.data.annotationType){case Fe.LINK:return new $S(t);case Fe.TEXT:return new Wj(t);case Fe.WIDGET:switch(t.data.fieldType){case"Tx":return new Zj(t);case"Btn":return t.data.radioButton?new rN(t):t.data.checkBox?new t3(t):new e3(t);case"Ch":return new i3(t);case"Sig":return new Jj(t)}return new au(t);case Fe.POPUP:return new GA(t);case Fe.FREETEXT:return new hN(t);case Fe.LINE:return new s3(t);case Fe.SQUARE:return new a3(t);case Fe.CIRCLE:return new r3(t);case Fe.POLYLINE:return new dN(t);case Fe.CARET:return new l3(t);case Fe.INK:return new KS(t);case Fe.POLYGON:return new o3(t);case Fe.HIGHLIGHT:return new fN(t);case Fe.UNDERLINE:return new c3(t);case Fe.SQUIGGLY:return new u3(t);case Fe.STRIKEOUT:return new h3(t);case Fe.STAMP:return new pN(t);case Fe.FILEATTACHMENT:return new d3(t);default:return new De(t)}}}var Tc,ad,ys,Eg,HA;const nw=class nw{constructor(t,{isRenderable:e=!1,ignoreBorder:n=!1,createQuadrilaterals:a=!1}={}){E(this,Eg);E(this,Tc,null);E(this,ad,!1);E(this,ys,null);this.isRenderable=e,this.data=t.data,this.layer=t.layer,this.linkService=t.linkService,this.downloadManager=t.downloadManager,this.imageResourcesPath=t.imageResourcesPath,this.renderForms=t.renderForms,this.svgFactory=t.svgFactory,this.annotationStorage=t.annotationStorage,this.enableComment=t.enableComment,this.enableScripting=t.enableScripting,this.hasJSActions=t.hasJSActions,this._fieldObjects=t.fieldObjects,this.parent=t.parent,e&&(this.container=this._createContainer(n)),a&&this._createQuadrilaterals()}static _hasPopupData({contentsObj:t,richText:e}){return!!(t!=null&&t.str||e!=null&&e.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return nw._hasPopupData(this.data)||this.enableComment&&!!this.commentText}get commentData(){var n;const{data:t}=this,e=(n=this.annotationStorage)==null?void 0:n.getEditor(t.id);return e?e.getData():t}get hasCommentButton(){return this.enableComment&&this.hasPopupElement}get commentButtonPosition(){var h;const t=(h=this.annotationStorage)==null?void 0:h.getEditor(this.data.id);if(t)return t.commentButtonPositionInPage;const{quadPoints:e,inkLists:n,rect:a}=this.data;let l=-1/0,c=-1/0;if((e==null?void 0:e.length)>=8){for(let f=0;f<e.length;f+=8)e[f+1]>c?(c=e[f+1],l=e[f+2]):e[f+1]===c&&(l=Math.max(l,e[f+2]));return[l,c]}if((n==null?void 0:n.length)>=1){for(const f of n)for(let p=0,m=f.length;p<m;p+=2)f[p+1]>c?(c=f[p+1],l=f[p]):f[p+1]===c&&(l=Math.max(l,f[p]));if(l!==1/0)return[l,c]}return a?[a[2],a[3]]:null}_normalizePoint(t){const{page:{view:e},viewport:{rawDims:{pageWidth:n,pageHeight:a,pageX:l,pageY:c}}}=this.parent;return t[1]=e[3]-t[1]+e[1],t[0]=100*(t[0]-l)/n,t[1]=100*(t[1]-c)/a,t}get commentText(){var e,n,a;const{data:t}=this;return((n=(e=this.annotationStorage.getRawValue(`${dp}${t.id}`))==null?void 0:e.popup)==null?void 0:n.contents)||((a=t.contentsObj)==null?void 0:a.str)||""}set commentText(t){const{data:e}=this,n={deleted:!t,contents:t||""};this.annotationStorage.updateEditor(e.id,{popup:n})||this.annotationStorage.setValue(`${dp}${e.id}`,{id:e.id,annotationType:e.annotationType,pageIndex:this.parent.page._pageIndex,popup:n,popupRef:e.popupRef,modificationDate:new Date}),t||this.removePopup()}removePopup(){var t,e;(e=((t=o(this,ys))==null?void 0:t.popup)||this.popup)==null||e.remove(),x(this,ys,this.popup=null)}updateEdited(t){var l;if(!this.container)return;t.rect&&(o(this,Tc)||x(this,Tc,{rect:this.data.rect.slice(0)}));const{rect:e,popup:n}=t;e&&T(this,Eg,HA).call(this,e);let a=((l=o(this,ys))==null?void 0:l.popup)||this.popup;!a&&(n!=null&&n.text)&&(this._createPopup(n),a=o(this,ys).popup),a&&(a.updateEdited(t),n!=null&&n.deleted&&(a.remove(),x(this,ys,null),this.popup=null))}resetEdited(){var t;o(this,Tc)&&(T(this,Eg,HA).call(this,o(this,Tc).rect),(t=o(this,ys))==null||t.popup.resetEdited(),x(this,Tc,null))}_createContainer(t){const{data:e,parent:{page:n,viewport:a}}=this,l=document.createElement("section");l.setAttribute("data-annotation-id",e.id),!(this instanceof au)&&!(this instanceof $S)&&(l.tabIndex=0);const{style:c}=l;if(c.zIndex=this.parent.zIndex,this.parent.zIndex+=2,e.alternativeText&&(l.title=e.alternativeText),e.noRotate&&l.classList.add("norotate"),!e.rect||this instanceof GA){const{rotation:_}=e;return!e.hasOwnCanvas&&_!==0&&this.setRotation(_,l),l}const{width:h,height:f}=this;if(!t&&e.borderStyle.width>0){c.borderWidth=`${e.borderStyle.width}px`;const _=e.borderStyle.horizontalCornerRadius,M=e.borderStyle.verticalCornerRadius;if(_>0||M>0){const R=`calc(${_}px * var(--total-scale-factor)) / calc(${M}px * var(--total-scale-factor))`;c.borderRadius=R}else if(this instanceof rN){const R=`calc(${h}px * var(--total-scale-factor)) / calc(${f}px * var(--total-scale-factor))`;c.borderRadius=R}switch(e.borderStyle.style){case Xu.SOLID:c.borderStyle="solid";break;case Xu.DASHED:c.borderStyle="dashed";break;case Xu.BEVELED:St("Unimplemented border style: beveled");break;case Xu.INSET:St("Unimplemented border style: inset");break;case Xu.UNDERLINE:c.borderBottomStyle="solid";break}const N=e.borderColor||null;N?(x(this,ad,!0),c.borderColor=ct.makeHexColor(N[0]|0,N[1]|0,N[2]|0)):c.borderWidth=0}const p=ct.normalizeRect([e.rect[0],n.view[3]-e.rect[1]+n.view[1],e.rect[2],n.view[3]-e.rect[3]+n.view[1]]),{pageWidth:m,pageHeight:y,pageX:v,pageY:w}=a.rawDims;c.left=`${100*(p[0]-v)/m}%`,c.top=`${100*(p[1]-w)/y}%`;const{rotation:C}=e;return e.hasOwnCanvas||C===0?(c.width=`${100*h/m}%`,c.height=`${100*f/y}%`):this.setRotation(C,l),l}setRotation(t,e=this.container){if(!this.data.rect)return;const{pageWidth:n,pageHeight:a}=this.parent.viewport.rawDims;let{width:l,height:c}=this;t%180!==0&&([l,c]=[c,l]),e.style.width=`${100*l/n}%`,e.style.height=`${100*c/a}%`,e.setAttribute("data-main-rotation",(360-t)%360)}get _commonActions(){const t=(e,n,a)=>{const l=a.detail[e],c=l[0],h=l.slice(1);a.target.style[n]=Z_[`${c}_HTML`](h),this.annotationStorage.setValue(this.data.id,{[n]:Z_[`${c}_rgb`](h)})};return Ct(this,"_commonActions",{display:e=>{const{display:n}=e.detail,a=n%2===1;this.container.style.visibility=a?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:a,noPrint:n===1||n===2})},print:e=>{this.annotationStorage.setValue(this.data.id,{noPrint:!e.detail.print})},hidden:e=>{const{hidden:n}=e.detail;this.container.style.visibility=n?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:n,noView:n})},focus:e=>{setTimeout(()=>e.target.focus({preventScroll:!1}),0)},userName:e=>{e.target.title=e.detail.userName},readonly:e=>{e.target.disabled=e.detail.readonly},required:e=>{this._setRequired(e.target,e.detail.required)},bgColor:e=>{t("bgColor","backgroundColor",e)},fillColor:e=>{t("fillColor","backgroundColor",e)},fgColor:e=>{t("fgColor","color",e)},textColor:e=>{t("textColor","color",e)},borderColor:e=>{t("borderColor","borderColor",e)},strokeColor:e=>{t("strokeColor","borderColor",e)},rotation:e=>{const n=e.detail.rotation;this.setRotation(n),this.annotationStorage.setValue(this.data.id,{rotation:n})}})}_dispatchEventFromSandbox(t,e){const n=this._commonActions;for(const a of Object.keys(e.detail)){const l=t[a]||n[a];l==null||l(e)}}_setDefaultPropertiesFromJS(t){if(!this.enableScripting)return;const e=this.annotationStorage.getRawValue(this.data.id);if(!e)return;const n=this._commonActions;for(const[a,l]of Object.entries(e)){const c=n[a];if(c){const h={detail:{[a]:l},target:t};c(h),delete e[a]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:t}=this.data;if(!t)return;const[e,n,a,l]=this.data.rect.map(_=>Math.fround(_));if(t.length===8){const[_,M,N,R]=t.subarray(2,6);if(a===_&&l===M&&e===N&&n===R)return}const{style:c}=this.container;let h;if(o(this,ad)){const{borderColor:_,borderWidth:M}=c;c.borderWidth=0,h=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${_}" stroke-width="${M}">`],this.container.classList.add("hasBorder")}const f=a-e,p=l-n,{svgFactory:m}=this,y=m.createElement("svg");y.classList.add("quadrilateralsContainer"),y.setAttribute("width",0),y.setAttribute("height",0),y.role="none";const v=m.createElement("defs");y.append(v);const w=m.createElement("clipPath"),C=`clippath_${this.data.id}`;w.setAttribute("id",C),w.setAttribute("clipPathUnits","objectBoundingBox"),v.append(w);for(let _=2,M=t.length;_<M;_+=8){const N=t[_],R=t[_+1],L=t[_+2],k=t[_+3],j=m.createElement("rect"),z=(L-e)/f,I=(l-R)/p,K=(N-L)/f,J=(R-k)/p;j.setAttribute("x",z),j.setAttribute("y",I),j.setAttribute("width",K),j.setAttribute("height",J),w.append(j),h==null||h.push(`<rect vector-effect="non-scaling-stroke" x="${z}" y="${I}" width="${K}" height="${J}"/>`)}o(this,ad)&&(h.push("</g></svg>')"),c.backgroundImage=h.join("")),this.container.append(y),this.container.style.clipPath=`url(#${C})`}_createPopup(t=null){const{data:e}=this;let n,a;t?(n={str:t.text},a=t.date):(n=e.contentsObj,a=e.modificationDate);const l=x(this,ys,new GA({data:{color:e.color,titleObj:e.titleObj,modificationDate:a,contentsObj:n,richText:e.richText,parentRect:e.rect,borderStyle:0,id:`popup_${e.id}`,rotation:e.rotation,noRotate:!0},linkService:this.linkService,parent:this.parent,elements:[this]}));this.parent._commentManager||this.parent.div.append(l.render())}get hasPopupElement(){return!!(o(this,ys)||this.popup||this.data.popupRef)}get extraPopupElement(){return o(this,ys)}render(){ge("Abstract method `AnnotationElement.render` called")}_getElementsByName(t,e=null){const n=[];if(this._fieldObjects){const a=this._fieldObjects[t];if(a)for(const{page:l,id:c,exportValues:h}of a){if(l===-1||c===e)continue;const f=typeof h=="string"?h:null,p=document.querySelector(`[data-element-id="${c}"]`);if(p&&!eu.has(p)){St(`_getElementsByName - element not allowed: ${c}`);continue}n.push({id:c,exportValue:f,domElement:p})}return n}for(const a of document.getElementsByName(t)){const{exportValue:l}=a,c=a.getAttribute("data-element-id");c!==e&&eu.has(a)&&n.push({id:c,exportValue:l,domElement:a})}return n}show(){var t;this.container&&(this.container.hidden=!1),(t=this.popup)==null||t.maybeShow()}hide(){var t;this.container&&(this.container.hidden=!0),(t=this.popup)==null||t.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const t=this.getElementsToTriggerPopup();if(Array.isArray(t))for(const e of t)e.classList.add("highlightArea");else t.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:t,data:{id:e}}=this;this.container.addEventListener("dblclick",()=>{var n;(n=this.linkService.eventBus)==null||n.dispatch("switchannotationeditormode",{source:this,mode:t,editId:e,mustEnterInEditMode:!0})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}};Tc=new WeakMap,ad=new WeakMap,ys=new WeakMap,Eg=new WeakSet,HA=function(t){const{container:{style:e},data:{rect:n,rotation:a},parent:{viewport:{rawDims:{pageWidth:l,pageHeight:c,pageX:h,pageY:f}}}}=this;n==null||n.splice(0,4,...t),e.left=`${100*(t[0]-h)/l}%`,e.top=`${100*(c-t[3]+f)/c}%`,a===0?(e.width=`${100*(t[2]-t[0])/l}%`,e.height=`${100*(t[3]-t[1])/c}%`):this.setRotation(a)};let De=nw;class Qj extends De{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.editor=t.editor}render(){return this.container.className="editorAnnotation",this.container}createOrUpdatePopup(){const{editor:t}=this;t.hasComment&&(this._createPopup(t.comment),this.extraPopupElement.popup.renderCommentButton())}get hasCommentButton(){return this.enableComment&&this.editor.hasComment}get commentButtonPosition(){return this.editor.commentButtonPositionInPage}get commentText(){return this.editor.comment.text}set commentText(t){this.editor.comment=t,t||this.removePopup()}get commentData(){return this.editor.getData()}remove(){this.container.remove(),this.container=null,this.removePopup()}}var Yn,kl,sN,aN;class $S extends De{constructor(e,n=null){super(e,{isRenderable:!0,ignoreBorder:!!(n!=null&&n.ignoreBorder),createQuadrilaterals:!0});E(this,Yn);this.isTooltipOnly=e.data.isTooltipOnly}render(){const{data:e,linkService:n}=this,a=document.createElement("a");a.setAttribute("data-element-id",e.id);let l=!1;return e.url?(n.addLinkAttributes(a,e.url,e.newWindow),l=!0):e.action?(this._bindNamedAction(a,e.action,e.overlaidText),l=!0):e.attachment?(T(this,Yn,sN).call(this,a,e.attachment,e.overlaidText,e.attachmentDest),l=!0):e.setOCGState?(T(this,Yn,aN).call(this,a,e.setOCGState,e.overlaidText),l=!0):e.dest?(this._bindLink(a,e.dest,e.overlaidText),l=!0):(e.actions&&(e.actions.Action||e.actions["Mouse Up"]||e.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(a,e),l=!0),e.resetForm?(this._bindResetFormAction(a,e.resetForm),l=!0):this.isTooltipOnly&&!l&&(this._bindLink(a,""),l=!0)),this.container.classList.add("linkAnnotation"),l&&this.container.append(a),this.container}_bindLink(e,n,a=""){e.href=this.linkService.getDestinationHash(n),e.onclick=()=>(n&&this.linkService.goToDestination(n),!1),(n||n==="")&&T(this,Yn,kl).call(this),a&&(e.title=a)}_bindNamedAction(e,n,a=""){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeNamedAction(n),!1),a&&(e.title=a),T(this,Yn,kl).call(this)}_bindJSAction(e,n){e.href=this.linkService.getAnchorUrl("");const a=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const l of Object.keys(n.actions)){const c=a.get(l);c&&(e[c]=()=>{var h;return(h=this.linkService.eventBus)==null||h.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n.id,name:l}}),!1})}n.overlaidText&&(e.title=n.overlaidText),e.onclick||(e.onclick=()=>!1),T(this,Yn,kl).call(this)}_bindResetFormAction(e,n){const a=e.onclick;if(a||(e.href=this.linkService.getAnchorUrl("")),T(this,Yn,kl).call(this),!this._fieldObjects){St('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),a||(e.onclick=()=>!1);return}e.onclick=()=>{var y;a==null||a();const{fields:l,refs:c,include:h}=n,f=[];if(l.length!==0||c.length!==0){const v=new Set(c);for(const w of l){const C=this._fieldObjects[w]||[];for(const{id:_}of C)v.add(_)}for(const w of Object.values(this._fieldObjects))for(const C of w)v.has(C.id)===h&&f.push(C)}else for(const v of Object.values(this._fieldObjects))f.push(...v);const p=this.annotationStorage,m=[];for(const v of f){const{id:w}=v;switch(m.push(w),v.type){case"text":{const _=v.defaultValue||"";p.setValue(w,{value:_});break}case"checkbox":case"radiobutton":{const _=v.defaultValue===v.exportValues;p.setValue(w,{value:_});break}case"combobox":case"listbox":{const _=v.defaultValue||"";p.setValue(w,{value:_});break}default:continue}const C=document.querySelector(`[data-element-id="${w}"]`);if(C){if(!eu.has(C)){St(`_bindResetFormAction - element not allowed: ${w}`);continue}}else continue;C.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((y=this.linkService.eventBus)==null||y.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:m,name:"ResetForm"}})),!1}}}Yn=new WeakSet,kl=function(){this.container.setAttribute("data-internal-link","")},sN=function(e,n,a="",l=null){e.href=this.linkService.getAnchorUrl(""),n.description?e.title=n.description:a&&(e.title=a),e.onclick=()=>{var c;return(c=this.downloadManager)==null||c.openOrDownloadData(n.content,n.filename,l),!1},T(this,Yn,kl).call(this)},aN=function(e,n,a=""){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeSetOCGState(n),!1),a&&(e.title=a),T(this,Yn,kl).call(this)};class Wj extends De{constructor(t){super(t,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const t=document.createElement("img");return t.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",t.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),t.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(t),this.container}}class au extends De{render(){return this.container}showElementAndHideCanvas(t){var e;this.data.hasOwnCanvas&&(((e=t.previousSibling)==null?void 0:e.nodeName)==="CANVAS"&&(t.previousSibling.hidden=!0),t.hidden=!1)}_getKeyModifier(t){return fi.platform.isMac?t.metaKey:t.ctrlKey}_setEventListener(t,e,n,a,l){n.includes("mouse")?t.addEventListener(n,c=>{var h;(h=this.linkService.eventBus)==null||h.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:a,value:l(c),shift:c.shiftKey,modifier:this._getKeyModifier(c)}})}):t.addEventListener(n,c=>{var h;if(n==="blur"){if(!e.focused||!c.relatedTarget)return;e.focused=!1}else if(n==="focus"){if(e.focused)return;e.focused=!0}l&&((h=this.linkService.eventBus)==null||h.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:a,value:l(c)}}))})}_setEventListeners(t,e,n,a){var l,c,h;for(const[f,p]of n)(p==="Action"||(l=this.data.actions)!=null&&l[p])&&((p==="Focus"||p==="Blur")&&(e||(e={focused:!1})),this._setEventListener(t,e,f,p,a),p==="Focus"&&!((c=this.data.actions)!=null&&c.Blur)?this._setEventListener(t,e,"blur","Blur",null):p==="Blur"&&!((h=this.data.actions)!=null&&h.Focus)&&this._setEventListener(t,e,"focus","Focus",null))}_setBackgroundColor(t){const e=this.data.backgroundColor||null;t.style.backgroundColor=e===null?"transparent":ct.makeHexColor(e[0],e[1],e[2])}_setTextStyle(t){const e=["left","center","right"],{fontColor:n}=this.data.defaultAppearanceData,a=this.data.defaultAppearanceData.fontSize||$j,l=t.style;let c;const h=2,f=p=>Math.round(10*p)/10;if(this.data.multiLine){const p=Math.abs(this.data.rect[3]-this.data.rect[1]-h),m=Math.round(p/(Ux*a))||1,y=p/m;c=Math.min(a,f(y/Ux))}else{const p=Math.abs(this.data.rect[3]-this.data.rect[1]-h);c=Math.min(a,f(p/Ux))}l.fontSize=`calc(${c}px * var(--total-scale-factor))`,l.color=ct.makeHexColor(n[0],n[1],n[2]),this.data.textAlignment!==null&&(l.textAlign=e[this.data.textAlignment])}_setRequired(t,e){e?t.setAttribute("required",!0):t.removeAttribute("required"),t.setAttribute("aria-required",e)}}class Zj extends au{constructor(t){const e=t.renderForms||t.data.hasOwnCanvas||!t.data.hasAppearance&&!!t.data.fieldValue;super(t,{isRenderable:e})}setPropertyOnSiblings(t,e,n,a){const l=this.annotationStorage;for(const c of this._getElementsByName(t.name,t.id))c.domElement&&(c.domElement[e]=n),l.setValue(c.id,{[a]:n})}render(){var a,l;const t=this.annotationStorage,e=this.data.id;this.container.classList.add("textWidgetAnnotation");let n=null;if(this.renderForms){const c=t.getValue(e,{value:this.data.fieldValue});let h=c.value||"";const f=t.getValue(e,{charLimit:this.data.maxLen}).charLimit;f&&h.length>f&&(h=h.slice(0,f));let p=c.formattedValue||((a=this.data.textContent)==null?void 0:a.join(`
`))||null;p&&this.data.comb&&(p=p.replaceAll(/\s+/g,""));const m={userValue:h,formattedValue:p,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(n=document.createElement("textarea"),n.textContent=p??h,this.data.doNotScroll&&(n.style.overflowY="hidden")):(n=document.createElement("input"),n.type=this.data.password?"password":"text",n.setAttribute("value",p??h),this.data.doNotScroll&&(n.style.overflowX="hidden")),this.data.hasOwnCanvas&&(n.hidden=!0),eu.add(n),n.setAttribute("data-element-id",e),n.disabled=this.data.readOnly,n.name=this.data.fieldName,n.tabIndex=0;const{datetimeFormat:y,datetimeType:v,timeStep:w}=this.data,C=!!v&&this.enableScripting;y&&(n.title=y),this._setRequired(n,this.data.required),f&&(n.maxLength=f),n.addEventListener("input",M=>{t.setValue(e,{value:M.target.value}),this.setPropertyOnSiblings(n,"value",M.target.value,"value"),m.formattedValue=null}),n.addEventListener("resetform",M=>{const N=this.data.defaultFieldValue??"";n.value=m.userValue=N,m.formattedValue=null});let _=M=>{const{formattedValue:N}=m;N!=null&&(M.target.value=N),M.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){n.addEventListener("focus",N=>{var L;if(m.focused)return;const{target:R}=N;if(C&&(R.type=v,w&&(R.step=w)),m.userValue){const k=m.userValue;if(C)if(v==="time"){const j=new Date(k),z=[j.getHours(),j.getMinutes(),j.getSeconds()];R.value=z.map(I=>I.toString().padStart(2,"0")).join(":")}else R.value=new Date(k-Kj).toISOString().split(v==="date"?"T":".",1)[0];else R.value=k}m.lastCommittedValue=R.value,m.commitKey=1,(L=this.data.actions)!=null&&L.Focus||(m.focused=!0)}),n.addEventListener("updatefromsandbox",N=>{this.showElementAndHideCanvas(N.target);const R={value(L){m.userValue=L.detail.value??"",C||t.setValue(e,{value:m.userValue.toString()}),L.target.value=m.userValue},formattedValue(L){const{formattedValue:k}=L.detail;m.formattedValue=k,k!=null&&L.target!==document.activeElement&&(L.target.value=k);const j={formattedValue:k};C&&(j.value=k),t.setValue(e,j)},selRange(L){L.target.setSelectionRange(...L.detail.selRange)},charLimit:L=>{var I;const{charLimit:k}=L.detail,{target:j}=L;if(k===0){j.removeAttribute("maxLength");return}j.setAttribute("maxLength",k);let z=m.userValue;!z||z.length<=k||(z=z.slice(0,k),j.value=m.userValue=z,t.setValue(e,{value:z}),(I=this.linkService.eventBus)==null||I.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:z,willCommit:!0,commitKey:1,selStart:j.selectionStart,selEnd:j.selectionEnd}}))}};this._dispatchEventFromSandbox(R,N)}),n.addEventListener("keydown",N=>{var k;m.commitKey=1;let R=-1;if(N.key==="Escape"?R=0:N.key==="Enter"&&!this.data.multiLine?R=2:N.key==="Tab"&&(m.commitKey=3),R===-1)return;const{value:L}=N.target;m.lastCommittedValue!==L&&(m.lastCommittedValue=L,m.userValue=L,(k=this.linkService.eventBus)==null||k.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:L,willCommit:!0,commitKey:R,selStart:N.target.selectionStart,selEnd:N.target.selectionEnd}}))});const M=_;_=null,n.addEventListener("blur",N=>{var k,j;if(!m.focused||!N.relatedTarget)return;(k=this.data.actions)!=null&&k.Blur||(m.focused=!1);const{target:R}=N;let{value:L}=R;if(C){if(L&&v==="time"){const z=L.split(":").map(I=>parseInt(I,10));L=new Date(2e3,0,1,z[0],z[1],z[2]||0).valueOf(),R.step=""}else L.includes("T")||(L=`${L}T00:00`),L=new Date(L).valueOf();R.type="text"}m.userValue=L,m.lastCommittedValue!==L&&((j=this.linkService.eventBus)==null||j.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:L,willCommit:!0,commitKey:m.commitKey,selStart:N.target.selectionStart,selEnd:N.target.selectionEnd}})),M(N)}),(l=this.data.actions)!=null&&l.Keystroke&&n.addEventListener("beforeinput",N=>{var J;m.lastCommittedValue=null;const{data:R,target:L}=N,{value:k,selectionStart:j,selectionEnd:z}=L;let I=j,K=z;switch(N.inputType){case"deleteWordBackward":{const W=k.substring(0,j).match(/\w*[^\w]*$/);W&&(I-=W[0].length);break}case"deleteWordForward":{const W=k.substring(j).match(/^[^\w]*\w*/);W&&(K+=W[0].length);break}case"deleteContentBackward":j===z&&(I-=1);break;case"deleteContentForward":j===z&&(K+=1);break}N.preventDefault(),(J=this.linkService.eventBus)==null||J.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:k,change:R||"",willCommit:!1,selStart:I,selEnd:K}})}),this._setEventListeners(n,m,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],N=>N.target.value)}if(_&&n.addEventListener("blur",_),this.data.comb){const N=(this.data.rect[2]-this.data.rect[0])/f;n.classList.add("comb"),n.style.letterSpacing=`calc(${N}px * var(--total-scale-factor) - 1ch)`}}else n=document.createElement("div"),n.textContent=this.data.fieldValue,n.style.verticalAlign="middle",n.style.display="table-cell",this.data.hasOwnCanvas&&(n.hidden=!0);return this._setTextStyle(n),this._setBackgroundColor(n),this._setDefaultPropertiesFromJS(n),this.container.append(n),this.container}}class Jj extends au{constructor(t){super(t,{isRenderable:!!t.data.hasOwnCanvas})}}class t3 extends au{constructor(t){super(t,{isRenderable:t.renderForms})}render(){const t=this.annotationStorage,e=this.data,n=e.id;let a=t.getValue(n,{value:e.exportValue===e.fieldValue}).value;typeof a=="string"&&(a=a!=="Off",t.setValue(n,{value:a})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const l=document.createElement("input");return eu.add(l),l.setAttribute("data-element-id",n),l.disabled=e.readOnly,this._setRequired(l,this.data.required),l.type="checkbox",l.name=e.fieldName,a&&l.setAttribute("checked",!0),l.setAttribute("exportValue",e.exportValue),l.tabIndex=0,l.addEventListener("change",c=>{const{name:h,checked:f}=c.target;for(const p of this._getElementsByName(h,n)){const m=f&&p.exportValue===e.exportValue;p.domElement&&(p.domElement.checked=m),t.setValue(p.id,{value:m})}t.setValue(n,{value:f})}),l.addEventListener("resetform",c=>{const h=e.defaultFieldValue||"Off";c.target.checked=h===e.exportValue}),this.enableScripting&&this.hasJSActions&&(l.addEventListener("updatefromsandbox",c=>{const h={value(f){f.target.checked=f.detail.value!=="Off",t.setValue(n,{value:f.target.checked})}};this._dispatchEventFromSandbox(h,c)}),this._setEventListeners(l,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],c=>c.target.checked)),this._setBackgroundColor(l),this._setDefaultPropertiesFromJS(l),this.container.append(l),this.container}}class rN extends au{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const t=this.annotationStorage,e=this.data,n=e.id;let a=t.getValue(n,{value:e.fieldValue===e.buttonValue}).value;if(typeof a=="string"&&(a=a!==e.buttonValue,t.setValue(n,{value:a})),a)for(const c of this._getElementsByName(e.fieldName,n))t.setValue(c.id,{value:!1});const l=document.createElement("input");if(eu.add(l),l.setAttribute("data-element-id",n),l.disabled=e.readOnly,this._setRequired(l,this.data.required),l.type="radio",l.name=e.fieldName,a&&l.setAttribute("checked",!0),l.tabIndex=0,l.addEventListener("change",c=>{const{name:h,checked:f}=c.target;for(const p of this._getElementsByName(h,n))t.setValue(p.id,{value:!1});t.setValue(n,{value:f})}),l.addEventListener("resetform",c=>{const h=e.defaultFieldValue;c.target.checked=h!=null&&h===e.buttonValue}),this.enableScripting&&this.hasJSActions){const c=e.buttonValue;l.addEventListener("updatefromsandbox",h=>{const f={value:p=>{const m=c===p.detail.value;for(const y of this._getElementsByName(p.target.name)){const v=m&&y.id===n;y.domElement&&(y.domElement.checked=v),t.setValue(y.id,{value:v})}}};this._dispatchEventFromSandbox(f,h)}),this._setEventListeners(l,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],h=>h.target.checked)}return this._setBackgroundColor(l),this._setDefaultPropertiesFromJS(l),this.container.append(l),this.container}}class e3 extends $S{constructor(t){super(t,{ignoreBorder:t.data.hasAppearance})}render(){const t=super.render();t.classList.add("buttonWidgetAnnotation","pushButton");const e=t.lastChild;return this.enableScripting&&this.hasJSActions&&e&&(this._setDefaultPropertiesFromJS(e),e.addEventListener("updatefromsandbox",n=>{this._dispatchEventFromSandbox({},n)})),t}}class i3 extends au{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const t=this.annotationStorage,e=this.data.id,n=t.getValue(e,{value:this.data.fieldValue}),a=document.createElement("select");eu.add(a),a.setAttribute("data-element-id",e),a.disabled=this.data.readOnly,this._setRequired(a,this.data.required),a.name=this.data.fieldName,a.tabIndex=0;let l=this.data.combo&&this.data.options.length>0;this.data.combo||(a.size=this.data.options.length,this.data.multiSelect&&(a.multiple=!0)),a.addEventListener("resetform",m=>{const y=this.data.defaultFieldValue;for(const v of a.options)v.selected=v.value===y});for(const m of this.data.options){const y=document.createElement("option");y.textContent=m.displayValue,y.value=m.exportValue,n.value.includes(m.exportValue)&&(y.setAttribute("selected",!0),l=!1),a.append(y)}let c=null;if(l){const m=document.createElement("option");m.value=" ",m.setAttribute("hidden",!0),m.setAttribute("selected",!0),a.prepend(m),c=()=>{m.remove(),a.removeEventListener("input",c),c=null},a.addEventListener("input",c)}const h=m=>{const y=m?"value":"textContent",{options:v,multiple:w}=a;return w?Array.prototype.filter.call(v,C=>C.selected).map(C=>C[y]):v.selectedIndex===-1?null:v[v.selectedIndex][y]};let f=h(!1);const p=m=>{const y=m.target.options;return Array.prototype.map.call(y,v=>({displayValue:v.textContent,exportValue:v.value}))};return this.enableScripting&&this.hasJSActions?(a.addEventListener("updatefromsandbox",m=>{const y={value(v){c==null||c();const w=v.detail.value,C=new Set(Array.isArray(w)?w:[w]);for(const _ of a.options)_.selected=C.has(_.value);t.setValue(e,{value:h(!0)}),f=h(!1)},multipleSelection(v){a.multiple=!0},remove(v){const w=a.options,C=v.detail.remove;w[C].selected=!1,a.remove(C),w.length>0&&Array.prototype.findIndex.call(w,M=>M.selected)===-1&&(w[0].selected=!0),t.setValue(e,{value:h(!0),items:p(v)}),f=h(!1)},clear(v){for(;a.length!==0;)a.remove(0);t.setValue(e,{value:null,items:[]}),f=h(!1)},insert(v){const{index:w,displayValue:C,exportValue:_}=v.detail.insert,M=a.children[w],N=document.createElement("option");N.textContent=C,N.value=_,M?M.before(N):a.append(N),t.setValue(e,{value:h(!0),items:p(v)}),f=h(!1)},items(v){const{items:w}=v.detail;for(;a.length!==0;)a.remove(0);for(const C of w){const{displayValue:_,exportValue:M}=C,N=document.createElement("option");N.textContent=_,N.value=M,a.append(N)}a.options.length>0&&(a.options[0].selected=!0),t.setValue(e,{value:h(!0),items:p(v)}),f=h(!1)},indices(v){const w=new Set(v.detail.indices);for(const C of v.target.options)C.selected=w.has(C.index);t.setValue(e,{value:h(!0)}),f=h(!1)},editable(v){v.target.disabled=!v.detail.editable}};this._dispatchEventFromSandbox(y,m)}),a.addEventListener("input",m=>{var w;const y=h(!0),v=h(!1);t.setValue(e,{value:y}),m.preventDefault(),(w=this.linkService.eventBus)==null||w.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:f,change:v,changeEx:y,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(a,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],m=>m.target.value)):a.addEventListener("input",function(m){t.setValue(e,{value:h(!0)})}),this.data.combo&&this._setTextStyle(a),this._setBackgroundColor(a),this._setDefaultPropertiesFromJS(a),this.container.append(a),this.container}}var Tg,VA;class GA extends De{constructor(e){const{data:n,elements:a,parent:l}=e,c=!!l._commentManager;super(e,{isRenderable:!c&&De._hasPopupData(n)});E(this,Tg);if(this.elements=a,c&&De._hasPopupData(n)){const h=this.popup=T(this,Tg,VA).call(this);for(const f of a)f.popup=h}else this.popup=null}render(){const{container:e}=this;e.classList.add("popupAnnotation"),e.role="comment";const n=this.popup=T(this,Tg,VA).call(this),a=[];for(const l of this.elements)l.popup=n,l.container.ariaHasPopup="dialog",a.push(l.data.id),l.addHighlightArea();return this.container.setAttribute("aria-controls",a.map(l=>`${IS}${l}`).join(",")),this.container}}Tg=new WeakSet,VA=function(){return new n3({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate||this.data.creationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open,commentManager:this.parent._commentManager})};var On,Fo,Y0,$0,rd,od,je,ga,Uo,_c,ld,cd,ma,jn,vr,xr,oi,Ar,Ho,_g,Sr,ud,Cc,Go,Bi,Vo,Mt,Wb,qA,XA,YA,Zb,$A,oN,lN,cN,uN,Jb,t0,KA;class n3{constructor({container:t,color:e,elements:n,titleObj:a,modificationDate:l,contentsObj:c,richText:h,parent:f,rect:p,parentRect:m,open:y,commentManager:v=null}){E(this,Mt);E(this,On,null);E(this,Fo,T(this,Mt,cN).bind(this));E(this,Y0,T(this,Mt,KA).bind(this));E(this,$0,T(this,Mt,t0).bind(this));E(this,rd,T(this,Mt,Jb).bind(this));E(this,od,null);E(this,je,null);E(this,ga,null);E(this,Uo,null);E(this,_c,null);E(this,ld,null);E(this,cd,null);E(this,ma,!1);E(this,jn,null);E(this,vr,null);E(this,xr,null);E(this,oi,null);E(this,Ar,null);E(this,Ho,null);E(this,_g,null);E(this,Sr,null);E(this,ud,null);E(this,Cc,null);E(this,Go,!1);E(this,Bi,null);E(this,Vo,null);x(this,je,t),x(this,ud,a),x(this,ga,c),x(this,Sr,h),x(this,ld,f),x(this,od,e),x(this,_g,p),x(this,cd,m),x(this,_c,n),x(this,On,v),x(this,Bi,n[0]),x(this,Uo,gp.toDateObject(l)),this.trigger=n.flatMap(w=>w.getElementsToTriggerPopup()),v?this.renderCommentButton():(T(this,Mt,Wb).call(this),o(this,je).hidden=!0,y&&T(this,Mt,Jb).call(this))}renderCommentButton(){if(o(this,oi)||(o(this,Ar)||T(this,Mt,qA).call(this),!o(this,Ar)))return;const{signal:t}=x(this,vr,new AbortController),e=!!o(this,Bi).extraPopupElement,n=()=>{o(this,On).toggleCommentPopup(this,!0,void 0,!e)},a=()=>{o(this,On).toggleCommentPopup(this,!1,!0,!e)},l=()=>{o(this,On).toggleCommentPopup(this,!1,!1)};if(e){x(this,oi,o(this,Bi).container);for(const c of this.trigger)c.ariaHasPopup="dialog",c.ariaControls="commentPopup",c.addEventListener("keydown",o(this,Fo),{signal:t}),c.addEventListener("click",n,{signal:t}),c.addEventListener("pointerenter",a,{signal:t}),c.addEventListener("pointerleave",l,{signal:t}),c.classList.add("popupTriggerArea")}else{const c=x(this,oi,document.createElement("button"));c.className="annotationCommentButton";const h=o(this,Bi).container;c.style.zIndex=h.style.zIndex+1,c.tabIndex=0,c.ariaHasPopup="dialog",c.ariaControls="commentPopup",c.setAttribute("data-l10n-id","pdfjs-show-comment-button"),T(this,Mt,YA).call(this),T(this,Mt,XA).call(this),c.addEventListener("keydown",o(this,Fo),{signal:t}),c.addEventListener("click",n,{signal:t}),c.addEventListener("pointerenter",a,{signal:t}),c.addEventListener("pointerleave",l,{signal:t}),h.after(c)}}get commentButtonColor(){const{color:t,opacity:e}=o(this,Bi).commentData;return t?o(this,ld)._commentManager.makeCommentColor(t,e):null}focusCommentButton(){setTimeout(()=>{var t;(t=o(this,oi))==null||t.focus()},0)}getData(){const{richText:t,color:e,opacity:n,creationDate:a,modificationDate:l}=o(this,Bi).commentData;return{contentsObj:{str:this.comment},richText:t,color:e,opacity:n,creationDate:a,modificationDate:l}}get elementBeforePopup(){return o(this,oi)}get comment(){return o(this,Vo)||x(this,Vo,o(this,Bi).commentText),o(this,Vo)}set comment(t){t!==this.comment&&(o(this,Bi).commentText=x(this,Vo,t))}get parentBoundingClientRect(){return o(this,Bi).layer.getBoundingClientRect()}setCommentButtonStates({selected:t,hasPopup:e}){o(this,oi)&&(o(this,oi).classList.toggle("selected",t),o(this,oi).ariaExpanded=e)}setSelectedCommentButton(t){o(this,oi).classList.toggle("selected",t)}get commentPopupPosition(){if(o(this,Ho))return o(this,Ho);const{x:t,y:e,height:n}=o(this,oi).getBoundingClientRect(),{x:a,y:l,width:c,height:h}=o(this,Bi).layer.getBoundingClientRect();return[(t-a)/c,(e+n-l)/h]}set commentPopupPosition(t){x(this,Ho,t)}hasDefaultPopupPosition(){return o(this,Ho)===null}get commentButtonPosition(){return o(this,Ar)}get commentButtonWidth(){return o(this,oi).getBoundingClientRect().width/this.parentBoundingClientRect.width}editComment(t){const[e,n]=o(this,Ho)||this.commentButtonPosition.map(p=>p/100),a=this.parentBoundingClientRect,{x:l,y:c,width:h,height:f}=a;o(this,On).showDialog(null,this,l+e*h,c+n*f,{...t,parentDimensions:a})}render(){var n,a;if(o(this,jn))return;const t=x(this,jn,document.createElement("div"));if(t.className="popup",o(this,od)){const l=t.style.outlineColor=ct.makeHexColor(...o(this,od));t.style.backgroundColor=`color-mix(in srgb, ${l} 30%, white)`}const e=document.createElement("span");if(e.className="header",(n=o(this,ud))!=null&&n.str){const l=document.createElement("span");l.className="title",e.append(l),{dir:l.dir,str:l.textContent}=o(this,ud)}if(t.append(e),o(this,Uo)){const l=document.createElement("time");l.className="popupDate",l.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),l.setAttribute("data-l10n-args",JSON.stringify({dateObj:o(this,Uo).valueOf()})),l.dateTime=o(this,Uo).toISOString(),e.append(l)}US({html:o(this,Mt,Zb)||o(this,ga).str,dir:(a=o(this,ga))==null?void 0:a.dir,className:"popupContent"},t),o(this,je).append(t)}updateEdited({rect:t,popup:e,deleted:n}){var a;if(o(this,On)){n?(this.remove(),x(this,Vo,null)):e&&(e.deleted?this.remove():(T(this,Mt,YA).call(this),x(this,Vo,e.text))),t&&(x(this,Ar,null),T(this,Mt,qA).call(this),T(this,Mt,XA).call(this));return}if(n||e!=null&&e.deleted){this.remove();return}T(this,Mt,Wb).call(this),o(this,Cc)||x(this,Cc,{contentsObj:o(this,ga),richText:o(this,Sr)}),t&&x(this,xr,null),e&&e.text&&(x(this,Sr,T(this,Mt,lN).call(this,e.text)),x(this,Uo,gp.toDateObject(e.date)),x(this,ga,null)),(a=o(this,jn))==null||a.remove(),x(this,jn,null)}resetEdited(){var t;o(this,Cc)&&({contentsObj:Ze(this,ga)._,richText:Ze(this,Sr)._}=o(this,Cc),x(this,Cc,null),(t=o(this,jn))==null||t.remove(),x(this,jn,null),x(this,xr,null))}remove(){var t,e,n;if((t=o(this,vr))==null||t.abort(),x(this,vr,null),(e=o(this,jn))==null||e.remove(),x(this,jn,null),x(this,Go,!1),x(this,ma,!1),(n=o(this,oi))==null||n.remove(),x(this,oi,null),this.trigger)for(const a of this.trigger)a.classList.remove("popupTriggerArea")}forceHide(){x(this,Go,this.isVisible),o(this,Go)&&(o(this,je).hidden=!0)}maybeShow(){o(this,On)||(T(this,Mt,Wb).call(this),o(this,Go)&&(o(this,jn)||T(this,Mt,t0).call(this),x(this,Go,!1),o(this,je).hidden=!1))}get isVisible(){return o(this,On)?!1:o(this,je).hidden===!1}}On=new WeakMap,Fo=new WeakMap,Y0=new WeakMap,$0=new WeakMap,rd=new WeakMap,od=new WeakMap,je=new WeakMap,ga=new WeakMap,Uo=new WeakMap,_c=new WeakMap,ld=new WeakMap,cd=new WeakMap,ma=new WeakMap,jn=new WeakMap,vr=new WeakMap,xr=new WeakMap,oi=new WeakMap,Ar=new WeakMap,Ho=new WeakMap,_g=new WeakMap,Sr=new WeakMap,ud=new WeakMap,Cc=new WeakMap,Go=new WeakMap,Bi=new WeakMap,Vo=new WeakMap,Mt=new WeakSet,Wb=function(){var e;if(o(this,vr))return;x(this,vr,new AbortController);const{signal:t}=o(this,vr);for(const n of this.trigger)n.addEventListener("click",o(this,rd),{signal:t}),n.addEventListener("pointerenter",o(this,$0),{signal:t}),n.addEventListener("pointerleave",o(this,Y0),{signal:t}),n.classList.add("popupTriggerArea");for(const n of o(this,_c))(e=n.container)==null||e.addEventListener("keydown",o(this,Fo),{signal:t})},qA=function(){const t=o(this,_c).find(e=>e.hasCommentButton);t&&x(this,Ar,t._normalizePoint(t.commentButtonPosition))},XA=function(){if(o(this,Bi).extraPopupElement&&!o(this,Bi).editor)return;this.renderCommentButton();const[t,e]=o(this,Ar),{style:n}=o(this,oi);n.left=`calc(${t}%)`,n.top=`calc(${e}% - var(--comment-button-dim))`},YA=function(){o(this,Bi).extraPopupElement||(this.renderCommentButton(),o(this,oi).style.backgroundColor=this.commentButtonColor||"")},Zb=function(){const t=o(this,Sr),e=o(this,ga);return t!=null&&t.str&&(!(e!=null&&e.str)||e.str===t.str)&&o(this,Sr).html||null},$A=function(){var t,e,n;return((n=(e=(t=o(this,Mt,Zb))==null?void 0:t.attributes)==null?void 0:e.style)==null?void 0:n.fontSize)||0},oN=function(){var t,e,n;return((n=(e=(t=o(this,Mt,Zb))==null?void 0:t.attributes)==null?void 0:e.style)==null?void 0:n.color)||null},lN=function(t){const e=[],n={str:t,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:e}]}},a={style:{color:o(this,Mt,oN),fontSize:o(this,Mt,$A)?`calc(${o(this,Mt,$A)}px * var(--total-scale-factor))`:""}};for(const l of t.split(`
`))e.push({name:"span",value:l,attributes:a});return n},cN=function(t){t.altKey||t.shiftKey||t.ctrlKey||t.metaKey||(t.key==="Enter"||t.key==="Escape"&&o(this,ma))&&T(this,Mt,Jb).call(this)},uN=function(){if(o(this,xr)!==null)return;const{page:{view:t},viewport:{rawDims:{pageWidth:e,pageHeight:n,pageX:a,pageY:l}}}=o(this,ld);let c=!!o(this,cd),h=c?o(this,cd):o(this,_g);for(const C of o(this,_c))if(!h||ct.intersect(C.data.rect,h)!==null){h=C.data.rect,c=!0;break}const f=ct.normalizeRect([h[0],t[3]-h[1]+t[1],h[2],t[3]-h[3]+t[1]]),m=c?h[2]-h[0]+5:0,y=f[0]+m,v=f[1];x(this,xr,[100*(y-a)/e,100*(v-l)/n]);const{style:w}=o(this,je);w.left=`${o(this,xr)[0]}%`,w.top=`${o(this,xr)[1]}%`},Jb=function(){if(o(this,On)){o(this,On).toggleCommentPopup(this,!1);return}x(this,ma,!o(this,ma)),o(this,ma)?(T(this,Mt,t0).call(this),o(this,je).addEventListener("click",o(this,rd)),o(this,je).addEventListener("keydown",o(this,Fo))):(T(this,Mt,KA).call(this),o(this,je).removeEventListener("click",o(this,rd)),o(this,je).removeEventListener("keydown",o(this,Fo)))},t0=function(){o(this,jn)||this.render(),this.isVisible?o(this,ma)&&o(this,je).classList.add("focused"):(T(this,Mt,uN).call(this),o(this,je).hidden=!1,o(this,je).style.zIndex=parseInt(o(this,je).style.zIndex)+1e3)},KA=function(){o(this,je).classList.remove("focused"),!(o(this,ma)||!this.isVisible)&&(o(this,je).hidden=!0,o(this,je).style.zIndex=parseInt(o(this,je).style.zIndex)-1e3)};class hN extends De{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.textContent=t.data.textContent,this.textPosition=t.data.textPosition,this.annotationEditorType=At.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const t=document.createElement("div");t.classList.add("annotationTextContent"),t.setAttribute("role","comment");for(const e of this.textContent){const n=document.createElement("span");n.textContent=e,t.append(n)}this.container.append(t)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var Cg;class s3 extends De{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});E(this,Cg,null)}render(){this.container.classList.add("lineAnnotation");const{data:e,width:n,height:a}=this,l=this.svgFactory.create(n,a,!0),c=x(this,Cg,this.svgFactory.createElement("svg:line"));return c.setAttribute("x1",e.rect[2]-e.lineCoordinates[0]),c.setAttribute("y1",e.rect[3]-e.lineCoordinates[1]),c.setAttribute("x2",e.rect[2]-e.lineCoordinates[2]),c.setAttribute("y2",e.rect[3]-e.lineCoordinates[3]),c.setAttribute("stroke-width",e.borderStyle.width||1),c.setAttribute("stroke","transparent"),c.setAttribute("fill","transparent"),l.append(c),this.container.append(l),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return o(this,Cg)}addHighlightArea(){this.container.classList.add("highlightArea")}}Cg=new WeakMap;var Ng;class a3 extends De{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});E(this,Ng,null)}render(){this.container.classList.add("squareAnnotation");const{data:e,width:n,height:a}=this,l=this.svgFactory.create(n,a,!0),c=e.borderStyle.width,h=x(this,Ng,this.svgFactory.createElement("svg:rect"));return h.setAttribute("x",c/2),h.setAttribute("y",c/2),h.setAttribute("width",n-c),h.setAttribute("height",a-c),h.setAttribute("stroke-width",c||1),h.setAttribute("stroke","transparent"),h.setAttribute("fill","transparent"),l.append(h),this.container.append(l),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return o(this,Ng)}addHighlightArea(){this.container.classList.add("highlightArea")}}Ng=new WeakMap;var Mg;class r3 extends De{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});E(this,Mg,null)}render(){this.container.classList.add("circleAnnotation");const{data:e,width:n,height:a}=this,l=this.svgFactory.create(n,a,!0),c=e.borderStyle.width,h=x(this,Mg,this.svgFactory.createElement("svg:ellipse"));return h.setAttribute("cx",n/2),h.setAttribute("cy",a/2),h.setAttribute("rx",n/2-c/2),h.setAttribute("ry",a/2-c/2),h.setAttribute("stroke-width",c||1),h.setAttribute("stroke","transparent"),h.setAttribute("fill","transparent"),l.append(h),this.container.append(l),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return o(this,Mg)}addHighlightArea(){this.container.classList.add("highlightArea")}}Mg=new WeakMap;var Dg;class dN extends De{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});E(this,Dg,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,vertices:n,borderStyle:a,popupRef:l},width:c,height:h}=this;if(!n)return this.container;const f=this.svgFactory.create(c,h,!0);let p=[];for(let y=0,v=n.length;y<v;y+=2){const w=n[y]-e[0],C=e[3]-n[y+1];p.push(`${w},${C}`)}p=p.join(" ");const m=x(this,Dg,this.svgFactory.createElement(this.svgElementName));return m.setAttribute("points",p),m.setAttribute("stroke-width",a.width||1),m.setAttribute("stroke","transparent"),m.setAttribute("fill","transparent"),f.append(m),this.container.append(f),!l&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return o(this,Dg)}addHighlightArea(){this.container.classList.add("highlightArea")}}Dg=new WeakMap;class o3 extends dN{constructor(t){super(t),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class l3 extends De{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}var Rg,Nc,Lg,QA;class KS extends De{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});E(this,Lg);E(this,Rg,null);E(this,Nc,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?At.HIGHLIGHT:At.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,rotation:n,inkLists:a,borderStyle:l,popupRef:c}}=this,{transform:h,width:f,height:p}=T(this,Lg,QA).call(this,n,e),m=this.svgFactory.create(f,p,!0),y=x(this,Rg,this.svgFactory.createElement("svg:g"));m.append(y),y.setAttribute("stroke-width",l.width||1),y.setAttribute("stroke-linecap","round"),y.setAttribute("stroke-linejoin","round"),y.setAttribute("stroke-miterlimit",10),y.setAttribute("stroke","transparent"),y.setAttribute("fill","transparent"),y.setAttribute("transform",h);for(let v=0,w=a.length;v<w;v++){const C=this.svgFactory.createElement(this.svgElementName);o(this,Nc).push(C),C.setAttribute("points",a[v].join(",")),y.append(C)}return!c&&this.hasPopupData&&this._createPopup(),this.container.append(m),this._editOnDoubleClick(),this.container}updateEdited(e){super.updateEdited(e);const{thickness:n,points:a,rect:l}=e,c=o(this,Rg);if(n>=0&&c.setAttribute("stroke-width",n||1),a)for(let h=0,f=o(this,Nc).length;h<f;h++)o(this,Nc)[h].setAttribute("points",a[h].join(","));if(l){const{transform:h,width:f,height:p}=T(this,Lg,QA).call(this,this.data.rotation,l);c.parentElement.setAttribute("viewBox",`0 0 ${f} ${p}`),c.setAttribute("transform",h)}}getElementsToTriggerPopup(){return o(this,Nc)}addHighlightArea(){this.container.classList.add("highlightArea")}}Rg=new WeakMap,Nc=new WeakMap,Lg=new WeakSet,QA=function(e,n){switch(e){case 90:return{transform:`rotate(90) translate(${-n[0]},${n[1]}) scale(1,-1)`,width:n[3]-n[1],height:n[2]-n[0]};case 180:return{transform:`rotate(180) translate(${-n[2]},${n[1]}) scale(1,-1)`,width:n[2]-n[0],height:n[3]-n[1]};case 270:return{transform:`rotate(270) translate(${-n[2]},${n[3]}) scale(1,-1)`,width:n[3]-n[1],height:n[2]-n[0]};default:return{transform:`translate(${-n[0]},${n[3]}) scale(1,-1)`,width:n[2]-n[0],height:n[3]-n[1]}}};class fN extends De{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=At.HIGHLIGHT}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),t){const n=document.createElement("mark");n.classList.add("overlaidText"),n.textContent=t,this.container.append(n)}return this.container}}class c3 extends De{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),t){const n=document.createElement("u");n.classList.add("overlaidText"),n.textContent=t,this.container.append(n)}return this.container}}class u3 extends De{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),t){const n=document.createElement("u");n.classList.add("overlaidText"),n.textContent=t,this.container.append(n)}return this.container}}class h3 extends De{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),t){const n=document.createElement("s");n.classList.add("overlaidText"),n.textContent=t,this.container.append(n)}return this.container}}class pN extends De{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=At.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var kg,Og,WA;class d3 extends De{constructor(e){var a;super(e,{isRenderable:!0});E(this,Og);E(this,kg,null);const{file:n}=this.data;this.filename=n.filename,this.content=n.content,(a=this.linkService.eventBus)==null||a.dispatch("fileattachmentannotation",{source:this,...n})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:e,data:n}=this;let a;n.hasAppearance||n.fillAlpha===0?a=document.createElement("div"):(a=document.createElement("img"),a.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(n.name)?"paperclip":"pushpin"}.svg`,n.fillAlpha&&n.fillAlpha<1&&(a.style=`filter: opacity(${Math.round(n.fillAlpha*100)}%);`)),a.addEventListener("dblclick",T(this,Og,WA).bind(this)),x(this,kg,a);const{isMac:l}=fi.platform;return e.addEventListener("keydown",c=>{c.key==="Enter"&&(l?c.metaKey:c.ctrlKey)&&T(this,Og,WA).call(this)}),!n.popupRef&&this.hasPopupData?this._createPopup():a.classList.add("popupTriggerArea"),e.append(a),e}getElementsToTriggerPopup(){return o(this,kg)}addHighlightArea(){this.container.classList.add("highlightArea")}}kg=new WeakMap,Og=new WeakSet,WA=function(){var e;(e=this.downloadManager)==null||e.openOrDownloadData(this.content,this.filename)};var hd,Mc,dd,qo,jg,Dc,hl,ZA,JA,fd;let QS=(fd=class{constructor({div:t,accessibilityManager:e,annotationCanvasMap:n,annotationEditorUIManager:a,page:l,viewport:c,structTreeLayer:h,commentManager:f,linkService:p,annotationStorage:m}){E(this,hl);E(this,hd,null);E(this,Mc,null);E(this,dd,null);E(this,qo,new Map);E(this,jg,null);E(this,Dc,null);this.div=t,x(this,hd,e),x(this,Mc,n),x(this,jg,h||null),x(this,Dc,p||null),x(this,dd,m||new HS),this.page=l,this.viewport=c,this.zIndex=0,this._annotationEditorUIManager=a,this._commentManager=f||null}hasEditableAnnotations(){return o(this,qo).size>0}async render(t){var c,h,f;const{annotations:e}=t,n=this.div;ll(n,this.viewport);const a=new Map,l={data:null,layer:n,linkService:o(this,Dc),downloadManager:t.downloadManager,imageResourcesPath:t.imageResourcesPath||"",renderForms:t.renderForms!==!1,svgFactory:new vp,annotationStorage:o(this,dd),enableComment:t.enableComment===!0,enableScripting:t.enableScripting===!0,hasJSActions:t.hasJSActions,fieldObjects:t.fieldObjects,parent:this,elements:null};for(const p of e){if(p.noHTML)continue;const m=p.annotationType===Fe.POPUP;if(m){const w=a.get(p.id);if(!w)continue;l.elements=w}else if(p.rect[2]===p.rect[0]||p.rect[3]===p.rect[1])continue;l.data=p;const y=J_.create(l);if(!y.isRenderable)continue;if(!m&&p.popupRef){const w=a.get(p.popupRef);w?w.push(y):a.set(p.popupRef,[y])}const v=y.render();p.hidden&&(v.style.visibility="hidden"),await T(this,hl,ZA).call(this,v,p.id,l.elements),(h=(c=y.extraPopupElement)==null?void 0:c.popup)==null||h.renderCommentButton(),y._isEditable&&(o(this,qo).set(y.data.id,y),(f=this._annotationEditorUIManager)==null||f.renderAnnotationElement(y))}T(this,hl,JA).call(this)}async addLinkAnnotations(t){const e={data:null,layer:this.div,linkService:o(this,Dc),svgFactory:new vp,parent:this};for(const n of t){n.borderStyle||(n.borderStyle=fd._defaultBorderStyle),e.data=n;const a=J_.create(e);if(!a.isRenderable)continue;const l=a.render();await T(this,hl,ZA).call(this,l,n.id,null)}}update({viewport:t}){const e=this.div;this.viewport=t,ll(e,{rotation:t.rotation}),T(this,hl,JA).call(this),e.hidden=!1}getEditableAnnotations(){return Array.from(o(this,qo).values())}getEditableAnnotation(t){return o(this,qo).get(t)}addFakeAnnotation(t){var h;const{div:e}=this,{id:n,rotation:a}=t,l=new Qj({data:{id:n,rect:t.getPDFRect(),rotation:a},editor:t,layer:e,parent:this,enableComment:!!this._commentManager,linkService:o(this,Dc),annotationStorage:o(this,dd)}),c=l.render();return e.append(c),(h=o(this,hd))==null||h.moveElementInDOM(e,c,c,!1),l.createOrUpdatePopup(),l}static get _defaultBorderStyle(){return Ct(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:Xu.SOLID,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}},hd=new WeakMap,Mc=new WeakMap,dd=new WeakMap,qo=new WeakMap,jg=new WeakMap,Dc=new WeakMap,hl=new WeakSet,ZA=async function(t,e,n){var h,f;const a=t.firstChild||t,l=a.id=`${IS}${e}`,c=await((h=o(this,jg))==null?void 0:h.getAriaAttributes(l));if(c)for(const[p,m]of c)a.setAttribute(p,m);n?n.at(-1).container.after(t):(this.div.append(t),(f=o(this,hd))==null||f.moveElementInDOM(this.div,t,a,!1))},JA=function(){var e;if(!o(this,Mc))return;const t=this.div;for(const[n,a]of o(this,Mc)){const l=t.querySelector(`[data-annotation-id="${n}"]`);if(!l)continue;a.className="annotationContent";const{firstChild:c}=l;c?c.nodeName==="CANVAS"?c.replaceWith(a):c.classList.contains("annotationContent")?c.after(a):c.before(a):l.append(a);const h=o(this,qo).get(n);h&&(h._hasNoCanvas?((e=this._annotationEditorUIManager)==null||e.setMissingCanvas(n,l.id,a),h._hasNoCanvas=!1):h.canvas=a)}o(this,Mc).clear()},fd);const Bb=/\r\n?|\n/g;var Bn,Bg,Rc,zn,Qe,gN,mN,bN,e0,Rr,i0,n0,yN,eS,vN;const Ae=class Ae extends be{constructor(e){super({...e,name:"freeTextEditor"});E(this,Qe);E(this,Bn,"");E(this,Bg,`${this.id}-editor`);E(this,Rc,null);E(this,zn);nt(this,"_colorPicker",null);this.color=e.color||Ae._defaultColor||be._defaultLineColor,x(this,zn,e.fontSize||Ae._defaultFontSize),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-freetext-added-alert")}static get _keyboardManager(){const e=Ae.prototype,n=c=>c.isEmpty(),a=cl.TRANSLATE_SMALL,l=cl.TRANSLATE_BIG;return Ct(this,"_keyboardManager",new sm([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],e.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],e.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],e._translateEmpty,{args:[-a,0],checker:n}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e._translateEmpty,{args:[-l,0],checker:n}],[["ArrowRight","mac+ArrowRight"],e._translateEmpty,{args:[a,0],checker:n}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e._translateEmpty,{args:[l,0],checker:n}],[["ArrowUp","mac+ArrowUp"],e._translateEmpty,{args:[0,-a],checker:n}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e._translateEmpty,{args:[0,-l],checker:n}],[["ArrowDown","mac+ArrowDown"],e._translateEmpty,{args:[0,a],checker:n}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e._translateEmpty,{args:[0,l],checker:n}]]))}static initialize(e,n){be.initialize(e,n);const a=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(a.getPropertyValue("--freetext-padding"))}static updateDefaultParams(e,n){switch(e){case Bt.FREETEXT_SIZE:Ae._defaultFontSize=n;break;case Bt.FREETEXT_COLOR:Ae._defaultColor=n;break}}updateParams(e,n){switch(e){case Bt.FREETEXT_SIZE:T(this,Qe,gN).call(this,n);break;case Bt.FREETEXT_COLOR:T(this,Qe,mN).call(this,n);break}}static get defaultPropertiesToUpdate(){return[[Bt.FREETEXT_SIZE,Ae._defaultFontSize],[Bt.FREETEXT_COLOR,Ae._defaultColor||be._defaultLineColor]]}get propertiesToUpdate(){return[[Bt.FREETEXT_SIZE,o(this,zn)],[Bt.FREETEXT_COLOR,this.color]]}get toolbarButtons(){return this._colorPicker||(this._colorPicker=new M0(this)),[["colorPicker",this._colorPicker]]}get colorType(){return Bt.FREETEXT_COLOR}onUpdatedColor(){var e;this.editorDiv.style.color=this.color,(e=this._colorPicker)==null||e.update(this.color),super.onUpdatedColor()}_translateEmpty(e,n){this._uiManager.translateSelectedEditors(e,n,!0)}getInitialTranslation(){const e=this.parentScale;return[-Ae._internalPadding*e,-(Ae._internalPadding+o(this,zn))*e]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(!super.enableEditMode())return!1;this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),x(this,Rc,new AbortController);const e=this._uiManager.combinedSignal(o(this,Rc));return this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:e}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:e}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:e}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:e}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:e}),!0}disableEditMode(){var e;return super.disableEditMode()?(this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",o(this,Bg)),this._isDraggable=!0,(e=o(this,Rc))==null||e.abort(),x(this,Rc,null),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"),!0):!1}focusin(e){this._focusEventsAllowed&&(super.focusin(e),e.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(e){var n;this.width||(this.enableEditMode(),e&&this.editorDiv.focus(),(n=this._initialOptions)!=null&&n.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const e=o(this,Bn),n=x(this,Bn,T(this,Qe,bN).call(this).trimEnd());if(e===n)return;const a=l=>{if(x(this,Bn,l),!l){this.remove();return}T(this,Qe,n0).call(this),this._uiManager.rebuild(this),T(this,Qe,e0).call(this)};this.addCommands({cmd:()=>{a(n)},undo:()=>{a(e)},mustExec:!1}),T(this,Qe,e0).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}keydown(e){e.target===this.div&&e.key==="Enter"&&(this.enterInEditMode(),e.preventDefault())}editorDivKeydown(e){Ae._keyboardManager.exec(this,e)}editorDivFocus(e){this.isEditing=!0}editorDivBlur(e){this.isEditing=!1}editorDivInput(e){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}get canChangeContent(){return!0}render(){if(this.div)return this.div;let e,n;(this._isCopy||this.annotationElementId)&&(e=this.x,n=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",o(this,Bg)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:a}=this.editorDiv;if(a.fontSize=`calc(${o(this,zn)}px * var(--total-scale-factor))`,a.color=this.color,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),this._isCopy||this.annotationElementId){const[l,c]=this.parentDimensions;if(this.annotationElementId){const{position:h}=this._initialData;let[f,p]=this.getInitialTranslation();[f,p]=this.pageTranslationToScreen(f,p);const[m,y]=this.pageDimensions,[v,w]=this.pageTranslation;let C,_;switch(this.rotation){case 0:C=e+(h[0]-v)/m,_=n+this.height-(h[1]-w)/y;break;case 90:C=e+(h[0]-v)/m,_=n-(h[1]-w)/y,[f,p]=[p,-f];break;case 180:C=e-this.width+(h[0]-v)/m,_=n-(h[1]-w)/y,[f,p]=[-f,-p];break;case 270:C=e+(h[0]-v-this.height*y)/m,_=n+(h[1]-w-this.width*m)/y,[f,p]=[-p,f];break}this.setAt(C*l,_*c,f,p)}else this._moveAfterPaste(e,n);T(this,Qe,n0).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(e){var C,_,M;const n=e.clipboardData||window.clipboardData,{types:a}=n;if(a.length===1&&a[0]==="text/plain")return;e.preventDefault();const l=T(C=Ae,Rr,eS).call(C,n.getData("text")||"").replaceAll(Bb,`
`);if(!l)return;const c=window.getSelection();if(!c.rangeCount)return;this.editorDiv.normalize(),c.deleteFromDocument();const h=c.getRangeAt(0);if(!l.includes(`
`)){h.insertNode(document.createTextNode(l)),this.editorDiv.normalize(),c.collapseToStart();return}const{startContainer:f,startOffset:p}=h,m=[],y=[];if(f.nodeType===Node.TEXT_NODE){const N=f.parentElement;if(y.push(f.nodeValue.slice(p).replaceAll(Bb,"")),N!==this.editorDiv){let R=m;for(const L of this.editorDiv.childNodes){if(L===N){R=y;continue}R.push(T(_=Ae,Rr,i0).call(_,L))}}m.push(f.nodeValue.slice(0,p).replaceAll(Bb,""))}else if(f===this.editorDiv){let N=m,R=0;for(const L of this.editorDiv.childNodes)R++===p&&(N=y),N.push(T(M=Ae,Rr,i0).call(M,L))}x(this,Bn,`${m.join(`
`)}${l}${y.join(`
`)}`),T(this,Qe,n0).call(this);const v=new Range;let w=Math.sumPrecise(m.map(N=>N.length));for(const{firstChild:N}of this.editorDiv.childNodes)if(N.nodeType===Node.TEXT_NODE){const R=N.nodeValue.length;if(w<=R){v.setStart(N,w),v.setEnd(N,w);break}w-=R}c.removeAllRanges(),c.addRange(v)}get contentDiv(){return this.editorDiv}getPDFRect(){const e=Ae._internalPadding*this.parentScale;return this.getRect(e,e)}static async deserialize(e,n,a){var h;let l=null;if(e instanceof hN){const{data:{defaultAppearanceData:{fontSize:f,fontColor:p},rect:m,rotation:y,id:v,popupRef:w,richText:C,contentsObj:_,creationDate:M,modificationDate:N},textContent:R,textPosition:L,parent:{page:{pageNumber:k}}}=e;if(!R||R.length===0)return null;l=e={annotationType:At.FREETEXT,color:Array.from(p),fontSize:f,value:R.join(`
`),position:L,pageIndex:k-1,rect:m.slice(0),rotation:y,annotationElementId:v,id:v,deleted:!1,popupRef:w,comment:(_==null?void 0:_.str)||null,richText:C,creationDate:M,modificationDate:N}}const c=await super.deserialize(e,n,a);return x(c,zn,e.fontSize),c.color=ct.makeHexColor(...e.color),x(c,Bn,T(h=Ae,Rr,eS).call(h,e.value)),c._initialData=l,e.comment&&c.setCommentData(e),c}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const n=be._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.color),a=Object.assign(super.serialize(e),{color:n,fontSize:o(this,zn),value:T(this,Qe,yN).call(this)});return this.addComment(a),e?(a.isCopy=!0,a):this.annotationElementId&&!T(this,Qe,vN).call(this,a)?null:(a.id=this.annotationElementId,a)}renderAnnotationElement(e){const n=super.renderAnnotationElement(e);if(!n)return null;const{style:a}=n;a.fontSize=`calc(${o(this,zn)}px * var(--total-scale-factor))`,a.color=this.color,n.replaceChildren();for(const l of o(this,Bn).split(`
`)){const c=document.createElement("div");c.append(l?document.createTextNode(l):document.createElement("br")),n.append(c)}return e.updateEdited({rect:this.getPDFRect(),popup:this._uiManager.hasCommentManager()||this.hasEditedComment?this.comment:{text:o(this,Bn)}}),n}resetAnnotationElement(e){super.resetAnnotationElement(e),e.resetEdited()}};Bn=new WeakMap,Bg=new WeakMap,Rc=new WeakMap,zn=new WeakMap,Qe=new WeakSet,gN=function(e){const n=l=>{this.editorDiv.style.fontSize=`calc(${l}px * var(--total-scale-factor))`,this.translate(0,-(l-o(this,zn))*this.parentScale),x(this,zn,l),T(this,Qe,e0).call(this)},a=o(this,zn);this.addCommands({cmd:n.bind(this,e),undo:n.bind(this,a),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Bt.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},mN=function(e){const n=l=>{this.color=l,this.onUpdatedColor()},a=this.color;this.addCommands({cmd:n.bind(this,e),undo:n.bind(this,a),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Bt.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},bN=function(){var a;const e=[];this.editorDiv.normalize();let n=null;for(const l of this.editorDiv.childNodes)(n==null?void 0:n.nodeType)===Node.TEXT_NODE&&l.nodeName==="BR"||(e.push(T(a=Ae,Rr,i0).call(a,l)),n=l);return e.join(`
`)},e0=function(){const[e,n]=this.parentDimensions;let a;if(this.isAttachedToDOM)a=this.div.getBoundingClientRect();else{const{currentLayer:l,div:c}=this,h=c.style.display,f=c.classList.contains("hidden");c.classList.remove("hidden"),c.style.display="hidden",l.div.append(this.div),a=c.getBoundingClientRect(),c.remove(),c.style.display=h,c.classList.toggle("hidden",f)}this.rotation%180===this.parentRotation%180?(this.width=a.width/e,this.height=a.height/n):(this.width=a.height/e,this.height=a.width/n),this.fixAndSetPosition()},Rr=new WeakSet,i0=function(e){return(e.nodeType===Node.TEXT_NODE?e.nodeValue:e.innerText).replaceAll(Bb,"")},n0=function(){if(this.editorDiv.replaceChildren(),!!o(this,Bn))for(const e of o(this,Bn).split(`
`)){const n=document.createElement("div");n.append(e?document.createTextNode(e):document.createElement("br")),this.editorDiv.append(n)}},yN=function(){return o(this,Bn).replaceAll(""," ")},eS=function(e){return e.replaceAll(" ","")},vN=function(e){const{value:n,fontSize:a,color:l,pageIndex:c}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||e.value!==n||e.fontSize!==a||e.color.some((h,f)=>h!==l[f])||e.pageIndex!==c},E(Ae,Rr),nt(Ae,"_freeTextDefaultContent",""),nt(Ae,"_internalPadding",0),nt(Ae,"_defaultColor",null),nt(Ae,"_defaultFontSize",10),nt(Ae,"_type","freetext"),nt(Ae,"_editorType",At.FREETEXT);let tS=Ae;class lt{toSVGPath(){ge("Abstract method `toSVGPath` must be implemented.")}get box(){ge("Abstract getter `box` must be implemented.")}serialize(t,e){ge("Abstract method `serialize` must be implemented.")}static _rescale(t,e,n,a,l,c){c||(c=new Float32Array(t.length));for(let h=0,f=t.length;h<f;h+=2)c[h]=e+t[h]*a,c[h+1]=n+t[h+1]*l;return c}static _rescaleAndSwap(t,e,n,a,l,c){c||(c=new Float32Array(t.length));for(let h=0,f=t.length;h<f;h+=2)c[h]=e+t[h+1]*a,c[h+1]=n+t[h]*l;return c}static _translate(t,e,n,a){a||(a=new Float32Array(t.length));for(let l=0,c=t.length;l<c;l+=2)a[l]=e+t[l],a[l+1]=n+t[l+1];return a}static svgRound(t){return Math.round(t*1e4)}static _normalizePoint(t,e,n,a,l){switch(l){case 90:return[1-e/n,t/a];case 180:return[1-t/n,1-e/a];case 270:return[e/n,1-t/a];default:return[t/n,e/a]}}static _normalizePagePoint(t,e,n){switch(n){case 90:return[1-e,t];case 180:return[1-t,1-e];case 270:return[e,1-t];default:return[t,e]}}static createBezierPoints(t,e,n,a,l,c){return[(t+5*n)/6,(e+5*a)/6,(5*n+l)/6,(5*a+c)/6,(n+l)/2,(a+c)/2]}}nt(lt,"PRECISION",1e-4);var Pn,zs,pd,gd,ba,Dt,Lc,kc,zg,Pg,md,bd,Xo,Ig,K0,Q0,ii,rp,xN,AN,SN,wN,EN,TN;const Ka=class Ka{constructor({x:t,y:e},n,a,l,c,h=0){E(this,ii);E(this,Pn);E(this,zs,[]);E(this,pd);E(this,gd);E(this,ba,[]);E(this,Dt,new Float32Array(18));E(this,Lc);E(this,kc);E(this,zg);E(this,Pg);E(this,md);E(this,bd);E(this,Xo,[]);x(this,Pn,n),x(this,bd,l*a),x(this,gd,c),o(this,Dt).set([NaN,NaN,NaN,NaN,t,e],6),x(this,pd,h),x(this,Pg,o(Ka,Ig)*a),x(this,zg,o(Ka,Q0)*a),x(this,md,a),o(this,Xo).push(t,e)}isEmpty(){return isNaN(o(this,Dt)[8])}add({x:t,y:e}){var J;x(this,Lc,t),x(this,kc,e);const[n,a,l,c]=o(this,Pn);let[h,f,p,m]=o(this,Dt).subarray(8,12);const y=t-p,v=e-m,w=Math.hypot(y,v);if(w<o(this,zg))return!1;const C=w-o(this,Pg),_=C/w,M=_*y,N=_*v;let R=h,L=f;h=p,f=m,p+=M,m+=N,(J=o(this,Xo))==null||J.push(t,e);const k=-N/C,j=M/C,z=k*o(this,bd),I=j*o(this,bd);return o(this,Dt).set(o(this,Dt).subarray(2,8),0),o(this,Dt).set([p+z,m+I],4),o(this,Dt).set(o(this,Dt).subarray(14,18),12),o(this,Dt).set([p-z,m-I],16),isNaN(o(this,Dt)[6])?(o(this,ba).length===0&&(o(this,Dt).set([h+z,f+I],2),o(this,ba).push(NaN,NaN,NaN,NaN,(h+z-n)/l,(f+I-a)/c),o(this,Dt).set([h-z,f-I],14),o(this,zs).push(NaN,NaN,NaN,NaN,(h-z-n)/l,(f-I-a)/c)),o(this,Dt).set([R,L,h,f,p,m],6),!this.isEmpty()):(o(this,Dt).set([R,L,h,f,p,m],6),Math.abs(Math.atan2(L-f,R-h)-Math.atan2(N,M))<Math.PI/2?([h,f,p,m]=o(this,Dt).subarray(2,6),o(this,ba).push(NaN,NaN,NaN,NaN,((h+p)/2-n)/l,((f+m)/2-a)/c),[h,f,R,L]=o(this,Dt).subarray(14,18),o(this,zs).push(NaN,NaN,NaN,NaN,((R+h)/2-n)/l,((L+f)/2-a)/c),!0):([R,L,h,f,p,m]=o(this,Dt).subarray(0,6),o(this,ba).push(((R+5*h)/6-n)/l,((L+5*f)/6-a)/c,((5*h+p)/6-n)/l,((5*f+m)/6-a)/c,((h+p)/2-n)/l,((f+m)/2-a)/c),[p,m,h,f,R,L]=o(this,Dt).subarray(12,18),o(this,zs).push(((R+5*h)/6-n)/l,((L+5*f)/6-a)/c,((5*h+p)/6-n)/l,((5*f+m)/6-a)/c,((h+p)/2-n)/l,((f+m)/2-a)/c),!0))}toSVGPath(){if(this.isEmpty())return"";const t=o(this,ba),e=o(this,zs);if(isNaN(o(this,Dt)[6])&&!this.isEmpty())return T(this,ii,xN).call(this);const n=[];n.push(`M${t[4]} ${t[5]}`);for(let a=6;a<t.length;a+=6)isNaN(t[a])?n.push(`L${t[a+4]} ${t[a+5]}`):n.push(`C${t[a]} ${t[a+1]} ${t[a+2]} ${t[a+3]} ${t[a+4]} ${t[a+5]}`);T(this,ii,SN).call(this,n);for(let a=e.length-6;a>=6;a-=6)isNaN(e[a])?n.push(`L${e[a+4]} ${e[a+5]}`):n.push(`C${e[a]} ${e[a+1]} ${e[a+2]} ${e[a+3]} ${e[a+4]} ${e[a+5]}`);return T(this,ii,AN).call(this,n),n.join(" ")}newFreeDrawOutline(t,e,n,a,l,c){return new _N(t,e,n,a,l,c)}getOutlines(){var y;const t=o(this,ba),e=o(this,zs),n=o(this,Dt),[a,l,c,h]=o(this,Pn),f=new Float32Array((((y=o(this,Xo))==null?void 0:y.length)??0)+2);for(let v=0,w=f.length-2;v<w;v+=2)f[v]=(o(this,Xo)[v]-a)/c,f[v+1]=(o(this,Xo)[v+1]-l)/h;if(f[f.length-2]=(o(this,Lc)-a)/c,f[f.length-1]=(o(this,kc)-l)/h,isNaN(n[6])&&!this.isEmpty())return T(this,ii,wN).call(this,f);const p=new Float32Array(o(this,ba).length+24+o(this,zs).length);let m=t.length;for(let v=0;v<m;v+=2){if(isNaN(t[v])){p[v]=p[v+1]=NaN;continue}p[v]=t[v],p[v+1]=t[v+1]}m=T(this,ii,TN).call(this,p,m);for(let v=e.length-6;v>=6;v-=6)for(let w=0;w<6;w+=2){if(isNaN(e[v+w])){p[m]=p[m+1]=NaN,m+=2;continue}p[m]=e[v+w],p[m+1]=e[v+w+1],m+=2}return T(this,ii,EN).call(this,p,m),this.newFreeDrawOutline(p,f,o(this,Pn),o(this,md),o(this,pd),o(this,gd))}};Pn=new WeakMap,zs=new WeakMap,pd=new WeakMap,gd=new WeakMap,ba=new WeakMap,Dt=new WeakMap,Lc=new WeakMap,kc=new WeakMap,zg=new WeakMap,Pg=new WeakMap,md=new WeakMap,bd=new WeakMap,Xo=new WeakMap,Ig=new WeakMap,K0=new WeakMap,Q0=new WeakMap,ii=new WeakSet,rp=function(){const t=o(this,Dt).subarray(4,6),e=o(this,Dt).subarray(16,18),[n,a,l,c]=o(this,Pn);return[(o(this,Lc)+(t[0]-e[0])/2-n)/l,(o(this,kc)+(t[1]-e[1])/2-a)/c,(o(this,Lc)+(e[0]-t[0])/2-n)/l,(o(this,kc)+(e[1]-t[1])/2-a)/c]},xN=function(){const[t,e,n,a]=o(this,Pn),[l,c,h,f]=T(this,ii,rp).call(this);return`M${(o(this,Dt)[2]-t)/n} ${(o(this,Dt)[3]-e)/a} L${(o(this,Dt)[4]-t)/n} ${(o(this,Dt)[5]-e)/a} L${l} ${c} L${h} ${f} L${(o(this,Dt)[16]-t)/n} ${(o(this,Dt)[17]-e)/a} L${(o(this,Dt)[14]-t)/n} ${(o(this,Dt)[15]-e)/a} Z`},AN=function(t){const e=o(this,zs);t.push(`L${e[4]} ${e[5]} Z`)},SN=function(t){const[e,n,a,l]=o(this,Pn),c=o(this,Dt).subarray(4,6),h=o(this,Dt).subarray(16,18),[f,p,m,y]=T(this,ii,rp).call(this);t.push(`L${(c[0]-e)/a} ${(c[1]-n)/l} L${f} ${p} L${m} ${y} L${(h[0]-e)/a} ${(h[1]-n)/l}`)},wN=function(t){const e=o(this,Dt),[n,a,l,c]=o(this,Pn),[h,f,p,m]=T(this,ii,rp).call(this),y=new Float32Array(36);return y.set([NaN,NaN,NaN,NaN,(e[2]-n)/l,(e[3]-a)/c,NaN,NaN,NaN,NaN,(e[4]-n)/l,(e[5]-a)/c,NaN,NaN,NaN,NaN,h,f,NaN,NaN,NaN,NaN,p,m,NaN,NaN,NaN,NaN,(e[16]-n)/l,(e[17]-a)/c,NaN,NaN,NaN,NaN,(e[14]-n)/l,(e[15]-a)/c],0),this.newFreeDrawOutline(y,t,o(this,Pn),o(this,md),o(this,pd),o(this,gd))},EN=function(t,e){const n=o(this,zs);return t.set([NaN,NaN,NaN,NaN,n[4],n[5]],e),e+=6},TN=function(t,e){const n=o(this,Dt).subarray(4,6),a=o(this,Dt).subarray(16,18),[l,c,h,f]=o(this,Pn),[p,m,y,v]=T(this,ii,rp).call(this);return t.set([NaN,NaN,NaN,NaN,(n[0]-l)/h,(n[1]-c)/f,NaN,NaN,NaN,NaN,p,m,NaN,NaN,NaN,NaN,y,v,NaN,NaN,NaN,NaN,(a[0]-l)/h,(a[1]-c)/f],e),e+=24},E(Ka,Ig,8),E(Ka,K0,2),E(Ka,Q0,o(Ka,Ig)+o(Ka,K0));let D0=Ka;var yd,Oc,wr,Fg,In,Ug,He,W0,CN;class _N extends lt{constructor(e,n,a,l,c,h){super();E(this,W0);E(this,yd);E(this,Oc,new Float32Array(4));E(this,wr);E(this,Fg);E(this,In);E(this,Ug);E(this,He);x(this,He,e),x(this,In,n),x(this,yd,a),x(this,Ug,l),x(this,wr,c),x(this,Fg,h),this.firstPoint=[NaN,NaN],this.lastPoint=[NaN,NaN],T(this,W0,CN).call(this,h);const[f,p,m,y]=o(this,Oc);for(let v=0,w=e.length;v<w;v+=2)e[v]=(e[v]-f)/m,e[v+1]=(e[v+1]-p)/y;for(let v=0,w=n.length;v<w;v+=2)n[v]=(n[v]-f)/m,n[v+1]=(n[v+1]-p)/y}toSVGPath(){const e=[`M${o(this,He)[4]} ${o(this,He)[5]}`];for(let n=6,a=o(this,He).length;n<a;n+=6){if(isNaN(o(this,He)[n])){e.push(`L${o(this,He)[n+4]} ${o(this,He)[n+5]}`);continue}e.push(`C${o(this,He)[n]} ${o(this,He)[n+1]} ${o(this,He)[n+2]} ${o(this,He)[n+3]} ${o(this,He)[n+4]} ${o(this,He)[n+5]}`)}return e.push("Z"),e.join(" ")}serialize([e,n,a,l],c){const h=a-e,f=l-n;let p,m;switch(c){case 0:p=lt._rescale(o(this,He),e,l,h,-f),m=lt._rescale(o(this,In),e,l,h,-f);break;case 90:p=lt._rescaleAndSwap(o(this,He),e,n,h,f),m=lt._rescaleAndSwap(o(this,In),e,n,h,f);break;case 180:p=lt._rescale(o(this,He),a,n,-h,f),m=lt._rescale(o(this,In),a,n,-h,f);break;case 270:p=lt._rescaleAndSwap(o(this,He),a,l,-h,-f),m=lt._rescaleAndSwap(o(this,In),a,l,-h,-f);break}return{outline:Array.from(p),points:[Array.from(m)]}}get box(){return o(this,Oc)}newOutliner(e,n,a,l,c,h=0){return new D0(e,n,a,l,c,h)}getNewOutline(e,n){const[a,l,c,h]=o(this,Oc),[f,p,m,y]=o(this,yd),v=c*m,w=h*y,C=a*m+f,_=l*y+p,M=this.newOutliner({x:o(this,In)[0]*v+C,y:o(this,In)[1]*w+_},o(this,yd),o(this,Ug),e,o(this,Fg),n??o(this,wr));for(let N=2;N<o(this,In).length;N+=2)M.add({x:o(this,In)[N]*v+C,y:o(this,In)[N+1]*w+_});return M.getOutlines()}}yd=new WeakMap,Oc=new WeakMap,wr=new WeakMap,Fg=new WeakMap,In=new WeakMap,Ug=new WeakMap,He=new WeakMap,W0=new WeakSet,CN=function(e){const n=o(this,He);let a=n[4],l=n[5];const c=[a,l,a,l];let h=a,f=l,p=a,m=l;const y=e?Math.max:Math.min,v=new Float32Array(4);for(let C=6,_=n.length;C<_;C+=6){const M=n[C+4],N=n[C+5];isNaN(n[C])?(ct.pointBoundingBox(M,N,c),f>N?(h=M,f=N):f===N&&(h=y(h,M)),m<N?(p=M,m=N):m===N&&(p=y(p,M))):(v[0]=v[1]=1/0,v[2]=v[3]=-1/0,ct.bezierBoundingBox(a,l,...n.slice(C,C+6),v),ct.rectBoundingBox(v[0],v[1],v[2],v[3],c),f>v[1]?(h=v[0],f=v[1]):f===v[1]&&(h=y(h,v[0])),m<v[3]?(p=v[2],m=v[3]):m===v[3]&&(p=y(p,v[2]))),a=M,l=N}const w=o(this,Oc);w[0]=c[0]-o(this,wr),w[1]=c[1]-o(this,wr),w[2]=c[2]-c[0]+2*o(this,wr),w[3]=c[3]-c[1]+2*o(this,wr),this.firstPoint=[h,f],this.lastPoint=[p,m]};var Hg,Gg,Vg,Yo,Ps,Qi,NN,s0,MN,DN,nS;class iS{constructor(t,e=0,n=0,a=!0){E(this,Qi);E(this,Hg);E(this,Gg);E(this,Vg);E(this,Yo,[]);E(this,Ps,[]);const l=[1/0,1/0,-1/0,-1/0],c=10**-4;for(const{x:_,y:M,width:N,height:R}of t){const L=Math.floor((_-e)/c)*c,k=Math.ceil((_+N+e)/c)*c,j=Math.floor((M-e)/c)*c,z=Math.ceil((M+R+e)/c)*c,I=[L,j,z,!0],K=[k,j,z,!1];o(this,Yo).push(I,K),ct.rectBoundingBox(L,j,k,z,l)}const h=l[2]-l[0]+2*n,f=l[3]-l[1]+2*n,p=l[0]-n,m=l[1]-n;let y=a?-1/0:1/0,v=1/0;const w=o(this,Yo).at(a?-1:-2),C=[w[0],w[2]];for(const _ of o(this,Yo)){const[M,N,R,L]=_;!L&&a?N<v?(v=N,y=M):N===v&&(y=Math.max(y,M)):L&&!a&&(N<v?(v=N,y=M):N===v&&(y=Math.min(y,M))),_[0]=(M-p)/h,_[1]=(N-m)/f,_[2]=(R-m)/f}x(this,Hg,new Float32Array([p,m,h,f])),x(this,Gg,[y,v]),x(this,Vg,C)}getOutlines(){o(this,Yo).sort((e,n)=>e[0]-n[0]||e[1]-n[1]||e[2]-n[2]);const t=[];for(const e of o(this,Yo))e[3]?(t.push(...T(this,Qi,nS).call(this,e)),T(this,Qi,MN).call(this,e)):(T(this,Qi,DN).call(this,e),t.push(...T(this,Qi,nS).call(this,e)));return T(this,Qi,NN).call(this,t)}}Hg=new WeakMap,Gg=new WeakMap,Vg=new WeakMap,Yo=new WeakMap,Ps=new WeakMap,Qi=new WeakSet,NN=function(t){const e=[],n=new Set;for(const c of t){const[h,f,p]=c;e.push([h,f,c],[h,p,c])}e.sort((c,h)=>c[1]-h[1]||c[0]-h[0]);for(let c=0,h=e.length;c<h;c+=2){const f=e[c][2],p=e[c+1][2];f.push(p),p.push(f),n.add(f),n.add(p)}const a=[];let l;for(;n.size>0;){const c=n.values().next().value;let[h,f,p,m,y]=c;n.delete(c);let v=h,w=f;for(l=[h,p],a.push(l);;){let C;if(n.has(m))C=m;else if(n.has(y))C=y;else break;n.delete(C),[h,f,p,m,y]=C,v!==h&&(l.push(v,w,h,w===f?f:p),v=h),w=w===f?p:f}l.push(v,w)}return new f3(a,o(this,Hg),o(this,Gg),o(this,Vg))},s0=function(t){const e=o(this,Ps);let n=0,a=e.length-1;for(;n<=a;){const l=n+a>>1,c=e[l][0];if(c===t)return l;c<t?n=l+1:a=l-1}return a+1},MN=function([,t,e]){const n=T(this,Qi,s0).call(this,t);o(this,Ps).splice(n,0,[t,e])},DN=function([,t,e]){const n=T(this,Qi,s0).call(this,t);for(let a=n;a<o(this,Ps).length;a++){const[l,c]=o(this,Ps)[a];if(l!==t)break;if(l===t&&c===e){o(this,Ps).splice(a,1);return}}for(let a=n-1;a>=0;a--){const[l,c]=o(this,Ps)[a];if(l!==t)break;if(l===t&&c===e){o(this,Ps).splice(a,1);return}}},nS=function(t){const[e,n,a]=t,l=[[e,n,a]],c=T(this,Qi,s0).call(this,a);for(let h=0;h<c;h++){const[f,p]=o(this,Ps)[h];for(let m=0,y=l.length;m<y;m++){const[,v,w]=l[m];if(!(p<=v||w<=f)){if(v>=f){if(w>p)l[m][1]=p;else{if(y===1)return[];l.splice(m,1),m--,y--}continue}l[m][2]=f,w>p&&l.push([e,p,w])}}}return l};var qg,vd;class f3 extends lt{constructor(e,n,a,l){super();E(this,qg);E(this,vd);x(this,vd,e),x(this,qg,n),this.firstPoint=a,this.lastPoint=l}toSVGPath(){const e=[];for(const n of o(this,vd)){let[a,l]=n;e.push(`M${a} ${l}`);for(let c=2;c<n.length;c+=2){const h=n[c],f=n[c+1];h===a?(e.push(`V${f}`),l=f):f===l&&(e.push(`H${h}`),a=h)}e.push("Z")}return e.join(" ")}serialize([e,n,a,l],c){const h=[],f=a-e,p=l-n;for(const m of o(this,vd)){const y=new Array(m.length);for(let v=0;v<m.length;v+=2)y[v]=e+m[v]*f,y[v+1]=l-m[v+1]*p;h.push(y)}return h}get box(){return o(this,qg)}get classNamesForOutlining(){return["highlightOutline"]}}qg=new WeakMap,vd=new WeakMap;class sS extends D0{newFreeDrawOutline(t,e,n,a,l,c){return new p3(t,e,n,a,l,c)}}class p3 extends _N{newOutliner(t,e,n,a,l,c=0){return new sS(t,e,n,a,l,c)}}var xd,Xg,Er,jc,Yg,fn,$g,Kg,Bc,Fn,Un,Ei,Ad,Sd,zi,wd,vs,Qg,Nt,aS,a0,RN,LN,kN,rS,Ol,Ss,Zu,ON,r0,o0,jN,BN,zN,PN,IN;const Yt=class Yt extends be{constructor(e){super({...e,name:"highlightEditor"});E(this,Nt);E(this,xd,null);E(this,Xg,0);E(this,Er);E(this,jc,null);E(this,Yg,null);E(this,fn,null);E(this,$g,null);E(this,Kg,0);E(this,Bc,null);E(this,Fn,null);E(this,Un,null);E(this,Ei,!1);E(this,Ad,null);E(this,Sd,null);E(this,zi,null);E(this,wd,"");E(this,vs);E(this,Qg,"");this.color=e.color||Yt._defaultColor,x(this,vs,e.thickness||Yt._defaultThickness),this.opacity=e.opacity||Yt._defaultOpacity,x(this,Er,e.boxes||null),x(this,Qg,e.methodOfCreation||""),x(this,wd,e.text||""),this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",e.highlightId>-1?(x(this,Ei,!0),T(this,Nt,a0).call(this,e),T(this,Nt,Ol).call(this)):o(this,Er)&&(x(this,xd,e.anchorNode),x(this,Xg,e.anchorOffset),x(this,$g,e.focusNode),x(this,Kg,e.focusOffset),T(this,Nt,aS).call(this),T(this,Nt,Ol).call(this),this.rotate(this.rotation)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-highlight-added-alert")}static get _keyboardManager(){const e=Yt.prototype;return Ct(this,"_keyboardManager",new sm([[["ArrowLeft","mac+ArrowLeft"],e._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],e._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],e._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],e._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:o(this,Ei)?"free_highlight":"highlight",color:this._uiManager.getNonHCMColorName(this.color),thickness:o(this,vs),methodOfCreation:o(this,Qg)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.getNonHCMColorName(this.color)}}static computeTelemetryFinalData(e){return{numberOfColors:e.get("color").size}}static initialize(e,n){var a;be.initialize(e,n),Yt._defaultColor||(Yt._defaultColor=((a=n.highlightColors)==null?void 0:a.values().next().value)||"#fff066")}static updateDefaultParams(e,n){switch(e){case Bt.HIGHLIGHT_COLOR:Yt._defaultColor=n;break;case Bt.HIGHLIGHT_THICKNESS:Yt._defaultThickness=n;break}}translateInPage(e,n){}get toolbarPosition(){return o(this,Sd)}get commentButtonPosition(){return o(this,Ad)}updateParams(e,n){switch(e){case Bt.HIGHLIGHT_COLOR:T(this,Nt,RN).call(this,n);break;case Bt.HIGHLIGHT_THICKNESS:T(this,Nt,LN).call(this,n);break}}static get defaultPropertiesToUpdate(){return[[Bt.HIGHLIGHT_COLOR,Yt._defaultColor],[Bt.HIGHLIGHT_THICKNESS,Yt._defaultThickness]]}get propertiesToUpdate(){return[[Bt.HIGHLIGHT_COLOR,this.color||Yt._defaultColor],[Bt.HIGHLIGHT_THICKNESS,o(this,vs)||Yt._defaultThickness],[Bt.HIGHLIGHT_FREE,o(this,Ei)]]}onUpdatedColor(){var e,n;(e=this.parent)==null||e.drawLayer.updateProperties(o(this,Un),{root:{fill:this.color,"fill-opacity":this.opacity}}),(n=o(this,Yg))==null||n.updateColor(this.color),super.onUpdatedColor()}get toolbarButtons(){return this._uiManager.highlightColors?[["colorPicker",x(this,Yg,new yp({editor:this}))]]:super.toolbarButtons}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(T(this,Nt,o0).call(this))}getBaseTranslation(){return[0,0]}getRect(e,n){return super.getRect(e,n,T(this,Nt,o0).call(this))}onceAdded(e){this.annotationElementId||this.parent.addUndoableEditor(this),e&&this.div.focus()}remove(){T(this,Nt,rS).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(T(this,Nt,Ol).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){var a;let n=!1;this.parent&&!e?T(this,Nt,rS).call(this):e&&(T(this,Nt,Ol).call(this,e),n=!this.parent&&((a=this.div)==null?void 0:a.classList.contains("selectedEditor"))),super.setParent(e),this.show(this._isVisible),n&&this.select()}rotate(e){var l,c,h;const{drawLayer:n}=this.parent;let a;o(this,Ei)?(e=(e-this.rotation+360)%360,a=T(l=Yt,Ss,Zu).call(l,o(this,Fn).box,e)):a=T(c=Yt,Ss,Zu).call(c,[this.x,this.y,this.width,this.height],e),n.updateProperties(o(this,Un),{bbox:a,root:{"data-main-rotation":e}}),n.updateProperties(o(this,zi),{bbox:T(h=Yt,Ss,Zu).call(h,o(this,fn).box,e),root:{"data-main-rotation":e}})}render(){if(this.div)return this.div;const e=super.render();o(this,wd)&&(e.setAttribute("aria-label",o(this,wd)),e.setAttribute("role","mark")),o(this,Ei)?e.classList.add("free"):this.div.addEventListener("keydown",T(this,Nt,ON).bind(this),{signal:this._uiManager._signal});const n=x(this,Bc,document.createElement("div"));return e.append(n),n.setAttribute("aria-hidden","true"),n.className="internal",n.style.clipPath=o(this,jc),this.setDims(this.width,this.height),r2(this,o(this,Bc),["pointerover","pointerleave"]),this.enableEditing(),e}pointerover(){var e;this.isSelected||(e=this.parent)==null||e.drawLayer.updateProperties(o(this,zi),{rootClass:{hovered:!0}})}pointerleave(){var e;this.isSelected||(e=this.parent)==null||e.drawLayer.updateProperties(o(this,zi),{rootClass:{hovered:!1}})}_moveCaret(e){switch(this.parent.unselect(this),e){case 0:case 2:T(this,Nt,r0).call(this,!0);break;case 1:case 3:T(this,Nt,r0).call(this,!1);break}}select(){var e;super.select(),o(this,zi)&&((e=this.parent)==null||e.drawLayer.updateProperties(o(this,zi),{rootClass:{hovered:!1,selected:!0}}))}unselect(){var e;super.unselect(),o(this,zi)&&((e=this.parent)==null||e.drawLayer.updateProperties(o(this,zi),{rootClass:{selected:!1}}),o(this,Ei)||T(this,Nt,r0).call(this,!1))}get _mustFixPosition(){return!o(this,Ei)}show(e=this._isVisible){super.show(e),this.parent&&(this.parent.drawLayer.updateProperties(o(this,Un),{rootClass:{hidden:!e}}),this.parent.drawLayer.updateProperties(o(this,zi),{rootClass:{hidden:!e}}))}static startHighlighting(e,n,{target:a,x:l,y:c}){const{x:h,y:f,width:p,height:m}=a.getBoundingClientRect(),y=new AbortController,v=e.combinedSignal(y),w=C=>{y.abort(),T(this,Ss,PN).call(this,e,C)};window.addEventListener("blur",w,{signal:v}),window.addEventListener("pointerup",w,{signal:v}),window.addEventListener("pointerdown",Me,{capture:!0,passive:!1,signal:v}),window.addEventListener("contextmenu",Wn,{signal:v}),a.addEventListener("pointermove",T(this,Ss,zN).bind(this,e),{signal:v}),this._freeHighlight=new sS({x:l,y:c},[h,f,p,m],e.scale,this._defaultThickness/2,n,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=e.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static async deserialize(e,n,a){var _,M,N,R;let l=null;if(e instanceof fN){const{data:{quadPoints:L,rect:k,rotation:j,id:z,color:I,opacity:K,popupRef:J,richText:W,contentsObj:tt,creationDate:X,modificationDate:it},parent:{page:{pageNumber:et}}}=e;l=e={annotationType:At.HIGHLIGHT,color:Array.from(I),opacity:K,quadPoints:L,boxes:null,pageIndex:et-1,rect:k.slice(0),rotation:j,annotationElementId:z,id:z,deleted:!1,popupRef:J,richText:W,comment:(tt==null?void 0:tt.str)||null,creationDate:X,modificationDate:it}}else if(e instanceof KS){const{data:{inkLists:L,rect:k,rotation:j,id:z,color:I,borderStyle:{rawWidth:K},popupRef:J,richText:W,contentsObj:tt,creationDate:X,modificationDate:it},parent:{page:{pageNumber:et}}}=e;l=e={annotationType:At.HIGHLIGHT,color:Array.from(I),thickness:K,inkLists:L,boxes:null,pageIndex:et-1,rect:k.slice(0),rotation:j,annotationElementId:z,id:z,deleted:!1,popupRef:J,richText:W,comment:(tt==null?void 0:tt.str)||null,creationDate:X,modificationDate:it}}const{color:c,quadPoints:h,inkLists:f,opacity:p}=e,m=await super.deserialize(e,n,a);m.color=ct.makeHexColor(...c),m.opacity=p||1,f&&x(m,vs,e.thickness),m._initialData=l,e.comment&&m.setCommentData(e);const[y,v]=m.pageDimensions,[w,C]=m.pageTranslation;if(h){const L=x(m,Er,[]);for(let k=0;k<h.length;k+=8)L.push({x:(h[k]-w)/y,y:1-(h[k+1]-C)/v,width:(h[k+2]-h[k])/y,height:(h[k+1]-h[k+5])/v});T(_=m,Nt,aS).call(_),T(M=m,Nt,Ol).call(M),m.rotate(m.rotation)}else if(f){x(m,Ei,!0);const L=f[0],k={x:L[0]-w,y:v-(L[1]-C)},j=new sS(k,[0,0,y,v],1,o(m,vs)/2,!0,.001);for(let K=0,J=L.length;K<J;K+=2)k.x=L[K]-w,k.y=v-(L[K+1]-C),j.add(k);const{id:z,clipPathId:I}=n.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:m.color,"fill-opacity":m._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:j.toSVGPath()}},!0,!0);T(N=m,Nt,a0).call(N,{highlightOutlines:j.getOutlines(),highlightId:z,clipPathId:I}),T(R=m,Nt,Ol).call(R),m.rotate(m.parentRotation)}return m}serialize(e=!1){if(this.isEmpty()||e)return null;if(this.deleted)return this.serializeDeleted();const n=be._colorManager.convert(this._uiManager.getNonHCMColor(this.color)),a=super.serialize(e);return Object.assign(a,{color:n,opacity:this.opacity,thickness:o(this,vs),quadPoints:T(this,Nt,jN).call(this),outlines:T(this,Nt,BN).call(this,a.rect)}),this.addComment(a),this.annotationElementId&&!T(this,Nt,IN).call(this,a)?null:(a.id=this.annotationElementId,a)}renderAnnotationElement(e){return this.deleted?(e.hide(),null):(e.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}static canCreateNewEmptyEditor(){return!1}};xd=new WeakMap,Xg=new WeakMap,Er=new WeakMap,jc=new WeakMap,Yg=new WeakMap,fn=new WeakMap,$g=new WeakMap,Kg=new WeakMap,Bc=new WeakMap,Fn=new WeakMap,Un=new WeakMap,Ei=new WeakMap,Ad=new WeakMap,Sd=new WeakMap,zi=new WeakMap,wd=new WeakMap,vs=new WeakMap,Qg=new WeakMap,Nt=new WeakSet,aS=function(){const e=new iS(o(this,Er),.001);x(this,Fn,e.getOutlines()),[this.x,this.y,this.width,this.height]=o(this,Fn).box;const n=new iS(o(this,Er),.0025,.001,this._uiManager.direction==="ltr");x(this,fn,n.getOutlines());const{firstPoint:a}=o(this,Fn);x(this,Ad,[(a[0]-this.x)/this.width,(a[1]-this.y)/this.height]);const{lastPoint:l}=o(this,fn);x(this,Sd,[(l[0]-this.x)/this.width,(l[1]-this.y)/this.height])},a0=function({highlightOutlines:e,highlightId:n,clipPathId:a}){var v,w;if(x(this,Fn,e),x(this,fn,e.getNewOutline(o(this,vs)/2+1.5,.0025)),n>=0)x(this,Un,n),x(this,jc,a),this.parent.drawLayer.finalizeDraw(n,{bbox:e.box,path:{d:e.toSVGPath()}}),x(this,zi,this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:o(this,fn).box,path:{d:o(this,fn).toSVGPath()}},!0));else if(this.parent){const C=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(o(this,Un),{bbox:T(v=Yt,Ss,Zu).call(v,o(this,Fn).box,(C-this.rotation+360)%360),path:{d:e.toSVGPath()}}),this.parent.drawLayer.updateProperties(o(this,zi),{bbox:T(w=Yt,Ss,Zu).call(w,o(this,fn).box,C),path:{d:o(this,fn).toSVGPath()}})}const[c,h,f,p]=e.box;switch(this.rotation){case 0:this.x=c,this.y=h,this.width=f,this.height=p;break;case 90:{const[C,_]=this.parentDimensions;this.x=h,this.y=1-c,this.width=f*_/C,this.height=p*C/_;break}case 180:this.x=1-c,this.y=1-h,this.width=f,this.height=p;break;case 270:{const[C,_]=this.parentDimensions;this.x=1-h,this.y=c,this.width=f*_/C,this.height=p*C/_;break}}const{firstPoint:m}=e;x(this,Ad,[(m[0]-c)/f,(m[1]-h)/p]);const{lastPoint:y}=o(this,fn);x(this,Sd,[(y[0]-c)/f,(y[1]-h)/p])},RN=function(e){const n=(c,h)=>{this.color=c,this.opacity=h,this.onUpdatedColor()},a=this.color,l=this.opacity;this.addCommands({cmd:n.bind(this,e,Yt._defaultOpacity),undo:n.bind(this,a,l),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Bt.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.getNonHCMColorName(e)},!0)},LN=function(e){const n=o(this,vs),a=l=>{x(this,vs,l),T(this,Nt,kN).call(this,l)};this.addCommands({cmd:a.bind(this,e),undo:a.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Bt.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:e},!0)},kN=function(e){o(this,Ei)&&(T(this,Nt,a0).call(this,{highlightOutlines:o(this,Fn).getNewOutline(e/2)}),this.fixAndSetPosition(),this.setDims(this.width,this.height))},rS=function(){o(this,Un)===null||!this.parent||(this.parent.drawLayer.remove(o(this,Un)),x(this,Un,null),this.parent.drawLayer.remove(o(this,zi)),x(this,zi,null))},Ol=function(e=this.parent){o(this,Un)===null&&({id:Ze(this,Un)._,clipPathId:Ze(this,jc)._}=e.drawLayer.draw({bbox:o(this,Fn).box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":this.opacity},rootClass:{highlight:!0,free:o(this,Ei)},path:{d:o(this,Fn).toSVGPath()}},!1,!0),x(this,zi,e.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:o(this,Ei)},bbox:o(this,fn).box,path:{d:o(this,fn).toSVGPath()}},o(this,Ei))),o(this,Bc)&&(o(this,Bc).style.clipPath=o(this,jc)))},Ss=new WeakSet,Zu=function([e,n,a,l],c){switch(c){case 90:return[1-n-l,e,l,a];case 180:return[1-e-a,1-n-l,a,l];case 270:return[n,1-e-a,l,a]}return[e,n,a,l]},ON=function(e){Yt._keyboardManager.exec(this,e)},r0=function(e){if(!o(this,xd))return;const n=window.getSelection();e?n.setPosition(o(this,xd),o(this,Xg)):n.setPosition(o(this,$g),o(this,Kg))},o0=function(){return o(this,Ei)?this.rotation:0},jN=function(){if(o(this,Ei))return null;const[e,n]=this.pageDimensions,[a,l]=this.pageTranslation,c=o(this,Er),h=new Float32Array(c.length*8);let f=0;for(const{x:p,y:m,width:y,height:v}of c){const w=p*e+a,C=(1-m)*n+l;h[f]=h[f+4]=w,h[f+1]=h[f+3]=C,h[f+2]=h[f+6]=w+y*e,h[f+5]=h[f+7]=C-v*n,f+=8}return h},BN=function(e){return o(this,Fn).serialize(e,T(this,Nt,o0).call(this))},zN=function(e,n){this._freeHighlight.add(n)&&e.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})},PN=function(e,n){this._freeHighlight.isEmpty()?e.drawLayer.remove(this._freeHighlightId):e.createAndAddNewEditor(n,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},IN=function(e){const{color:n}=this._initialData;return this.hasEditedComment||e.color.some((a,l)=>a!==n[l])},E(Yt,Ss),nt(Yt,"_defaultColor",null),nt(Yt,"_defaultOpacity",1),nt(Yt,"_defaultThickness",12),nt(Yt,"_type","highlight"),nt(Yt,"_editorType",At.HIGHLIGHT),nt(Yt,"_freeHighlightId",-1),nt(Yt,"_freeHighlight",null),nt(Yt,"_freeHighlightClipId","");let R0=Yt;var zc;class FN{constructor(){E(this,zc,Object.create(null))}updateProperty(t,e){this[t]=e,this.updateSVGProperty(t,e)}updateProperties(t){if(t)for(const[e,n]of Object.entries(t))e.startsWith("_")||this.updateProperty(e,n)}updateSVGProperty(t,e){o(this,zc)[t]=e}toSVGProperties(){const t=o(this,zc);return x(this,zc,Object.create(null)),{root:t}}reset(){x(this,zc,Object.create(null))}updateAll(t=this){this.updateProperties(t)}clone(){ge("Not implemented")}}zc=new WeakMap;var Hn,Ed,li,Pc,Ic,$o,Ko,Qo,Fc,Ht,oS,lS,cS,op,UN,l0,lp,Ju;const ft=class ft extends be{constructor(e){super(e);E(this,Ht);E(this,Hn,null);E(this,Ed);nt(this,"_colorPicker",null);nt(this,"_drawId",null);x(this,Ed,e.mustBeCommitted||!1),this._addOutlines(e)}onUpdatedColor(){var e;(e=this._colorPicker)==null||e.update(this.color),super.onUpdatedColor()}_addOutlines(e){e.drawOutlines&&(T(this,Ht,oS).call(this,e),T(this,Ht,op).call(this))}static _mergeSVGProperties(e,n){const a=new Set(Object.keys(e));for(const[l,c]of Object.entries(n))a.has(l)?Object.assign(e[l],c):e[l]=c;return e}static getDefaultDrawingOptions(e){ge("Not implemented")}static get typesMap(){ge("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(e,n){const a=this.typesMap.get(e);a&&this._defaultDrawingOptions.updateProperty(a,n),this._currentParent&&(o(ft,li).updateProperty(a,n),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(e,n){const a=this.constructor.typesMap.get(e);a&&this._updateProperty(e,a,n)}static get defaultPropertiesToUpdate(){const e=[],n=this._defaultDrawingOptions;for(const[a,l]of this.typesMap)e.push([a,n[l]]);return e}get propertiesToUpdate(){const e=[],{_drawingOptions:n}=this;for(const[a,l]of this.constructor.typesMap)e.push([a,n[l]]);return e}_updateProperty(e,n,a){const l=this._drawingOptions,c=l[n],h=f=>{var m;l.updateProperty(n,f);const p=o(this,Hn).updateProperty(n,f);p&&T(this,Ht,lp).call(this,p),(m=this.parent)==null||m.drawLayer.updateProperties(this._drawId,l.toSVGProperties()),e===this.colorType&&this.onUpdatedColor()};this.addCommands({cmd:h.bind(this,a),undo:h.bind(this,c),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:e,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,ft._mergeSVGProperties(o(this,Hn).getPathResizingSVGProperties(T(this,Ht,l0).call(this)),{bbox:T(this,Ht,Ju).call(this)}))}_onResized(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,ft._mergeSVGProperties(o(this,Hn).getPathResizedSVGProperties(T(this,Ht,l0).call(this)),{bbox:T(this,Ht,Ju).call(this)}))}_onTranslating(e,n){var a;(a=this.parent)==null||a.drawLayer.updateProperties(this._drawId,{bbox:T(this,Ht,Ju).call(this)})}_onTranslated(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,ft._mergeSVGProperties(o(this,Hn).getPathTranslatedSVGProperties(T(this,Ht,l0).call(this),this.parentDimensions),{bbox:T(this,Ht,Ju).call(this)}))}_onStartDragging(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(e){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,o(this,Ed)&&(x(this,Ed,!1),this.commit(),this.parent.setSelected(this),e&&this.isOnScreen&&this.div.focus())}remove(){T(this,Ht,cS).call(this),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(T(this,Ht,op).call(this),T(this,Ht,lp).call(this,o(this,Hn).box),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){var a;let n=!1;this.parent&&!e?(this._uiManager.removeShouldRescale(this),T(this,Ht,cS).call(this)):e&&(this._uiManager.addShouldRescale(this),T(this,Ht,op).call(this,e),n=!this.parent&&((a=this.div)==null?void 0:a.classList.contains("selectedEditor"))),super.setParent(e),n&&this.select()}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,ft._mergeSVGProperties({bbox:T(this,Ht,Ju).call(this)},o(this,Hn).updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&T(this,Ht,lp).call(this,o(this,Hn).updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let e,n;this._isCopy&&(e=this.x,n=this.y);const a=super.render();a.classList.add("draw");const l=document.createElement("div");return a.append(l),l.setAttribute("aria-hidden","true"),l.className="internal",this.setDims(),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(e,n),a}static createDrawerInstance(e,n,a,l,c){ge("Not implemented")}static startDrawing(e,n,a,l){var M;const{target:c,offsetX:h,offsetY:f,pointerId:p,pointerType:m}=l;if(o(ft,Ko)&&o(ft,Ko)!==m)return;const{viewport:{rotation:y}}=e,{width:v,height:w}=c.getBoundingClientRect(),C=x(ft,Pc,new AbortController),_=e.combinedSignal(C);if(o(ft,$o)||x(ft,$o,p),o(ft,Ko)??x(ft,Ko,m),window.addEventListener("pointerup",N=>{var R;o(ft,$o)===N.pointerId?this._endDraw(N):(R=o(ft,Qo))==null||R.delete(N.pointerId)},{signal:_}),window.addEventListener("pointercancel",N=>{var R;o(ft,$o)===N.pointerId?this._currentParent.endDrawingSession():(R=o(ft,Qo))==null||R.delete(N.pointerId)},{signal:_}),window.addEventListener("pointerdown",N=>{o(ft,Ko)===N.pointerType&&((o(ft,Qo)||x(ft,Qo,new Set)).add(N.pointerId),o(ft,li).isCancellable()&&(o(ft,li).removeLastElement(),o(ft,li).isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:_}),window.addEventListener("contextmenu",Wn,{signal:_}),c.addEventListener("pointermove",this._drawMove.bind(this),{signal:_}),c.addEventListener("touchmove",N=>{N.timeStamp===o(ft,Fc)&&Me(N)},{signal:_}),e.toggleDrawing(),(M=n._editorUndoBar)==null||M.hide(),o(ft,li)){e.drawLayer.updateProperties(this._currentDrawId,o(ft,li).startNew(h,f,v,w,y));return}n.updateUIForDefaultProperties(this),x(ft,li,this.createDrawerInstance(h,f,v,w,y)),x(ft,Ic,this.getDefaultDrawingOptions()),this._currentParent=e,{id:this._currentDrawId}=e.drawLayer.draw(this._mergeSVGProperties(o(ft,Ic).toSVGProperties(),o(ft,li).defaultSVGProperties),!0,!1)}static _drawMove(e){var c;if(x(ft,Fc,-1),!o(ft,li))return;const{offsetX:n,offsetY:a,pointerId:l}=e;if(o(ft,$o)===l){if(((c=o(ft,Qo))==null?void 0:c.size)>=1){this._endDraw(e);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,o(ft,li).add(n,a)),x(ft,Fc,e.timeStamp),Me(e)}}static _cleanup(e){e&&(this._currentDrawId=-1,this._currentParent=null,x(ft,li,null),x(ft,Ic,null),x(ft,Ko,null),x(ft,Fc,NaN)),o(ft,Pc)&&(o(ft,Pc).abort(),x(ft,Pc,null),x(ft,$o,NaN),x(ft,Qo,null))}static _endDraw(e){const n=this._currentParent;if(n){if(n.toggleDrawing(!0),this._cleanup(!1),(e==null?void 0:e.target)===n.div&&n.drawLayer.updateProperties(this._currentDrawId,o(ft,li).end(e.offsetX,e.offsetY)),this.supportMultipleDrawings){const a=o(ft,li),l=this._currentDrawId,c=a.getLastElement();n.addCommands({cmd:()=>{n.drawLayer.updateProperties(l,a.setLastElement(c))},undo:()=>{n.drawLayer.updateProperties(l,a.removeLastElement())},mustExec:!1,type:Bt.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(e){const n=this._currentParent;if(!n)return null;if(n.toggleDrawing(!0),n.cleanUndoStack(Bt.DRAW_STEP),!o(ft,li).isEmpty()){const{pageDimensions:[a,l],scale:c}=n,h=n.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:o(ft,li).getOutlines(a*c,l*c,c,this._INNER_MARGIN),drawingOptions:o(ft,Ic),mustBeCommitted:!e});return this._cleanup(!0),h}return n.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(e){}static deserializeDraw(e,n,a,l,c,h){ge("Not implemented")}static async deserialize(e,n,a){var y,v;const{rawDims:{pageWidth:l,pageHeight:c,pageX:h,pageY:f}}=n.viewport,p=this.deserializeDraw(h,f,l,c,this._INNER_MARGIN,e),m=await super.deserialize(e,n,a);return m.createDrawingOptions(e),T(y=m,Ht,oS).call(y,{drawOutlines:p}),T(v=m,Ht,op).call(v),m.onScaleChanging(),m.rotate(),m}serializeDraw(e){const[n,a]=this.pageTranslation,[l,c]=this.pageDimensions;return o(this,Hn).serialize([n,a,l,c],e)}renderAnnotationElement(e){return e.updateEdited({rect:this.getPDFRect()}),null}static canCreateNewEmptyEditor(){return!1}};Hn=new WeakMap,Ed=new WeakMap,li=new WeakMap,Pc=new WeakMap,Ic=new WeakMap,$o=new WeakMap,Ko=new WeakMap,Qo=new WeakMap,Fc=new WeakMap,Ht=new WeakSet,oS=function({drawOutlines:e,drawId:n,drawingOptions:a}){x(this,Hn,e),this._drawingOptions||(this._drawingOptions=a),this.annotationElementId||this._uiManager.a11yAlert(`pdfjs-editor-${this.editorType}-added-alert`),n>=0?(this._drawId=n,this.parent.drawLayer.finalizeDraw(n,e.defaultProperties)):this._drawId=T(this,Ht,lS).call(this,e,this.parent),T(this,Ht,lp).call(this,e.box)},lS=function(e,n){const{id:a}=n.drawLayer.draw(ft._mergeSVGProperties(this._drawingOptions.toSVGProperties(),e.defaultSVGProperties),!1,!1);return a},cS=function(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())},op=function(e=this.parent){if(!(this._drawId!==null&&this.parent===e)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,e.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=T(this,Ht,lS).call(this,o(this,Hn),e)}},UN=function([e,n,a,l]){const{parentDimensions:[c,h],rotation:f}=this;switch(f){case 90:return[n,1-e,a*(h/c),l*(c/h)];case 180:return[1-e,1-n,a,l];case 270:return[1-n,e,a*(h/c),l*(c/h)];default:return[e,n,a,l]}},l0=function(){const{x:e,y:n,width:a,height:l,parentDimensions:[c,h],rotation:f}=this;switch(f){case 90:return[1-n,e,a*(c/h),l*(h/c)];case 180:return[1-e,1-n,a,l];case 270:return[n,1-e,a*(c/h),l*(h/c)];default:return[e,n,a,l]}},lp=function(e){[this.x,this.y,this.width,this.height]=T(this,Ht,UN).call(this,e),this.div&&(this.fixAndSetPosition(),this.setDims()),this._onResized()},Ju=function(){const{x:e,y:n,width:a,height:l,rotation:c,parentRotation:h,parentDimensions:[f,p]}=this;switch((c*4+h)/90){case 1:return[1-n-l,e,l,a];case 2:return[1-e-a,1-n-l,a,l];case 3:return[n,1-e-a,l,a];case 4:return[e,n-a*(f/p),l*(p/f),a*(f/p)];case 5:return[1-n,e,a*(f/p),l*(p/f)];case 6:return[1-e-l*(p/f),1-n,l*(p/f),a*(f/p)];case 7:return[n-a*(f/p),1-e-l*(p/f),a*(f/p),l*(p/f)];case 8:return[e-a,n-l,a,l];case 9:return[1-n,e-a,l,a];case 10:return[1-e,1-n,a,l];case 11:return[n-l,1-e,l,a];case 12:return[e-l*(p/f),n,l*(p/f),a*(f/p)];case 13:return[1-n-a*(f/p),e-l*(p/f),a*(f/p),l*(p/f)];case 14:return[1-e,1-n-a*(f/p),l*(p/f),a*(f/p)];case 15:return[n,1-e,a*(f/p),l*(p/f)];default:return[e,n,a,l]}},nt(ft,"_currentDrawId",-1),nt(ft,"_currentParent",null),E(ft,li,null),E(ft,Pc,null),E(ft,Ic,null),E(ft,$o,NaN),E(ft,Ko,null),E(ft,Qo,null),E(ft,Fc,NaN),nt(ft,"_INNER_MARGIN",3);let L0=ft;var ya,ci,ui,Uc,Td,Vi,Ti,xs,Hc,Gc,Vc,_d,c0;class g3{constructor(t,e,n,a,l,c){E(this,_d);E(this,ya,new Float64Array(6));E(this,ci);E(this,ui);E(this,Uc);E(this,Td);E(this,Vi);E(this,Ti,"");E(this,xs,0);E(this,Hc,new rm);E(this,Gc);E(this,Vc);x(this,Gc,n),x(this,Vc,a),x(this,Uc,l),x(this,Td,c),[t,e]=T(this,_d,c0).call(this,t,e);const h=x(this,ci,[NaN,NaN,NaN,NaN,t,e]);x(this,Vi,[t,e]),x(this,ui,[{line:h,points:o(this,Vi)}]),o(this,ya).set(h,0)}updateProperty(t,e){t==="stroke-width"&&x(this,Td,e)}isEmpty(){return!o(this,ui)||o(this,ui).length===0}isCancellable(){return o(this,Vi).length<=10}add(t,e){[t,e]=T(this,_d,c0).call(this,t,e);const[n,a,l,c]=o(this,ya).subarray(2,6),h=t-l,f=e-c;return Math.hypot(o(this,Gc)*h,o(this,Vc)*f)<=2?null:(o(this,Vi).push(t,e),isNaN(n)?(o(this,ya).set([l,c,t,e],2),o(this,ci).push(NaN,NaN,NaN,NaN,t,e),{path:{d:this.toSVGPath()}}):(isNaN(o(this,ya)[0])&&o(this,ci).splice(6,6),o(this,ya).set([n,a,l,c,t,e],0),o(this,ci).push(...lt.createBezierPoints(n,a,l,c,t,e)),{path:{d:this.toSVGPath()}}))}end(t,e){const n=this.add(t,e);return n||(o(this,Vi).length===2?{path:{d:this.toSVGPath()}}:null)}startNew(t,e,n,a,l){x(this,Gc,n),x(this,Vc,a),x(this,Uc,l),[t,e]=T(this,_d,c0).call(this,t,e);const c=x(this,ci,[NaN,NaN,NaN,NaN,t,e]);x(this,Vi,[t,e]);const h=o(this,ui).at(-1);return h&&(h.line=new Float32Array(h.line),h.points=new Float32Array(h.points)),o(this,ui).push({line:c,points:o(this,Vi)}),o(this,ya).set(c,0),x(this,xs,0),this.toSVGPath(),null}getLastElement(){return o(this,ui).at(-1)}setLastElement(t){return o(this,ui)?(o(this,ui).push(t),x(this,ci,t.line),x(this,Vi,t.points),x(this,xs,0),{path:{d:this.toSVGPath()}}):o(this,Hc).setLastElement(t)}removeLastElement(){if(!o(this,ui))return o(this,Hc).removeLastElement();o(this,ui).pop(),x(this,Ti,"");for(let t=0,e=o(this,ui).length;t<e;t++){const{line:n,points:a}=o(this,ui)[t];x(this,ci,n),x(this,Vi,a),x(this,xs,0),this.toSVGPath()}return{path:{d:o(this,Ti)}}}toSVGPath(){const t=lt.svgRound(o(this,ci)[4]),e=lt.svgRound(o(this,ci)[5]);if(o(this,Vi).length===2)return x(this,Ti,`${o(this,Ti)} M ${t} ${e} Z`),o(this,Ti);if(o(this,Vi).length<=6){const a=o(this,Ti).lastIndexOf("M");x(this,Ti,`${o(this,Ti).slice(0,a)} M ${t} ${e}`),x(this,xs,6)}if(o(this,Vi).length===4){const a=lt.svgRound(o(this,ci)[10]),l=lt.svgRound(o(this,ci)[11]);return x(this,Ti,`${o(this,Ti)} L ${a} ${l}`),x(this,xs,12),o(this,Ti)}const n=[];o(this,xs)===0&&(n.push(`M ${t} ${e}`),x(this,xs,6));for(let a=o(this,xs),l=o(this,ci).length;a<l;a+=6){const[c,h,f,p,m,y]=o(this,ci).slice(a,a+6).map(lt.svgRound);n.push(`C${c} ${h} ${f} ${p} ${m} ${y}`)}return x(this,Ti,o(this,Ti)+n.join(" ")),x(this,xs,o(this,ci).length),o(this,Ti)}getOutlines(t,e,n,a){const l=o(this,ui).at(-1);return l.line=new Float32Array(l.line),l.points=new Float32Array(l.points),o(this,Hc).build(o(this,ui),t,e,n,o(this,Uc),o(this,Td),a),x(this,ya,null),x(this,ci,null),x(this,ui,null),x(this,Ti,null),o(this,Hc)}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}ya=new WeakMap,ci=new WeakMap,ui=new WeakMap,Uc=new WeakMap,Td=new WeakMap,Vi=new WeakMap,Ti=new WeakMap,xs=new WeakMap,Hc=new WeakMap,Gc=new WeakMap,Vc=new WeakMap,_d=new WeakSet,c0=function(t,e){return lt._normalizePoint(t,e,o(this,Gc),o(this,Vc),o(this,Uc))};var qi,Wg,Zg,Gn,va,xa,Cd,Nd,qc,Ci,Ya,HN,GN,VN;class rm extends lt{constructor(){super(...arguments);E(this,Ci);E(this,qi);E(this,Wg,0);E(this,Zg);E(this,Gn);E(this,va);E(this,xa);E(this,Cd);E(this,Nd);E(this,qc)}build(e,n,a,l,c,h,f){x(this,va,n),x(this,xa,a),x(this,Cd,l),x(this,Nd,c),x(this,qc,h),x(this,Zg,f??0),x(this,Gn,e),T(this,Ci,GN).call(this)}get thickness(){return o(this,qc)}setLastElement(e){return o(this,Gn).push(e),{path:{d:this.toSVGPath()}}}removeLastElement(){return o(this,Gn).pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const e=[];for(const{line:n}of o(this,Gn)){if(e.push(`M${lt.svgRound(n[4])} ${lt.svgRound(n[5])}`),n.length===6){e.push("Z");continue}if(n.length===12&&isNaN(n[6])){e.push(`L${lt.svgRound(n[10])} ${lt.svgRound(n[11])}`);continue}for(let a=6,l=n.length;a<l;a+=6){const[c,h,f,p,m,y]=n.subarray(a,a+6).map(lt.svgRound);e.push(`C${c} ${h} ${f} ${p} ${m} ${y}`)}}return e.join("")}serialize([e,n,a,l],c){const h=[],f=[],[p,m,y,v]=T(this,Ci,HN).call(this);let w,C,_,M,N,R,L,k,j;switch(o(this,Nd)){case 0:j=lt._rescale,w=e,C=n+l,_=a,M=-l,N=e+p*a,R=n+(1-m-v)*l,L=e+(p+y)*a,k=n+(1-m)*l;break;case 90:j=lt._rescaleAndSwap,w=e,C=n,_=a,M=l,N=e+m*a,R=n+p*l,L=e+(m+v)*a,k=n+(p+y)*l;break;case 180:j=lt._rescale,w=e+a,C=n,_=-a,M=l,N=e+(1-p-y)*a,R=n+m*l,L=e+(1-p)*a,k=n+(m+v)*l;break;case 270:j=lt._rescaleAndSwap,w=e+a,C=n+l,_=-a,M=-l,N=e+(1-m-v)*a,R=n+(1-p-y)*l,L=e+(1-m)*a,k=n+(1-p)*l;break}for(const{line:z,points:I}of o(this,Gn))h.push(j(z,w,C,_,M,c?new Array(z.length):null)),f.push(j(I,w,C,_,M,c?new Array(I.length):null));return{lines:h,points:f,rect:[N,R,L,k]}}static deserialize(e,n,a,l,c,{paths:{lines:h,points:f},rotation:p,thickness:m}){const y=[];let v,w,C,_,M;switch(p){case 0:M=lt._rescale,v=-e/a,w=n/l+1,C=1/a,_=-1/l;break;case 90:M=lt._rescaleAndSwap,v=-n/l,w=-e/a,C=1/l,_=1/a;break;case 180:M=lt._rescale,v=e/a+1,w=-n/l,C=-1/a,_=1/l;break;case 270:M=lt._rescaleAndSwap,v=n/l+1,w=e/a+1,C=-1/l,_=-1/a;break}if(!h){h=[];for(const R of f){const L=R.length;if(L===2){h.push(new Float32Array([NaN,NaN,NaN,NaN,R[0],R[1]]));continue}if(L===4){h.push(new Float32Array([NaN,NaN,NaN,NaN,R[0],R[1],NaN,NaN,NaN,NaN,R[2],R[3]]));continue}const k=new Float32Array(3*(L-2));h.push(k);let[j,z,I,K]=R.subarray(0,4);k.set([NaN,NaN,NaN,NaN,j,z],0);for(let J=4;J<L;J+=2){const W=R[J],tt=R[J+1];k.set(lt.createBezierPoints(j,z,I,K,W,tt),(J-2)*3),[j,z,I,K]=[I,K,W,tt]}}}for(let R=0,L=h.length;R<L;R++)y.push({line:M(h[R].map(k=>k??NaN),v,w,C,_),points:M(f[R].map(k=>k??NaN),v,w,C,_)});const N=new this.prototype.constructor;return N.build(y,a,l,1,p,m,c),N}get box(){return o(this,qi)}updateProperty(e,n){return e==="stroke-width"?T(this,Ci,VN).call(this,n):null}updateParentDimensions([e,n],a){const[l,c]=T(this,Ci,Ya).call(this);x(this,va,e),x(this,xa,n),x(this,Cd,a);const[h,f]=T(this,Ci,Ya).call(this),p=h-l,m=f-c,y=o(this,qi);return y[0]-=p,y[1]-=m,y[2]+=2*p,y[3]+=2*m,y}updateRotation(e){return x(this,Wg,e),{path:{transform:this.rotationTransform}}}get viewBox(){return o(this,qi).map(lt.svgRound).join(" ")}get defaultProperties(){const[e,n]=o(this,qi);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${lt.svgRound(e)} ${lt.svgRound(n)}`}}}get rotationTransform(){const[,,e,n]=o(this,qi);let a=0,l=0,c=0,h=0,f=0,p=0;switch(o(this,Wg)){case 90:l=n/e,c=-e/n,f=e;break;case 180:a=-1,h=-1,f=e,p=n;break;case 270:l=-n/e,c=e/n,p=n;break;default:return""}return`matrix(${a} ${l} ${c} ${h} ${lt.svgRound(f)} ${lt.svgRound(p)})`}getPathResizingSVGProperties([e,n,a,l]){const[c,h]=T(this,Ci,Ya).call(this),[f,p,m,y]=o(this,qi);if(Math.abs(m-c)<=lt.PRECISION||Math.abs(y-h)<=lt.PRECISION){const M=e+a/2-(f+m/2),N=n+l/2-(p+y/2);return{path:{"transform-origin":`${lt.svgRound(e)} ${lt.svgRound(n)}`,transform:`${this.rotationTransform} translate(${M} ${N})`}}}const v=(a-2*c)/(m-2*c),w=(l-2*h)/(y-2*h),C=m/a,_=y/l;return{path:{"transform-origin":`${lt.svgRound(f)} ${lt.svgRound(p)}`,transform:`${this.rotationTransform} scale(${C} ${_}) translate(${lt.svgRound(c)} ${lt.svgRound(h)}) scale(${v} ${w}) translate(${lt.svgRound(-c)} ${lt.svgRound(-h)})`}}}getPathResizedSVGProperties([e,n,a,l]){const[c,h]=T(this,Ci,Ya).call(this),f=o(this,qi),[p,m,y,v]=f;if(f[0]=e,f[1]=n,f[2]=a,f[3]=l,Math.abs(y-c)<=lt.PRECISION||Math.abs(v-h)<=lt.PRECISION){const N=e+a/2-(p+y/2),R=n+l/2-(m+v/2);for(const{line:L,points:k}of o(this,Gn))lt._translate(L,N,R,L),lt._translate(k,N,R,k);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${lt.svgRound(e)} ${lt.svgRound(n)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const w=(a-2*c)/(y-2*c),C=(l-2*h)/(v-2*h),_=-w*(p+c)+e+c,M=-C*(m+h)+n+h;if(w!==1||C!==1||_!==0||M!==0)for(const{line:N,points:R}of o(this,Gn))lt._rescale(N,_,M,w,C,N),lt._rescale(R,_,M,w,C,R);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${lt.svgRound(e)} ${lt.svgRound(n)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([e,n],a){const[l,c]=a,h=o(this,qi),f=e-h[0],p=n-h[1];if(o(this,va)===l&&o(this,xa)===c)for(const{line:m,points:y}of o(this,Gn))lt._translate(m,f,p,m),lt._translate(y,f,p,y);else{const m=o(this,va)/l,y=o(this,xa)/c;x(this,va,l),x(this,xa,c);for(const{line:v,points:w}of o(this,Gn))lt._rescale(v,f,p,m,y,v),lt._rescale(w,f,p,m,y,w);h[2]*=m,h[3]*=y}return h[0]=e,h[1]=n,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${lt.svgRound(e)} ${lt.svgRound(n)}`}}}get defaultSVGProperties(){const e=o(this,qi);return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${lt.svgRound(e[0])} ${lt.svgRound(e[1])}`,transform:this.rotationTransform||null},bbox:e}}}qi=new WeakMap,Wg=new WeakMap,Zg=new WeakMap,Gn=new WeakMap,va=new WeakMap,xa=new WeakMap,Cd=new WeakMap,Nd=new WeakMap,qc=new WeakMap,Ci=new WeakSet,Ya=function(e=o(this,qc)){const n=o(this,Zg)+e/2*o(this,Cd);return o(this,Nd)%180===0?[n/o(this,va),n/o(this,xa)]:[n/o(this,xa),n/o(this,va)]},HN=function(){const[e,n,a,l]=o(this,qi),[c,h]=T(this,Ci,Ya).call(this,0);return[e+c,n+h,a-2*c,l-2*h]},GN=function(){const e=x(this,qi,new Float32Array([1/0,1/0,-1/0,-1/0]));for(const{line:l}of o(this,Gn)){if(l.length<=12){for(let f=4,p=l.length;f<p;f+=6)ct.pointBoundingBox(l[f],l[f+1],e);continue}let c=l[4],h=l[5];for(let f=6,p=l.length;f<p;f+=6){const[m,y,v,w,C,_]=l.subarray(f,f+6);ct.bezierBoundingBox(c,h,m,y,v,w,C,_,e),c=C,h=_}}const[n,a]=T(this,Ci,Ya).call(this);e[0]=Pi(e[0]-n,0,1),e[1]=Pi(e[1]-a,0,1),e[2]=Pi(e[2]+n,0,1),e[3]=Pi(e[3]+a,0,1),e[2]-=e[0],e[3]-=e[1]},VN=function(e){const[n,a]=T(this,Ci,Ya).call(this);x(this,qc,e);const[l,c]=T(this,Ci,Ya).call(this),[h,f]=[l-n,c-a],p=o(this,qi);return p[0]-=h,p[1]-=f,p[2]+=2*h,p[3]+=2*f,p};class hy extends FN{constructor(t){super(),this._viewParameters=t,super.updateProperties({fill:"none",stroke:be._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(t,e){t==="stroke-width"&&(e??(e=this["stroke-width"]),e*=this._viewParameters.realScale),super.updateSVGProperty(t,e)}clone(){const t=new hy(this._viewParameters);return t.updateAll(this),t}}var Z0,qN;const sh=class sh extends L0{constructor(e){super({...e,name:"inkEditor"});E(this,Z0);this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(e,n){be.initialize(e,n),this._defaultDrawingOptions=new hy(n.viewParameters)}static getDefaultDrawingOptions(e){const n=this._defaultDrawingOptions.clone();return n.updateProperties(e),n}static get supportMultipleDrawings(){return!0}static get typesMap(){return Ct(this,"typesMap",new Map([[Bt.INK_THICKNESS,"stroke-width"],[Bt.INK_COLOR,"stroke"],[Bt.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(e,n,a,l,c){return new g3(e,n,a,l,c,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(e,n,a,l,c,h){return rm.deserialize(e,n,a,l,c,h)}static async deserialize(e,n,a){let l=null;if(e instanceof KS){const{data:{inkLists:h,rect:f,rotation:p,id:m,color:y,opacity:v,borderStyle:{rawWidth:w},popupRef:C,richText:_,contentsObj:M,creationDate:N,modificationDate:R},parent:{page:{pageNumber:L}}}=e;l=e={annotationType:At.INK,color:Array.from(y),thickness:w,opacity:v,paths:{points:h},boxes:null,pageIndex:L-1,rect:f.slice(0),rotation:p,annotationElementId:m,id:m,deleted:!1,popupRef:C,richText:_,comment:(M==null?void 0:M.str)||null,creationDate:N,modificationDate:R}}const c=await super.deserialize(e,n,a);return c._initialData=l,e.comment&&c.setCommentData(e),c}get toolbarButtons(){return this._colorPicker||(this._colorPicker=new M0(this)),[["colorPicker",this._colorPicker]]}get colorType(){return Bt.INK_COLOR}get color(){return this._drawingOptions.stroke}get opacity(){return this._drawingOptions["stroke-opacity"]}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:e,_drawingOptions:n,parent:a}=this;n.updateSVGProperty("stroke-width"),a.drawLayer.updateProperties(e,n.toSVGProperties())}static onScaleChangingWhenDrawing(){const e=this._currentParent;e&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),e.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:e,thickness:n,opacity:a}){this._drawingOptions=sh.getDefaultDrawingOptions({stroke:ct.makeHexColor(...e),"stroke-width":n,"stroke-opacity":a})}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:n,points:a}=this.serializeDraw(e),{_drawingOptions:{stroke:l,"stroke-opacity":c,"stroke-width":h}}=this,f=Object.assign(super.serialize(e),{color:be._colorManager.convert(l),opacity:c,thickness:h,paths:{lines:n,points:a}});return this.addComment(f),e?(f.isCopy=!0,f):this.annotationElementId&&!T(this,Z0,qN).call(this,f)?null:(f.id=this.annotationElementId,f)}renderAnnotationElement(e){if(this.deleted)return e.hide(),null;const{points:n,rect:a}=this.serializeDraw(!1);return e.updateEdited({rect:a,thickness:this._drawingOptions["stroke-width"],points:n,popup:this.comment}),null}};Z0=new WeakSet,qN=function(e){const{color:n,thickness:a,opacity:l,pageIndex:c}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized||e.color.some((h,f)=>h!==n[f])||e.thickness!==a||e.opacity!==l||e.pageIndex!==c},nt(sh,"_type","ink"),nt(sh,"_editorType",At.INK),nt(sh,"_defaultDrawingOptions",null);let uS=sh;class hS extends rm{toSVGPath(){let t=super.toSVGPath();return t.endsWith("Z")||(t+="Z"),t}}const zb=8,Gf=3;var Xc,Kt,dS,Is,XN,YN,fS,u0,$N,KN,QN,pS,gS,WN;class Ea{static extractContoursFromText(t,{fontFamily:e,fontStyle:n,fontWeight:a},l,c,h,f){let p=new OffscreenCanvas(1,1),m=p.getContext("2d",{alpha:!1});const y=200,v=m.font=`${n} ${a} ${y}px ${e}`,{actualBoundingBoxLeft:w,actualBoundingBoxRight:C,actualBoundingBoxAscent:_,actualBoundingBoxDescent:M,fontBoundingBoxAscent:N,fontBoundingBoxDescent:R,width:L}=m.measureText(t),k=1.5,j=Math.ceil(Math.max(Math.abs(w)+Math.abs(C)||0,L)*k),z=Math.ceil(Math.max(Math.abs(_)+Math.abs(M)||y,Math.abs(N)+Math.abs(R)||y)*k);p=new OffscreenCanvas(j,z),m=p.getContext("2d",{alpha:!0,willReadFrequently:!0}),m.font=v,m.filter="grayscale(1)",m.fillStyle="white",m.fillRect(0,0,j,z),m.fillStyle="black",m.fillText(t,j*(k-1)/2,z*(3-k)/2);const I=T(this,Kt,pS).call(this,m.getImageData(0,0,j,z).data),K=T(this,Kt,QN).call(this,I),J=T(this,Kt,gS).call(this,K),W=T(this,Kt,fS).call(this,I,j,z,J);return this.processDrawnLines({lines:{curves:W,width:j,height:z},pageWidth:l,pageHeight:c,rotation:h,innerMargin:f,mustSmooth:!0,areContours:!0})}static process(t,e,n,a,l){const[c,h,f]=T(this,Kt,WN).call(this,t),[p,m]=T(this,Kt,KN).call(this,c,h,f,Math.hypot(h,f)*o(this,Xc).sigmaSFactor,o(this,Xc).sigmaR,o(this,Xc).kernelSize),y=T(this,Kt,gS).call(this,m),v=T(this,Kt,fS).call(this,p,h,f,y);return this.processDrawnLines({lines:{curves:v,width:h,height:f},pageWidth:e,pageHeight:n,rotation:a,innerMargin:l,mustSmooth:!0,areContours:!0})}static processDrawnLines({lines:t,pageWidth:e,pageHeight:n,rotation:a,innerMargin:l,mustSmooth:c,areContours:h}){a%180!==0&&([e,n]=[n,e]);const{curves:f,width:p,height:m}=t,y=t.thickness??0,v=[],w=Math.min(e/p,n/m),C=w/e,_=w/n,M=[];for(const{points:R}of f){const L=c?T(this,Kt,$N).call(this,R):R;if(!L)continue;M.push(L);const k=L.length,j=new Float32Array(k),z=new Float32Array(3*(k===2?2:k-2));if(v.push({line:z,points:j}),k===2){j[0]=L[0]*C,j[1]=L[1]*_,z.set([NaN,NaN,NaN,NaN,j[0],j[1]],0);continue}let[I,K,J,W]=L;I*=C,K*=_,J*=C,W*=_,j.set([I,K,J,W],0),z.set([NaN,NaN,NaN,NaN,I,K],0);for(let tt=4;tt<k;tt+=2){const X=j[tt]=L[tt]*C,it=j[tt+1]=L[tt+1]*_;z.set(lt.createBezierPoints(I,K,J,W,X,it),(tt-2)*3),[I,K,J,W]=[J,W,X,it]}}if(v.length===0)return null;const N=h?new hS:new rm;return N.build(v,e,n,1,a,h?0:y,l),{outline:N,newCurves:M,areContours:h,thickness:y,width:p,height:m}}static async compressSignature({outlines:t,areContours:e,thickness:n,width:a,height:l}){let c=1/0,h=-1/0,f=0;for(const L of t){f+=L.length;for(let k=2,j=L.length;k<j;k++){const z=L[k]-L[k-2];c=Math.min(c,z),h=Math.max(h,z)}}let p;c>=-128&&h<=127?p=Int8Array:c>=-32768&&h<=32767?p=Int16Array:p=Int32Array;const m=t.length,y=zb+Gf*m,v=new Uint32Array(y);let w=0;v[w++]=y*Uint32Array.BYTES_PER_ELEMENT+(f-2*m)*p.BYTES_PER_ELEMENT,v[w++]=0,v[w++]=a,v[w++]=l,v[w++]=e?0:1,v[w++]=Math.max(0,Math.floor(n??0)),v[w++]=m,v[w++]=p.BYTES_PER_ELEMENT;for(const L of t)v[w++]=L.length-2,v[w++]=L[0],v[w++]=L[1];const C=new CompressionStream("deflate-raw"),_=C.writable.getWriter();await _.ready,_.write(v);const M=p.prototype.constructor;for(const L of t){const k=new M(L.length-2);for(let j=2,z=L.length;j<z;j++)k[j-2]=L[j]-L[j-2];_.write(k)}_.close();const N=await new Response(C.readable).arrayBuffer(),R=new Uint8Array(N);return $C(R)}static async decompressSignature(t){try{const e=FO(t),{readable:n,writable:a}=new DecompressionStream("deflate-raw"),l=a.getWriter();await l.ready,l.write(e).then(async()=>{await l.ready,await l.close()}).catch(()=>{});let c=null,h=0;for await(const L of n)c||(c=new Uint8Array(new Uint32Array(L.buffer,0,4)[0])),c.set(L,h),h+=L.length;const f=new Uint32Array(c.buffer,0,c.length>>2),p=f[1];if(p!==0)throw new Error(`Invalid version: ${p}`);const m=f[2],y=f[3],v=f[4]===0,w=f[5],C=f[6],_=f[7],M=[],N=(zb+Gf*C)*Uint32Array.BYTES_PER_ELEMENT;let R;switch(_){case Int8Array.BYTES_PER_ELEMENT:R=new Int8Array(c.buffer,N);break;case Int16Array.BYTES_PER_ELEMENT:R=new Int16Array(c.buffer,N);break;case Int32Array.BYTES_PER_ELEMENT:R=new Int32Array(c.buffer,N);break}h=0;for(let L=0;L<C;L++){const k=f[Gf*L+zb],j=new Float32Array(k+2);M.push(j);for(let z=0;z<Gf-1;z++)j[z]=f[Gf*L+zb+z+1];for(let z=0;z<k;z++)j[z+2]=j[z]+R[h++]}return{areContours:v,thickness:w,outlines:M,width:m,height:y}}catch(e){return St(`decompressSignature: ${e}`),null}}}Xc=new WeakMap,Kt=new WeakSet,dS=function(t,e,n,a){return n-=t,a-=e,n===0?a>0?0:4:n===1?a+6:2-a},Is=new WeakMap,XN=function(t,e,n,a,l,c,h){const f=T(this,Kt,dS).call(this,n,a,l,c);for(let p=0;p<8;p++){const m=(-p+f-h+16)%8,y=o(this,Is)[2*m],v=o(this,Is)[2*m+1];if(t[(n+y)*e+(a+v)]!==0)return m}return-1},YN=function(t,e,n,a,l,c,h){const f=T(this,Kt,dS).call(this,n,a,l,c);for(let p=0;p<8;p++){const m=(p+f+h+16)%8,y=o(this,Is)[2*m],v=o(this,Is)[2*m+1];if(t[(n+y)*e+(a+v)]!==0)return m}return-1},fS=function(t,e,n,a){const l=t.length,c=new Int32Array(l);for(let m=0;m<l;m++)c[m]=t[m]<=a?1:0;for(let m=1;m<n-1;m++)c[m*e]=c[m*e+e-1]=0;for(let m=0;m<e;m++)c[m]=c[e*n-1-m]=0;let h=1,f;const p=[];for(let m=1;m<n-1;m++){f=1;for(let y=1;y<e-1;y++){const v=m*e+y,w=c[v];if(w===0)continue;let C=m,_=y;if(w===1&&c[v-1]===0)h+=1,_-=1;else if(w>=1&&c[v+1]===0)h+=1,_+=1,w>1&&(f=w);else{w!==1&&(f=Math.abs(w));continue}const M=[y,m],N=_===y+1,R={isHole:N,points:M,id:h,parent:0};p.push(R);let L;for(const tt of p)if(tt.id===f){L=tt;break}L?L.isHole?R.parent=N?L.parent:f:R.parent=N?f:L.parent:R.parent=N?f:0;const k=T(this,Kt,XN).call(this,c,e,m,y,C,_,0);if(k===-1){c[v]=-h,c[v]!==1&&(f=Math.abs(c[v]));continue}let j=o(this,Is)[2*k],z=o(this,Is)[2*k+1];const I=m+j,K=y+z;C=I,_=K;let J=m,W=y;for(;;){const tt=T(this,Kt,YN).call(this,c,e,J,W,C,_,1);j=o(this,Is)[2*tt],z=o(this,Is)[2*tt+1];const X=J+j,it=W+z;M.push(it,X);const et=J*e+W;if(c[et+1]===0?c[et]=-h:c[et]===1&&(c[et]=h),X===m&&it===y&&J===I&&W===K){c[v]!==1&&(f=Math.abs(c[v]));break}else C=J,_=W,J=X,W=it}}}return p},u0=function(t,e,n,a){if(n-e<=4){for(let I=e;I<n-2;I+=2)a.push(t[I],t[I+1]);return}const l=t[e],c=t[e+1],h=t[n-4]-l,f=t[n-3]-c,p=Math.hypot(h,f),m=h/p,y=f/p,v=m*c-y*l,w=f/h,C=1/p,_=Math.atan(w),M=Math.cos(_),N=Math.sin(_),R=C*(Math.abs(M)+Math.abs(N)),L=C*(1-R+R**2),k=Math.max(Math.atan(Math.abs(N+M)*L),Math.atan(Math.abs(N-M)*L));let j=0,z=e;for(let I=e+2;I<n-2;I+=2){const K=Math.abs(v-m*t[I+1]+y*t[I]);K>j&&(z=I,j=K)}j>(p*k)**2?(T(this,Kt,u0).call(this,t,e,z+2,a),T(this,Kt,u0).call(this,t,z,n,a)):a.push(l,c)},$N=function(t){const e=[],n=t.length;return T(this,Kt,u0).call(this,t,0,n,e),e.push(t[n-2],t[n-1]),e.length<=4?null:e},KN=function(t,e,n,a,l,c){const h=new Float32Array(c**2),f=-2*a**2,p=c>>1;for(let _=0;_<c;_++){const M=(_-p)**2;for(let N=0;N<c;N++)h[_*c+N]=Math.exp((M+(N-p)**2)/f)}const m=new Float32Array(256),y=-2*l**2;for(let _=0;_<256;_++)m[_]=Math.exp(_**2/y);const v=t.length,w=new Uint8Array(v),C=new Uint32Array(256);for(let _=0;_<n;_++)for(let M=0;M<e;M++){const N=_*e+M,R=t[N];let L=0,k=0;for(let z=0;z<c;z++){const I=_+z-p;if(!(I<0||I>=n))for(let K=0;K<c;K++){const J=M+K-p;if(J<0||J>=e)continue;const W=t[I*e+J],tt=h[z*c+K]*m[Math.abs(W-R)];L+=W*tt,k+=tt}}const j=w[N]=Math.round(L/k);C[j]++}return[w,C]},QN=function(t){const e=new Uint32Array(256);for(const n of t)e[n]++;return e},pS=function(t){const e=t.length,n=new Uint8ClampedArray(e>>2);let a=-1/0,l=1/0;for(let h=0,f=n.length;h<f;h++){const p=n[h]=t[h<<2];a=Math.max(a,p),l=Math.min(l,p)}const c=255/(a-l);for(let h=0,f=n.length;h<f;h++)n[h]=(n[h]-l)*c;return n},gS=function(t){let e,n=-1/0,a=-1/0;const l=t.findIndex(f=>f!==0);let c=l,h=l;for(e=l;e<256;e++){const f=t[e];f>n&&(e-c>a&&(a=e-c,h=e-1),n=f,c=e)}for(e=h-1;e>=0&&!(t[e]>t[e+1]);e--);return e},WN=function(t){const e=t,{width:n,height:a}=t,{maxDim:l}=o(this,Xc);let c=n,h=a;if(n>l||a>l){let v=n,w=a,C=Math.log2(Math.max(n,a)/l);const _=Math.floor(C);C=C===_?_-1:_;for(let N=0;N<C;N++){c=Math.ceil(v/2),h=Math.ceil(w/2);const R=new OffscreenCanvas(c,h);R.getContext("2d").drawImage(t,0,0,v,w,0,0,c,h),v=c,w=h,t!==e&&t.close(),t=R.transferToImageBitmap()}const M=Math.min(l/c,l/h);c=Math.round(c*M),h=Math.round(h*M)}const p=new OffscreenCanvas(c,h).getContext("2d",{willReadFrequently:!0});p.fillStyle="white",p.fillRect(0,0,c,h),p.filter="grayscale(1)",p.drawImage(t,0,0,t.width,t.height,0,0,c,h);const m=p.getImageData(0,0,c,h).data;return[T(this,Kt,pS).call(this,m),c,h]},E(Ea,Kt),E(Ea,Xc,{maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16}),E(Ea,Is,new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1]));class WS extends FN{constructor(){super(),super.updateProperties({fill:be._defaultLineColor,"stroke-width":0})}clone(){const t=new WS;return t.updateAll(this),t}}class ZS extends hy{constructor(t){super(t),super.updateProperties({stroke:be._defaultLineColor,"stroke-width":1})}clone(){const t=new ZS(this._viewParameters);return t.updateAll(this),t}}var Wo,Aa,Zo,Yc;const Cn=class Cn extends L0{constructor(e){super({...e,mustBeCommitted:!0,name:"signatureEditor"});E(this,Wo,!1);E(this,Aa,null);E(this,Zo,null);E(this,Yc,null);this._willKeepAspectRatio=!0,x(this,Zo,e.signatureData||null),x(this,Aa,null),this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(e,n){be.initialize(e,n),this._defaultDrawingOptions=new WS,this._defaultDrawnSignatureOptions=new ZS(n.viewParameters)}static getDefaultDrawingOptions(e){const n=this._defaultDrawingOptions.clone();return n.updateProperties(e),n}static get supportMultipleDrawings(){return!1}static get typesMap(){return Ct(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!o(this,Aa)}}static computeTelemetryFinalData(e){const n=e.get("hasDescription");return{hasAltText:n.get(!0)??0,hasNoAltText:n.get(!1)??0}}get isResizable(){return!0}onScaleChanging(){this._drawId!==null&&super.onScaleChanging()}render(){if(this.div)return this.div;let e,n;const{_isCopy:a}=this;if(a&&(this._isCopy=!1,e=this.x,n=this.y),super.render(),this._drawId===null)if(o(this,Zo)){const{lines:l,mustSmooth:c,areContours:h,description:f,uuid:p,heightInPage:m}=o(this,Zo),{rawDims:{pageWidth:y,pageHeight:v},rotation:w}=this.parent.viewport,C=Ea.processDrawnLines({lines:l,pageWidth:y,pageHeight:v,rotation:w,innerMargin:Cn._INNER_MARGIN,mustSmooth:c,areContours:h});this.addSignature(C,m,f,p)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);else this.div.setAttribute("data-l10n-args",JSON.stringify({description:o(this,Aa)||""}));return a&&(this._isCopy=!0,this._moveAfterPaste(e,n)),this.div}setUuid(e){x(this,Yc,e),this.addEditToolbar()}getUuid(){return o(this,Yc)}get description(){return o(this,Aa)}set description(e){x(this,Aa,e),this.div&&(this.div.setAttribute("data-l10n-args",JSON.stringify({description:e})),super.addEditToolbar().then(n=>{n==null||n.updateEditSignatureButton(e)}))}getSignaturePreview(){const{newCurves:e,areContours:n,thickness:a,width:l,height:c}=o(this,Zo),h=Math.max(l,c),f=Ea.processDrawnLines({lines:{curves:e.map(p=>({points:p})),thickness:a,width:l,height:c},pageWidth:h,pageHeight:h,rotation:0,innerMargin:0,mustSmooth:!1,areContours:n});return{areContours:n,outline:f.outline}}get toolbarButtons(){return this._uiManager.signatureManager?[["editSignature",this._uiManager.signatureManager]]:super.toolbarButtons}addSignature(e,n,a,l){const{x:c,y:h}=this,{outline:f}=x(this,Zo,e);x(this,Wo,f instanceof hS),this.description=a;let p;o(this,Wo)?p=Cn.getDefaultDrawingOptions():(p=Cn._defaultDrawnSignatureOptions.clone(),p.updateProperties({"stroke-width":f.thickness})),this._addOutlines({drawOutlines:f,drawingOptions:p});const[,m]=this.pageDimensions;let y=n/m;y=y>=1?.5:y,this.width*=y/this.height,this.width>=1&&(y*=.9/this.width,this.width=.9),this.height=y,this.setDims(),this.x=c,this.y=h,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(l),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!l,hasDescription:!!a}}),this.div.hidden=!1}getFromImage(e){const{rawDims:{pageWidth:n,pageHeight:a},rotation:l}=this.parent.viewport;return Ea.process(e,n,a,l,Cn._INNER_MARGIN)}getFromText(e,n){const{rawDims:{pageWidth:a,pageHeight:l},rotation:c}=this.parent.viewport;return Ea.extractContoursFromText(e,n,a,l,c,Cn._INNER_MARGIN)}getDrawnSignature(e){const{rawDims:{pageWidth:n,pageHeight:a},rotation:l}=this.parent.viewport;return Ea.processDrawnLines({lines:e,pageWidth:n,pageHeight:a,rotation:l,innerMargin:Cn._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions({areContours:e,thickness:n}){e?this._drawingOptions=Cn.getDefaultDrawingOptions():(this._drawingOptions=Cn._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":n}))}serialize(e=!1){if(this.isEmpty())return null;const{lines:n,points:a}=this.serializeDraw(e),{_drawingOptions:{"stroke-width":l}}=this,c=Object.assign(super.serialize(e),{isSignature:!0,areContours:o(this,Wo),color:[0,0,0],thickness:o(this,Wo)?0:l});return this.addComment(c),e?(c.paths={lines:n,points:a},c.uuid=o(this,Yc),c.isCopy=!0):c.lines=n,o(this,Aa)&&(c.accessibilityData={type:"Figure",alt:o(this,Aa)}),c}static deserializeDraw(e,n,a,l,c,h){return h.areContours?hS.deserialize(e,n,a,l,c,h):rm.deserialize(e,n,a,l,c,h)}static async deserialize(e,n,a){var c;const l=await super.deserialize(e,n,a);return x(l,Wo,e.areContours),l.description=((c=e.accessibilityData)==null?void 0:c.alt)||"",x(l,Yc,e.uuid),l}};Wo=new WeakMap,Aa=new WeakMap,Zo=new WeakMap,Yc=new WeakMap,nt(Cn,"_type","signature"),nt(Cn,"_editorType",At.SIGNATURE),nt(Cn,"_defaultDrawingOptions",null);let mS=Cn;var _e,hi,Jo,Tr,tl,Md,_r,$c,Sa,Vn,Dd,Gt,cp,up,h0,d0,f0,yS,p0,ZN;class bS extends be{constructor(e){super({...e,name:"stampEditor"});E(this,Gt);E(this,_e,null);E(this,hi,null);E(this,Jo,null);E(this,Tr,null);E(this,tl,null);E(this,Md,"");E(this,_r,null);E(this,$c,!1);E(this,Sa,null);E(this,Vn,!1);E(this,Dd,!1);x(this,Tr,e.bitmapUrl),x(this,tl,e.bitmapFile),this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(e,n){be.initialize(e,n)}static isHandlingMimeForPasting(e){return E0.includes(e)}static paste(e,n){n.pasteEditor({mode:At.STAMP},{bitmapFile:e.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){var e;return{type:"stamp",hasAltText:!!((e=this.altTextData)!=null&&e.altText)}}static computeTelemetryFinalData(e){const n=e.get("hasAltText");return{hasAltText:n.get(!0)??0,hasNoAltText:n.get(!1)??0}}async mlGuessAltText(e=null,n=!0){if(this.hasAltTextData())return null;const{mlManager:a}=this._uiManager;if(!a)throw new Error("No ML.");if(!await a.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:l,width:c,height:h}=e||this.copyCanvas(null,null,!0).imageData,f=await a.guess({name:"altText",request:{data:l,width:c,height:h,channels:l.length/(c*h)}});if(!f)throw new Error("No response from the AI service.");if(f.error)throw new Error("Error from the AI service.");if(f.cancel)return null;if(!f.output)throw new Error("No valid response from the AI service.");const p=f.output;return await this.setGuessedAltText(p),n&&!this.hasAltTextData()&&(this.altTextData={alt:p,decorative:!1}),p}remove(){var e;o(this,hi)&&(x(this,_e,null),this._uiManager.imageManager.deleteId(o(this,hi)),(e=o(this,_r))==null||e.remove(),x(this,_r,null),o(this,Sa)&&(clearTimeout(o(this,Sa)),x(this,Sa,null))),super.remove()}rebuild(){if(!this.parent){o(this,hi)&&T(this,Gt,h0).call(this);return}super.rebuild(),this.div!==null&&(o(this,hi)&&o(this,_r)===null&&T(this,Gt,h0).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(e){this._isDraggable=!0,e&&this.div.focus()}isEmpty(){return!(o(this,Jo)||o(this,_e)||o(this,Tr)||o(this,tl)||o(this,hi)||o(this,$c))}get toolbarButtons(){return[["altText",this.createAltText()]]}get isResizable(){return!0}render(){if(this.div)return this.div;let e,n;return this._isCopy&&(e=this.x,n=this.y),super.render(),this.div.hidden=!0,this.createAltText(),o(this,$c)||(o(this,_e)?T(this,Gt,d0).call(this):T(this,Gt,h0).call(this)),this._isCopy&&this._moveAfterPaste(e,n),this._uiManager.addShouldRescale(this),this.div}setCanvas(e,n){const{id:a,bitmap:l}=this._uiManager.imageManager.getFromCanvas(e,n);n.remove(),a&&this._uiManager.imageManager.isValidId(a)&&(x(this,hi,a),l&&x(this,_e,l),x(this,$c,!1),T(this,Gt,d0).call(this))}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;o(this,Sa)!==null&&clearTimeout(o(this,Sa)),x(this,Sa,setTimeout(()=>{x(this,Sa,null),T(this,Gt,yS).call(this)},200))}copyCanvas(e,n,a=!1){e||(e=224);const{width:l,height:c}=o(this,_e),h=new qs;let f=o(this,_e),p=l,m=c,y=null;if(n){if(l>n||c>n){const I=Math.min(n/l,n/c);p=Math.floor(l*I),m=Math.floor(c*I)}y=document.createElement("canvas");const w=y.width=Math.ceil(p*h.sx),C=y.height=Math.ceil(m*h.sy);o(this,Vn)||(f=T(this,Gt,f0).call(this,w,C));const _=y.getContext("2d");_.filter=this._uiManager.hcmFilter;let M="white",N="#cfcfd8";this._uiManager.hcmFilter!=="none"?N="black":GO.isDarkMode&&(M="#8f8f9d",N="#42414d");const R=15,L=R*h.sx,k=R*h.sy,j=new OffscreenCanvas(L*2,k*2),z=j.getContext("2d");z.fillStyle=M,z.fillRect(0,0,L*2,k*2),z.fillStyle=N,z.fillRect(0,0,L,k),z.fillRect(L,k,L,k),_.fillStyle=_.createPattern(j,"repeat"),_.fillRect(0,0,w,C),_.drawImage(f,0,0,f.width,f.height,0,0,w,C)}let v=null;if(a){let w,C;if(h.symmetric&&f.width<e&&f.height<e)w=f.width,C=f.height;else if(f=o(this,_e),l>e||c>e){const N=Math.min(e/l,e/c);w=Math.floor(l*N),C=Math.floor(c*N),o(this,Vn)||(f=T(this,Gt,f0).call(this,w,C))}const M=new OffscreenCanvas(w,C).getContext("2d",{willReadFrequently:!0});M.drawImage(f,0,0,f.width,f.height,0,0,w,C),v={width:w,height:C,data:M.getImageData(0,0,w,C).data}}return{canvas:y,width:p,height:m,imageData:v}}static async deserialize(e,n,a){var M;let l=null,c=!1;if(e instanceof pN){const{data:{rect:N,rotation:R,id:L,structParent:k,popupRef:j,richText:z,contentsObj:I,creationDate:K,modificationDate:J},container:W,parent:{page:{pageNumber:tt}},canvas:X}=e;let it,et;X?(delete e.canvas,{id:it,bitmap:et}=a.imageManager.getFromCanvas(W.id,X),X.remove()):(c=!0,e._hasNoCanvas=!0);const at=((M=await n._structTree.getAriaAttributes(`${IS}${L}`))==null?void 0:M.get("aria-label"))||"";l=e={annotationType:At.STAMP,bitmapId:it,bitmap:et,pageIndex:tt-1,rect:N.slice(0),rotation:R,annotationElementId:L,id:L,deleted:!1,accessibilityData:{decorative:!1,altText:at},isSvg:!1,structParent:k,popupRef:j,richText:z,comment:(I==null?void 0:I.str)||null,creationDate:K,modificationDate:J}}const h=await super.deserialize(e,n,a),{rect:f,bitmap:p,bitmapUrl:m,bitmapId:y,isSvg:v,accessibilityData:w}=e;c?(a.addMissingCanvas(e.id,h),x(h,$c,!0)):y&&a.imageManager.isValidId(y)?(x(h,hi,y),p&&x(h,_e,p)):x(h,Tr,m),x(h,Vn,v);const[C,_]=h.pageDimensions;return h.width=(f[2]-f[0])/C,h.height=(f[3]-f[1])/_,w&&(h.altTextData=w),h._initialData=l,e.comment&&h.setCommentData(e),x(h,Dd,!!l),h}serialize(e=!1,n=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const a=Object.assign(super.serialize(e),{bitmapId:o(this,hi),isSvg:o(this,Vn)});if(this.addComment(a),e)return a.bitmapUrl=T(this,Gt,p0).call(this,!0),a.accessibilityData=this.serializeAltText(!0),a.isCopy=!0,a;const{decorative:l,altText:c}=this.serializeAltText(!1);if(!l&&c&&(a.accessibilityData={type:"Figure",alt:c}),this.annotationElementId){const f=T(this,Gt,ZN).call(this,a);return f.isSame?null:(f.isSameAltText?delete a.accessibilityData:a.accessibilityData.structParent=this._initialData.structParent??-1,a.id=this.annotationElementId,delete a.bitmapId,a)}if(n===null)return a;n.stamps||(n.stamps=new Map);const h=o(this,Vn)?(a.rect[2]-a.rect[0])*(a.rect[3]-a.rect[1]):null;if(!n.stamps.has(o(this,hi)))n.stamps.set(o(this,hi),{area:h,serialized:a}),a.bitmap=T(this,Gt,p0).call(this,!1);else if(o(this,Vn)){const f=n.stamps.get(o(this,hi));h>f.area&&(f.area=h,f.serialized.bitmap.close(),f.serialized.bitmap=T(this,Gt,p0).call(this,!1))}return a}renderAnnotationElement(e){return this.deleted?(e.hide(),null):(e.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}}_e=new WeakMap,hi=new WeakMap,Jo=new WeakMap,Tr=new WeakMap,tl=new WeakMap,Md=new WeakMap,_r=new WeakMap,$c=new WeakMap,Sa=new WeakMap,Vn=new WeakMap,Dd=new WeakMap,Gt=new WeakSet,cp=function(e,n=!1){if(!e){this.remove();return}x(this,_e,e.bitmap),n||(x(this,hi,e.id),x(this,Vn,e.isSvg)),e.file&&x(this,Md,e.file.name),T(this,Gt,d0).call(this)},up=function(){if(x(this,Jo,null),this._uiManager.enableWaiting(!1),!!o(this,_r)){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&o(this,_e)){this.addEditToolbar().then(()=>{this._editToolbar.hide(),this._uiManager.editAltText(this,!0)});return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&o(this,_e)){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}},h0=function(){if(o(this,hi)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(o(this,hi)).then(a=>T(this,Gt,cp).call(this,a,!0)).finally(()=>T(this,Gt,up).call(this));return}if(o(this,Tr)){const a=o(this,Tr);x(this,Tr,null),this._uiManager.enableWaiting(!0),x(this,Jo,this._uiManager.imageManager.getFromUrl(a).then(l=>T(this,Gt,cp).call(this,l)).finally(()=>T(this,Gt,up).call(this)));return}if(o(this,tl)){const a=o(this,tl);x(this,tl,null),this._uiManager.enableWaiting(!0),x(this,Jo,this._uiManager.imageManager.getFromFile(a).then(l=>T(this,Gt,cp).call(this,l)).finally(()=>T(this,Gt,up).call(this)));return}const e=document.createElement("input");e.type="file",e.accept=E0.join(",");const n=this._uiManager._signal;x(this,Jo,new Promise(a=>{e.addEventListener("change",async()=>{if(!e.files||e.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const l=await this._uiManager.imageManager.getFromFile(e.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),T(this,Gt,cp).call(this,l)}a()},{signal:n}),e.addEventListener("cancel",()=>{this.remove(),a()},{signal:n})}).finally(()=>T(this,Gt,up).call(this))),e.click()},d0=function(){var p;const{div:e}=this;let{width:n,height:a}=o(this,_e);const[l,c]=this.pageDimensions,h=.75;if(this.width)n=this.width*l,a=this.height*c;else if(n>h*l||a>h*c){const m=Math.min(h*l/n,h*c/a);n*=m,a*=m}this._uiManager.enableWaiting(!1);const f=x(this,_r,document.createElement("canvas"));f.setAttribute("role","img"),this.addContainer(f),this.width=n/l,this.height=a/c,this.setDims(),(p=this._initialOptions)!=null&&p.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(e.hidden=!1),T(this,Gt,yS).call(this),o(this,Dd)||(this.parent.addUndoableEditor(this),x(this,Dd,!0)),this._reportTelemetry({action:"inserted_image"}),o(this,Md)&&this.div.setAttribute("aria-description",o(this,Md)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-stamp-added-alert")},f0=function(e,n){const{width:a,height:l}=o(this,_e);let c=a,h=l,f=o(this,_e);for(;c>2*e||h>2*n;){const p=c,m=h;c>2*e&&(c=c>=16384?Math.floor(c/2)-1:Math.ceil(c/2)),h>2*n&&(h=h>=16384?Math.floor(h/2)-1:Math.ceil(h/2));const y=new OffscreenCanvas(c,h);y.getContext("2d").drawImage(f,0,0,p,m,0,0,c,h),f=y.transferToImageBitmap()}return f},yS=function(){const[e,n]=this.parentDimensions,{width:a,height:l}=this,c=new qs,h=Math.ceil(a*e*c.sx),f=Math.ceil(l*n*c.sy),p=o(this,_r);if(!p||p.width===h&&p.height===f)return;p.width=h,p.height=f;const m=o(this,Vn)?o(this,_e):T(this,Gt,f0).call(this,h,f),y=p.getContext("2d");y.filter=this._uiManager.hcmFilter,y.drawImage(m,0,0,m.width,m.height,0,0,h,f)},p0=function(e){if(e){if(o(this,Vn)){const l=this._uiManager.imageManager.getSvgUrl(o(this,hi));if(l)return l}const n=document.createElement("canvas");return{width:n.width,height:n.height}=o(this,_e),n.getContext("2d").drawImage(o(this,_e),0,0),n.toDataURL()}if(o(this,Vn)){const[n,a]=this.pageDimensions,l=Math.round(this.width*n*kr.PDF_TO_CSS_UNITS),c=Math.round(this.height*a*kr.PDF_TO_CSS_UNITS),h=new OffscreenCanvas(l,c);return h.getContext("2d").drawImage(o(this,_e),0,0,o(this,_e).width,o(this,_e).height,0,0,l,c),h.transferToImageBitmap()}return structuredClone(o(this,_e))},ZN=function(e){var h;const{pageIndex:n,accessibilityData:{altText:a}}=this._initialData,l=e.pageIndex===n,c=(((h=e.accessibilityData)==null?void 0:h.alt)||"")===a;return{isSame:!this.hasEditedComment&&!this._hasBeenMoved&&!this._hasBeenResized&&l&&c,isSameAltText:c}},nt(bS,"_type","stamp"),nt(bS,"_editorType",At.STAMP);var Kc,Rd,el,il,Cr,pn,nl,Ld,kd,Fs,Nr,di,Mr,sl,Od,gt,al,pe,vS,JN,Js,xS,AS,g0;const Ms=class Ms{constructor({uiManager:t,pageIndex:e,div:n,structTreeLayer:a,accessibilityManager:l,annotationLayer:c,drawLayer:h,textLayer:f,viewport:p,l10n:m}){E(this,pe);E(this,Kc);E(this,Rd,!1);E(this,el,null);E(this,il,null);E(this,Cr,null);E(this,pn,new Map);E(this,nl,!1);E(this,Ld,!1);E(this,kd,!1);E(this,Fs,null);E(this,Nr,null);E(this,di,null);E(this,Mr,null);E(this,sl,null);E(this,Od,-1);E(this,gt);const y=[...o(Ms,al).values()];if(!Ms._initialized){Ms._initialized=!0;for(const v of y)v.initialize(m,t)}t.registerEditorTypes(y),x(this,gt,t),this.pageIndex=e,this.div=n,x(this,Kc,l),x(this,el,c),this.viewport=p,x(this,di,f),this.drawLayer=h,this._structTree=a,o(this,gt).addLayer(this)}get isEmpty(){return o(this,pn).size===0}get isInvisible(){return this.isEmpty&&o(this,gt).getMode()===At.NONE}updateToolbar(t){o(this,gt).updateToolbar(t)}updateMode(t=o(this,gt).getMode()){switch(T(this,pe,g0).call(this),t){case At.NONE:this.div.classList.toggle("nonEditing",!0),this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case At.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case At.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:e}=this.div;if(e.toggle("nonEditing",!1),t===At.POPUP)e.toggle("commentEditing",!0);else{e.toggle("commentEditing",!1);for(const n of o(Ms,al).values())e.toggle(`${n._type}Editing`,t===n._editorType)}this.div.hidden=!1}hasTextLayer(t){var e;return t===((e=o(this,di))==null?void 0:e.div)}setEditingState(t){o(this,gt).setEditingState(t)}addCommands(t){o(this,gt).addCommands(t)}cleanUndoStack(t){o(this,gt).cleanUndoStack(t)}toggleDrawing(t=!1){this.div.classList.toggle("drawing",!t)}togglePointerEvents(t=!1){this.div.classList.toggle("disabled",!t)}toggleAnnotationLayerPointerEvents(t=!1){var e;(e=o(this,el))==null||e.div.classList.toggle("disabled",!t)}async enable(){var n;x(this,kd,!0),this.div.tabIndex=0,this.togglePointerEvents(!0),this.div.classList.toggle("nonEditing",!1),(n=o(this,sl))==null||n.abort(),x(this,sl,null);const t=new Set;for(const a of o(this,pe,vS))a.enableEditing(),a.show(!0),a.annotationElementId&&(o(this,gt).removeChangedExistingAnnotation(a),t.add(a.annotationElementId));const e=o(this,el);if(e)for(const a of e.getEditableAnnotations()){if(a.hide(),o(this,gt).isDeletedAnnotationElement(a.data.id)||t.has(a.data.id))continue;const l=await this.deserialize(a);l&&(this.addOrRebuild(l),l.enableEditing())}x(this,kd,!1),o(this,gt)._eventBus.dispatch("editorsrendered",{source:this,pageNumber:this.pageIndex+1})}disable(){var n;if(x(this,Ld,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1),this.div.classList.toggle("nonEditing",!0),o(this,di)&&!o(this,sl)){x(this,sl,new AbortController);const a=o(this,gt).combinedSignal(o(this,sl));o(this,di).div.addEventListener("pointerdown",l=>{const{clientX:h,clientY:f,timeStamp:p}=l,m=o(this,Od);if(p-m>500){x(this,Od,p);return}x(this,Od,-1);const{classList:y}=this.div;y.toggle("getElements",!0);const v=document.elementsFromPoint(h,f);if(y.toggle("getElements",!1),!this.div.contains(v[0]))return;let w;const C=new RegExp(`^${dp}[0-9]+$`);for(const M of v)if(C.test(M.id)){w=M.id;break}if(!w)return;const _=o(this,pn).get(w);(_==null?void 0:_.annotationElementId)===null&&(l.stopPropagation(),l.preventDefault(),_.dblclick(l))},{signal:a,capture:!0})}const t=o(this,el);if(t){const a=new Map,l=new Map;for(const h of o(this,pe,vS)){if(h.disableEditing(),!h.annotationElementId){h.updateFakeAnnotationElement(t);continue}if(h.serialize()!==null){a.set(h.annotationElementId,h);continue}else l.set(h.annotationElementId,h);(n=this.getEditableAnnotation(h.annotationElementId))==null||n.show(),h.remove()}const c=t.getEditableAnnotations();for(const h of c){const{id:f}=h.data;if(o(this,gt).isDeletedAnnotationElement(f)){h.updateEdited({deleted:!0});continue}let p=l.get(f);if(p){p.resetAnnotationElement(h),p.show(!1),h.show();continue}p=a.get(f),p&&(o(this,gt).addChangedExistingAnnotation(p),p.renderAnnotationElement(h)&&p.show(!1)),h.show()}}T(this,pe,g0).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:e}=this.div;for(const a of o(Ms,al).values())e.remove(`${a._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),x(this,Ld,!1)}getEditableAnnotation(t){var e;return((e=o(this,el))==null?void 0:e.getEditableAnnotation(t))||null}setActiveEditor(t){o(this,gt).getActive()!==t&&o(this,gt).setActiveEditor(t)}enableTextSelection(){var t;if(this.div.tabIndex=-1,(t=o(this,di))!=null&&t.div&&!o(this,Mr)){x(this,Mr,new AbortController);const e=o(this,gt).combinedSignal(o(this,Mr));o(this,di).div.addEventListener("pointerdown",T(this,pe,JN).bind(this),{signal:e}),o(this,di).div.classList.add("highlighting")}}disableTextSelection(){var t;this.div.tabIndex=0,(t=o(this,di))!=null&&t.div&&o(this,Mr)&&(o(this,Mr).abort(),x(this,Mr,null),o(this,di).div.classList.remove("highlighting"))}enableClick(){if(o(this,il))return;x(this,il,new AbortController);const t=o(this,gt).combinedSignal(o(this,il));this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:t});const e=this.pointerup.bind(this);this.div.addEventListener("pointerup",e,{signal:t}),this.div.addEventListener("pointercancel",e,{signal:t})}disableClick(){var t;(t=o(this,il))==null||t.abort(),x(this,il,null)}attach(t){o(this,pn).set(t.id,t);const{annotationElementId:e}=t;e&&o(this,gt).isDeletedAnnotationElement(e)&&o(this,gt).removeDeletedAnnotationElement(t)}detach(t){var e;o(this,pn).delete(t.id),(e=o(this,Kc))==null||e.removePointerInTextLayer(t.contentDiv),!o(this,Ld)&&t.annotationElementId&&o(this,gt).addDeletedAnnotationElement(t)}remove(t){this.detach(t),o(this,gt).removeEditor(t),t.div.remove(),t.isAttachedToDOM=!1}changeParent(t){var e;t.parent!==this&&(t.parent&&t.annotationElementId&&(o(this,gt).addDeletedAnnotationElement(t.annotationElementId),be.deleteAnnotationElement(t),t.annotationElementId=null),this.attach(t),(e=t.parent)==null||e.detach(t),t.setParent(this),t.div&&t.isAttachedToDOM&&(t.div.remove(),this.div.append(t.div)))}add(t){if(!(t.parent===this&&t.isAttachedToDOM)){if(this.changeParent(t),o(this,gt).addEditor(t),this.attach(t),!t.isAttachedToDOM){const e=t.render();this.div.append(e),t.isAttachedToDOM=!0}t.fixAndSetPosition(),t.onceAdded(!o(this,kd)),o(this,gt).addToAnnotationStorage(t),t._reportTelemetry(t.telemetryInitialData)}}moveEditorInDOM(t){var n;if(!t.isAttachedToDOM)return;const{activeElement:e}=document;t.div.contains(e)&&!o(this,Cr)&&(t._focusEventsAllowed=!1,x(this,Cr,setTimeout(()=>{x(this,Cr,null),t.div.contains(document.activeElement)?t._focusEventsAllowed=!0:(t.div.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:o(this,gt)._signal}),e.focus())},0))),t._structTreeParentId=(n=o(this,Kc))==null?void 0:n.moveElementInDOM(this.div,t.div,t.contentDiv,!0)}addOrRebuild(t){t.needsToBeRebuilt()?(t.parent||(t.parent=this),t.rebuild(),t.show()):this.add(t)}addUndoableEditor(t){const e=()=>t._uiManager.rebuild(t),n=()=>{t.remove()};this.addCommands({cmd:e,undo:n,mustExec:!1})}getEditorByUID(t){for(const e of o(this,pn).values())if(e.uid===t)return e;return null}getNextId(){return o(this,gt).getId()}combinedSignal(t){return o(this,gt).combinedSignal(t)}canCreateNewEmptyEditor(){var t;return(t=o(this,pe,Js))==null?void 0:t.canCreateNewEmptyEditor()}async pasteEditor(t,e){this.updateToolbar(t),await o(this,gt).updateMode(t.mode);const{offsetX:n,offsetY:a}=T(this,pe,AS).call(this),l=this.getNextId(),c=T(this,pe,xS).call(this,{parent:this,id:l,x:n,y:a,uiManager:o(this,gt),isCentered:!0,...e});c&&this.add(c)}async deserialize(t){var e;return await((e=o(Ms,al).get(t.annotationType??t.annotationEditorType))==null?void 0:e.deserialize(t,this,o(this,gt)))||null}createAndAddNewEditor(t,e,n={}){const a=this.getNextId(),l=T(this,pe,xS).call(this,{parent:this,id:a,x:t.offsetX,y:t.offsetY,uiManager:o(this,gt),isCentered:e,...n});return l&&this.add(l),l}get boundingClientRect(){return this.div.getBoundingClientRect()}addNewEditor(t={}){this.createAndAddNewEditor(T(this,pe,AS).call(this),!0,t)}setSelected(t){o(this,gt).setSelected(t)}toggleSelected(t){o(this,gt).toggleSelected(t)}unselect(t){o(this,gt).unselect(t)}pointerup(t){var a;const{isMac:e}=fi.platform;if(t.button!==0||t.ctrlKey&&e||t.target!==this.div||!o(this,nl)||(x(this,nl,!1),(a=o(this,pe,Js))!=null&&a.isDrawer&&o(this,pe,Js).supportMultipleDrawings))return;if(!o(this,Rd)){x(this,Rd,!0);return}const n=o(this,gt).getMode();if(n===At.STAMP||n===At.SIGNATURE){o(this,gt).unselectAll();return}this.createAndAddNewEditor(t,!1)}pointerdown(t){var a;if(o(this,gt).getMode()===At.HIGHLIGHT&&this.enableTextSelection(),o(this,nl)){x(this,nl,!1);return}const{isMac:e}=fi.platform;if(t.button!==0||t.ctrlKey&&e||t.target!==this.div)return;if(x(this,nl,!0),(a=o(this,pe,Js))!=null&&a.isDrawer){this.startDrawingSession(t);return}const n=o(this,gt).getActive();x(this,Rd,!n||n.isEmpty())}startDrawingSession(t){if(this.div.focus({preventScroll:!0}),o(this,Fs)){o(this,pe,Js).startDrawing(this,o(this,gt),!1,t);return}o(this,gt).setCurrentDrawingSession(this),x(this,Fs,new AbortController);const e=o(this,gt).combinedSignal(o(this,Fs));this.div.addEventListener("blur",({relatedTarget:n})=>{n&&!this.div.contains(n)&&(x(this,Nr,null),this.commitOrRemove())},{signal:e}),o(this,pe,Js).startDrawing(this,o(this,gt),!1,t)}pause(t){if(t){const{activeElement:e}=document;this.div.contains(e)&&x(this,Nr,e);return}o(this,Nr)&&setTimeout(()=>{var e;(e=o(this,Nr))==null||e.focus(),x(this,Nr,null)},0)}endDrawingSession(t=!1){return o(this,Fs)?(o(this,gt).setCurrentDrawingSession(null),o(this,Fs).abort(),x(this,Fs,null),x(this,Nr,null),o(this,pe,Js).endDrawing(t)):null}findNewParent(t,e,n){const a=o(this,gt).findParent(e,n);return a===null||a===this?!1:(a.changeParent(t),!0)}commitOrRemove(){return o(this,Fs)?(this.endDrawingSession(),!0):!1}onScaleChanging(){o(this,Fs)&&o(this,pe,Js).onScaleChangingWhenDrawing(this)}destroy(){var t,e;this.commitOrRemove(),((t=o(this,gt).getActive())==null?void 0:t.parent)===this&&(o(this,gt).commitOrRemove(),o(this,gt).setActiveEditor(null)),o(this,Cr)&&(clearTimeout(o(this,Cr)),x(this,Cr,null));for(const n of o(this,pn).values())(e=o(this,Kc))==null||e.removePointerInTextLayer(n.contentDiv),n.setParent(null),n.isAttachedToDOM=!1,n.div.remove();this.div=null,o(this,pn).clear(),o(this,gt).removeLayer(this)}render({viewport:t}){this.viewport=t,ll(this.div,t);for(const e of o(this,gt).getEditors(this.pageIndex))this.add(e),e.rebuild();this.updateMode()}update({viewport:t}){o(this,gt).commitOrRemove(),T(this,pe,g0).call(this);const e=this.viewport.rotation,n=t.rotation;if(this.viewport=t,ll(this.div,{rotation:n}),e!==n)for(const a of o(this,pn).values())a.rotate(n)}get pageDimensions(){const{pageWidth:t,pageHeight:e}=this.viewport.rawDims;return[t,e]}get scale(){return o(this,gt).viewParameters.realScale}};Kc=new WeakMap,Rd=new WeakMap,el=new WeakMap,il=new WeakMap,Cr=new WeakMap,pn=new WeakMap,nl=new WeakMap,Ld=new WeakMap,kd=new WeakMap,Fs=new WeakMap,Nr=new WeakMap,di=new WeakMap,Mr=new WeakMap,sl=new WeakMap,Od=new WeakMap,gt=new WeakMap,al=new WeakMap,pe=new WeakSet,vS=function(){return o(this,pn).size!==0?o(this,pn).values():o(this,gt).getEditors(this.pageIndex)},JN=function(t){o(this,gt).unselectAll();const{target:e}=t;if(e===o(this,di).div||(e.getAttribute("role")==="img"||e.classList.contains("endOfContent"))&&o(this,di).div.contains(e)){const{isMac:n}=fi.platform;if(t.button!==0||t.ctrlKey&&n)return;o(this,gt).showAllEditors("highlight",!0,!0),o(this,di).div.classList.add("free"),this.toggleDrawing(),R0.startHighlighting(this,o(this,gt).direction==="ltr",{target:o(this,di).div,x:t.x,y:t.y}),o(this,di).div.addEventListener("pointerup",()=>{o(this,di).div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:o(this,gt)._signal}),t.preventDefault()}},Js=function(){return o(Ms,al).get(o(this,gt).getMode())},xS=function(t){const e=o(this,pe,Js);return e?new e.prototype.constructor(t):null},AS=function(){const{x:t,y:e,width:n,height:a}=this.boundingClientRect,l=Math.max(0,t),c=Math.max(0,e),h=Math.min(window.innerWidth,t+n),f=Math.min(window.innerHeight,e+a),p=(l+h)/2-t,m=(c+f)/2-e,[y,v]=this.viewport.rotation%180===0?[p,m]:[m,p];return{offsetX:y,offsetY:v}},g0=function(){for(const t of o(this,pn).values())t.isEmpty()&&t.remove()},nt(Ms,"_initialized",!1),E(Ms,al,new Map([tS,uS,bS,R0,mS].map(t=>[t._editorType,t])));let k0=Ms;var Us,Xi,Qc,Jg,J0,tM,Ta,SS,eM,wS;const Je=class Je{constructor({pageIndex:t}){E(this,Ta);E(this,Us,null);E(this,Xi,new Map);E(this,Qc,new Map);this.pageIndex=t}setParent(t){if(!o(this,Us)){x(this,Us,t);return}if(o(this,Us)!==t){if(o(this,Xi).size>0)for(const e of o(this,Xi).values())e.remove(),t.append(e);x(this,Us,t)}}static get _svgFactory(){return Ct(this,"_svgFactory",new vp)}draw(t,e=!1,n=!1){const a=Ze(Je,Jg)._++,l=T(this,Ta,SS).call(this),c=Je._svgFactory.createElement("defs");l.append(c);const h=Je._svgFactory.createElement("path");c.append(h);const f=`path_p${this.pageIndex}_${a}`;h.setAttribute("id",f),h.setAttribute("vector-effect","non-scaling-stroke"),e&&o(this,Qc).set(a,h);const p=n?T(this,Ta,eM).call(this,c,f):null,m=Je._svgFactory.createElement("use");return l.append(m),m.setAttribute("href",`#${f}`),this.updateProperties(l,t),o(this,Xi).set(a,l),{id:a,clipPathId:`url(#${p})`}}drawOutline(t,e){const n=Ze(Je,Jg)._++,a=T(this,Ta,SS).call(this),l=Je._svgFactory.createElement("defs");a.append(l);const c=Je._svgFactory.createElement("path");l.append(c);const h=`path_p${this.pageIndex}_${n}`;c.setAttribute("id",h),c.setAttribute("vector-effect","non-scaling-stroke");let f;if(e){const y=Je._svgFactory.createElement("mask");l.append(y),f=`mask_p${this.pageIndex}_${n}`,y.setAttribute("id",f),y.setAttribute("maskUnits","objectBoundingBox");const v=Je._svgFactory.createElement("rect");y.append(v),v.setAttribute("width","1"),v.setAttribute("height","1"),v.setAttribute("fill","white");const w=Je._svgFactory.createElement("use");y.append(w),w.setAttribute("href",`#${h}`),w.setAttribute("stroke","none"),w.setAttribute("fill","black"),w.setAttribute("fill-rule","nonzero"),w.classList.add("mask")}const p=Je._svgFactory.createElement("use");a.append(p),p.setAttribute("href",`#${h}`),f&&p.setAttribute("mask",`url(#${f})`);const m=p.cloneNode();return a.append(m),p.classList.add("mainOutline"),m.classList.add("secondaryOutline"),this.updateProperties(a,t),o(this,Xi).set(n,a),n}finalizeDraw(t,e){o(this,Qc).delete(t),this.updateProperties(t,e)}updateProperties(t,e){var f;if(!e)return;const{root:n,bbox:a,rootClass:l,path:c}=e,h=typeof t=="number"?o(this,Xi).get(t):t;if(h){if(n&&T(this,Ta,wS).call(this,h,n),a&&T(f=Je,J0,tM).call(f,h,a),l){const{classList:p}=h;for(const[m,y]of Object.entries(l))p.toggle(m,y)}if(c){const m=h.firstChild.firstChild;T(this,Ta,wS).call(this,m,c)}}}updateParent(t,e){if(e===this)return;const n=o(this,Xi).get(t);n&&(o(e,Us).append(n),o(this,Xi).delete(t),o(e,Xi).set(t,n))}remove(t){o(this,Qc).delete(t),o(this,Us)!==null&&(o(this,Xi).get(t).remove(),o(this,Xi).delete(t))}destroy(){x(this,Us,null);for(const t of o(this,Xi).values())t.remove();o(this,Xi).clear(),o(this,Qc).clear()}};Us=new WeakMap,Xi=new WeakMap,Qc=new WeakMap,Jg=new WeakMap,J0=new WeakSet,tM=function(t,[e,n,a,l]){const{style:c}=t;c.top=`${100*n}%`,c.left=`${100*e}%`,c.width=`${100*a}%`,c.height=`${100*l}%`},Ta=new WeakSet,SS=function(){const t=Je._svgFactory.create(1,1,!0);return o(this,Us).append(t),t.setAttribute("aria-hidden",!0),t},eM=function(t,e){const n=Je._svgFactory.createElement("clipPath");t.append(n);const a=`clip_${e}`;n.setAttribute("id",a),n.setAttribute("clipPathUnits","objectBoundingBox");const l=Je._svgFactory.createElement("use");return n.append(l),l.setAttribute("href",`#${e}`),l.classList.add("clip"),a},wS=function(t,e){for(const[n,a]of Object.entries(e))a===null?t.removeAttribute(n):t.setAttribute(n,a)},E(Je,J0),E(Je,Jg,0);let O0=Je;globalThis._pdfjsTestingUtils={HighlightOutliner:iS};globalThis.pdfjsLib={AbortException:Lr,AnnotationEditorLayer:k0,AnnotationEditorParamsType:Bt,AnnotationEditorType:At,AnnotationEditorUIManager:cl,AnnotationLayer:QS,AnnotationMode:wa,AnnotationType:Fe,applyOpacity:JC,build:iN,ColorPicker:yp,createValidAbsoluteUrl:BS,CSSConstants:ZC,DOMSVGFactory:vp,DrawLayer:O0,FeatureTest:fi,fetchData:Fd,findContrastColor:t2,getDocument:qS,getFilenameFromUrl:KC,getPdfFilenameFromUrl:QC,getRGB:Ud,getUuid:PS,getXfaPageViewport:WC,GlobalWorkerOptions:As,ImageKind:hp,InvalidPDFException:w0,isDataScheme:nm,isPdfFile:cy,isValidExplicitDest:k2,MathClamp:Pi,noContextMenu:Wn,normalizeUnicode:YC,OPS:zd,OutputScale:qs,PasswordResponses:qC,PDFDataRangeTransport:XS,PDFDateString:gp,PDFWorker:Pd,PermissionFlag:VC,PixelsPerInch:kr,RenderingCancelledException:ly,renderRichText:US,ResponseException:fp,setLayerDimensions:ll,shadow:Ct,SignatureExtractor:Ea,stopEvent:Me,SupportedImageMimeTypes:E0,TextLayer:bp,TouchManager:mp,updateUrlHash:zS,Util:ct,VerbosityLevel:tm,version:YS,XfaLayer:FS};const m3=Object.freeze(Object.defineProperty({__proto__:null,AbortException:Lr,AnnotationEditorLayer:k0,AnnotationEditorParamsType:Bt,AnnotationEditorType:At,AnnotationEditorUIManager:cl,AnnotationLayer:QS,AnnotationMode:wa,AnnotationType:Fe,CSSConstants:ZC,ColorPicker:yp,DOMSVGFactory:vp,DrawLayer:O0,FeatureTest:fi,GlobalWorkerOptions:As,ImageKind:hp,InvalidPDFException:w0,MathClamp:Pi,OPS:zd,OutputScale:qs,PDFDataRangeTransport:XS,PDFDateString:gp,PDFWorker:Pd,PasswordResponses:qC,PermissionFlag:VC,PixelsPerInch:kr,RenderingCancelledException:ly,ResponseException:fp,SignatureExtractor:Ea,SupportedImageMimeTypes:E0,TextLayer:bp,TouchManager:mp,Util:ct,VerbosityLevel:tm,XfaLayer:FS,applyOpacity:JC,build:iN,createValidAbsoluteUrl:BS,fetchData:Fd,findContrastColor:t2,getDocument:qS,getFilenameFromUrl:KC,getPdfFilenameFromUrl:QC,getRGB:Ud,getUuid:PS,getXfaPageViewport:WC,isDataScheme:nm,isPdfFile:cy,isValidExplicitDest:k2,noContextMenu:Wn,normalizeUnicode:YC,renderRichText:US,setLayerDimensions:ll,shadow:Ct,stopEvent:Me,updateUrlHash:zS,version:YS},Symbol.toStringTag,{value:"Module"}));function iM(d){var t,e,n="";if(typeof d=="string"||typeof d=="number")n+=d;else if(typeof d=="object")if(Array.isArray(d)){var a=d.length;for(t=0;t<a;t++)d[t]&&(e=iM(d[t]))&&(n&&(n+=" "),n+=e)}else for(e in d)d[e]&&(n&&(n+=" "),n+=e);return n}function dy(){for(var d,t,e=0,n="",a=arguments.length;e<a;e++)(d=arguments[e])&&(t=iM(d))&&(n&&(n+=" "),n+=t);return n}var tC=Object.prototype.hasOwnProperty;function eC(d,t,e){for(e of d.keys())if(oh(e,t))return e}function oh(d,t){var e,n,a;if(d===t)return!0;if(d&&t&&(e=d.constructor)===t.constructor){if(e===Date)return d.getTime()===t.getTime();if(e===RegExp)return d.toString()===t.toString();if(e===Array){if((n=d.length)===t.length)for(;n--&&oh(d[n],t[n]););return n===-1}if(e===Set){if(d.size!==t.size)return!1;for(n of d)if(a=n,a&&typeof a=="object"&&(a=eC(t,a),!a)||!t.has(a))return!1;return!0}if(e===Map){if(d.size!==t.size)return!1;for(n of d)if(a=n[0],a&&typeof a=="object"&&(a=eC(t,a),!a)||!oh(n[1],t.get(a)))return!1;return!0}if(e===ArrayBuffer)d=new Uint8Array(d),t=new Uint8Array(t);else if(e===DataView){if((n=d.byteLength)===t.byteLength)for(;n--&&d.getInt8(n)===t.getInt8(n););return n===-1}if(ArrayBuffer.isView(d)){if((n=d.byteLength)===t.byteLength)for(;n--&&d[n]===t[n];);return n===-1}if(!e||typeof d=="object"){n=0;for(e in d)if(tC.call(d,e)&&++n&&!tC.call(t,e)||!(e in t)||!oh(d[e],t[e]))return!1;return Object.keys(t).length===n}}return d!==d&&t!==t}function om(d){let t=!1;return{promise:new Promise((n,a)=>{d.then(l=>!t&&n(l)).catch(l=>!t&&a(l))}),cancel(){t=!0}}}const b3=["onCopy","onCut","onPaste"],y3=["onCompositionEnd","onCompositionStart","onCompositionUpdate"],v3=["onFocus","onBlur"],x3=["onInput","onInvalid","onReset","onSubmit"],A3=["onLoad","onError"],S3=["onKeyDown","onKeyPress","onKeyUp"],w3=["onAbort","onCanPlay","onCanPlayThrough","onDurationChange","onEmptied","onEncrypted","onEnded","onError","onLoadedData","onLoadedMetadata","onLoadStart","onPause","onPlay","onPlaying","onProgress","onRateChange","onSeeked","onSeeking","onStalled","onSuspend","onTimeUpdate","onVolumeChange","onWaiting"],E3=["onClick","onContextMenu","onDoubleClick","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp"],T3=["onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop"],_3=["onSelect"],C3=["onTouchCancel","onTouchEnd","onTouchMove","onTouchStart"],N3=["onPointerDown","onPointerMove","onPointerUp","onPointerCancel","onGotPointerCapture","onLostPointerCapture","onPointerEnter","onPointerLeave","onPointerOver","onPointerOut"],M3=["onScroll"],D3=["onWheel"],R3=["onAnimationStart","onAnimationEnd","onAnimationIteration"],L3=["onTransitionEnd"],k3=["onToggle"],O3=["onChange"],j3=[...b3,...y3,...v3,...x3,...A3,...S3,...w3,...E3,...T3,..._3,...C3,...N3,...M3,...D3,...R3,...L3,...O3,...k3];function nM(d,t){const e={};for(const n of j3){const a=d[n];a&&(t?e[n]=(l=>a(l,t(n))):e[n]=a)}return e}var B3="Invariant failed";function fe(d,t){if(!d)throw new Error(B3)}var Kx,iC;function z3(){if(iC)return Kx;iC=1;var d=function(){};return Kx=d,Kx}var P3=z3();const Ii=cL(P3),sM=$.createContext(null),I3="noopener noreferrer nofollow";class F3{constructor(){this.externalLinkEnabled=!0,this.externalLinkRel=void 0,this.externalLinkTarget=void 0,this.isInPresentationMode=!1,this.pdfDocument=void 0,this.pdfViewer=void 0}setDocument(t){this.pdfDocument=t}setViewer(t){this.pdfViewer=t}setExternalLinkRel(t){this.externalLinkRel=t}setExternalLinkTarget(t){this.externalLinkTarget=t}setHash(){}setHistory(){}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return fe(this.pdfViewer),this.pdfViewer.currentPageNumber||0}set page(t){fe(this.pdfViewer),this.pdfViewer.currentPageNumber=t}get rotation(){return 0}set rotation(t){}addLinkAttributes(t,e,n){t.href=e,t.rel=this.externalLinkRel||I3,t.target=n?"_blank":this.externalLinkTarget||""}goToDestination(t){return new Promise(e=>{fe(this.pdfDocument),fe(t),typeof t=="string"?this.pdfDocument.getDestination(t).then(e):Array.isArray(t)?e(t):t.then(e)}).then(e=>{fe(Array.isArray(e));const n=e[0];new Promise(a=>{fe(this.pdfDocument),n instanceof Object?this.pdfDocument.getPageIndex(n).then(l=>{a(l)}).catch(()=>{fe(!1)}):typeof n=="number"?a(n):fe(!1)}).then(a=>{const l=a+1;fe(this.pdfViewer),fe(l>=1&&l<=this.pagesCount),this.pdfViewer.scrollPageIntoView({dest:e,pageIndex:a,pageNumber:l})})})}goToPage(t){const e=t-1;fe(this.pdfViewer),fe(t>=1&&t<=this.pagesCount),this.pdfViewer.scrollPageIntoView({pageIndex:e,pageNumber:t})}goToXY(){}cachePageRef(){}getDestinationHash(){return"#"}getAnchorUrl(){return"#"}executeNamedAction(){}executeSetOCGState(){}isPageVisible(){return!0}isPageCached(){return!0}navigateTo(t){this.goToDestination(t)}}function lh({children:d,type:t}){return A.jsx("div",{className:`react-pdf__message react-pdf__message--${t}`,children:d})}const nC={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};function U3(d,t){switch(t.type){case"RESOLVE":return{value:t.value,error:void 0};case"REJECT":return{value:!1,error:t.error};case"RESET":return{value:void 0,error:void 0};default:return d}}function Id(){return $.useReducer(U3,{value:void 0,error:void 0})}const fy=typeof window<"u",aM=fy&&window.location.protocol==="file:";function H3(d){return typeof d<"u"}function Rl(d){return H3(d)&&d!==null}function G3(d){return typeof d=="string"}function V3(d){return d instanceof ArrayBuffer}function q3(d){return fe(fy),d instanceof Blob}function ES(d){return G3(d)&&/^data:/.test(d)}function sC(d){fe(ES(d));const[t="",e=""]=d.split(",");return t.split(";").indexOf("base64")!==-1?atob(e):unescape(e)}function X3(){return fy&&window.devicePixelRatio||1}const rM="On Chromium based browsers, you can use --allow-file-access-from-files flag for debugging purposes.";function aC(){Ii(!aM,`Loading PDF as base64 strings/URLs may not work on protocols other than HTTP/HTTPS. ${rM}`)}function Y3(){Ii(!aM,`Loading PDF.js worker may not work on protocols other than HTTP/HTTPS. ${rM}`)}function iu(d){d!=null&&d.cancel&&d.cancel()}function TS(d,t){return Object.defineProperty(d,"width",{get(){return this.getViewport({scale:t}).width},configurable:!0}),Object.defineProperty(d,"height",{get(){return this.getViewport({scale:t}).height},configurable:!0}),Object.defineProperty(d,"originalWidth",{get(){return this.getViewport({scale:1}).width},configurable:!0}),Object.defineProperty(d,"originalHeight",{get(){return this.getViewport({scale:1}).height},configurable:!0}),d}function oM(d){return d.name==="AbortException"||d.name==="RenderingCancelledException"}function $3(d){return new Promise((t,e)=>{const n=new FileReader;n.onload=()=>{if(!n.result)return e(new Error("Error while reading a file."));t(n.result)},n.onerror=a=>{if(!a.target)return e(new Error("Error while reading a file."));const{error:l}=a.target;if(!l)return e(new Error("Error while reading a file."));switch(l.code){case l.NOT_FOUND_ERR:return e(new Error("Error while reading a file: File not found."));case l.SECURITY_ERR:return e(new Error("Error while reading a file: Security error."));case l.ABORT_ERR:return e(new Error("Error while reading a file: Aborted."));default:return e(new Error("Error while reading a file."))}},n.readAsArrayBuffer(d)})}const{PDFDataRangeTransport:K3}=m3,Q3=(d,t)=>{switch(t){case nC.NEED_PASSWORD:{const e=prompt("Enter the password to open this PDF file.");d(e);break}case nC.INCORRECT_PASSWORD:{const e=prompt("Invalid password. Please try again.");d(e);break}}};function rC(d){return typeof d=="object"&&d!==null&&("data"in d||"range"in d||"url"in d)}const W3=$.forwardRef(function({children:t,className:e,error:n="Failed to load PDF file.",externalLinkRel:a,externalLinkTarget:l,file:c,inputRef:h,imageResourcesPath:f,loading:p="Loading PDF",noData:m="No PDF file specified.",onItemClick:y,onLoadError:v,onLoadProgress:w,onLoadSuccess:C,onPassword:_=Q3,onSourceError:M,onSourceSuccess:N,options:R,renderMode:L,rotate:k,scale:j,...z},I){const[K,J]=Id(),{value:W,error:tt}=K,[X,it]=Id(),{value:et,error:at}=X,P=$.useRef(new F3),V=$.useRef([]),st=$.useRef(void 0),ut=$.useRef(void 0);c&&c!==st.current&&rC(c)&&(Ii(!oh(c,st.current),`File prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "file" prop.`),st.current=c),R&&R!==ut.current&&(Ii(!oh(R,ut.current),`Options prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "options" prop.`),ut.current=R);const xt=$.useRef({scrollPageIntoView:ce=>{const{dest:Ft,pageNumber:ye,pageIndex:ni=ye-1}=ce;if(y){y({dest:Ft,pageIndex:ni,pageNumber:ye});return}const Ge=V.current[ni];if(Ge){Ge.scrollIntoView();return}Ii(!1,`An internal link leading to page ${ye} was clicked, but neither <Document> was provided with onItemClick nor it was able to find the page within itself. Either provide onItemClick to <Document> and handle navigating by yourself or ensure that all pages are rendered within <Document>.`)}});$.useImperativeHandle(I,()=>({linkService:P,pages:V,viewer:xt}),[]);function $t(){N&&N()}function mt(){tt&&(Ii(!1,tt.toString()),M&&M(tt))}function ht(){J({type:"RESET"})}$.useEffect(ht,[c,J]);const Rt=$.useCallback(async()=>{if(!c)return null;if(typeof c=="string")return ES(c)?{data:sC(c)}:(aC(),{url:c});if(c instanceof K3)return{range:c};if(V3(c))return{data:c};if(fy&&q3(c))return{data:await $3(c)};if(fe(typeof c=="object"),fe(rC(c)),"url"in c&&typeof c.url=="string"){if(ES(c.url)){const{url:ce,...Ft}=c;return{data:sC(ce),...Ft}}aC()}return c},[c]);$.useEffect(()=>{const ce=om(Rt());return ce.promise.then(Ft=>{J({type:"RESOLVE",value:Ft})}).catch(Ft=>{J({type:"REJECT",error:Ft})}),()=>{iu(ce)}},[Rt,J]),$.useEffect(()=>{if(!(typeof W>"u")){if(W===!1){mt();return}$t()}},[W]);function Qt(){et&&(C&&C(et),V.current=new Array(et.numPages),P.current.setDocument(et))}function Se(){at&&(Ii(!1,at.toString()),v&&v(at))}$.useEffect(function(){it({type:"RESET"})},[it,W]),$.useEffect(function(){if(!W)return;const Ft=R?{...W,...R}:W,ye=qS(Ft);w&&(ye.onProgress=w),_&&(ye.onPassword=_);const ni=ye;return ni.promise.then(Ge=>{ni.destroyed||it({type:"RESOLVE",value:Ge})}).catch(Ge=>{ni.destroyed||it({type:"REJECT",error:Ge})}),()=>{ni.destroy()}},[R,it,W]),$.useEffect(()=>{if(!(typeof et>"u")){if(et===!1){Se();return}Qt()}},[et]),$.useEffect(function(){P.current.setViewer(xt.current),P.current.setExternalLinkRel(a),P.current.setExternalLinkTarget(l)},[a,l]);const Ut=$.useCallback((ce,Ft)=>{V.current[ce]=Ft},[]),Wi=$.useCallback(ce=>{delete V.current[ce]},[]),Mi=$.useMemo(()=>({imageResourcesPath:f,linkService:P.current,onItemClick:y,pdf:et,registerPage:Ut,renderMode:L,rotate:k,scale:j,unregisterPage:Wi}),[f,y,et,Ut,L,k,j,Wi]),pi=$.useMemo(()=>nM(z,()=>et),[z,et]);function It(){function ce(ye){return!!(ye!=null&&ye.pdf)}if(!ce(Mi))throw new Error("pdf is undefined");const Ft=typeof t=="function"?t(Mi):t;return A.jsx(sM.Provider,{value:Mi,children:Ft})}function mn(){return c?et==null?A.jsx(lh,{type:"loading",children:typeof p=="function"?p():p}):et===!1?A.jsx(lh,{type:"error",children:typeof n=="function"?n():n}):It():A.jsx(lh,{type:"no-data",children:typeof m=="function"?m():m})}return A.jsx("div",{className:dy("react-pdf__Document",e),ref:h,...pi,children:mn()})});function lM(){return $.useContext(sM)}function cM(){for(var d=[],t=0;t<arguments.length;t++)d[t]=arguments[t];var e=d.filter(Boolean);if(e.length<=1){var n=e[0];return n||null}return function(l){for(var c=0,h=e;c<h.length;c++){var f=h[c];typeof f=="function"?f(l):f&&(f.current=l)}}}const uM=$.createContext(null);function py(){return $.useContext(uM)}function Z3(){const d=lM(),t=py();fe(t);const e={...d,...t},{filterAnnotations:n,imageResourcesPath:a,linkService:l,onGetAnnotationsError:c,onGetAnnotationsSuccess:h,onRenderAnnotationLayerError:f,onRenderAnnotationLayerSuccess:p,page:m,pdf:y,renderForms:v,rotate:w,scale:C=1}=e;fe(y),fe(m),fe(l);const[_,M]=Id(),{value:N,error:R}=_,L=$.useRef(null);Ii(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-annotation-layer"),10)===1,"AnnotationLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-annotations");function k(){N&&h&&h(N)}function j(){R&&(Ii(!1,R.toString()),c&&c(R))}$.useEffect(function(){M({type:"RESET"})},[M,m]),$.useEffect(function(){if(!m)return;const W=om(m.getAnnotations()),tt=W;return W.promise.then(X=>{M({type:"RESOLVE",value:X})}).catch(X=>{M({type:"REJECT",error:X})}),()=>{iu(tt)}},[M,m]),$.useEffect(()=>{if(N!==void 0){if(N===!1){j();return}k()}},[N]);function z(){p&&p()}function I(J){Ii(!1,`${J}`),f&&f(J)}const K=$.useMemo(()=>m.getViewport({scale:C,rotation:w}),[m,w,C]);return $.useEffect(function(){if(!y||!m||!l||!N)return;const{current:W}=L;if(!W)return;const tt=K.clone({dontFlip:!0}),X={accessibilityManager:null,annotationCanvasMap:null,annotationEditorUIManager:null,annotationStorage:y.annotationStorage,commentManager:null,div:W,l10n:null,linkService:l,page:m,structTreeLayer:null,viewport:tt},it={annotations:n?n({annotations:N}):N,annotationStorage:y.annotationStorage,div:W,imageResourcesPath:a,linkService:l,page:m,renderForms:v,viewport:tt};W.innerHTML="";try{new QS(X).render(it),z()}catch(et){I(et)}return()=>{}},[N,n,a,l,m,y,v,K]),A.jsx("div",{className:dy("react-pdf__Page__annotations","annotationLayer"),ref:L})}const hM={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},J3=/^H(\d+)$/;function tB(d){return d in hM}function gy(d){return"children"in d}function dM(d){return gy(d)?d.children.length===1&&0 in d.children&&"id"in d.children[0]:!1}function eB(d){const t={};if(gy(d)){const{role:e}=d,n=e.match(J3);if(n)t.role="heading",t["aria-level"]=Number(n[1]);else if(tB(e)){const a=hM[e];a&&(t.role=a)}}return t}function fM(d){const t={};if(gy(d)){if(d.alt!==void 0&&(t["aria-label"]=d.alt),d.lang!==void 0&&(t.lang=d.lang),dM(d)){const[e]=d.children;if(e){const n=fM(e);return{...t,...n}}}}else"id"in d&&(t["aria-owns"]=d.id);return t}function iB(d){return d?{...eB(d),...fM(d)}:null}function pM({className:d,node:t}){const e=$.useMemo(()=>iB(t),[t]),n=$.useMemo(()=>!gy(t)||dM(t)?null:t.children.map((a,l)=>A.jsx(pM,{node:a},l)),[t]);return A.jsx("span",{className:d,...e,children:n})}function nB(){const d=py();fe(d);const{onGetStructTreeError:t,onGetStructTreeSuccess:e}=d,[n,a]=Id(),{value:l,error:c}=n,{customTextRenderer:h,page:f}=d;function p(){l&&e&&e(l)}function m(){c&&(Ii(!1,c.toString()),t&&t(c))}return $.useEffect(function(){a({type:"RESET"})},[a,f]),$.useEffect(function(){if(h||!f)return;const v=om(f.getStructTree()),w=v;return v.promise.then(C=>{a({type:"RESOLVE",value:C})}).catch(C=>{a({type:"REJECT",error:C})}),()=>iu(w)},[h,f,a]),$.useEffect(()=>{if(l!==void 0){if(l===!1){m();return}p()}},[l]),l?A.jsx(pM,{className:"react-pdf__Page__structTree structTree",node:l}):null}const oC=wa;function sB(d){const t=py();fe(t);const e={...t,...d},{_className:n,canvasBackground:a,devicePixelRatio:l=X3(),onRenderError:c,onRenderSuccess:h,page:f,renderForms:p,renderTextLayer:m,rotate:y,scale:v}=e,{canvasRef:w}=d;fe(f);const C=$.useRef(null);function _(){f&&h&&h(TS(f,v))}function M(k){oM(k)||(Ii(!1,k.toString()),c&&c(k))}const N=$.useMemo(()=>f.getViewport({scale:v*l,rotation:y}),[l,f,y,v]),R=$.useMemo(()=>f.getViewport({scale:v,rotation:y}),[f,y,v]);$.useEffect(function(){if(!f)return;f.cleanup();const{current:j}=C;if(!j)return;j.width=N.width,j.height=N.height,j.style.width=`${Math.floor(R.width)}px`,j.style.height=`${Math.floor(R.height)}px`,j.style.visibility="hidden";const z={annotationMode:p?oC.ENABLE_FORMS:oC.ENABLE,canvas:j,canvasContext:j.getContext("2d",{alpha:!1}),viewport:N};a&&(z.background=a);const I=f.render(z),K=I;return I.promise.then(()=>{j.style.visibility="",_()}).catch(M),()=>iu(K)},[a,f,p,N,R]);const L=$.useCallback(()=>{const{current:k}=C;k&&(k.width=0,k.height=0)},[]);return $.useEffect(()=>L,[L]),A.jsx("canvas",{className:`${n}__canvas`,dir:"ltr",ref:cM(w,C),style:{display:"block",userSelect:"none"},children:m?A.jsx(nB,{}):null})}function aB(d){return"str"in d}function rB(){const d=py();fe(d);const{customTextRenderer:t,onGetTextError:e,onGetTextSuccess:n,onRenderTextLayerError:a,onRenderTextLayerSuccess:l,page:c,pageIndex:h,pageNumber:f,rotate:p,scale:m}=d;fe(c);const[y,v]=Id(),{value:w,error:C}=y,_=$.useRef(null);Ii(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-text-layer"),10)===1,"TextLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-text-layer");function M(){w&&n&&n(w)}function N(){C&&(Ii(!1,C.toString()),e&&e(C))}$.useEffect(function(){v({type:"RESET"})},[c,v]),$.useEffect(function(){if(!c)return;const K=om(c.getTextContent()),J=K;return K.promise.then(W=>{v({type:"RESOLVE",value:W})}).catch(W=>{v({type:"REJECT",error:W})}),()=>iu(J)},[c,v]),$.useEffect(()=>{if(w!==void 0){if(w===!1){N();return}M()}},[w]);const R=$.useCallback(()=>{l&&l()},[l]),L=$.useCallback(I=>{oM(I)||(Ii(!1,I.toString()),a&&a(I))},[a]);function k(){const I=_.current;I&&I.classList.add("selecting")}function j(){const I=_.current;I&&I.classList.remove("selecting")}const z=$.useMemo(()=>c.getViewport({scale:m,rotation:p}),[c,p,m]);return $.useLayoutEffect(function(){if(!c||!w)return;const{current:K}=_;if(!K)return;K.innerHTML="";const J=c.streamTextContent({includeMarkedContent:!0}),W={container:K,textContentSource:J,viewport:z},tt=new bp(W),X=tt;return tt.render().then(()=>{const it=document.createElement("div");it.className="endOfContent",K.append(it);const et=K.querySelectorAll('[role="presentation"]');if(t){let at=0;w.items.forEach((P,V)=>{if(!aB(P))return;const st=et[at];if(!st)return;const ut=t({pageIndex:h,pageNumber:f,itemIndex:V,...P});st.innerHTML=ut,at+=P.str&&P.hasEOL?2:1})}R()}).catch(L),()=>iu(X)},[t,L,R,c,h,f,w,z]),A.jsx("div",{className:dy("react-pdf__Page__textContent","textLayer"),onMouseUp:j,onMouseDown:k,ref:_})}const lC=1;function oB(d){const e={...lM(),...d},{_className:n="react-pdf__Page",_enableRegisterUnregisterPage:a=!0,canvasBackground:l,canvasRef:c,children:h,className:f,customRenderer:p,customTextRenderer:m,devicePixelRatio:y,error:v="Failed to load the page.",filterAnnotations:w,height:C,inputRef:_,loading:M="Loading page",noData:N="No page specified.",onGetAnnotationsError:R,onGetAnnotationsSuccess:L,onGetStructTreeError:k,onGetStructTreeSuccess:j,onGetTextError:z,onGetTextSuccess:I,onLoadError:K,onLoadSuccess:J,onRenderAnnotationLayerError:W,onRenderAnnotationLayerSuccess:tt,onRenderError:X,onRenderSuccess:it,onRenderTextLayerError:et,onRenderTextLayerSuccess:at,pageIndex:P,pageNumber:V,pdf:st,registerPage:ut,renderAnnotationLayer:xt=!0,renderForms:$t=!1,renderMode:mt="canvas",renderTextLayer:ht=!0,rotate:Rt,scale:Qt=lC,unregisterPage:Se,width:Ut,...Wi}=e,[Mi,pi]=Id(),{value:It,error:mn}=Mi,ce=$.useRef(null);fe(st);const Ft=Rl(V)?V-1:P??null,ye=V??(Rl(P)?P+1:null),ni=Rt??(It?It.rotate:null),Ge=$.useMemo(()=>{if(!It)return null;let bn=1;const Br=Qt??lC;if(Ut||C){const Es=It.getViewport({scale:1,rotation:ni});Ut?bn=Ut/Es.width:C&&(bn=C/Es.height)}return Br*bn},[C,It,ni,Qt,Ut]);$.useEffect(function(){return()=>{Rl(Ft)&&a&&Se&&Se(Ft)}},[a,st,Ft,Se]);function lm(){if(J){if(!It||!Ge)return;J(TS(It,Ge))}if(a&&ut){if(!Rl(Ft)||!ce.current)return;ut(Ft,ce.current)}}function Hd(){mn&&(Ii(!1,mn.toString()),K&&K(mn))}$.useEffect(function(){pi({type:"RESET"})},[pi,st,Ft]),$.useEffect(function(){if(!st||!ye)return;const Br=om(st.getPage(ye)),Es=Br;return Br.promise.then(Vd=>{pi({type:"RESOLVE",value:Vd})}).catch(Vd=>{pi({type:"REJECT",error:Vd})}),()=>iu(Es)},[pi,st,ye]),$.useEffect(()=>{if(It!==void 0){if(It===!1){Hd();return}lm()}},[It,Ge]);const dl=$.useMemo(()=>Rl(Ft)&&ye&&Rl(ni)&&Rl(Ge)?{_className:n,canvasBackground:l,customTextRenderer:m,devicePixelRatio:y,filterAnnotations:w,onGetAnnotationsError:R,onGetAnnotationsSuccess:L,onGetStructTreeError:k,onGetStructTreeSuccess:j,onGetTextError:z,onGetTextSuccess:I,onRenderAnnotationLayerError:W,onRenderAnnotationLayerSuccess:tt,onRenderError:X,onRenderSuccess:it,onRenderTextLayerError:et,onRenderTextLayerSuccess:at,page:It,pageIndex:Ft,pageNumber:ye,renderForms:$t,renderTextLayer:ht,rotate:ni,scale:Ge}:null,[n,l,m,y,w,R,L,k,j,z,I,W,tt,X,it,et,at,It,Ft,ye,$t,ht,ni,Ge]),Gd=$.useMemo(()=>nM(Wi,()=>It&&(Ge?TS(It,Ge):void 0)),[Wi,It,Ge]),ru=`${Ft}@${Ge}/${ni}`;function my(){switch(mt){case"custom":return fe(p),A.jsx(p,{},`${ru}_custom`);case"none":return null;case"canvas":default:return A.jsx(sB,{canvasRef:c},`${ru}_canvas`)}}function Fi(){return ht?A.jsx(rB,{},`${ru}_text`):null}function by(){return xt?A.jsx(Z3,{},`${ru}_annotations`):null}function cm(){function bn(Es){return!!(Es!=null&&Es.page)}if(!bn(dl))throw new Error("page is undefined");const Br=typeof h=="function"?h(dl):h;return A.jsxs(uM.Provider,{value:dl,children:[my(),Fi(),by(),Br]})}function um(){return ye?st===null||It===void 0||It===null?A.jsx(lh,{type:"loading",children:typeof M=="function"?M():M}):st===!1||It===!1?A.jsx(lh,{type:"error",children:typeof v=="function"?v():v}):cm():A.jsx(lh,{type:"no-data",children:typeof N=="function"?N():N})}return A.jsx("div",{className:dy(n,f),"data-page-number":ye,ref:cM(_,ce),style:{"--scale-round-x":"1px","--scale-round-y":"1px","--scale-factor":"1","--user-unit":`${Ge}`,"--total-scale-factor":"calc(var(--scale-factor) * var(--user-unit))",backgroundColor:l||"white",position:"relative",minWidth:"min-content",minHeight:"min-content"},...Gd,children:um()})}Y3();As.workerSrc="pdf.worker.mjs";As.workerSrc=`//cdnjs.cloudflare.com/ajax/libs/pdf.js/${YS}/pdf.worker.min.js`;const lB=({pdfUrl:d,onClose:t,bookTitle:e})=>{const[n,a]=$.useState(0),[l,c]=$.useState(1),[h,f]=$.useState(1),[p,m]=$.useState(!0),[y,v]=$.useState(null),w=({numPages:L})=>{a(L),m(!1),v(null)},C=L=>{console.error("Error loading PDF:",L),v("No se pudo cargar el PDF. Por favor, intenta de nuevo."),m(!1)},_=()=>{c(L=>Math.max(L-1,1))},M=()=>{c(L=>Math.min(L+1,n))},N=()=>{f(L=>Math.min(L+.2,3))},R=()=>{f(L=>Math.max(L-.2,.5))};return A.jsxs("div",{className:"fixed inset-0 z-[300] flex flex-col bg-app",children:[A.jsx("div",{className:"fixed top-0 left-0 right-0 z-10 bg-surface border-b border-app",children:A.jsxs("div",{className:"max-w-5xl mx-auto px-4 py-4 flex items-center justify-between",children:[A.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[A.jsx("div",{className:"p-2 bg-indigo-500/10 rounded-xl text-indigo-500",children:A.jsx(Wx,{size:20})}),A.jsxs("div",{className:"flex-1 min-w-0",children:[A.jsx("h2",{className:"text-sm font-black text-primary truncate tracking-tight",children:e||"Presentacin PDF"}),!p&&!y&&A.jsxs("p",{className:"text-[10px] text-muted font-medium",children:["Pgina ",l," de ",n]})]})]}),A.jsx("button",{onClick:t,className:"p-2 rounded-xl hover:bg-white/5 active:scale-90 transition-all text-muted",children:A.jsx(Zc,{size:20})})]})}),A.jsx("div",{className:"flex-1 overflow-auto pt-[72px] pb-[80px] flex items-center justify-center",children:A.jsxs("div",{className:"w-full max-w-4xl px-4 py-8",children:[p&&A.jsxs("div",{className:"flex flex-col items-center justify-center py-32",children:[A.jsx("div",{className:"w-16 h-16 border-4 border-indigo-500/20 border-t-indigo-500 rounded-full animate-spin mb-4"}),A.jsx("p",{className:"text-sm font-bold text-muted",children:"Cargando PDF..."})]}),y&&A.jsxs("div",{className:"flex flex-col items-center justify-center py-32 px-8 text-center",children:[A.jsx("div",{className:"w-16 h-16 bg-red-500/10 rounded-2xl flex items-center justify-center text-red-500 mb-4",children:A.jsx(Wx,{size:32})}),A.jsx("h3",{className:"text-lg font-black text-primary mb-2",children:"Error al cargar PDF"}),A.jsx("p",{className:"text-sm text-muted mb-6",children:y}),A.jsx("button",{onClick:t,className:"px-6 py-3 bg-surface border border-app rounded-2xl font-black text-[10px] uppercase tracking-widest text-primary",children:"Cerrar"})]}),!y&&A.jsx("div",{className:"flex justify-center",children:A.jsx(W3,{file:d,onLoadSuccess:w,onLoadError:C,loading:"",error:"",children:A.jsx(oB,{pageNumber:l,scale:h,renderTextLayer:!0,renderAnnotationLayer:!0,className:"shadow-2xl border border-app rounded-lg overflow-hidden"})})})]})}),!p&&!y&&A.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-surface border-t border-app",children:A.jsxs("div",{className:"max-w-5xl mx-auto px-4 py-4 flex items-center justify-between gap-4",children:[A.jsxs("div",{className:"flex items-center gap-2",children:[A.jsx("button",{onClick:_,disabled:l<=1,className:"p-2.5 rounded-xl bg-app border border-app text-primary disabled:opacity-30 disabled:cursor-not-allowed hover:bg-indigo-500/10 active:scale-90 transition-all",children:A.jsx(nL,{size:18})}),A.jsx("div",{className:"px-4 py-2 bg-app border border-app rounded-xl",children:A.jsxs("span",{className:"text-xs font-black text-primary",children:[l," / ",n]})}),A.jsx("button",{onClick:M,disabled:l>=n,className:"p-2.5 rounded-xl bg-app border border-app text-primary disabled:opacity-30 disabled:cursor-not-allowed hover:bg-indigo-500/10 active:scale-90 transition-all",children:A.jsx(vC,{size:18})})]}),A.jsxs("div",{className:"flex items-center gap-2",children:[A.jsx("button",{onClick:R,disabled:h<=.5,className:"p-2.5 rounded-xl bg-app border border-app text-primary disabled:opacity-30 disabled:cursor-not-allowed hover:bg-indigo-500/10 active:scale-90 transition-all",children:A.jsx(sL,{size:18})}),A.jsx("div",{className:"px-4 py-2 bg-app border border-app rounded-xl min-w-[80px] text-center",children:A.jsxs("span",{className:"text-xs font-black text-primary",children:[Math.round(h*100),"%"]})}),A.jsx("button",{onClick:N,disabled:h>=3,className:"p-2.5 rounded-xl bg-app border border-app text-primary disabled:opacity-30 disabled:cursor-not-allowed hover:bg-indigo-500/10 active:scale-90 transition-all",children:A.jsx(aL,{size:18})})]})]})})]})},cB=({episode:d,currentEpisode:t,onPlay:e,favorites:n,onToggleFavorite:a})=>{const[l,c]=m0.useState(1),[h,f]=m0.useState(!1),m=(_=>{const M=/(https?:\/\/[^\s]+\.pdf)/gi,N=_.match(M);return N?N[0]:null})(d.description);$.useEffect(()=>{window.scrollTo(0,0);let _=null;(async()=>{_=await uO(d)})();const N=hO(d.guid,c);return()=>{_&&_(),N()}},[d]);const y=(t==null?void 0:t.guid)===d.guid,v=n.has(d.guid),w=()=>{const _="https://play.google.com/store/apps/details?id=app.teovoz.com",M=d.description.replace(/\*\*/g,""),N=M.length>180?M.substring(0,180)+"...":M,R=` TEOVOZ: ${d.title}

 ${N}

 Escucha el resumen completo en la App original:
${_}`;window.open(`https://api.whatsapp.com/send?text=${encodeURIComponent(R)}`,"_blank")},C=_=>_.split("**").map((M,N)=>N%2===1?A.jsx("strong",{className:"text-indigo-400 font-bold",children:M},N):M);return A.jsxs("div",{className:"pb-32",children:[A.jsxs("div",{className:"relative w-full h-[400px] sm:h-[480px] overflow-hidden mb-8",children:[A.jsx("img",{src:d.image,className:"w-full h-full object-fill",alt:d.title}),A.jsx("div",{className:"absolute inset-0 z-20 bg-gradient-to-t from-app via-transparent to-transparent opacity-90"}),A.jsx("div",{className:"absolute inset-0 z-20 bg-gradient-to-b from-black/30 via-transparent to-transparent"}),A.jsx("div",{className:"absolute inset-0 z-30 flex items-center justify-center",children:A.jsx("button",{onClick:()=>e(d),className:`w-28 h-28 rounded-full border border-white/20 flex items-center justify-center text-white shadow-[0_0_60px_rgba(0,0,0,0.5)] transition-all ${y?"bg-indigo-600 ring-4 ring-indigo-600/20":"bg-white/90"}`,children:A.jsx(jd,{size:44,fill:"currentColor",className:"ml-1.5 drop-shadow-[0_4px_12px_rgba(0,0,0,0.5)]"})})})]}),A.jsxs("div",{className:"px-6 flex flex-col items-center",children:[A.jsxs("div",{className:"flex items-center gap-3 mb-10 relative z-30",children:[A.jsxs("button",{onClick:()=>{a(d),v||fO(d)},className:`flex items-center gap-2 px-6 py-4 rounded-2xl font-black text-[10px] uppercase tracking-widest transition-all shadow-xl ${v?"bg-red-500 text-white shadow-red-500/20":"bg-surface border border-app text-primary shadow-black/20"}`,children:[A.jsx(nu,{size:16,fill:v?"currentColor":"none"}),v?"Guardado":"Favorito"]}),A.jsxs("button",{onClick:w,className:"flex items-center gap-2 px-6 py-4 rounded-2xl bg-indigo-600 text-white font-black text-[10px] uppercase tracking-widest shadow-xl shadow-indigo-600/30",children:[A.jsx(hC,{size:16}),"Compartir"]}),m&&A.jsxs("button",{onClick:()=>f(!0),className:"flex items-center gap-2 px-6 py-4 rounded-2xl bg-emerald-600 text-white font-black text-[10px] uppercase tracking-widest shadow-xl shadow-emerald-600/30",children:[A.jsx(Wx,{size:16}),"Presentacin"]})]}),A.jsxs("div",{className:"w-full max-w-2xl text-center relative z-20",children:[A.jsx("h2",{className:"text-4xl font-black text-primary mb-4 leading-tight tracking-tighter drop-shadow-sm",children:d.title}),l>1&&A.jsxs("div",{className:"flex items-center justify-center gap-2 mb-6 animate-in fade-in duration-300",children:[A.jsx("div",{className:"w-2 h-2 bg-emerald-500 rounded-full animate-pulse"}),A.jsxs("span",{className:"text-sm font-bold text-emerald-500",children:[l," personas escuchando ahora"]})]}),A.jsx("div",{className:"text-left bg-surface p-8 rounded-[40px] border border-app text-muted text-base leading-relaxed whitespace-pre-line font-medium shadow-inner",children:C(d.description)})]})]}),h&&m&&A.jsx(lB,{pdfUrl:m,bookTitle:d.title,onClose:()=>f(!1)})]})},uB=()=>A.jsxs("div",{className:"animate-in fade-in slide-in-from-bottom-4 duration-500 px-6 pb-20 py-6 max-w-2xl mx-auto",children:[A.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[A.jsx("button",{onClick:()=>window.history.back(),className:"w-10 h-10 bg-surface rounded-full flex items-center justify-center border border-app text-primary hover:bg-surface-hover transition-colors",children:A.jsx(yC,{size:20})}),A.jsx("h1",{className:"text-2xl font-black text-primary tracking-tight",children:"Poltica de Privacidad"})]}),A.jsxs("div",{className:"bg-surface rounded-[32px] border border-app p-8 shadow-xl space-y-8",children:[A.jsxs("div",{className:"space-y-2",children:[A.jsxs("div",{className:"flex items-center gap-2 text-indigo-500 mb-2",children:[A.jsx(rL,{size:20}),A.jsx("span",{className:"font-black uppercase text-[10px] tracking-widest",children:"Proteccin de Datos"})]}),A.jsx("p",{className:"text-muted text-xs font-bold uppercase tracking-wider",children:"ltima actualizacin: 25 de diciembre de 2025"})]}),A.jsxs("section",{className:"space-y-4",children:[A.jsx("h2",{className:"text-lg font-bold text-primary",children:"1. Introduccin"}),A.jsx("p",{className:"text-muted text-sm leading-relaxed",children:"Bienvenido a TeoVoz. En MigoCreativo, nos comprometemos a proteger su privacidad. Esta Poltica de Privacidad explica cmo recopilamos, usamos, divulgamos y salvaguardamos su informacin cuando visita nuestra aplicacin mvil TeoVoz."}),A.jsx("p",{className:"text-muted text-sm leading-relaxed italic",children:"Por favor, lea esta poltica de privacidad cuidadosamente. Si no est de acuerdo con los trminos de esta poltica de privacidad, no acceda a la aplicacin."})]}),A.jsxs("section",{className:"space-y-4",children:[A.jsx("h2",{className:"text-lg font-bold text-primary",children:"2. Recopilacin de su Informacin"}),A.jsx("p",{className:"text-muted text-sm leading-relaxed",children:"Podemos recopilar informacin sobre usted de varias maneras. La informacin que podemos recopilar a travs de la Aplicacin depende del contenido y los materiales que utilice, e incluye:"}),A.jsxs("div",{className:"space-y-4 mt-4",children:[A.jsxs("div",{className:"bg-app/50 p-4 rounded-2xl border border-app",children:[A.jsx("h3",{className:"text-primary font-bold text-sm mb-2",children:"A. Datos Personales"}),A.jsx("p",{className:"text-muted text-xs leading-relaxed",children:'Informacin de identificacin personal, como su nombre, direccin de correo electrnico y contrasea, que nos proporciona voluntariamente cuando se registra en la Aplicacin para crear una cuenta. Esta informacin es necesaria para guardar su progreso de lectura, sus listas de favoritos ("Mi Biblioteca") y sus preferencias personales.'})]}),A.jsxs("div",{className:"bg-app/50 p-4 rounded-2xl border border-app",children:[A.jsx("h3",{className:"text-primary font-bold text-sm mb-2",children:"B. Datos Derivados"}),A.jsx("p",{className:"text-muted text-xs leading-relaxed",children:"La informacin que nuestros servidores recopilan automticamente cuando accede a la Aplicacin, como su tipo de dispositivo, su sistema operativo, su direccin IP y tiempos de acceso."})]}),A.jsxs("div",{className:"bg-app/50 p-4 rounded-2xl border border-app",children:[A.jsx("h3",{className:"text-primary font-bold text-sm mb-2",children:"C. Datos de la Aplicacin Mvil"}),A.jsxs("p",{className:"text-muted text-xs leading-relaxed",children:["Informacin sobre el uso de la aplicacin, incluyendo:",A.jsxs("ul",{className:"list-disc ml-4 mt-2 space-y-1",children:[A.jsx("li",{children:"Historial de Reproduccin: Qu libros ha escuchado y su progreso."}),A.jsx("li",{children:'Interacciones: Libros guardados, valoraciones y "Retos TeoVoz" completados.'})]})]})]})]})]}),A.jsxs("section",{className:"space-y-4",children:[A.jsx("h2",{className:"text-lg font-bold text-primary",children:"3. Uso de su Informacin"}),A.jsx("p",{className:"text-muted text-sm leading-relaxed",children:"Tener informacin precisa sobre usted nos permite ofrecerle una experiencia fluida, eficiente y personalizada. Especficamente, podemos utilizar la informacin recopilada sobre usted a travs de la Aplicacin para:"}),A.jsxs("ul",{className:"list-disc ml-6 text-muted text-sm space-y-2",children:[A.jsx("li",{children:"Crear y administrar su cuenta."}),A.jsx("li",{children:"Personalizar su experiencia y recomendar libros basados en sus intereses (ej. Productividad, Espiritualidad)."}),A.jsx("li",{children:"Enviarle notificaciones sobre actualizaciones de la aplicacin o nuevos resmenes aadidos."}),A.jsx("li",{children:"Monitorizar y analizar el uso y las tendencias para mejorar su experiencia con la Aplicacin."}),A.jsx("li",{children:"Prevenir transacciones fraudulentas y monitorear contra el robo y proteger contra actividades delictivas."})]})]}),A.jsxs("section",{className:"space-y-4",children:[A.jsx("h2",{className:"text-lg font-bold text-primary",children:"4. Divulgacin de su Informacin"}),A.jsxs("div",{className:"space-y-4",children:[A.jsx("p",{className:"text-muted text-sm leading-relaxed",children:"Podemos compartir informacin que hemos recopilado sobre usted en ciertas situaciones:"}),A.jsxs("div",{className:"grid gap-3",children:[A.jsxs("div",{className:"border border-app p-4 rounded-2xl",children:[A.jsx("p",{className:"text-primary font-bold text-xs mb-1",children:"Por Ley o para Proteger Derechos"}),A.jsx("p",{className:"text-muted text-xs",children:"Si creemos que la divulgacin es necesaria para responder a un proceso legal o para investigar violaciones de nuestras polticas."})]}),A.jsxs("div",{className:"border border-app p-4 rounded-2xl",children:[A.jsx("p",{className:"text-primary font-bold text-xs mb-1",children:"Proveedores de Servicios Externos"}),A.jsx("p",{className:"text-muted text-xs",children:"Podemos compartir su informacin con terceros que realizan servicios como anlisis de datos (Google Analytics/Firebase) y alojamiento."})]})]})]})]}),A.jsxs("section",{className:"space-y-4",children:[A.jsx("h2",{className:"text-lg font-bold text-primary",children:"5. Seguridad de su Informacin"}),A.jsx("p",{className:"text-muted text-sm leading-relaxed",children:"Utilizamos medidas de seguridad administrativas, tcnicas y fsicas para ayudar a proteger su informacin personal. Aunque hemos tomado medidas razonables, ninguna medida de seguridad es impenetrable y ninguna transmisin de datos puede garantizarse contra intercepcin."})]}),A.jsxs("section",{className:"space-y-4",children:[A.jsx("h2",{className:"text-lg font-bold text-primary",children:"6. Poltica para Nios"}),A.jsx("p",{className:"text-muted text-sm leading-relaxed",children:"No solicitamos informacin a menores de 13 aos a sabiendas ni comercializamos con ellos. Si tiene conocimiento de que hemos recopilado datos de un menor de 13 aos, pngase en contacto con nosotros."})]}),A.jsxs("section",{className:"space-y-4",children:[A.jsx("h2",{className:"text-lg font-bold text-primary",children:"7. Opciones sobre su Informacin"}),A.jsx("p",{className:"text-muted text-sm leading-relaxed font-bold",children:"Informacin de la Cuenta"}),A.jsx("p",{className:"text-muted text-sm leading-relaxed",children:"En cualquier momento puede revisar o cambiar la informacin en su cuenta o cancelar su cuenta contactndonos usando la informacin de contacto proporcionada."})]}),A.jsxs("section",{className:"space-y-4 border-t border-app pt-8",children:[A.jsx("h2",{className:"text-lg font-bold text-primary",children:"8. Contacto"}),A.jsxs("div",{className:"bg-indigo-500/5 border border-indigo-500/20 p-6 rounded-3xl",children:[A.jsx("p",{className:"text-indigo-500 font-black text-sm mb-1",children:"MigoCreativo"}),A.jsx("p",{className:"text-muted text-sm",children:"Desarrollador"}),A.jsx("a",{href:"mailto:Migocreativo.com@gmail.com",className:"text-primary font-bold text-sm block mt-4 hover:text-indigo-500 transition-colors",children:"Migocreativo.com@gmail.com"})]})]})]}),A.jsx("div",{className:"text-center pt-10",children:A.jsx("p",{className:"text-[10px] text-muted font-black uppercase tracking-[0.2em]",children:" 2025 TeoVoz por MigoCreativo"})})]}),hB=()=>{const[d,t]=$.useState(window.location.pathname),[e,n]=$.useState(null),[a,l]=$.useState(()=>JSON.parse(localStorage.getItem("teovoz_last_played")||"null")),[c,h]=$.useState(new URLSearchParams(window.location.search)),[f,p]=$.useState(()=>new Set(JSON.parse(localStorage.getItem("teovoz_viewed_notif")||"[]"))),[m,y]=$.useState(()=>new Set(JSON.parse(localStorage.getItem("teovoz_dismissed_notif")||"[]"))),[v,w]=$.useState(()=>new Set(JSON.parse(localStorage.getItem("teovoz_listened")||"[]"))),[C,_]=$.useState(()=>new Set(JSON.parse(localStorage.getItem("teovoz_history_started")||"[]"))),[M,N]=$.useState(()=>JSON.parse(localStorage.getItem("teovoz_favorites")||"[]")),[R,L]=$.useState(0),k=new Set(M.map(X=>X.guid)),j=X=>{const it=k.has(X.guid);let et;it?et=M.filter(at=>at.guid!==X.guid):et=[...M,X],N(et),localStorage.setItem("teovoz_favorites",JSON.stringify(et))};$.useEffect(()=>{const X=async()=>{const et=ol.filter(at=>at.rss);if(et.length!==0)try{const at=new Set;(await Promise.all(et.map(ut=>rl(ut.rss).catch(()=>null)))).forEach(ut=>{ut&&ut.episodes.slice(0,10).forEach(xt=>at.add(xt.guid))});const V=Array.from(at).filter(ut=>!f.has(ut)&&!m.has(ut)).length,st=window.location.pathname.endsWith("notifications.html");L(st?0:V)}catch(at){console.error("Error checking notifications:",at)}};X();const it=setInterval(X,1200*1e3);return()=>clearInterval(it)},[f]),$.useEffect(()=>{localStorage.setItem("teovoz_viewed_notif",JSON.stringify(Array.from(f))),localStorage.setItem("teovoz_dismissed_notif",JSON.stringify(Array.from(m)))},[f,m]),$.useEffect(()=>{localStorage.setItem("teovoz_history_started",JSON.stringify(Array.from(C)))},[C]),$.useEffect(()=>{e&&(l(e),localStorage.setItem("teovoz_last_played",JSON.stringify(e)))},[e]),$.useEffect(()=>{const X=()=>{t(window.location.pathname),h(new URLSearchParams(window.location.search))};return window.addEventListener("popstate",X),()=>window.removeEventListener("popstate",X)},[]);const z=X=>{window.history.pushState({},"",X),t(window.location.pathname),h(new URLSearchParams(window.location.search))},I=(X,it)=>{localStorage.setItem("teovoz_viewing_episode",JSON.stringify(X));const et=it||X.categoryId,at=window.location.pathname.replace("/","").replace(".html","");if(et&&et!==at&&Jx[et]){window.location.href=Jx[et];return}const P=`episode.html?guid=${encodeURIComponent(X.guid)}${it?`&cat=${it}`:""}`;z(P)},K=X=>{if(!v.has(X)){const it=new Set(v).add(X);w(it),localStorage.setItem("teovoz_listened",JSON.stringify(Array.from(it)))}if(C.has(X)){const it=new Set(C);it.delete(X),_(it)}},J=X=>{if(!v.has(X)&&!C.has(X)){const it=new Set(C).add(X);_(it)}},W=()=>{const X=d.split("/").pop()||"index.html";if(X==="episode.html"||c.get("guid")){const at=c.get("guid"),P=c.get("cat");return A.jsx(dB,{guid:at,catId:P,setCurrentEpisode:n,currentEpisode:e,favorites:k,onToggleFavorite:j})}if(X==="index.html"||X==="")return A.jsx(TO,{onCategorySelect:at=>z(`${at.id}.html`),onEpisodeSelect:at=>I(at),listenedCount:v.size,listenedGuids:v,historyGuids:C,lastPlayed:a});if(X==="search.html")return A.jsx(CO,{onEpisodeSelect:at=>I(at),favorites:k,listened:v});if(X==="favorites.html")return A.jsx(NO,{episodes:M,onEpisodeSelect:at=>I(at),favorites:k,listened:v});if(X==="privacy.html")return A.jsx(uB,{});if(X==="notifications.html")return A.jsx(MO,{onEpisodeSelect:at=>I(at),viewedGuids:f,setViewedGuids:p,listened:v,dismissedGuids:m,setDismissedGuids:y});const it=X.replace(".html",""),et=ol.find(at=>at.id===it);return et?A.jsx(DO,{category:et,onEpisodeSelect:at=>I(at,it),favorites:k,listened:v}):A.jsx("div",{className:"p-20 text-center",children:"Pgina no encontrada"})},tt=()=>{const X=d.split("/").pop()||"index.html";return X==="search.html"?"search":X==="favorites.html"?"favorites":X==="notifications.html"?"notifications":"home"};return A.jsx(mO,{activeTab:tt(),currentEpisode:e,onEpisodeChange:n,notifCount:R,onEpisodeComplete:K,onEpisodeStart:J,onEpisodeClick:X=>I(X),children:A.jsx($.Suspense,{fallback:A.jsx("div",{className:"p-6",children:A.jsx($n,{className:"h-40 rounded-3xl"})}),children:W()})})},dB=({guid:d,catId:t,setCurrentEpisode:e,currentEpisode:n,favorites:a,onToggleFavorite:l})=>{const[c,h]=$.useState(null),[f,p]=$.useState(!0),[m,y]=$.useState(null);return $.useEffect(()=>{(async()=>{if(!d){y("Episodio no vlido"),p(!1);return}const w=localStorage.getItem("teovoz_viewing_episode");if(w){const _=JSON.parse(w);if(_.guid===d){h(_),p(!1);return}}if(!t){y("Falta categora"),p(!1);return}const C=ol.find(_=>_.id===t);if(!(C!=null&&C.rss)){y("No hay contenido"),p(!1);return}try{const M=(await rl(C.rss)).episodes.find(N=>N.guid===d);M?h(M):y("No encontrado")}catch{y("Error de carga")}finally{p(!1)}})()},[d,t]),f?A.jsxs("div",{className:"p-6 space-y-6",children:[A.jsx($n,{className:"h-64 rounded-[40px]"}),A.jsx($n,{className:"h-10 w-3/4"})]}):m?A.jsx("div",{className:"text-center py-20",children:m}):c?A.jsx(cB,{episode:c,currentEpisode:n,onPlay:e,favorites:a,onToggleFavorite:l}):null};NL.createRoot(document.getElementById("root")).render(A.jsx(m0.StrictMode,{children:A.jsx(hB,{})}));
