import{r as i,j as e,e as S,E as y,b as E,R as N,d as v,a as w}from"./Skeleton-D6L119bm.js";import{E as k}from"./EpisodeList-Nt5RJi41.js";import{C as T,f as z}from"./rss-BJXZhmeK.js";import{S as M}from"./sparkles-CSxFG1-u.js";const f=n=>(n||"").normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase().trim(),b=(n,c)=>{const a=f(n),t=f(c);if(a.includes(t))return!0;if(t.length<4)return!1;let p=0,s=0;for(let l=0;l<t.length&&s<a.length;l++)t[l]!==a[s]&&(p++,t[l]===a[s+1]&&s++),s++;const m=t.length>6?2:1;return p<=m},L=({onEpisodeSelect:n,favorites:c,listened:a})=>{const[t,p]=i.useState(""),[s,m]=i.useState([]),[l,g]=i.useState(!1);i.useEffect(()=>{(async()=>{g(!0);try{const d=T.filter(o=>o.rss),j=(await Promise.all(d.map(o=>z(o.rss)))).flatMap(o=>o.episodes.map(u=>({...u,contentSnippet:`${u.contentSnippet||""}|||${o.title}`})));m(j.sort((o,u)=>new Date(u.pubDate).getTime()-new Date(o.pubDate).getTime()))}catch(d){console.error(d)}finally{g(!1)}})()},[]);const x=i.useMemo(()=>!t||t.length<2?s.slice(0,15):s.filter(r=>{const d=b(r.title,t),h=r.description&&b(r.description.substring(0,200),t);return d||h}).slice(0,50),[t,s]);return e.jsxs("div",{className:"animate-in fade-in duration-300 px-6",children:[e.jsx("div",{className:"sticky top-0 bg-app z-30 py-4 mb-6",children:e.jsxs("div",{className:"relative group",children:[e.jsx(S,{className:`absolute left-4 top-1/2 -translate-y-1/2 transition-colors ${t?"text-indigo-500":"text-muted"}`,size:20}),e.jsx("input",{type:"text",placeholder:"Libros, autores o temas...",value:t,onChange:r=>p(r.target.value),className:"w-full bg-surface border-app border rounded-2xl py-4 pl-12 pr-4 text-primary focus:outline-none focus:border-indigo-500 transition-all shadow-lg shadow-black/10 text-base"}),t&&e.jsx("div",{className:"absolute right-4 top-1/2 -translate-y-1/2 flex items-center gap-2",children:e.jsx("span",{className:"text-[8px] font-black text-indigo-500 uppercase tracking-widest bg-indigo-500/10 px-2 py-1 rounded-md animate-pulse",children:"BÃºsqueda Inteligente"})})]})}),l&&s.length===0?e.jsx("div",{className:"space-y-4",children:[1,2,3,4,5,6].map(r=>e.jsx(y,{},r))}):e.jsxs("div",{className:"relative",children:[t&&x.length>0&&e.jsxs("div",{className:"flex items-center gap-2 mb-4 px-2",children:[e.jsx(M,{size:12,className:"text-indigo-500"}),e.jsxs("p",{className:"text-[10px] font-black text-muted uppercase tracking-widest",children:["Resultados encontrados (",x.length,")"]})]}),e.jsx(k,{episodes:x,onPlay:n,favorites:c,listened:a,showPodcastTitle:!0,emptyMessage:t?`No encontramos nada parecido a "${t}". Prueba con otra palabra.`:"Cargando biblioteca..."})]})]})},P=()=>{const n=new Set(JSON.parse(localStorage.getItem("teovoz_favorites")||"[]").map(a=>a.guid)),c=new Set(JSON.parse(localStorage.getItem("teovoz_listened")||"[]"));return e.jsx(v,{activeTab:"search",children:e.jsx(i.Suspense,{fallback:e.jsx("div",{className:"p-6",children:e.jsx(w,{className:"h-40 rounded-3xl"})}),children:e.jsx(L,{onEpisodeSelect:()=>{},favorites:n,listened:c})})})};E.createRoot(document.getElementById("root")).render(e.jsx(N.StrictMode,{children:e.jsx(P,{})}));
